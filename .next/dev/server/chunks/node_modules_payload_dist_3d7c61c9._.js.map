{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/defaultUser.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\n\nexport const defaultUserCollection: CollectionConfig = {\n  slug: 'users',\n  admin: {\n    useAsTitle: 'email',\n  },\n  auth: {\n    tokenExpiration: 7200,\n  },\n  fields: [],\n  labels: {\n    plural: ({ t }) => t('general:users'),\n    singular: ({ t }) => t('general:user'),\n  },\n}\n"],"names":["defaultUserCollection","slug","admin","useAsTitle","auth","tokenExpiration","fields","labels","plural","t","singular"],"mappings":";;;;AAEO,MAAMA,wBAA0C;IACrDC,MAAM;IACNC,OAAO;QACLC,YAAY;IACd;IACAC,MAAM;QACJC,iBAAiB;IACnB;IACAC,QAAQ,EAAE;IACVC,QAAQ;QACNC,QAAQ,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;QACrBC,UAAU,CAAC,EAAED,CAAC,EAAE,GAAKA,EAAE;IACzB;AACF,EAAC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/isEligibleRequest.ts"],"sourcesContent":["// eslint-disable-next-line regexp/no-super-linear-backtracking, regexp/no-obscure-range\nconst ACCEPTABLE_CONTENT_TYPE = /multipart\\/['\"()+-_]+(?:; ?['\"()+-_]*)+$/i\nconst UNACCEPTABLE_METHODS = new Set(['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'TRACE'])\n\nconst hasBody = (req: Request): boolean => {\n  return Boolean(\n    req.headers.get('transfer-encoding') ||\n      (req.headers.get('content-length') && req.headers.get('content-length') !== '0'),\n  )\n}\n\nconst hasAcceptableMethod = (req: Request): boolean => !UNACCEPTABLE_METHODS.has(req.method)\n\nconst hasAcceptableContentType = (req: Request): boolean => {\n  const contType = req.headers.get('content-type')\n  return contType!.includes('boundary=') && ACCEPTABLE_CONTENT_TYPE.test(contType!)\n}\n\nexport const isEligibleRequest = (req: Request): boolean => {\n  try {\n    return hasBody(req) && hasAcceptableMethod(req) && hasAcceptableContentType(req)\n  } catch (ignore) {\n    return false\n  }\n}\n"],"names":["ACCEPTABLE_CONTENT_TYPE","UNACCEPTABLE_METHODS","Set","hasBody","req","Boolean","headers","get","hasAcceptableMethod","has","method","hasAcceptableContentType","contType","includes","test","isEligibleRequest","ignore"],"mappings":";;;;AAAA,wFAAwF;AACxF,MAAMA,0BAA0B;AAChC,MAAMC,uBAAuB,IAAIC,IAAI;IAAC;IAAW;IAAU;IAAO;IAAQ;IAAW;CAAQ;AAE7F,MAAMC,UAAU,CAACC;IACf,OAAOC,QACLD,IAAIE,OAAO,CAACC,GAAG,CAAC,wBACbH,IAAIE,OAAO,CAACC,GAAG,CAAC,qBAAqBH,IAAIE,OAAO,CAACC,GAAG,CAAC,sBAAsB;AAElF;AAEA,MAAMC,sBAAsB,CAACJ,MAA0B,CAACH,qBAAqBQ,GAAG,CAACL,IAAIM,MAAM;AAE3F,MAAMC,2BAA2B,CAACP;IAChC,MAAMQ,WAAWR,IAAIE,OAAO,CAACC,GAAG,CAAC;IACjC,OAAOK,SAAUC,QAAQ,CAAC,gBAAgBb,wBAAwBc,IAAI,CAACF;AACzE;AAEO,MAAMG,oBAAoB,CAACX;IAChC,IAAI;QACF,OAAOD,QAAQC,QAAQI,oBAAoBJ,QAAQO,yBAAyBP;IAC9E,EAAE,OAAOY,QAAQ;QACf,OAAO;IACT;AACF,EAAC"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/utilities.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport { Readable } from 'stream'\n\nimport type { FetchAPIFileUploadOptions } from '../../config/types.js'\n\n// Parameters for safe file name parsing.\nconst SAFE_FILE_NAME_REGEX = /[^\\w-]/g\nconst MAX_EXTENSION_LENGTH = 3\n\n// Parameters to generate unique temporary file names:\nconst TEMP_COUNTER_MAX = 65536\nconst TEMP_PREFIX = 'tmp'\nlet tempCounter = 0\n\n/**\n * Logs message to console if options.debug option set to true.\n */\nexport const debugLog = (options: FetchAPIFileUploadOptions, msg: string) => {\n  const opts = options || {}\n  if (!opts.debug) {\n    return false\n  }\n  console.log(`Next-file-upload: ${msg}`) // eslint-disable-line\n  return true\n}\n\n/**\n * Generates unique temporary file name. e.g. tmp-5000-156788789789.\n */\nexport const getTempFilename = (prefix: string = TEMP_PREFIX) => {\n  tempCounter = tempCounter >= TEMP_COUNTER_MAX ? 1 : tempCounter + 1\n  return `${prefix}-${tempCounter}-${Date.now()}`\n}\n\ntype FuncType = (...args: any[]) => any\nexport const isFunc = (value: any): value is FuncType => {\n  return typeof value === 'function'\n}\n\n/**\n * Set errorFunc to the same value as successFunc for callback mode.\n */\ntype ErrorFunc = (resolve: () => void, reject: (err: Error) => void) => (err: Error) => void\nconst errorFunc: ErrorFunc = (resolve, reject) => (isFunc(reject) ? reject : resolve)\n\n/**\n * Return a callback function for promise resole/reject args.\n * Ensures that callback is called only once.\n */\ntype PromiseCallback = (resolve: () => void, reject: (err: Error) => void) => (err: Error) => void\nexport const promiseCallback: PromiseCallback = (resolve, reject) => {\n  let hasFired = false\n  return (err: Error) => {\n    if (hasFired) {\n      return\n    }\n\n    hasFired = true\n    return err ? errorFunc(resolve, reject)(err) : resolve()\n  }\n}\n\n// The default prototypes for both objects and arrays.\n// Used by isSafeFromPollution\nconst OBJECT_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Object.prototype)\nconst ARRAY_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Array.prototype)\n\n/**\n * Determines whether a key insertion into an object could result in a prototype pollution\n */\ntype IsSafeFromPollution = (base: any, key: string) => boolean\nexport const isSafeFromPollution: IsSafeFromPollution = (base, key) => {\n  // We perform an instanceof check instead of Array.isArray as the former is more\n  // permissive for cases in which the object as an Array prototype but was not constructed\n  // via an Array constructor or literal.\n  const TOUCHES_ARRAY_PROTOTYPE = base instanceof Array && ARRAY_PROTOTYPE_KEYS.includes(key)\n  const TOUCHES_OBJECT_PROTOTYPE = OBJECT_PROTOTYPE_KEYS.includes(key)\n\n  return !TOUCHES_ARRAY_PROTOTYPE && !TOUCHES_OBJECT_PROTOTYPE\n}\n\n/**\n * Build request field/file objects to return\n */\ntype BuildFields = (instance: any, field: string, value: any) => any\nexport const buildFields: BuildFields = (instance, field, value) => {\n  // Do nothing if value is not set.\n  if (value === null || value === undefined) {\n    return instance\n  }\n  instance = instance || Object.create(null)\n\n  if (!isSafeFromPollution(instance, field)) {\n    return instance\n  }\n  // Non-array fields\n  if (!instance[field]) {\n    instance[field] = value\n    return instance\n  }\n  // Array fields\n  if (instance[field] instanceof Array) {\n    instance[field].push(value)\n  } else {\n    instance[field] = [instance[field], value]\n  }\n  return instance\n}\n\n/**\n * Creates a folder if it does not exist\n * for file specified in the path variable\n */\ntype CheckAndMakeDir = (fileUploadOptions: FetchAPIFileUploadOptions, filePath: string) => boolean\nexport const checkAndMakeDir: CheckAndMakeDir = (fileUploadOptions, filePath) => {\n  if (!fileUploadOptions.createParentPath) {\n    return false\n  }\n  // Check whether folder for the file exists.\n  const parentPath = path.dirname(filePath)\n  // Create folder if it doesn't exist.\n  if (!fs.existsSync(parentPath)) {\n    fs.mkdirSync(parentPath, { recursive: true })\n  }\n  // Checks folder again and return a results.\n  return fs.existsSync(parentPath)\n}\n\n/**\n * Delete a file.\n */\ntype DeleteFile = (filePath: string, callback: (args: any) => void) => void\nexport const deleteFile: DeleteFile = (filePath, callback) => fs.unlink(filePath, callback)\n\n/**\n * Copy file via streams\n */\ntype CopyFile = (src: string, dst: string, callback: (err: Error) => void) => void\nconst copyFile: CopyFile = (src, dst, callback) => {\n  // cbCalled flag and runCb helps to run cb only once.\n  let cbCalled = false\n  const runCb = (err?: Error) => {\n    if (cbCalled) {\n      return\n    }\n    cbCalled = true\n    callback(err!)\n  }\n  // Create read stream\n  const readable = fs.createReadStream(src)\n  readable.on('error', runCb)\n  // Create write stream\n  const writable = fs.createWriteStream(dst)\n  writable.on('error', (err: Error) => {\n    readable.destroy()\n    runCb(err)\n  })\n  writable.on('close', () => runCb())\n  // Copy file via piping streams.\n  readable.pipe(writable)\n}\n\n/**\n * moveFile: moves the file from src to dst.\n * Firstly trying to rename the file if no luck copying it to dst and then deleting src.\n */\ntype MoveFile = (\n  src: string,\n  dst: string,\n  callback: (err: Error, renamed?: boolean) => void,\n) => void\nexport const moveFile: MoveFile = (src, dst, callback) =>\n  fs.rename(src, dst, (err) => {\n    if (err) {\n      // Try to copy file if rename didn't work.\n      copyFile(src, dst, (cpErr) => (cpErr ? callback(cpErr) : deleteFile(src, callback)))\n      return\n    }\n    // File was renamed successfully: Add true to the callback to indicate that.\n    callback(null!, true)\n  })\n\n/**\n * Save buffer data to a file.\n * @param {Buffer} buffer - buffer to save to a file.\n * @param {string} filePath - path to a file.\n */\nexport const saveBufferToFile = (\n  buffer: Buffer,\n  filePath: string,\n  callback: (err?: Error) => void,\n) => {\n  if (!Buffer.isBuffer(buffer)) {\n    return callback(new Error('buffer variable should be type of Buffer!'))\n  }\n  // Setup readable stream from buffer.\n  let streamData = buffer\n  const readStream = new Readable()\n  readStream._read = () => {\n    readStream.push(streamData)\n    streamData = null!\n  }\n  // Setup file system writable stream.\n  const fstream = fs.createWriteStream(filePath)\n  // console.log(\"Calling saveBuffer\");\n  fstream.on('error', (err) => {\n    // console.log(\"err cb\")\n    callback(err)\n  })\n  fstream.on('close', () => {\n    // console.log(\"close cb\");\n    callback()\n  })\n  // Copy file via piping streams.\n  readStream.pipe(fstream)\n}\n\n/**\n * Decodes uriEncoded file names.\n * @param {Object} opts - middleware options.\n * @param fileName {String} - file name to decode.\n * @returns {String}\n */\nconst uriDecodeFileName = (opts: FetchAPIFileUploadOptions, fileName: string) => {\n  if (!opts || !opts.uriDecodeFileNames) {\n    return fileName\n  }\n  // Decode file name from URI with checking URI malformed errors.\n  // See Issue https://github.com/richardgirges/express-fileupload/issues/342.\n  try {\n    return decodeURIComponent(fileName)\n  } catch (ignore) {\n    const matcher = /(%[a-f\\d]{2})/gi\n    return fileName\n      .split(matcher)\n      .map((str) => {\n        try {\n          return decodeURIComponent(str)\n        } catch (ignore) {\n          return ''\n        }\n      })\n      .join('')\n  }\n}\n\n/**\n * Parses filename and extension and returns object {name, extension}.\n */\ntype ParseFileNameExtension = (\n  preserveExtension: boolean | number,\n  fileName: string,\n) => {\n  extension: string\n  name: string\n}\nexport const parseFileNameExtension: ParseFileNameExtension = (preserveExtension, fileName) => {\n  const defaultResult = {\n    name: fileName,\n    extension: '',\n  }\n  if (!preserveExtension) {\n    return defaultResult\n  }\n\n  // Define maximum extension length\n  const maxExtLength =\n    typeof preserveExtension === 'boolean' ? MAX_EXTENSION_LENGTH : preserveExtension\n\n  const nameParts = fileName.split('.')\n  if (nameParts.length < 2) {\n    return defaultResult\n  }\n\n  let extension = nameParts.pop()\n  if (extension!.length > maxExtLength && maxExtLength > 0) {\n    nameParts[nameParts.length - 1] += '.' + extension!.substr(0, extension!.length - maxExtLength)\n    extension = extension!.substr(-maxExtLength)\n  }\n\n  return {\n    name: nameParts.join('.'),\n    extension: maxExtLength ? extension! : '',\n  }\n}\n\n/**\n * Parse file name and extension.\n */\ntype ParseFileName = (opts: FetchAPIFileUploadOptions, fileName: string) => string\nexport const parseFileName: ParseFileName = (opts, fileName) => {\n  // Check fileName argument\n  if (!fileName || typeof fileName !== 'string') {\n    return getTempFilename()\n  }\n  // Cut off file name if it's length more then 255.\n  let parsedName = fileName.length <= 255 ? fileName : fileName.substr(0, 255)\n  // Decode file name if uriDecodeFileNames option set true.\n  parsedName = uriDecodeFileName(opts, parsedName)\n  // Stop parsing file name if safeFileNames options hasn't been set.\n  if (!opts.safeFileNames) {\n    return parsedName\n  }\n  // Set regular expression for the file name.\n  const nameRegex =\n    typeof opts.safeFileNames === 'object' && opts.safeFileNames instanceof RegExp\n      ? opts.safeFileNames\n      : SAFE_FILE_NAME_REGEX\n  // Parse file name extension.\n  const parsedFileName = parseFileNameExtension(opts.preserveExtension!, parsedName)\n  if (parsedFileName.extension.length) {\n    parsedFileName.extension = '.' + parsedFileName.extension.replace(nameRegex, '')\n  }\n\n  return parsedFileName.name.replace(nameRegex, '').concat(parsedFileName.extension)\n}\n"],"names":["fs","path","Readable","SAFE_FILE_NAME_REGEX","MAX_EXTENSION_LENGTH","TEMP_COUNTER_MAX","TEMP_PREFIX","tempCounter","debugLog","options","msg","opts","debug","console","log","getTempFilename","prefix","Date","now","isFunc","value","errorFunc","resolve","reject","promiseCallback","hasFired","err","OBJECT_PROTOTYPE_KEYS","Object","getOwnPropertyNames","prototype","ARRAY_PROTOTYPE_KEYS","Array","isSafeFromPollution","base","key","TOUCHES_ARRAY_PROTOTYPE","includes","TOUCHES_OBJECT_PROTOTYPE","buildFields","instance","field","undefined","create","push","checkAndMakeDir","fileUploadOptions","filePath","createParentPath","parentPath","dirname","existsSync","mkdirSync","recursive","deleteFile","callback","unlink","copyFile","src","dst","cbCalled","runCb","readable","createReadStream","on","writable","createWriteStream","destroy","pipe","moveFile","rename","cpErr","saveBufferToFile","buffer","Buffer","isBuffer","Error","streamData","readStream","_read","fstream","uriDecodeFileName","fileName","uriDecodeFileNames","decodeURIComponent","ignore","matcher","split","map","str","join","parseFileNameExtension","preserveExtension","defaultResult","name","extension","maxExtLength","nameParts","length","pop","substr","parseFileName","parsedName","safeFileNames","nameRegex","RegExp","parsedFileName","replace","concat"],"mappings":"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"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/fileFactory.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from '../../config/types.js'\nimport type { FileShape } from './index.js'\n\nimport {\n  checkAndMakeDir,\n  debugLog,\n  isFunc,\n  moveFile,\n  promiseCallback,\n  saveBufferToFile,\n} from './utilities.js'\n\ntype MoveFile = (\n  filePath: string,\n  options: FileFactoryOptions,\n  fileUploadOptions: FetchAPIFileUploadOptions,\n) => (resolve: () => void, reject: () => void) => void\n\n/**\n * Returns Local function that moves the file to a different location on the filesystem\n * which takes two function arguments to make it compatible w/ Promise or Callback APIs\n */\nconst moveFromTemp: MoveFile = (filePath, options, fileUploadOptions) => (resolve, reject) => {\n  debugLog(fileUploadOptions, `Moving temporary file ${options.tempFilePath} to ${filePath}`)\n  moveFile(options.tempFilePath, filePath, promiseCallback(resolve, reject))\n}\n\n/**\n * Returns Local function that moves the file from buffer to a different location on the filesystem\n * which takes two function arguments to make it compatible w/ Promise or Callback APIs\n */\nconst moveFromBuffer: MoveFile = (filePath, options, fileUploadOptions) => (resolve, reject) => {\n  debugLog(fileUploadOptions, `Moving uploaded buffer to ${filePath}`)\n  // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n  saveBufferToFile(options.buffer, filePath, promiseCallback(resolve, reject))\n}\n\ntype FileFactoryOptions = {\n  buffer: Buffer\n  encoding: string\n  hash: Buffer | string\n  mimetype: string\n  name: string\n  size: number\n  tempFilePath: string\n  truncated: boolean\n}\ntype FileFactory = (\n  options: FileFactoryOptions,\n  fileUploadOptions: FetchAPIFileUploadOptions,\n) => FileShape\nexport const fileFactory: FileFactory = (options, fileUploadOptions) => {\n  // see: https://github.com/richardgirges/express-fileupload/issues/14\n  // firefox uploads empty file in case of cache miss when f5ing page.\n  // resulting in unexpected behavior. if there is no file data, the file is invalid.\n  // if (!fileUploadOptions.useTempFiles && !options.buffer.length) return;\n\n  // Create and return file object.\n  return {\n    name: options.name,\n    data: options.buffer,\n    encoding: options.encoding,\n    md5: options.hash,\n    mimetype: options.mimetype,\n    mv: (filePath: string, callback) => {\n      // Define a proper move function.\n      const moveFunc = fileUploadOptions.useTempFiles\n        ? moveFromTemp(filePath, options, fileUploadOptions)\n        : moveFromBuffer(filePath, options, fileUploadOptions)\n      // Create a folder for a file.\n      checkAndMakeDir(fileUploadOptions, filePath)\n      // If callback is passed in, use the callback API, otherwise return a promise.\n      const defaultReject = () => undefined\n      return isFunc(callback) ? moveFunc(callback, defaultReject) : new Promise(moveFunc)\n    },\n    size: options.size,\n    tempFilePath: options.tempFilePath,\n    truncated: options.truncated,\n  }\n}\n"],"names":["checkAndMakeDir","debugLog","isFunc","moveFile","promiseCallback","saveBufferToFile","moveFromTemp","filePath","options","fileUploadOptions","resolve","reject","tempFilePath","moveFromBuffer","buffer","fileFactory","name","data","encoding","md5","hash","mimetype","mv","callback","moveFunc","useTempFiles","defaultReject","undefined","Promise","size","truncated"],"mappings":";;;;AAGA,SACEA,eAAe,EACfC,QAAQ,EACRC,MAAM,EACNC,QAAQ,EACRC,eAAe,EACfC,gBAAgB,QACX,iBAAgB;;AAQvB;;;CAGC,GACD,MAAMC,eAAyB,CAACC,UAAUC,SAASC,oBAAsB,CAACC,SAASC;YACjFV,8LAAAA,EAASQ,mBAAmB,CAAC,sBAAsB,EAAED,QAAQI,YAAY,CAAC,IAAI,EAAEL,UAAU;YAC1FJ,8LAAAA,EAASK,QAAQI,YAAY,EAAEL,cAAUH,qMAAAA,EAAgBM,SAASC;IACpE;AAEA;;;CAGC,GACD,MAAME,iBAA2B,CAACN,UAAUC,SAASC,oBAAsB,CAACC,SAASC;YACnFV,8LAAAA,EAASQ,mBAAmB,CAAC,0BAA0B,EAAEF,UAAU;QACnE,oFAAoF;YACpFF,sMAAAA,EAAiBG,QAAQM,MAAM,EAAEP,cAAUH,qMAAAA,EAAgBM,SAASC;IACtE;AAgBO,MAAMI,cAA2B,CAACP,SAASC;IAChD,qEAAqE;IACrE,oEAAoE;IACpE,mFAAmF;IACnF,yEAAyE;IAEzE,iCAAiC;IACjC,OAAO;QACLO,MAAMR,QAAQQ,IAAI;QAClBC,MAAMT,QAAQM,MAAM;QACpBI,UAAUV,QAAQU,QAAQ;QAC1BC,KAAKX,QAAQY,IAAI;QACjBC,UAAUb,QAAQa,QAAQ;QAC1BC,IAAI,CAACf,UAAkBgB;YACrB,iCAAiC;YACjC,MAAMC,WAAWf,kBAAkBgB,YAAY,GAC3CnB,aAAaC,UAAUC,SAASC,qBAChCI,eAAeN,UAAUC,SAASC;YACtC,8BAA8B;gBAC9BT,qMAAAA,EAAgBS,mBAAmBF;YACnC,8EAA8E;YAC9E,MAAMmB,gBAAgB,IAAMC;YAC5B,WAAOzB,4LAAAA,EAAOqB,YAAYC,SAASD,UAAUG,iBAAiB,IAAIE,QAAQJ;QAC5E;QACAK,MAAMrB,QAAQqB,IAAI;QAClBjB,cAAcJ,QAAQI,YAAY;QAClCkB,WAAWtB,QAAQsB,SAAS;IAC9B;AACF,EAAC"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/handlers.ts"],"sourcesContent":["import crypto from 'crypto'\nimport fs, { WriteStream } from 'fs'\nimport path from 'path'\n\nimport type { FetchAPIFileUploadOptions } from '../../config/types.js'\n\nimport { checkAndMakeDir, debugLog, deleteFile, getTempFilename } from './utilities.js'\n\ntype Handler = (\n  options: FetchAPIFileUploadOptions,\n  fieldname: string,\n  filename: string,\n) => {\n  cleanup: () => void\n  complete: () => Buffer\n  dataHandler: (data: Buffer) => void\n  getFilePath: () => string\n  getFileSize: () => number\n  getHash: () => string\n  getWritePromise: () => Promise<boolean>\n}\n\nexport const tempFileHandler: Handler = (options, fieldname, filename) => {\n  const dir = path.normalize(options.tempFileDir!)\n  const tempFilePath = path.join(process.cwd(), dir, getTempFilename())\n  checkAndMakeDir({ createParentPath: true }, tempFilePath)\n\n  debugLog(options, `Temporary file path is ${tempFilePath}`)\n\n  const hash = crypto.createHash('md5')\n  let fileSize = 0\n  let completed = false\n\n  debugLog(options, `Opening write stream for ${fieldname}->${filename}...`)\n  const writeStream = fs.createWriteStream(tempFilePath)\n  const writePromise = new Promise<boolean>((resolve, reject) => {\n    writeStream.on('finish', () => resolve(true))\n    writeStream.on('error', (err) => {\n      debugLog(options, `Error write temp file: ${err}`)\n      reject(err)\n    })\n  })\n\n  return {\n    cleanup: () => {\n      completed = true\n      debugLog(options, `Cleaning up temporary file ${tempFilePath}...`)\n      writeStream.end()\n      deleteFile(tempFilePath, (err) =>\n        err\n          ? debugLog(options, `Cleaning up temporary file ${tempFilePath} failed: ${err}`)\n          : debugLog(options, `Cleaning up temporary file ${tempFilePath} done.`),\n      )\n    },\n    complete: () => {\n      completed = true\n      debugLog(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`)\n      if (writeStream instanceof WriteStream) {\n        writeStream.end()\n      }\n      // Return empty buff since data was uploaded into a temp file.\n      return Buffer.concat([])\n    },\n    dataHandler: (data) => {\n      if (completed === true) {\n        debugLog(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`)\n        return\n      }\n      writeStream.write(data)\n      hash.update(data)\n      fileSize += data.length\n      debugLog(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`)\n    },\n    getFilePath: () => tempFilePath,\n    getFileSize: () => fileSize,\n    getHash: () => hash.digest('hex'),\n    getWritePromise: () => writePromise,\n  }\n}\n\nexport const memHandler: Handler = (options, fieldname, filename) => {\n  const buffers: Buffer[] = []\n  const hash = crypto.createHash('md5')\n  let fileSize = 0\n  let completed = false\n\n  const getBuffer = () => Buffer.concat(buffers, fileSize)\n\n  return {\n    cleanup: () => {\n      completed = true\n    },\n    complete: () => {\n      debugLog(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`)\n      completed = true\n      return getBuffer()\n    },\n    dataHandler: (data) => {\n      if (completed === true) {\n        debugLog(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`)\n        return\n      }\n      buffers.push(data)\n      hash.update(data)\n      fileSize += data.length\n      debugLog(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`)\n    },\n    getFilePath: () => '',\n    getFileSize: () => fileSize,\n    getHash: () => hash.digest('hex'),\n    getWritePromise: () => Promise.resolve(true),\n  }\n}\n"],"names":["crypto","fs","WriteStream","path","checkAndMakeDir","debugLog","deleteFile","getTempFilename","tempFileHandler","options","fieldname","filename","dir","normalize","tempFileDir","tempFilePath","join","process","cwd","createParentPath","hash","createHash","fileSize","completed","writeStream","createWriteStream","writePromise","Promise","resolve","reject","on","err","cleanup","end","complete","Buffer","concat","dataHandler","data","write","update","length","getFilePath","getFileSize","getHash","digest","getWritePromise","memHandler","buffers","getBuffer","push"],"mappings":"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"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/processNested.ts"],"sourcesContent":["import { isSafeFromPollution } from './utilities.js'\n\nexport const processNested = function (data: Record<string, any>) {\n  if (!data || data.length < 1) {\n    return Object.create(null)\n  }\n\n  const d = Object.create(null),\n    keys = Object.keys(data)\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i]!,\n      keyParts = key?.replace(new RegExp(/\\[/g), '.').replace(new RegExp(/\\]/g), '').split('.'),\n      value = data[key]\n    let current = d\n\n    for (let index = 0; index < keyParts.length; index++) {\n      const k = keyParts[index]!\n\n      // Ensure we don't allow prototype pollution\n      if (!isSafeFromPollution(current, k)) {\n        continue\n      }\n\n      if (index >= keyParts.length - 1) {\n        current[k] = value\n      } else {\n        if (!current[k]) {\n          current[k] = !keyParts[index + 1] ? [] : Object.create(null)\n        }\n        current = current[k]\n      }\n    }\n  }\n  return d\n}\n"],"names":["isSafeFromPollution","processNested","data","length","Object","create","d","keys","i","key","keyParts","replace","RegExp","split","value","current","index","k"],"mappings":";;;;AAAA,SAASA,mBAAmB,QAAQ,iBAAgB;;AAE7C,MAAMC,gBAAgB,SAAUC,IAAyB;IAC9D,IAAI,CAACA,QAAQA,KAAKC,MAAM,GAAG,GAAG;QAC5B,OAAOC,OAAOC,MAAM,CAAC;IACvB;IAEA,MAAMC,IAAIF,OAAOC,MAAM,CAAC,OACtBE,OAAOH,OAAOG,IAAI,CAACL;IAErB,IAAK,IAAIM,IAAI,GAAGA,IAAID,KAAKJ,MAAM,EAAEK,IAAK;QACpC,MAAMC,MAAMF,IAAI,CAACC,EAAE,EACjBE,WAAWD,KAAKE,QAAQ,IAAIC,OAAO,QAAQ,KAAKD,QAAQ,IAAIC,OAAO,QAAQ,IAAIC,MAAM,MACrFC,QAAQZ,IAAI,CAACO,IAAI;QACnB,IAAIM,UAAUT;QAEd,IAAK,IAAIU,QAAQ,GAAGA,QAAQN,SAASP,MAAM,EAAEa,QAAS;YACpD,MAAMC,IAAIP,QAAQ,CAACM,MAAM;YAEzB,4CAA4C;YAC5C,IAAI,KAAChB,yMAAAA,EAAoBe,SAASE,IAAI;gBACpC;YACF;YAEA,IAAID,SAASN,SAASP,MAAM,GAAG,GAAG;gBAChCY,OAAO,CAACE,EAAE,GAAGH;YACf,OAAO;gBACL,IAAI,CAACC,OAAO,CAACE,EAAE,EAAE;oBACfF,OAAO,CAACE,EAAE,GAAG,CAACP,QAAQ,CAACM,QAAQ,EAAE,GAAG,EAAE,GAAGZ,OAAOC,MAAM,CAAC;gBACzD;gBACAU,UAAUA,OAAO,CAACE,EAAE;YACtB;QACF;IACF;IACA,OAAOX;AACT,EAAC"}},
    {"offset": {"line": 495, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/uploadTimer.ts"],"sourcesContent":["type CreateUploadTimer = (\n  timeout?: number,\n  callback?: () => void,\n) => {\n  clear: () => void\n  set: () => boolean\n}\n\nexport const createUploadTimer: CreateUploadTimer = (timeout = 0, callback = () => {}) => {\n  let timer: NodeJS.Timeout | null | number = null\n\n  const clear = () => {\n    clearTimeout(timer!)\n  }\n\n  const set = () => {\n    // Do not start a timer if zero timeout or it hasn't been set.\n    if (!timeout) {\n      return false\n    }\n    clear()\n    timer = setTimeout(callback, timeout)\n    return true\n  }\n\n  return { clear, set }\n}\n"],"names":["createUploadTimer","timeout","callback","timer","clear","clearTimeout","set","setTimeout"],"mappings":";;;;AAQO,MAAMA,oBAAuC,CAACC,UAAU,CAAC,EAAEC,WAAW,KAAO,CAAC;IACnF,IAAIC,QAAwC;IAE5C,MAAMC,QAAQ;QACZC,aAAaF;IACf;IAEA,MAAMG,MAAM;QACV,8DAA8D;QAC9D,IAAI,CAACL,SAAS;YACZ,OAAO;QACT;QACAG;QACAD,QAAQI,WAAWL,UAAUD;QAC7B,OAAO;IACT;IAEA,OAAO;QAAEG;QAAOE;IAAI;AACtB,EAAC"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/processMultipart.ts"],"sourcesContent":["import type { Readable } from 'stream'\n\nimport Busboy from 'busboy'\nimport { status as httpStatus } from 'http-status'\n\nimport type { FetchAPIFileUploadOptions } from '../../config/types.js'\nimport type { FetchAPIFileUploadResponse } from './index.js'\n\nimport { APIError } from '../../errors/APIError.js'\nimport { fileFactory } from './fileFactory.js'\nimport { memHandler, tempFileHandler } from './handlers.js'\nimport { processNested } from './processNested.js'\nimport { createUploadTimer } from './uploadTimer.js'\nimport { buildFields, debugLog, isFunc, parseFileName } from './utilities.js'\n\nconst waitFlushProperty = Symbol('wait flush property symbol')\n\ndeclare global {\n  interface Request {\n    [waitFlushProperty]?: Promise<any>[]\n  }\n}\n\ntype ProcessMultipart = (args: {\n  options: FetchAPIFileUploadOptions\n  request: Request\n}) => Promise<FetchAPIFileUploadResponse>\nexport const processMultipart: ProcessMultipart = async ({ options, request }) => {\n  let parsingRequest = true\n\n  let shouldAbortProccessing = false\n  let fileCount = 0\n  let filesCompleted = 0\n  let allFilesHaveResolved: (value?: unknown) => void\n  let failedResolvingFiles: (err: Error) => void\n\n  const allFilesComplete = new Promise((res, rej) => {\n    allFilesHaveResolved = res\n    failedResolvingFiles = rej\n  })\n\n  const result: FetchAPIFileUploadResponse = {\n    fields: undefined!,\n    files: undefined!,\n  }\n\n  const headersObject: Record<string, string> = {}\n  request.headers.forEach((value, name) => {\n    headersObject[name] = value\n  })\n\n  const reader = request.body?.getReader()\n\n  const busboy = Busboy({ ...options, headers: headersObject })\n\n  function abortAndDestroyFile(file: Readable, err: APIError) {\n    file.destroy()\n    shouldAbortProccessing = true\n    failedResolvingFiles(err)\n  }\n\n  // Build multipart req.body fields\n  busboy.on('field', (field, val) => {\n    result.fields = buildFields(result.fields, field, val)\n  })\n\n  // Build req.files fields\n  busboy.on('file', (field, file, info) => {\n    fileCount += 1\n    // Parse file name(cutting huge names, decoding, etc..).\n    const { encoding, filename: name, mimeType: mime } = info\n    const filename = parseFileName(options, name)\n\n    const inferredMimeType =\n      (filename && filename.endsWith('.glb') && 'model/gltf-binary') ||\n      (filename && filename.endsWith('.gltf') && 'model/gltf+json') ||\n      mime\n\n    // Define methods and handlers for upload process.\n    const { cleanup, complete, dataHandler, getFilePath, getFileSize, getHash, getWritePromise } =\n      options.useTempFiles\n        ? tempFileHandler(options, field, filename) // Upload into temporary file.\n        : memHandler(options, field, filename) // Upload into RAM.\n\n    const writePromise = options.useTempFiles\n      ? getWritePromise().catch(() => {\n          busboy.end()\n          cleanup()\n        })\n      : getWritePromise()\n\n    const uploadTimer = createUploadTimer(options.uploadTimeout, () => {\n      return abortAndDestroyFile(\n        file,\n        new APIError(`Upload timeout for ${field}->${filename}, bytes:${getFileSize()}`),\n      )\n    })\n\n    file.on('limit', () => {\n      debugLog(options, `Size limit reached for ${field}->${filename}, bytes:${getFileSize()}`)\n      uploadTimer.clear()\n\n      if (isFunc(options.limitHandler)) {\n        options.limitHandler({ request, size: getFileSize() })\n      }\n\n      // Return error and cleanup files if abortOnLimit set.\n      if (options.abortOnLimit) {\n        debugLog(options, `Upload file size limit reached ${field}->${filename}.`)\n        cleanup()\n        abortAndDestroyFile(\n          file,\n          new APIError(options.responseOnLimit!, httpStatus.REQUEST_ENTITY_TOO_LARGE, {\n            size: getFileSize(),\n          }),\n        )\n      }\n    })\n\n    file.on('data', (data) => {\n      uploadTimer.set()\n      dataHandler(data)\n    })\n\n    file.on('end', () => {\n      const size = getFileSize()\n      debugLog(options, `Upload finished ${field}->${filename}, bytes:${size}`)\n      uploadTimer.clear()\n\n      if (!name && size === 0) {\n        fileCount -= 1\n        if (options.useTempFiles) {\n          cleanup()\n          debugLog(options, `Removing the empty file ${field}->${filename}`)\n        }\n        return debugLog(options, `Don't add file instance if original name and size are empty`)\n      }\n\n      filesCompleted += 1\n\n      result.files = buildFields(\n        result.files,\n        field,\n        fileFactory(\n          {\n            name: filename,\n            buffer: complete(),\n            encoding,\n            hash: getHash(),\n            mimetype: inferredMimeType,\n            size,\n            tempFilePath: getFilePath(),\n            truncated: Boolean('truncated' in file && file.truncated) || false,\n          },\n          options,\n        ),\n      )\n\n      if (!request[waitFlushProperty]) {\n        request[waitFlushProperty] = []\n      }\n      request[waitFlushProperty].push(writePromise)\n\n      if (filesCompleted === fileCount) {\n        allFilesHaveResolved()\n      }\n    })\n\n    file.on('error', (err) => {\n      uploadTimer.clear()\n      debugLog(options, `File Error: ${err.message}`)\n      cleanup()\n      failedResolvingFiles(err)\n    })\n\n    // Start upload process.\n    debugLog(options, `New upload started ${field}->${filename}, bytes:${getFileSize()}`)\n    uploadTimer.set()\n  })\n\n  busboy.on('finish', async () => {\n    debugLog(options, `Busboy finished parsing request.`)\n    if (options.parseNested) {\n      result.fields = processNested(result.fields)\n      result.files = processNested(result.files)\n    }\n\n    if (request[waitFlushProperty]) {\n      try {\n        await Promise.all(request[waitFlushProperty]).then(() => {\n          delete request[waitFlushProperty]\n        })\n      } catch (err) {\n        debugLog(options, `Error waiting for file write promises: ${err}`)\n      }\n    }\n\n    return result\n  })\n\n  busboy.on(\n    'error',\n    (err = new APIError('Busboy error parsing multipart request', httpStatus.BAD_REQUEST)) => {\n      debugLog(options, `Busboy error`)\n      throw err\n    },\n  )\n\n  while (parsingRequest) {\n    const { done, value } = await reader!.read()\n\n    if (done) {\n      parsingRequest = false\n    }\n\n    if (value && !shouldAbortProccessing) {\n      busboy.write(value)\n    }\n  }\n\n  if (fileCount !== 0) {\n    await allFilesComplete.catch((e) => {\n      throw e\n    })\n  }\n\n  return result\n}\n"],"names":["Busboy","status","httpStatus","APIError","fileFactory","memHandler","tempFileHandler","processNested","createUploadTimer","buildFields","debugLog","isFunc","parseFileName","waitFlushProperty","Symbol","processMultipart","options","request","parsingRequest","shouldAbortProccessing","fileCount","filesCompleted","allFilesHaveResolved","failedResolvingFiles","allFilesComplete","Promise","res","rej","result","fields","undefined","files","headersObject","headers","forEach","value","name","reader","body","getReader","busboy","abortAndDestroyFile","file","err","destroy","on","field","val","info","encoding","filename","mimeType","mime","inferredMimeType","endsWith","cleanup","complete","dataHandler","getFilePath","getFileSize","getHash","getWritePromise","useTempFiles","writePromise","catch","end","uploadTimer","uploadTimeout","clear","limitHandler","size","abortOnLimit","responseOnLimit","REQUEST_ENTITY_TOO_LARGE","data","set","buffer","hash","mimetype","tempFilePath","truncated","Boolean","push","message","parseNested","all","then","BAD_REQUEST","done","read","write","e"],"mappings":";;;;AAEA,OAAOA,YAAY,SAAQ;;AAC3B,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,QAAQ,QAAQ,2BAA0B;AACnD,SAASC,WAAW,QAAQ,mBAAkB;AAC9C,SAASC,UAAU,EAAEC,eAAe,QAAQ,gBAAe;AAC3D,SAASC,aAAa,QAAQ,qBAAoB;AAClD,SAASC,iBAAiB,QAAQ,mBAAkB;AACpD,SAASC,WAAW,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,aAAa,QAAQ,iBAAgB;;;;;;;;;AAE7E,MAAMC,oBAAoBC,OAAO;AAY1B,MAAMC,mBAAqC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAE;IAC3E,IAAIC,iBAAiB;IAErB,IAAIC,yBAAyB;IAC7B,IAAIC,YAAY;IAChB,IAAIC,iBAAiB;IACrB,IAAIC;IACJ,IAAIC;IAEJ,MAAMC,mBAAmB,IAAIC,QAAQ,CAACC,KAAKC;QACzCL,uBAAuBI;QACvBH,uBAAuBI;IACzB;IAEA,MAAMC,SAAqC;QACzCC,QAAQC;QACRC,OAAOD;IACT;IAEA,MAAME,gBAAwC,CAAC;IAC/Cf,QAAQgB,OAAO,CAACC,OAAO,CAAC,CAACC,OAAOC;QAC9BJ,aAAa,CAACI,KAAK,GAAGD;IACxB;IAEA,MAAME,SAASpB,QAAQqB,IAAI,EAAEC;IAE7B,MAAMC,aAASxC,mJAAAA,EAAO;QAAE,GAAGgB,OAAO;QAAEiB,SAASD;IAAc;IAE3D,SAASS,oBAAoBC,IAAc,EAAEC,GAAa;QACxDD,KAAKE,OAAO;QACZzB,yBAAyB;QACzBI,qBAAqBoB;IACvB;IAEA,kCAAkC;IAClCH,OAAOK,EAAE,CAAC,SAAS,CAACC,OAAOC;QACzBnB,OAAOC,MAAM,OAAGpB,iMAAAA,EAAYmB,OAAOC,MAAM,EAAEiB,OAAOC;IACpD;IAEA,yBAAyB;IACzBP,OAAOK,EAAE,CAAC,QAAQ,CAACC,OAAOJ,MAAMM;QAC9B5B,aAAa;QACb,wDAAwD;QACxD,MAAM,EAAE6B,QAAQ,EAAEC,UAAUd,IAAI,EAAEe,UAAUC,IAAI,EAAE,GAAGJ;QACrD,MAAME,eAAWtC,mMAAAA,EAAcI,SAASoB;QAExC,MAAMiB,mBACHH,YAAYA,SAASI,QAAQ,CAAC,WAAW,uBACzCJ,YAAYA,SAASI,QAAQ,CAAC,YAAY,qBAC3CF;QAEF,kDAAkD;QAClD,MAAM,EAAEG,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,WAAW,EAAEC,WAAW,EAAEC,OAAO,EAAEC,eAAe,EAAE,GAC1F7C,QAAQ8C,YAAY,OAChBxD,oMAAAA,EAAgBU,SAAS8B,OAAOI,UAAU,8BAA8B;eACxE7C,+LAAAA,EAAWW,SAAS8B,OAAOI,UAAU,mBAAmB;;QAE9D,MAAMa,eAAe/C,QAAQ8C,YAAY,GACrCD,kBAAkBG,KAAK,CAAC;YACtBxB,OAAOyB,GAAG;YACVV;QACF,KACAM;QAEJ,MAAMK,kBAAc1D,yMAAAA,EAAkBQ,QAAQmD,aAAa,EAAE;YAC3D,OAAO1B,oBACLC,MACA,IAAIvC,mKAAAA,CAAS,CAAC,mBAAmB,EAAE2C,MAAM,EAAE,EAAEI,SAAS,QAAQ,EAAES,eAAe;QAEnF;QAEAjB,KAAKG,EAAE,CAAC,SAAS;gBACfnC,8LAAAA,EAASM,SAAS,CAAC,uBAAuB,EAAE8B,MAAM,EAAE,EAAEI,SAAS,QAAQ,EAAES,eAAe;YACxFO,YAAYE,KAAK;YAEjB,QAAIzD,4LAAAA,EAAOK,QAAQqD,YAAY,GAAG;gBAChCrD,QAAQqD,YAAY,CAAC;oBAAEpD;oBAASqD,MAAMX;gBAAc;YACtD;YAEA,sDAAsD;YACtD,IAAI3C,QAAQuD,YAAY,EAAE;oBACxB7D,8LAAAA,EAASM,SAAS,CAAC,+BAA+B,EAAE8B,MAAM,EAAE,EAAEI,SAAS,CAAC,CAAC;gBACzEK;gBACAd,oBACEC,MACA,IAAIvC,mKAAAA,CAASa,QAAQwD,eAAe,EAAGtE,sMAAAA,CAAWuE,wBAAwB,EAAE;oBAC1EH,MAAMX;gBACR;YAEJ;QACF;QAEAjB,KAAKG,EAAE,CAAC,QAAQ,CAAC6B;YACfR,YAAYS,GAAG;YACflB,YAAYiB;QACd;QAEAhC,KAAKG,EAAE,CAAC,OAAO;YACb,MAAMyB,OAAOX;gBACbjD,8LAAAA,EAASM,SAAS,CAAC,gBAAgB,EAAE8B,MAAM,EAAE,EAAEI,SAAS,QAAQ,EAAEoB,MAAM;YACxEJ,YAAYE,KAAK;YAEjB,IAAI,CAAChC,QAAQkC,SAAS,GAAG;gBACvBlD,aAAa;gBACb,IAAIJ,QAAQ8C,YAAY,EAAE;oBACxBP;wBACA7C,8LAAAA,EAASM,SAAS,CAAC,wBAAwB,EAAE8B,MAAM,EAAE,EAAEI,UAAU;gBACnE;gBACA,WAAOxC,8LAAAA,EAASM,SAAS,CAAC,2DAA2D,CAAC;YACxF;YAEAK,kBAAkB;YAElBO,OAAOG,KAAK,OAAGtB,iMAAAA,EACbmB,OAAOG,KAAK,EACZe,WACA1C,mMAAAA,EACE;gBACEgC,MAAMc;gBACN0B,QAAQpB;gBACRP;gBACA4B,MAAMjB;gBACNkB,UAAUzB;gBACViB;gBACAS,cAAcrB;gBACdsB,WAAWC,QAAQ,eAAevC,QAAQA,KAAKsC,SAAS,KAAK;YAC/D,GACAhE;YAIJ,IAAI,CAACC,OAAO,CAACJ,kBAAkB,EAAE;gBAC/BI,OAAO,CAACJ,kBAAkB,GAAG,EAAE;YACjC;YACAI,OAAO,CAACJ,kBAAkB,CAACqE,IAAI,CAACnB;YAEhC,IAAI1C,mBAAmBD,WAAW;gBAChCE;YACF;QACF;QAEAoB,KAAKG,EAAE,CAAC,SAAS,CAACF;YAChBuB,YAAYE,KAAK;gBACjB1D,8LAAAA,EAASM,SAAS,CAAC,YAAY,EAAE2B,IAAIwC,OAAO,EAAE;YAC9C5B;YACAhC,qBAAqBoB;QACvB;QAEA,wBAAwB;YACxBjC,8LAAAA,EAASM,SAAS,CAAC,mBAAmB,EAAE8B,MAAM,EAAE,EAAEI,SAAS,QAAQ,EAAES,eAAe;QACpFO,YAAYS,GAAG;IACjB;IAEAnC,OAAOK,EAAE,CAAC,UAAU;YAClBnC,8LAAAA,EAASM,SAAS,CAAC,gCAAgC,CAAC;QACpD,IAAIA,QAAQoE,WAAW,EAAE;YACvBxD,OAAOC,MAAM,OAAGtB,uMAAAA,EAAcqB,OAAOC,MAAM;YAC3CD,OAAOG,KAAK,OAAGxB,uMAAAA,EAAcqB,OAAOG,KAAK;QAC3C;QAEA,IAAId,OAAO,CAACJ,kBAAkB,EAAE;YAC9B,IAAI;gBACF,MAAMY,QAAQ4D,GAAG,CAACpE,OAAO,CAACJ,kBAAkB,EAAEyE,IAAI,CAAC;oBACjD,OAAOrE,OAAO,CAACJ,kBAAkB;gBACnC;YACF,EAAE,OAAO8B,KAAK;oBACZjC,8LAAAA,EAASM,SAAS,CAAC,uCAAuC,EAAE2B,KAAK;YACnE;QACF;QAEA,OAAOf;IACT;IAEAY,OAAOK,EAAE,CACP,SACA,CAACF,MAAM,IAAIxC,mKAAAA,CAAS,0CAA0CD,sMAAAA,CAAWqF,WAAW,CAAC;YACnF7E,8LAAAA,EAASM,SAAS,CAAC,YAAY,CAAC;QAChC,MAAM2B;IACR;IAGF,MAAOzB,eAAgB;QACrB,MAAM,EAAEsE,IAAI,EAAErD,KAAK,EAAE,GAAG,MAAME,OAAQoD,IAAI;QAE1C,IAAID,MAAM;YACRtE,iBAAiB;QACnB;QAEA,IAAIiB,SAAS,CAAChB,wBAAwB;YACpCqB,OAAOkD,KAAK,CAACvD;QACf;IACF;IAEA,IAAIf,cAAc,GAAG;QACnB,MAAMI,iBAAiBwC,KAAK,CAAC,CAAC2B;YAC5B,MAAMA;QACR;IACF;IAEA,OAAO/D;AACT,EAAC"}},
    {"offset": {"line": 699, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-multipart/index.ts"],"sourcesContent":["import path from 'path'\n\nimport type { FetchAPIFileUploadOptions } from '../../config/types.js'\n\nimport { APIError } from '../../errors/APIError.js'\nimport { isEligibleRequest } from './isEligibleRequest.js'\nimport { processMultipart } from './processMultipart.js'\nimport { debugLog } from './utilities.js'\n\nconst DEFAULT_UPLOAD_OPTIONS: FetchAPIFileUploadOptions = {\n  abortOnLimit: false,\n  createParentPath: false,\n  debug: false,\n  defParamCharset: 'utf8',\n  limitHandler: false,\n  parseNested: false,\n  preserveExtension: false,\n  responseOnLimit: 'File size limit has been reached',\n  safeFileNames: false,\n  tempFileDir: path.join(process.cwd(), 'tmp'),\n  uploadTimeout: 60000,\n  uriDecodeFileNames: false,\n  useTempFiles: false,\n}\n\nexport type FileShape = {\n  data: Buffer\n  encoding: string\n  md5: Buffer | string\n  mimetype: string\n  mv: (filePath: string, callback: () => void) => Promise<void> | void\n  name: string\n  size: number\n  tempFilePath: string\n  truncated: boolean\n}\n\ntype FetchAPIFileUploadResponseFile = {\n  data: Buffer\n  mimetype: string\n  name: string\n  size: number\n  tempFilePath?: string\n}\n\nexport type FetchAPIFileUploadResponse = {\n  error?: APIError\n  fields: Record<string, string>\n  files: Record<string, FetchAPIFileUploadResponseFile>\n}\n\ntype FetchAPIFileUpload = (args: {\n  options?: FetchAPIFileUploadOptions\n  request: Request\n}) => Promise<FetchAPIFileUploadResponse>\n\nexport const processMultipartFormdata: FetchAPIFileUpload = async ({\n  options: incomingOptions,\n  request,\n}) => {\n  const options: FetchAPIFileUploadOptions = { ...DEFAULT_UPLOAD_OPTIONS, ...incomingOptions }\n\n  if (!isEligibleRequest(request)) {\n    debugLog(options, 'Request is not eligible for file upload!')\n\n    return {\n      error: new APIError('Request is not eligible for file upload', 500),\n      fields: undefined!,\n      files: undefined!,\n    }\n  } else {\n    return processMultipart({ options, request })\n  }\n}\n"],"names":["path","APIError","isEligibleRequest","processMultipart","debugLog","DEFAULT_UPLOAD_OPTIONS","abortOnLimit","createParentPath","debug","defParamCharset","limitHandler","parseNested","preserveExtension","responseOnLimit","safeFileNames","tempFileDir","join","process","cwd","uploadTimeout","uriDecodeFileNames","useTempFiles","processMultipartFormdata","options","incomingOptions","request","error","fields","undefined","files"],"mappings":";;;;AAAA,OAAOA,UAAU,OAAM;AAIvB,SAASC,QAAQ,QAAQ,2BAA0B;AACnD,SAASC,iBAAiB,QAAQ,yBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,wBAAuB;AACxD,SAASC,QAAQ,QAAQ,iBAAgB;;;;;;AAEzC,MAAMC,yBAAoD;IACxDC,cAAc;IACdC,kBAAkB;IAClBC,OAAO;IACPC,iBAAiB;IACjBC,cAAc;IACdC,aAAa;IACbC,mBAAmB;IACnBC,iBAAiB;IACjBC,eAAe;IACfC,aAAaf,4GAAAA,CAAKgB,IAAI,CAACC,QAAQC,GAAG,IAAI;IACtCC,eAAe;IACfC,oBAAoB;IACpBC,cAAc;AAChB;AAiCO,MAAMC,2BAA+C,OAAO,EACjEC,SAASC,eAAe,EACxBC,OAAO,EACR;IACC,MAAMF,UAAqC;QAAE,GAAGlB,sBAAsB;QAAE,GAAGmB,eAAe;IAAC;IAE3F,IAAI,KAACtB,+MAAAA,EAAkBuB,UAAU;YAC/BrB,8LAAAA,EAASmB,SAAS;QAElB,OAAO;YACLG,OAAO,IAAIzB,mKAAAA,CAAS,2CAA2C;YAC/D0B,QAAQC;YACRC,OAAOD;QACT;IACF,OAAO;QACL,WAAOzB,6MAAAA,EAAiB;YAAEoB;YAASE;QAAQ;IAC7C;AACF,EAAC"}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/addDataAndFileToRequest.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from '../errors/APIError.js'\nimport { processMultipartFormdata } from '../uploads/fetchAPI-multipart/index.js'\n\ntype AddDataAndFileToRequest = (req: PayloadRequest) => Promise<void>\n\n/**\n * Mutates the Request, appending 'data' and 'file' if found\n */\nexport const addDataAndFileToRequest: AddDataAndFileToRequest = async (req) => {\n  const { body, headers, method, payload } = req\n\n  if (method && ['PATCH', 'POST', 'PUT'].includes(method.toUpperCase()) && body) {\n    const [contentType] = (headers.get('Content-Type') || '').split(';', 1)\n    const bodyByteSize = parseInt(req.headers.get('Content-Length') || '0', 10)\n\n    if (contentType === 'application/json') {\n      let data = {}\n      try {\n        const text = await req.text?.()\n        data = text ? JSON.parse(text) : {}\n      } catch (error) {\n        req.payload.logger.error(error)\n      } finally {\n        req.data = data\n        // @ts-expect-error attach json method to request\n        req.json = () => Promise.resolve(data)\n      }\n    } else if (bodyByteSize && contentType?.includes('multipart/')) {\n      const { error, fields, files } = await processMultipartFormdata({\n        options: {\n          ...(payload.config.bodyParser || {}),\n          ...(payload.config.upload || {}),\n        },\n        request: req as Request,\n      })\n\n      if (error) {\n        throw new APIError(error.message)\n      }\n\n      if (files?.file) {\n        req.file = files.file\n      }\n\n      if (fields?._payload && typeof fields._payload === 'string') {\n        req.data = JSON.parse(fields._payload)\n      }\n\n      if (!req.file && fields?.file && typeof fields?.file === 'string') {\n        const { clientUploadContext, collectionSlug, filename, mimeType, size } = JSON.parse(\n          fields.file,\n        )\n        const uploadConfig = req.payload.collections[collectionSlug]!.config.upload\n\n        if (!uploadConfig.handlers) {\n          throw new APIError('uploadConfig.handlers is not present for ' + collectionSlug)\n        }\n\n        let response: null | Response = null\n        let error: unknown\n\n        for (const handler of uploadConfig.handlers) {\n          try {\n            const result = await handler(req, {\n              doc: null!,\n              params: {\n                clientUploadContext, // Pass additional specific to adapters context returned from UploadHandler, then staticHandler can use them.\n                collection: collectionSlug,\n                filename,\n              },\n            })\n            if (result) {\n              response = result\n            }\n            // If we couldn't get the file from that handler, save the error and try other.\n          } catch (err) {\n            error = err\n          }\n        }\n\n        if (!response) {\n          if (error) {\n            payload.logger.error(error)\n          }\n\n          throw new APIError('Expected response from the upload handler.')\n        }\n\n        req.file = {\n          name: filename,\n          clientUploadContext,\n          data: Buffer.from(await response.arrayBuffer()),\n          mimetype: response.headers.get('Content-Type') || mimeType,\n          size,\n        }\n      }\n    }\n  }\n}\n"],"names":["APIError","processMultipartFormdata","addDataAndFileToRequest","req","body","headers","method","payload","includes","toUpperCase","contentType","get","split","bodyByteSize","parseInt","data","text","JSON","parse","error","logger","json","Promise","resolve","fields","files","options","config","bodyParser","upload","request","message","file","_payload","clientUploadContext","collectionSlug","filename","mimeType","size","uploadConfig","collections","handlers","response","handler","result","doc","params","collection","err","name","Buffer","from","arrayBuffer","mimetype"],"mappings":"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"}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/addLocalesToRequest.ts"],"sourcesContent":["import type { SanitizedConfig } from '../config/types.js'\nimport type { TypedFallbackLocale } from '../index.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { sanitizeFallbackLocale } from './sanitizeFallbackLocale.js'\n\n/**\n * Mutates the Request to contain 'locale' and 'fallbackLocale' based on data or searchParams\n */\nexport function addLocalesToRequestFromData(req: PayloadRequest): void {\n  const {\n    data,\n    payload: { config },\n  } = req\n\n  if (data) {\n    const localeOnReq = req.locale\n    const fallbackLocaleOnReq = req.fallbackLocale\n    let localeFromData!: string\n    let fallbackLocaleFromData!: string | string[]\n\n    if (!localeOnReq && data?.locale && typeof data.locale === 'string') {\n      localeFromData = data.locale\n    }\n\n    if (!fallbackLocaleOnReq) {\n      if (data?.['fallback-locale'] && typeof data?.['fallback-locale'] === 'string') {\n        fallbackLocaleFromData = data['fallback-locale']\n      }\n\n      if (data?.['fallbackLocale'] && typeof data?.['fallbackLocale'] === 'string') {\n        fallbackLocaleFromData = data['fallbackLocale']\n      }\n    }\n\n    if (!localeOnReq || !fallbackLocaleOnReq) {\n      const { fallbackLocale, locale } = sanitizeLocales({\n        fallbackLocale: fallbackLocaleFromData,\n        locale: localeFromData,\n        localization: config.localization,\n      })\n\n      if (localeFromData) {\n        req.locale = locale\n      }\n\n      if (fallbackLocaleFromData) {\n        req.fallbackLocale = fallbackLocale\n      }\n    }\n  }\n}\n\ntype SanitizeLocalesArgs = {\n  fallbackLocale: TypedFallbackLocale\n  locale: string\n  localization: SanitizedConfig['localization']\n}\ntype SanitizeLocalesReturn = {\n  fallbackLocale?: TypedFallbackLocale\n  locale?: string\n}\nexport const sanitizeLocales = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: SanitizeLocalesArgs): SanitizeLocalesReturn => {\n  // Check if localization has fallback enabled or if a fallback locale is provided\n\n  if (localization) {\n    fallbackLocale = sanitizeFallbackLocale({\n      fallbackLocale,\n      locale,\n      localization,\n    })!\n  }\n\n  if (['*', 'all'].includes(locale)) {\n    locale = 'all'\n  } else if (localization && !localization.localeCodes.includes(locale) && localization.fallback) {\n    locale = localization.defaultLocale\n  }\n\n  return {\n    fallbackLocale,\n    locale,\n  }\n}\n"],"names":["sanitizeFallbackLocale","addLocalesToRequestFromData","req","data","payload","config","localeOnReq","locale","fallbackLocaleOnReq","fallbackLocale","localeFromData","fallbackLocaleFromData","sanitizeLocales","localization","includes","localeCodes","fallback","defaultLocale"],"mappings":";;;;;;AAIA,SAASA,sBAAsB,QAAQ,8BAA6B;;AAK7D,SAASC,4BAA4BC,GAAmB;IAC7D,MAAM,EACJC,IAAI,EACJC,SAAS,EAAEC,MAAM,EAAE,EACpB,GAAGH;IAEJ,IAAIC,MAAM;QACR,MAAMG,cAAcJ,IAAIK,MAAM;QAC9B,MAAMC,sBAAsBN,IAAIO,cAAc;QAC9C,IAAIC;QACJ,IAAIC;QAEJ,IAAI,CAACL,eAAeH,MAAMI,UAAU,OAAOJ,KAAKI,MAAM,KAAK,UAAU;YACnEG,iBAAiBP,KAAKI,MAAM;QAC9B;QAEA,IAAI,CAACC,qBAAqB;YACxB,IAAIL,MAAM,CAAC,kBAAkB,IAAI,OAAOA,MAAM,CAAC,kBAAkB,KAAK,UAAU;gBAC9EQ,yBAAyBR,IAAI,CAAC,kBAAkB;YAClD;YAEA,IAAIA,MAAM,CAAC,iBAAiB,IAAI,OAAOA,MAAM,CAAC,iBAAiB,KAAK,UAAU;gBAC5EQ,yBAAyBR,IAAI,CAAC,iBAAiB;YACjD;QACF;QAEA,IAAI,CAACG,eAAe,CAACE,qBAAqB;YACxC,MAAM,EAAEC,cAAc,EAAEF,MAAM,EAAE,GAAGK,gBAAgB;gBACjDH,gBAAgBE;gBAChBJ,QAAQG;gBACRG,cAAcR,OAAOQ,YAAY;YACnC;YAEA,IAAIH,gBAAgB;gBAClBR,IAAIK,MAAM,GAAGA;YACf;YAEA,IAAII,wBAAwB;gBAC1BT,IAAIO,cAAc,GAAGA;YACvB;QACF;IACF;AACF;AAWO,MAAMG,kBAAkB,CAAC,EAC9BH,cAAc,EACdF,MAAM,EACNM,YAAY,EACQ;IACpB,iFAAiF;IAEjF,IAAIA,cAAc;QAChBJ,qBAAiBT,kMAAAA,EAAuB;YACtCS;YACAF;YACAM;QACF;IACF;IAEA,IAAI;QAAC;QAAK;KAAM,CAACC,QAAQ,CAACP,SAAS;QACjCA,SAAS;IACX,OAAO,IAAIM,gBAAgB,CAACA,aAAaE,WAAW,CAACD,QAAQ,CAACP,WAAWM,aAAaG,QAAQ,EAAE;QAC9FT,SAASM,aAAaI,aAAa;IACrC;IAEA,OAAO;QACLR;QACAF;IACF;AACF,EAAC"}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/wrapInternalEndpoints.ts"],"sourcesContent":["import type { Endpoint } from '../config/types.js'\n\nimport { addDataAndFileToRequest } from './addDataAndFileToRequest.js'\nimport { addLocalesToRequestFromData } from './addLocalesToRequest.js'\n\nexport const wrapInternalEndpoints = (endpoints: Endpoint[]): Endpoint[] => {\n  return endpoints.map((endpoint) => {\n    const handler = endpoint.handler\n\n    if (['patch', 'post'].includes(endpoint.method)) {\n      endpoint.handler = async (req) => {\n        await addDataAndFileToRequest(req)\n        addLocalesToRequestFromData(req)\n        return handler(req)\n      }\n    }\n\n    return endpoint\n  })\n}\n"],"names":["addDataAndFileToRequest","addLocalesToRequestFromData","wrapInternalEndpoints","endpoints","map","endpoint","handler","includes","method","req"],"mappings":";;;;AAEA,SAASA,uBAAuB,QAAQ,+BAA8B;AACtE,SAASC,2BAA2B,QAAQ,2BAA0B;;;AAE/D,MAAMC,wBAAwB,CAACC;IACpC,OAAOA,UAAUC,GAAG,CAAC,CAACC;QACpB,MAAMC,UAAUD,SAASC,OAAO;QAEhC,IAAI;YAAC;YAAS;SAAO,CAACC,QAAQ,CAACF,SAASG,MAAM,GAAG;YAC/CH,SAASC,OAAO,GAAG,OAAOG;gBACxB,UAAMT,oMAAAA,EAAwBS;oBAC9BR,oMAAAA,EAA4BQ;gBAC5B,OAAOH,QAAQG;YACjB;QACF;QAEA,OAAOJ;IACT;AACF,EAAC"}},
    {"offset": {"line": 939, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/headersWithCors.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\ntype CorsArgs = {\n  headers: Headers\n  req: Partial<PayloadRequest>\n}\nexport const headersWithCors = ({ headers, req }: CorsArgs): Headers => {\n  const cors = req?.payload?.config.cors\n  const requestOrigin = req?.headers?.get('Origin')\n\n  if (cors) {\n    const defaultAllowedHeaders = [\n      'Origin',\n      'X-Requested-With',\n      'Content-Type',\n      'Accept',\n      'Authorization',\n      'Content-Encoding',\n      'x-apollo-tracing',\n      'X-Payload-HTTP-Method-Override',\n    ]\n\n    // Only set default CORS headers if they haven't been set by custom handler\n    if (!headers.has('Access-Control-Allow-Methods')) {\n      headers.set('Access-Control-Allow-Methods', 'PUT, PATCH, POST, GET, DELETE, OPTIONS')\n    }\n\n    if (!headers.has('Access-Control-Allow-Headers')) {\n      if (typeof cors === 'object' && 'headers' in cors) {\n        headers.set(\n          'Access-Control-Allow-Headers',\n          [...defaultAllowedHeaders, ...cors.headers].filter(Boolean).join(', '),\n        )\n      } else {\n        headers.set('Access-Control-Allow-Headers', defaultAllowedHeaders.join(', '))\n      }\n    }\n\n    if (!headers.has('Access-Control-Allow-Origin')) {\n      if (cors === '*' || (typeof cors === 'object' && 'origins' in cors && cors.origins === '*')) {\n        headers.set('Access-Control-Allow-Origin', '*')\n      } else if (\n        (Array.isArray(cors) && cors.indexOf(requestOrigin!) > -1) ||\n        (!Array.isArray(cors) &&\n          typeof cors === 'object' &&\n          'origins' in cors &&\n          cors.origins.indexOf(requestOrigin!) > -1)\n      ) {\n        headers.set('Access-Control-Allow-Credentials', 'true')\n        headers.set('Access-Control-Allow-Origin', requestOrigin!)\n      }\n    }\n  }\n\n  return headers\n}\n"],"names":["headersWithCors","headers","req","cors","payload","config","requestOrigin","get","defaultAllowedHeaders","has","set","filter","Boolean","join","origins","Array","isArray","indexOf"],"mappings":";;;;AAMO,MAAMA,kBAAkB,CAAC,EAAEC,OAAO,EAAEC,GAAG,EAAY;IACxD,MAAMC,OAAOD,KAAKE,SAASC,OAAOF;IAClC,MAAMG,gBAAgBJ,KAAKD,SAASM,IAAI;IAExC,IAAIJ,MAAM;QACR,MAAMK,wBAAwB;YAC5B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,2EAA2E;QAC3E,IAAI,CAACP,QAAQQ,GAAG,CAAC,iCAAiC;YAChDR,QAAQS,GAAG,CAAC,gCAAgC;QAC9C;QAEA,IAAI,CAACT,QAAQQ,GAAG,CAAC,iCAAiC;YAChD,IAAI,OAAON,SAAS,YAAY,aAAaA,MAAM;gBACjDF,QAAQS,GAAG,CACT,gCACA;uBAAIF;uBAA0BL,KAAKF,OAAO;iBAAC,CAACU,MAAM,CAACC,SAASC,IAAI,CAAC;YAErE,OAAO;gBACLZ,QAAQS,GAAG,CAAC,gCAAgCF,sBAAsBK,IAAI,CAAC;YACzE;QACF;QAEA,IAAI,CAACZ,QAAQQ,GAAG,CAAC,gCAAgC;YAC/C,IAAIN,SAAS,OAAQ,OAAOA,SAAS,YAAY,aAAaA,QAAQA,KAAKW,OAAO,KAAK,KAAM;gBAC3Fb,QAAQS,GAAG,CAAC,+BAA+B;YAC7C,OAAO,IACJK,MAAMC,OAAO,CAACb,SAASA,KAAKc,OAAO,CAACX,iBAAkB,CAAC,KACvD,CAACS,MAAMC,OAAO,CAACb,SACd,OAAOA,SAAS,YAChB,aAAaA,QACbA,KAAKW,OAAO,CAACG,OAAO,CAACX,iBAAkB,CAAC,GAC1C;gBACAL,QAAQS,GAAG,CAAC,oCAAoC;gBAChDT,QAAQS,GAAG,CAAC,+BAA+BJ;YAC7C;QACF;IACF;IAEA,OAAOL;AACT,EAAC"}},
    {"offset": {"line": 986, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/telemetry/events/adminInit.ts"],"sourcesContent":["import type { Payload } from '../../../index.js'\nimport type { PayloadRequest } from '../../../types/index.js'\n\nimport { sendEvent } from '../index.js'\nimport { oneWayHash } from '../oneWayHash.js'\n\nexport type AdminInitEvent = {\n  domainID?: string\n  type: 'admin-init'\n  userID?: string\n}\n\ntype Args = {\n  headers: Request['headers']\n  payload: Payload\n  user: PayloadRequest['user']\n}\nexport const adminInit = ({ headers, payload, user }: Args): void => {\n  const host = headers.get('host')\n\n  let domainID: string\n  let userID: string\n\n  if (host) {\n    domainID = oneWayHash(host, payload.secret)\n  }\n\n  if (user?.id) {\n    userID = oneWayHash(String(user.id), payload.secret)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  sendEvent({\n    event: {\n      type: 'admin-init',\n      domainID: domainID!,\n      userID: userID!,\n    },\n    payload,\n  })\n}\n"],"names":["sendEvent","oneWayHash","adminInit","headers","payload","user","host","get","domainID","userID","secret","id","String","event","type"],"mappings":";;;;AAGA,SAASA,SAAS,QAAQ,cAAa;AACvC,SAASC,UAAU,QAAQ,mBAAkB;;;AAatC,MAAMC,YAAY,CAAC,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAQ;IACxD,MAAMC,OAAOH,QAAQI,GAAG,CAAC;IAEzB,IAAIC;IACJ,IAAIC;IAEJ,IAAIH,MAAM;QACRE,eAAWP,uLAAAA,EAAWK,MAAMF,QAAQM,MAAM;IAC5C;IAEA,IAAIL,MAAMM,IAAI;QACZF,aAASR,uLAAAA,EAAWW,OAAOP,KAAKM,EAAE,GAAGP,QAAQM,MAAM;IACrD;IAEA,mEAAmE;QACnEV,iLAAAA,EAAU;QACRa,OAAO;YACLC,MAAM;YACNN,UAAUA;YACVC,QAAQA;QACV;QACAL;IACF;AACF,EAAC"}},
    {"offset": {"line": 1018, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/access.ts"],"sourcesContent":["import type { PayloadRequest } from '../../types/index.js'\nimport type { SanitizedPermissions } from '../types.js'\n\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { adminInit as adminInitTelemetry } from '../../utilities/telemetry/events/adminInit.js'\nimport { getAccessResults } from '../getAccessResults.js'\n\ntype Arguments = {\n  req: PayloadRequest\n}\n\nexport const accessOperation = async (args: Arguments): Promise<SanitizedPermissions> => {\n  const { req } = args\n\n  adminInitTelemetry(req)\n\n  try {\n    return getAccessResults({ req })\n  } catch (e: unknown) {\n    await killTransaction(req)\n    throw e\n  }\n}\n"],"names":["killTransaction","adminInit","adminInitTelemetry","getAccessResults","accessOperation","args","req","e"],"mappings":";;;;AAGA,SAASA,eAAe,QAAQ,qCAAoC;AACpE,SAASC,aAAaC,kBAAkB,QAAQ,gDAA+C;AAC/F,SAASC,gBAAgB,QAAQ,yBAAwB;;;;AAMlD,MAAMC,kBAAkB,OAAOC;IACpC,MAAM,EAAEC,GAAG,EAAE,GAAGD;QAEhBH,+LAAAA,EAAmBI;IAEnB,IAAI;QACF,WAAOH,iLAAAA,EAAiB;YAAEG;QAAI;IAChC,EAAE,OAAOC,GAAY;QACnB,UAAMP,oLAAAA,EAAgBM;QACtB,MAAMC;IACR;AACF,EAAC"}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/access.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { accessOperation } from '../operations/access.js'\n\nexport const accessHandler: PayloadHandler = async (req) => {\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  try {\n    const results = await accessOperation({\n      req,\n    })\n\n    return Response.json(results, {\n      headers,\n      status: httpStatus.OK,\n    })\n  } catch (e: unknown) {\n    return Response.json(\n      {\n        error: e,\n      },\n      {\n        headers,\n        status: httpStatus.INTERNAL_SERVER_ERROR,\n      },\n    )\n  }\n}\n"],"names":["status","httpStatus","headersWithCors","accessOperation","accessHandler","req","headers","Headers","results","Response","json","OK","e","error","INTERNAL_SERVER_ERROR"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,0BAAyB;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,cAAUJ,oLAAAA,EAAgB;QAC9BI,SAAS,IAAIC;QACbF;IACF;IAEA,IAAI;QACF,MAAMG,UAAU,UAAML,oLAAAA,EAAgB;YACpCE;QACF;QAEA,OAAOI,SAASC,IAAI,CAACF,SAAS;YAC5BF;YACAN,QAAQC,sMAAAA,CAAWU,EAAE;QACvB;IACF,EAAE,OAAOC,GAAY;QACnB,OAAOH,SAASC,IAAI,CAClB;YACEG,OAAOD;QACT,GACA;YACEN;YACAN,QAAQC,sMAAAA,CAAWa,qBAAqB;QAC1C;IAEJ;AACF,EAAC"}},
    {"offset": {"line": 1081, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/getRequestEntity.ts"],"sourcesContent":["import type { Collection } from '../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from '../errors/APIError.js'\n\nexport const getRequestCollection = (req: PayloadRequest): Collection => {\n  const collectionSlug = req.routeParams?.collection\n\n  if (typeof collectionSlug !== 'string') {\n    throw new APIError(`No collection was specified`, 400)\n  }\n\n  const collection = req.payload.collections[collectionSlug]\n\n  if (!collection) {\n    throw new APIError(`Collection with the slug ${collectionSlug} was not found`, 404)\n  }\n\n  return collection\n}\n\nexport const getRequestCollectionWithID = <T extends boolean>(\n  req: PayloadRequest,\n  {\n    disableSanitize,\n    optionalID,\n  }: {\n    disableSanitize?: T\n    optionalID?: boolean\n  } = {},\n): {\n  collection: Collection\n  id: T extends true ? string : number | string\n} => {\n  const collection = getRequestCollection(req)\n  const id = req.routeParams?.id\n\n  if (typeof id !== 'string') {\n    if (optionalID) {\n      return {\n        id: undefined!,\n        collection,\n      }\n    }\n\n    throw new APIError(`ID was not specified`, 400)\n  }\n\n  if (disableSanitize === true) {\n    return {\n      id,\n      collection,\n    }\n  }\n\n  let sanitizedID: number | string = id\n\n  // If default db ID type is a number, we should sanitize\n  let shouldSanitize = Boolean(req.payload.db.defaultIDType === 'number')\n\n  // UNLESS the customIDType for this collection is text.... then we leave it\n  if (shouldSanitize && collection.customIDType === 'text') {\n    shouldSanitize = false\n  }\n\n  // If we still should sanitize, parse float\n  if (shouldSanitize) {\n    sanitizedID = parseFloat(sanitizedID)\n  }\n\n  return {\n    // @ts-expect-error generic return\n    id: sanitizedID,\n    collection,\n  }\n}\n\nexport const getRequestGlobal = (req: PayloadRequest): SanitizedGlobalConfig => {\n  const globalSlug = req.routeParams?.global\n\n  if (typeof globalSlug !== 'string') {\n    throw new APIError(`No global was specified`, 400)\n  }\n\n  const globalConfig = req.payload.globals.config.find((each) => each.slug === globalSlug)\n\n  if (!globalConfig) {\n    throw new APIError(`Global with the slug ${globalSlug} was not found`, 404)\n  }\n\n  return globalConfig\n}\n"],"names":["APIError","getRequestCollection","req","collectionSlug","routeParams","collection","payload","collections","getRequestCollectionWithID","disableSanitize","optionalID","id","undefined","sanitizedID","shouldSanitize","Boolean","db","defaultIDType","customIDType","parseFloat","getRequestGlobal","globalSlug","global","globalConfig","globals","config","find","each","slug"],"mappings":";;;;;;;;AAIA,SAASA,QAAQ,QAAQ,wBAAuB;;AAEzC,MAAMC,uBAAuB,CAACC;IACnC,MAAMC,iBAAiBD,IAAIE,WAAW,EAAEC;IAExC,IAAI,OAAOF,mBAAmB,UAAU;QACtC,MAAM,IAAIH,mKAAAA,CAAS,CAAC,2BAA2B,CAAC,EAAE;IACpD;IAEA,MAAMK,aAAaH,IAAII,OAAO,CAACC,WAAW,CAACJ,eAAe;IAE1D,IAAI,CAACE,YAAY;QACf,MAAM,IAAIL,mKAAAA,CAAS,CAAC,yBAAyB,EAAEG,eAAe,cAAc,CAAC,EAAE;IACjF;IAEA,OAAOE;AACT,EAAC;AAEM,MAAMG,6BAA6B,CACxCN,KACA,EACEO,eAAe,EACfC,UAAU,EAIX,GAAG,CAAC,CAAC;IAKN,MAAML,aAAaJ,qBAAqBC;IACxC,MAAMS,KAAKT,IAAIE,WAAW,EAAEO;IAE5B,IAAI,OAAOA,OAAO,UAAU;QAC1B,IAAID,YAAY;YACd,OAAO;gBACLC,IAAIC;gBACJP;YACF;QACF;QAEA,MAAM,IAAIL,mKAAAA,CAAS,CAAC,oBAAoB,CAAC,EAAE;IAC7C;IAEA,IAAIS,oBAAoB,MAAM;QAC5B,OAAO;YACLE;YACAN;QACF;IACF;IAEA,IAAIQ,cAA+BF;IAEnC,wDAAwD;IACxD,IAAIG,iBAAiBC,QAAQb,IAAII,OAAO,CAACU,EAAE,CAACC,aAAa,KAAK;IAE9D,2EAA2E;IAC3E,IAAIH,kBAAkBT,WAAWa,YAAY,KAAK,QAAQ;QACxDJ,iBAAiB;IACnB;IAEA,2CAA2C;IAC3C,IAAIA,gBAAgB;QAClBD,cAAcM,WAAWN;IAC3B;IAEA,OAAO;QACL,kCAAkC;QAClCF,IAAIE;QACJR;IACF;AACF,EAAC;AAEM,MAAMe,mBAAmB,CAAClB;IAC/B,MAAMmB,aAAanB,IAAIE,WAAW,EAAEkB;IAEpC,IAAI,OAAOD,eAAe,UAAU;QAClC,MAAM,IAAIrB,mKAAAA,CAAS,CAAC,uBAAuB,CAAC,EAAE;IAChD;IAEA,MAAMuB,eAAerB,IAAII,OAAO,CAACkB,OAAO,CAACC,MAAM,CAACC,IAAI,CAAC,CAACC,OAASA,KAAKC,IAAI,KAAKP;IAE7E,IAAI,CAACE,cAAc;QACjB,MAAM,IAAIvB,mKAAAA,CAAS,CAAC,qBAAqB,EAAEqB,WAAW,cAAc,CAAC,EAAE;IACzE;IAEA,OAAOE;AACT,EAAC"}},
    {"offset": {"line": 1152, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/forgotPassword.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { forgotPasswordOperation } from '../operations/forgotPassword.js'\n\nexport const forgotPasswordHandler: PayloadHandler = async (req) => {\n  const { t } = req\n\n  const collection = getRequestCollection(req)\n\n  const authData = collection.config.auth?.loginWithUsername\n    ? {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        username: typeof req.data?.username === 'string' ? req.data.username : '',\n      }\n    : {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n      }\n\n  await forgotPasswordOperation({\n    collection,\n    data: authData,\n    disableEmail: Boolean(req.data?.disableEmail),\n    expiration: typeof req.data?.expiration === 'number' ? req.data.expiration : undefined,\n    req,\n  })\n\n  return Response.json(\n    {\n      message: t('general:success'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","forgotPasswordOperation","forgotPasswordHandler","req","t","collection","authData","config","auth","loginWithUsername","email","data","username","disableEmail","Boolean","expiration","undefined","Response","json","message","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,uBAAuB,QAAQ,kCAAiC;;;;;AAElE,MAAMC,wBAAwC,OAAOC;IAC1D,MAAM,EAAEC,CAAC,EAAE,GAAGD;IAEd,MAAME,iBAAaN,0LAAAA,EAAqBI;IAExC,MAAMG,WAAWD,WAAWE,MAAM,CAACC,IAAI,EAAEC,oBACrC;QACEC,OAAO,OAAOP,IAAIQ,IAAI,EAAED,UAAU,WAAWP,IAAIQ,IAAI,CAACD,KAAK,GAAG;QAC9DE,UAAU,OAAOT,IAAIQ,IAAI,EAAEC,aAAa,WAAWT,IAAIQ,IAAI,CAACC,QAAQ,GAAG;IACzE,IACA;QACEF,OAAO,OAAOP,IAAIQ,IAAI,EAAED,UAAU,WAAWP,IAAIQ,IAAI,CAACD,KAAK,GAAG;IAChE;IAEJ,UAAMT,oMAAAA,EAAwB;QAC5BI;QACAM,MAAML;QACNO,cAAcC,QAAQX,IAAIQ,IAAI,EAAEE;QAChCE,YAAY,OAAOZ,IAAIQ,IAAI,EAAEI,eAAe,WAAWZ,IAAIQ,IAAI,CAACI,UAAU,GAAGC;QAC7Eb;IACF;IAEA,OAAOc,SAASC,IAAI,CAClB;QACEC,SAASf,EAAE;IACb,GACA;QACEgB,aAASpB,oLAAAA,EAAgB;YACvBoB,SAAS,IAAIC;YACblB;QACF;QACAN,QAAQC,sMAAAA,CAAWwB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 1195, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/init.ts"],"sourcesContent":["import type { PayloadRequest, Where } from '../../types/index.js'\n\nimport { appendNonTrashedFilter } from '../../utilities/appendNonTrashedFilter.js'\n\nexport const initOperation = async (args: {\n  collection: string\n  req: PayloadRequest\n}): Promise<boolean> => {\n  const { collection: slug, req } = args\n\n  const collectionConfig = req.payload.config.collections?.find((c) => c.slug === slug)\n\n  // Exclude trashed documents unless `trash: true`\n  const where: Where = appendNonTrashedFilter({\n    enableTrash: Boolean(collectionConfig?.trash),\n    trash: false,\n    where: {},\n  })\n\n  const doc = await req.payload.db.findOne({\n    collection: slug,\n    req,\n    where,\n  })\n\n  return !!doc\n}\n"],"names":["appendNonTrashedFilter","initOperation","args","collection","slug","req","collectionConfig","payload","config","collections","find","c","where","enableTrash","Boolean","trash","doc","db","findOne"],"mappings":";;;;AAEA,SAASA,sBAAsB,QAAQ,4CAA2C;;AAE3E,MAAMC,gBAAgB,OAAOC;IAIlC,MAAM,EAAEC,YAAYC,IAAI,EAAEC,GAAG,EAAE,GAAGH;IAElC,MAAMI,mBAAmBD,IAAIE,OAAO,CAACC,MAAM,CAACC,WAAW,EAAEC,KAAK,CAACC,IAAMA,EAAEP,IAAI,KAAKA;IAEhF,iDAAiD;IACjD,MAAMQ,YAAeZ,kMAAAA,EAAuB;QAC1Ca,aAAaC,QAAQR,kBAAkBS;QACvCA,OAAO;QACPH,OAAO,CAAC;IACV;IAEA,MAAMI,MAAM,MAAMX,IAAIE,OAAO,CAACU,EAAE,CAACC,OAAO,CAAC;QACvCf,YAAYC;QACZC;QACAO;IACF;IAEA,OAAO,CAAC,CAACI;AACX,EAAC"}},
    {"offset": {"line": 1221, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/init.ts"],"sourcesContent":["import type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { initOperation } from '../operations/init.js'\n\nexport const initHandler: PayloadHandler = async (req) => {\n  const initialized = await initOperation({\n    collection: getRequestCollection(req).config.slug,\n    req,\n  })\n\n  return Response.json(\n    { initialized },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n    },\n  )\n}\n"],"names":["getRequestCollection","headersWithCors","initOperation","initHandler","req","initialized","collection","config","slug","Response","json","headers","Headers"],"mappings":";;;;AAEA,SAASA,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,aAAa,QAAQ,wBAAuB;;;;AAE9C,MAAMC,cAA8B,OAAOC;IAChD,MAAMC,cAAc,UAAMH,gLAAAA,EAAc;QACtCI,gBAAYN,0LAAAA,EAAqBI,KAAKG,MAAM,CAACC,IAAI;QACjDJ;IACF;IAEA,OAAOK,SAASC,IAAI,CAClB;QAAEL;IAAY,GACd;QACEM,aAASV,oLAAAA,EAAgB;YACvBU,SAAS,IAAIC;YACbR;QACF;IACF;AAEJ,EAAC"}},
    {"offset": {"line": 1249, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/cookies.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from './../collections/config/types.js'\n\ntype CookieOptions = {\n  domain?: string\n  expires?: Date\n  httpOnly?: boolean\n  maxAge?: number\n  name: string\n  path?: string\n  returnCookieAsObject: boolean\n  sameSite?: 'Lax' | 'None' | 'Strict'\n  secure?: boolean\n  value?: string\n}\n\ntype CookieObject = {\n  domain?: string\n  expires?: string\n  httpOnly?: boolean\n  maxAge?: number\n  name: string\n  path?: string\n  sameSite?: 'Lax' | 'None' | 'Strict'\n  secure?: boolean\n  value: string | undefined\n}\n\nexport const generateCookie = <ReturnCookieAsObject = boolean>(\n  args: CookieOptions,\n): ReturnCookieAsObject extends true ? CookieObject : string => {\n  const {\n    name,\n    domain,\n    expires,\n    httpOnly,\n    maxAge,\n    path,\n    returnCookieAsObject,\n    sameSite,\n    secure: secureArg,\n    value,\n  } = args\n\n  let cookieString = `${name}=${value || ''}`\n  const cookieObject: CookieObject = {\n    name,\n    value,\n  }\n\n  const secure = secureArg || sameSite === 'None'\n\n  if (expires) {\n    if (returnCookieAsObject) {\n      cookieObject.expires = expires.toUTCString()\n    } else {\n      cookieString += `; Expires=${expires.toUTCString()}`\n    }\n  }\n\n  if (maxAge) {\n    if (returnCookieAsObject) {\n      cookieObject.maxAge = maxAge\n    } else {\n      cookieString += `; Max-Age=${maxAge.toString()}`\n    }\n  }\n\n  if (domain) {\n    if (returnCookieAsObject) {\n      cookieObject.domain = domain\n    } else {\n      cookieString += `; Domain=${domain}`\n    }\n  }\n\n  if (path) {\n    if (returnCookieAsObject) {\n      cookieObject.path = path\n    } else {\n      cookieString += `; Path=${path}`\n    }\n  }\n\n  if (secure) {\n    if (returnCookieAsObject) {\n      cookieObject.secure = secure\n    } else {\n      cookieString += `; Secure=${secure}`\n    }\n  }\n\n  if (httpOnly) {\n    if (returnCookieAsObject) {\n      cookieObject.httpOnly = httpOnly\n    } else {\n      cookieString += `; HttpOnly=${httpOnly}`\n    }\n  }\n\n  if (sameSite) {\n    if (returnCookieAsObject) {\n      cookieObject.sameSite = sameSite\n    } else {\n      cookieString += `; SameSite=${sameSite}`\n    }\n  }\n\n  return (returnCookieAsObject ? cookieObject : cookieString) as ReturnCookieAsObject extends true\n    ? CookieObject\n    : string\n}\ntype GetCookieExpirationArgs = {\n  /*\n    The number of seconds until the cookie expires\n    @default 7200 seconds (2 hours)\n  */\n  seconds: number\n}\nexport const getCookieExpiration = ({ seconds = 7200 }: GetCookieExpirationArgs) => {\n  const currentTime = new Date()\n  currentTime.setSeconds(currentTime.getSeconds() + seconds)\n  return currentTime\n}\n\ntype GeneratePayloadCookieArgs = {\n  /* The auth collection config */\n  collectionAuthConfig: SanitizedCollectionConfig['auth']\n  /* Prefix to scope the cookie */\n  cookiePrefix: string\n  /* The returnAs value */\n  returnCookieAsObject?: boolean\n  /* The token to be stored in the cookie */\n  token: string\n}\nexport const generatePayloadCookie = <T extends GeneratePayloadCookieArgs>({\n  collectionAuthConfig,\n  cookiePrefix,\n  returnCookieAsObject = false,\n  token,\n}: T): T['returnCookieAsObject'] extends true ? CookieObject : string => {\n  const sameSite =\n    typeof collectionAuthConfig.cookies.sameSite === 'string'\n      ? collectionAuthConfig.cookies.sameSite\n      : collectionAuthConfig.cookies.sameSite\n        ? 'Strict'\n        : undefined\n\n  return generateCookie<T['returnCookieAsObject']>({\n    name: `${cookiePrefix}-token`,\n    domain: collectionAuthConfig.cookies.domain ?? undefined,\n    expires: getCookieExpiration({ seconds: collectionAuthConfig.tokenExpiration }),\n    httpOnly: true,\n    path: '/',\n    returnCookieAsObject,\n    sameSite,\n    secure: collectionAuthConfig.cookies.secure,\n    value: token,\n  })\n}\n\nexport const generateExpiredPayloadCookie = <T extends Omit<GeneratePayloadCookieArgs, 'token'>>({\n  collectionAuthConfig,\n  cookiePrefix,\n  returnCookieAsObject = false,\n}: T): T['returnCookieAsObject'] extends true ? CookieObject : string => {\n  const sameSite =\n    typeof collectionAuthConfig.cookies.sameSite === 'string'\n      ? collectionAuthConfig.cookies.sameSite\n      : collectionAuthConfig.cookies.sameSite\n        ? 'Strict'\n        : undefined\n\n  const expires = new Date(Date.now() - 1000)\n\n  return generateCookie<T['returnCookieAsObject']>({\n    name: `${cookiePrefix}-token`,\n    domain: collectionAuthConfig.cookies.domain ?? undefined,\n    expires,\n    httpOnly: true,\n    path: '/',\n    returnCookieAsObject,\n    sameSite,\n    secure: collectionAuthConfig.cookies.secure,\n  })\n}\n\nexport function parseCookies(headers: Request['headers']) {\n  // Taken from https://github.com/vercel/edge-runtime/blob/main/packages/cookies/src/serialize.ts\n\n  /*\n  The MIT License (MIT)\n\n  Copyright (c) 2024 Vercel, Inc.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n  */\n  const map = new Map<string, string>()\n\n  const cookie = headers.get('Cookie')\n\n  if (!cookie) {\n    return map\n  }\n\n  for (const pair of cookie.split(/; */)) {\n    if (!pair) {\n      continue\n    }\n\n    const splitAt = pair.indexOf('=')\n\n    // If the attribute doesn't have a value, set it to 'true'.\n    if (splitAt === -1) {\n      map.set(pair, 'true')\n      continue\n    }\n\n    // Otherwise split it into key and value and trim the whitespace on the\n    // value.\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)]\n    try {\n      map.set(key, decodeURIComponent(value ?? 'true'))\n    } catch {\n      // ignore invalid encoded values\n    }\n  }\n\n  return map\n}\n"],"names":["generateCookie","args","name","domain","expires","httpOnly","maxAge","path","returnCookieAsObject","sameSite","secure","secureArg","value","cookieString","cookieObject","toUTCString","toString","getCookieExpiration","seconds","currentTime","Date","setSeconds","getSeconds","generatePayloadCookie","collectionAuthConfig","cookiePrefix","token","cookies","undefined","tokenExpiration","generateExpiredPayloadCookie","now","parseCookies","headers","map","Map","cookie","get","pair","split","splitAt","indexOf","set","key","slice","decodeURIComponent"],"mappings":"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"}},
    {"offset": {"line": 1400, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/login.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { generatePayloadCookie } from '../cookies.js'\nimport { loginOperation } from '../operations/login.js'\n\nexport const loginHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { searchParams, t } = req\n  const depth = searchParams.get('depth')\n  const authData =\n    collection.config.auth?.loginWithUsername !== false\n      ? {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          password: typeof req.data?.password === 'string' ? req.data.password : '',\n          username: typeof req.data?.username === 'string' ? req.data.username : '',\n        }\n      : {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          password: typeof req.data?.password === 'string' ? req.data.password : '',\n        }\n\n  const result = await loginOperation({\n    collection,\n    data: authData,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token!,\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:passed'),\n      ...result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","isNumber","generatePayloadCookie","loginOperation","loginHandler","req","collection","searchParams","t","depth","get","authData","config","auth","loginWithUsername","email","data","password","username","result","Number","undefined","cookie","collectionAuthConfig","cookiePrefix","payload","token","removeTokenFromResponses","Response","json","message","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,qBAAqB,QAAQ,gBAAe;AACrD,SAASC,cAAc,QAAQ,yBAAwB;;;;;;;AAEhD,MAAMC,eAA+B,OAAOC;IACjD,MAAMC,iBAAaP,0LAAAA,EAAqBM;IACxC,MAAM,EAAEE,YAAY,EAAEC,CAAC,EAAE,GAAGH;IAC5B,MAAMI,QAAQF,aAAaG,GAAG,CAAC;IAC/B,MAAMC,WACJL,WAAWM,MAAM,CAACC,IAAI,EAAEC,sBAAsB,QAC1C;QACEC,OAAO,OAAOV,IAAIW,IAAI,EAAED,UAAU,WAAWV,IAAIW,IAAI,CAACD,KAAK,GAAG;QAC9DE,UAAU,OAAOZ,IAAIW,IAAI,EAAEC,aAAa,WAAWZ,IAAIW,IAAI,CAACC,QAAQ,GAAG;QACvEC,UAAU,OAAOb,IAAIW,IAAI,EAAEE,aAAa,WAAWb,IAAIW,IAAI,CAACE,QAAQ,GAAG;IACzE,IACA;QACEH,OAAO,OAAOV,IAAIW,IAAI,EAAED,UAAU,WAAWV,IAAIW,IAAI,CAACD,KAAK,GAAG;QAC9DE,UAAU,OAAOZ,IAAIW,IAAI,EAAEC,aAAa,WAAWZ,IAAIW,IAAI,CAACC,QAAQ,GAAG;IACzE;IAEN,MAAME,SAAS,UAAMhB,kLAAAA,EAAe;QAClCG;QACAU,MAAML;QACNF,WAAOR,sKAAAA,EAASQ,SAASW,OAAOX,SAASY;QACzChB;IACF;IAEA,MAAMiB,aAASpB,6KAAAA,EAAsB;QACnCqB,sBAAsBjB,WAAWM,MAAM,CAACC,IAAI;QAC5CW,cAAcnB,IAAIoB,OAAO,CAACb,MAAM,CAACY,YAAY;QAC7CE,OAAOP,OAAOO,KAAK;IACrB;IAEA,IAAIpB,WAAWM,MAAM,CAACC,IAAI,CAACc,wBAAwB,EAAE;QACnD,OAAOR,OAAOO,KAAK;IACrB;IAEA,OAAOE,SAASC,IAAI,CAClB;QACEC,SAAStB,EAAE;QACX,GAAGW,MAAM;IACX,GACA;QACEY,aAAS/B,oLAAAA,EAAgB;YACvB+B,SAAS,IAAIC,QAAQ;gBACnB,cAAcV;YAChB;YACAjB;QACF;QACAR,QAAQC,sMAAAA,CAAWmC,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 1460, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/logout.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { Collection } from '../../collections/config/types.js'\nimport type { PayloadRequest } from '../../types/index.js'\n\nimport { APIError } from '../../errors/index.js'\nimport { appendNonTrashedFilter } from '../../utilities/appendNonTrashedFilter.js'\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\n\nexport type Arguments = {\n  allSessions?: boolean\n  collection: Collection\n  req: PayloadRequest\n}\n\nexport const logoutOperation = async (incomingArgs: Arguments): Promise<boolean> => {\n  let args = incomingArgs\n  const {\n    allSessions,\n    collection: { config: collectionConfig },\n    req: { user },\n    req,\n  } = incomingArgs\n\n  if (!user) {\n    throw new APIError('No User', httpStatus.BAD_REQUEST)\n  }\n  if (user.collection !== collectionConfig.slug) {\n    throw new APIError('Incorrect collection', httpStatus.FORBIDDEN)\n  }\n\n  const shouldCommit = await initTransaction(req)\n\n  try {\n    if (collectionConfig.hooks?.afterLogout?.length) {\n      for (const hook of collectionConfig.hooks.afterLogout) {\n        args =\n          (await hook({\n            collection: args.collection?.config,\n            context: req.context,\n            req,\n          })) || args\n      }\n    }\n\n    if (collectionConfig.auth.disableLocalStrategy !== true && collectionConfig.auth.useSessions) {\n      const where = appendNonTrashedFilter({\n        enableTrash: Boolean(collectionConfig.trash),\n        trash: false,\n        where: {\n          id: {\n            equals: user.id,\n          },\n        },\n      })\n\n      const userWithSessions = await req.payload.db.findOne<{\n        id: number | string\n        sessions: { id: string }[]\n      }>({\n        collection: collectionConfig.slug,\n        req,\n        where,\n      })\n\n      if (!userWithSessions) {\n        throw new APIError('No User', httpStatus.BAD_REQUEST)\n      }\n\n      if (allSessions) {\n        userWithSessions.sessions = []\n      } else {\n        const sessionsAfterLogout = (userWithSessions?.sessions || []).filter(\n          (s) => s.id !== req?.user?._sid,\n        )\n\n        userWithSessions.sessions = sessionsAfterLogout\n      }\n\n      // Prevent updatedAt from being updated when only removing a session\n      ;(userWithSessions as any).updatedAt = null\n\n      await req.payload.db.updateOne({\n        id: user.id,\n        collection: collectionConfig.slug,\n        data: userWithSessions,\n        req,\n        returning: false,\n      })\n    }\n\n    if (shouldCommit) {\n      await commitTransaction(req)\n    }\n\n    return true\n  } catch (error: unknown) {\n    await killTransaction(req)\n    throw error\n  }\n}\n"],"names":["status","httpStatus","APIError","appendNonTrashedFilter","commitTransaction","initTransaction","killTransaction","logoutOperation","incomingArgs","args","allSessions","collection","config","collectionConfig","req","user","BAD_REQUEST","slug","FORBIDDEN","shouldCommit","hooks","afterLogout","length","hook","context","auth","disableLocalStrategy","useSessions","where","enableTrash","Boolean","trash","id","equals","userWithSessions","payload","db","findOne","sessions","sessionsAfterLogout","filter","s","_sid","updatedAt","updateOne","data","returning","error"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,sBAAsB,QAAQ,4CAA2C;AAClF,SAASC,iBAAiB,QAAQ,uCAAsC;AACxE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,qCAAoC;;;;;;;AAQ7D,MAAMC,kBAAkB,OAAOC;IACpC,IAAIC,OAAOD;IACX,MAAM,EACJE,WAAW,EACXC,YAAY,EAAEC,QAAQC,gBAAgB,EAAE,EACxCC,KAAK,EAAEC,IAAI,EAAE,EACbD,GAAG,EACJ,GAAGN;IAEJ,IAAI,CAACO,MAAM;QACT,MAAM,IAAIb,mKAAAA,CAAS,WAAWD,sMAAAA,CAAWe,WAAW;IACtD;IACA,IAAID,KAAKJ,UAAU,KAAKE,iBAAiBI,IAAI,EAAE;QAC7C,MAAM,IAAIf,mKAAAA,CAAS,wBAAwBD,sMAAAA,CAAWiB,SAAS;IACjE;IAEA,MAAMC,eAAe,UAAMd,oLAAAA,EAAgBS;IAE3C,IAAI;QACF,IAAID,iBAAiBO,KAAK,EAAEC,aAAaC,QAAQ;YAC/C,KAAK,MAAMC,QAAQV,iBAAiBO,KAAK,CAACC,WAAW,CAAE;gBACrDZ,OACG,MAAMc,KAAK;oBACVZ,YAAYF,KAAKE,UAAU,EAAEC;oBAC7BY,SAASV,IAAIU,OAAO;oBACpBV;gBACF,MAAOL;YACX;QACF;QAEA,IAAII,iBAAiBY,IAAI,CAACC,oBAAoB,KAAK,QAAQb,iBAAiBY,IAAI,CAACE,WAAW,EAAE;YAC5F,MAAMC,YAAQzB,kMAAAA,EAAuB;gBACnC0B,aAAaC,QAAQjB,iBAAiBkB,KAAK;gBAC3CA,OAAO;gBACPH,OAAO;oBACLI,IAAI;wBACFC,QAAQlB,KAAKiB,EAAE;oBACjB;gBACF;YACF;YAEA,MAAME,mBAAmB,MAAMpB,IAAIqB,OAAO,CAACC,EAAE,CAACC,OAAO,CAGlD;gBACD1B,YAAYE,iBAAiBI,IAAI;gBACjCH;gBACAc;YACF;YAEA,IAAI,CAACM,kBAAkB;gBACrB,MAAM,IAAIhC,mKAAAA,CAAS,WAAWD,sMAAAA,CAAWe,WAAW;YACtD;YAEA,IAAIN,aAAa;gBACfwB,iBAAiBI,QAAQ,GAAG,EAAE;YAChC,OAAO;gBACL,MAAMC,sBAAuBL,CAAAA,kBAAkBI,YAAY,EAAC,EAAGE,MAAM,CACnE,CAACC,IAAMA,EAAET,EAAE,KAAKlB,KAAKC,MAAM2B;gBAG7BR,iBAAiBI,QAAQ,GAAGC;YAC9B;YAEA,oEAAoE;;YAClEL,iBAAyBS,SAAS,GAAG;YAEvC,MAAM7B,IAAIqB,OAAO,CAACC,EAAE,CAACQ,SAAS,CAAC;gBAC7BZ,IAAIjB,KAAKiB,EAAE;gBACXrB,YAAYE,iBAAiBI,IAAI;gBACjC4B,MAAMX;gBACNpB;gBACAgC,WAAW;YACb;QACF;QAEA,IAAI3B,cAAc;YAChB,UAAMf,wLAAAA,EAAkBU;QAC1B;QAEA,OAAO;IACT,EAAE,OAAOiC,OAAgB;QACvB,UAAMzC,oLAAAA,EAAgBQ;QACtB,MAAMiC;IACR;AACF,EAAC"}},
    {"offset": {"line": 1545, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/logout.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { generateExpiredPayloadCookie } from '../cookies.js'\nimport { logoutOperation } from '../operations/logout.js'\n\nexport const logoutHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { searchParams, t } = req\n\n  const result = await logoutOperation({\n    allSessions: searchParams.get('allSessions') === 'true',\n    collection,\n    req,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (!result) {\n    return Response.json(\n      {\n        message: t('error:logoutFailed'),\n      },\n      {\n        headers,\n        status: httpStatus.BAD_REQUEST,\n      },\n    )\n  }\n\n  const expiredCookie = generateExpiredPayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    config: req.payload.config,\n    cookiePrefix: req.payload.config.cookiePrefix,\n  })\n\n  headers.set('Set-Cookie', expiredCookie)\n\n  return Response.json(\n    {\n      message: t('authentication:logoutSuccessful'),\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","generateExpiredPayloadCookie","logoutOperation","logoutHandler","req","collection","searchParams","t","result","allSessions","get","headers","Headers","Response","json","message","BAD_REQUEST","expiredCookie","collectionAuthConfig","config","auth","payload","cookiePrefix","set","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,4BAA4B,QAAQ,gBAAe;AAC5D,SAASC,eAAe,QAAQ,0BAAyB;;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IACxC,MAAM,EAAEE,YAAY,EAAEC,CAAC,EAAE,GAAGH;IAE5B,MAAMI,SAAS,UAAMN,oLAAAA,EAAgB;QACnCO,aAAaH,aAAaI,GAAG,CAAC,mBAAmB;QACjDL;QACAD;IACF;IAEA,MAAMO,cAAUX,oLAAAA,EAAgB;QAC9BW,SAAS,IAAIC;QACbR;IACF;IAEA,IAAI,CAACI,QAAQ;QACX,OAAOK,SAASC,IAAI,CAClB;YACEC,SAASR,EAAE;QACb,GACA;YACEI;YACAd,QAAQC,sMAAAA,CAAWkB,WAAW;QAChC;IAEJ;IAEA,MAAMC,oBAAgBhB,oLAAAA,EAA6B;QACjDiB,sBAAsBb,WAAWc,MAAM,CAACC,IAAI;QAC5CD,QAAQf,IAAIiB,OAAO,CAACF,MAAM;QAC1BG,cAAclB,IAAIiB,OAAO,CAACF,MAAM,CAACG,YAAY;IAC/C;IAEAX,QAAQY,GAAG,CAAC,cAAcN;IAE1B,OAAOJ,SAASC,IAAI,CAClB;QACEC,SAASR,EAAE;IACb,GACA;QACEI;QACAd,QAAQC,sMAAAA,CAAW0B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/sanitizeJoinParams.ts"],"sourcesContent":["import type { JoinQuery } from '../types/index.js'\n\nimport { isNumber } from './isNumber.js'\n\nexport type JoinParams =\n  | {\n      [schemaPath: string]:\n        | {\n            limit?: unknown\n            sort?: string\n            where?: unknown\n          }\n        | false\n    }\n  | false\n\n/**\n * Convert request JoinQuery object from strings to numbers\n * @param joins\n */\nexport const sanitizeJoinParams = (_joins: JoinParams = {}): JoinQuery => {\n  const joinQuery: Record<string, any> = {}\n  const joins = _joins as Record<string, any>\n\n  Object.keys(joins).forEach((schemaPath) => {\n    if (joins[schemaPath] === 'false' || joins[schemaPath] === false) {\n      joinQuery[schemaPath] = false\n    } else {\n      joinQuery[schemaPath] = {\n        count: joins[schemaPath].count === 'true',\n        limit: isNumber(joins[schemaPath]?.limit) ? Number(joins[schemaPath].limit) : undefined,\n        page: isNumber(joins[schemaPath]?.page) ? Number(joins[schemaPath].page) : undefined,\n        sort: joins[schemaPath]?.sort ? joins[schemaPath].sort : undefined,\n        where: joins[schemaPath]?.where ? joins[schemaPath].where : undefined,\n      }\n    }\n  })\n\n  return joinQuery\n}\n"],"names":["isNumber","sanitizeJoinParams","_joins","joinQuery","joins","Object","keys","forEach","schemaPath","count","limit","Number","undefined","page","sort","where"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAkBjC,MAAMC,qBAAqB,CAACC,SAAqB,CAAC,CAAC;IACxD,MAAMC,YAAiC,CAAC;IACxC,MAAMC,QAAQF;IAEdG,OAAOC,IAAI,CAACF,OAAOG,OAAO,CAAC,CAACC;QAC1B,IAAIJ,KAAK,CAACI,WAAW,KAAK,WAAWJ,KAAK,CAACI,WAAW,KAAK,OAAO;YAChEL,SAAS,CAACK,WAAW,GAAG;QAC1B,OAAO;YACLL,SAAS,CAACK,WAAW,GAAG;gBACtBC,OAAOL,KAAK,CAACI,WAAW,CAACC,KAAK,KAAK;gBACnCC,WAAOV,sKAAAA,EAASI,KAAK,CAACI,WAAW,EAAEE,SAASC,OAAOP,KAAK,CAACI,WAAW,CAACE,KAAK,IAAIE;gBAC9EC,UAAMb,sKAAAA,EAASI,KAAK,CAACI,WAAW,EAAEK,QAAQF,OAAOP,KAAK,CAACI,WAAW,CAACK,IAAI,IAAID;gBAC3EE,MAAMV,KAAK,CAACI,WAAW,EAAEM,OAAOV,KAAK,CAACI,WAAW,CAACM,IAAI,GAAGF;gBACzDG,OAAOX,KAAK,CAACI,WAAW,EAAEO,QAAQX,KAAK,CAACI,WAAW,CAACO,KAAK,GAAGH;YAC9D;QACF;IACF;IAEA,OAAOT;AACT,EAAC"}},
    {"offset": {"line": 1625, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/sanitizeSelectParam.ts"],"sourcesContent":["import type { SelectType } from '../types/index.js'\n\n/**\n * Sanitizes REST select query to SelectType\n */\nexport const sanitizeSelectParam = (unsanitizedSelect: unknown): SelectType | undefined => {\n  if (unsanitizedSelect && typeof unsanitizedSelect === 'object') {\n    for (const _k in unsanitizedSelect) {\n      const k = _k as keyof typeof unsanitizedSelect\n      if (unsanitizedSelect[k] === 'true') {\n        ;(unsanitizedSelect as Record<string, any>)[k] = true\n      } else if (unsanitizedSelect[k] === 'false') {\n        ;(unsanitizedSelect as Record<string, any>)[k] = false\n      } else if (typeof unsanitizedSelect[k] === 'object') {\n        sanitizeSelectParam(unsanitizedSelect[k])\n      }\n    }\n  }\n\n  return unsanitizedSelect as SelectType\n}\n"],"names":["sanitizeSelectParam","unsanitizedSelect","_k","k"],"mappings":"AAEA;;CAEC,GACD;;;;AAAO,MAAMA,sBAAsB,CAACC;IAClC,IAAIA,qBAAqB,OAAOA,sBAAsB,UAAU;QAC9D,IAAK,MAAMC,MAAMD,kBAAmB;YAClC,MAAME,IAAID;YACV,IAAID,iBAAiB,CAACE,EAAE,KAAK,QAAQ;;gBACjCF,iBAAyC,CAACE,EAAE,GAAG;YACnD,OAAO,IAAIF,iBAAiB,CAACE,EAAE,KAAK,SAAS;;gBACzCF,iBAAyC,CAACE,EAAE,GAAG;YACnD,OAAO,IAAI,OAAOF,iBAAiB,CAACE,EAAE,KAAK,UAAU;gBACnDH,oBAAoBC,iBAAiB,CAACE,EAAE;YAC1C;QACF;IACF;IAEA,OAAOF;AACT,EAAC"}},
    {"offset": {"line": 1652, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/sanitizePopulateParam.ts"],"sourcesContent":["import type { PopulateType } from '../types/index.js'\n\nimport { sanitizeSelectParam } from './sanitizeSelectParam.js'\n\n/**\n * Sanitizes REST populate query to PopulateType\n */\nexport const sanitizePopulateParam = (unsanitizedPopulate: unknown): PopulateType | undefined => {\n  if (!unsanitizedPopulate || typeof unsanitizedPopulate !== 'object') {\n    return\n  }\n\n  for (const k in unsanitizedPopulate) {\n    ;(unsanitizedPopulate as Record<string, any>)[k] = sanitizeSelectParam(\n      unsanitizedPopulate[k as keyof typeof unsanitizedPopulate],\n    )\n  }\n\n  return unsanitizedPopulate as PopulateType\n}\n"],"names":["sanitizeSelectParam","sanitizePopulateParam","unsanitizedPopulate","k"],"mappings":";;;;AAEA,SAASA,mBAAmB,QAAQ,2BAA0B;;AAKvD,MAAMC,wBAAwB,CAACC;IACpC,IAAI,CAACA,uBAAuB,OAAOA,wBAAwB,UAAU;QACnE;IACF;IAEA,IAAK,MAAMC,KAAKD,oBAAqB;;QACjCA,mBAA2C,CAACC,EAAE,OAAGH,4LAAAA,EACjDE,mBAAmB,CAACC,EAAsC;IAE9D;IAEA,OAAOD;AACT,EAAC"}},
    {"offset": {"line": 1672, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/me.ts"],"sourcesContent":["import { decodeJwt } from 'jose'\n\nimport type { Collection } from '../../collections/config/types.js'\nimport type { TypedUser } from '../../index.js'\nimport type { JoinQuery, PayloadRequest, PopulateType, SelectType } from '../../types/index.js'\nimport type { ClientUser } from '../types.js'\n\nexport type MeOperationResult = {\n  collection?: string\n  exp?: number\n  /** @deprecated\n   * use:\n   * ```ts\n   * user._strategy\n   * ```\n   */\n  strategy?: string\n  token?: string\n  user?: ClientUser\n}\n\nexport type Arguments = {\n  collection: Collection\n  currentToken?: string\n  depth?: number\n  draft?: boolean\n  joins?: JoinQuery\n  populate?: PopulateType\n  req: PayloadRequest\n  select?: SelectType\n}\n\nexport const meOperation = async (args: Arguments): Promise<MeOperationResult> => {\n  const { collection, currentToken, depth, draft, joins, populate, req, select } = args\n\n  let result: MeOperationResult = {\n    user: null!,\n  }\n\n  if (req.user) {\n    const { pathname } = req\n    const isGraphQL = pathname === `/api${req.payload.config.routes.graphQL}`\n\n    const user = (await req.payload.findByID({\n      id: req.user.id,\n      collection: collection.config.slug,\n      depth: isGraphQL ? 0 : (depth ?? collection.config.auth.depth),\n      draft,\n      joins,\n      overrideAccess: false,\n      populate,\n      req,\n      select,\n      showHiddenFields: false,\n    })) as TypedUser\n\n    if (user) {\n      user.collection = collection.config.slug\n      user._strategy = req.user._strategy\n    }\n\n    if (req.user.collection !== collection.config.slug) {\n      return {\n        user: null!,\n      }\n    }\n\n    // /////////////////////////////////////\n    // me hook - Collection\n    // /////////////////////////////////////\n\n    for (const meHook of collection.config.hooks.me) {\n      const hookResult = await meHook({ args, user })\n\n      if (hookResult) {\n        result.user = hookResult.user\n        result.exp = hookResult.exp\n\n        break\n      }\n    }\n\n    result.collection = req.user.collection\n    /** @deprecated\n     * use:\n     * ```ts\n     * user._strategy\n     * ```\n     */\n    result.strategy = req.user._strategy\n\n    if (!result.user) {\n      result.user = user\n\n      if (currentToken) {\n        const decoded = decodeJwt(currentToken)\n        if (decoded) {\n          result.exp = decoded.exp\n        }\n        if (!collection.config.auth.removeTokenFromResponses) {\n          result.token = currentToken\n        }\n      }\n    }\n  }\n\n  // /////////////////////////////////////\n  // After Me - Collection\n  // /////////////////////////////////////\n\n  if (collection.config.hooks?.afterMe?.length) {\n    for (const hook of collection.config.hooks.afterMe) {\n      result =\n        (await hook({\n          collection: collection?.config,\n          context: req.context,\n          req,\n          response: result,\n        })) || result\n    }\n  }\n\n  return result\n}\n"],"names":["decodeJwt","meOperation","args","collection","currentToken","depth","draft","joins","populate","req","select","result","user","pathname","isGraphQL","payload","config","routes","graphQL","findByID","id","slug","auth","overrideAccess","showHiddenFields","_strategy","meHook","hooks","me","hookResult","exp","strategy","decoded","removeTokenFromResponses","token","afterMe","length","hook","context","response"],"mappings":";;;;AAAA,SAASA,SAAS,QAAQ,OAAM;;AAgCzB,MAAMC,cAAc,OAAOC;IAChC,MAAM,EAAEC,UAAU,EAAEC,YAAY,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,MAAM,EAAE,GAAGR;IAEjF,IAAIS,SAA4B;QAC9BC,MAAM;IACR;IAEA,IAAIH,IAAIG,IAAI,EAAE;QACZ,MAAM,EAAEC,QAAQ,EAAE,GAAGJ;QACrB,MAAMK,YAAYD,aAAa,CAAC,IAAI,EAAEJ,IAAIM,OAAO,CAACC,MAAM,CAACC,MAAM,CAACC,OAAO,EAAE;QAEzE,MAAMN,OAAQ,MAAMH,IAAIM,OAAO,CAACI,QAAQ,CAAC;YACvCC,IAAIX,IAAIG,IAAI,CAACQ,EAAE;YACfjB,YAAYA,WAAWa,MAAM,CAACK,IAAI;YAClChB,OAAOS,YAAY,IAAKT,SAASF,WAAWa,MAAM,CAACM,IAAI,CAACjB,KAAK;YAC7DC;YACAC;YACAgB,gBAAgB;YAChBf;YACAC;YACAC;YACAc,kBAAkB;QACpB;QAEA,IAAIZ,MAAM;YACRA,KAAKT,UAAU,GAAGA,WAAWa,MAAM,CAACK,IAAI;YACxCT,KAAKa,SAAS,GAAGhB,IAAIG,IAAI,CAACa,SAAS;QACrC;QAEA,IAAIhB,IAAIG,IAAI,CAACT,UAAU,KAAKA,WAAWa,MAAM,CAACK,IAAI,EAAE;YAClD,OAAO;gBACLT,MAAM;YACR;QACF;QAEA,wCAAwC;QACxC,uBAAuB;QACvB,wCAAwC;QAExC,KAAK,MAAMc,UAAUvB,WAAWa,MAAM,CAACW,KAAK,CAACC,EAAE,CAAE;YAC/C,MAAMC,aAAa,MAAMH,OAAO;gBAAExB;gBAAMU;YAAK;YAE7C,IAAIiB,YAAY;gBACdlB,OAAOC,IAAI,GAAGiB,WAAWjB,IAAI;gBAC7BD,OAAOmB,GAAG,GAAGD,WAAWC,GAAG;gBAE3B;YACF;QACF;QAEAnB,OAAOR,UAAU,GAAGM,IAAIG,IAAI,CAACT,UAAU;QACvC;;;;;KAKC,GACDQ,OAAOoB,QAAQ,GAAGtB,IAAIG,IAAI,CAACa,SAAS;QAEpC,IAAI,CAACd,OAAOC,IAAI,EAAE;YAChBD,OAAOC,IAAI,GAAGA;YAEd,IAAIR,cAAc;gBAChB,MAAM4B,cAAUhC,gLAAAA,EAAUI;gBAC1B,IAAI4B,SAAS;oBACXrB,OAAOmB,GAAG,GAAGE,QAAQF,GAAG;gBAC1B;gBACA,IAAI,CAAC3B,WAAWa,MAAM,CAACM,IAAI,CAACW,wBAAwB,EAAE;oBACpDtB,OAAOuB,KAAK,GAAG9B;gBACjB;YACF;QACF;IACF;IAEA,wCAAwC;IACxC,wBAAwB;IACxB,wCAAwC;IAExC,IAAID,WAAWa,MAAM,CAACW,KAAK,EAAEQ,SAASC,QAAQ;QAC5C,KAAK,MAAMC,QAAQlC,WAAWa,MAAM,CAACW,KAAK,CAACQ,OAAO,CAAE;YAClDxB,SACG,MAAM0B,KAAK;gBACVlC,YAAYA,YAAYa;gBACxBsB,SAAS7B,IAAI6B,OAAO;gBACpB7B;gBACA8B,UAAU5B;YACZ,MAAOA;QACX;IACF;IAEA,OAAOA;AACT,EAAC"}},
    {"offset": {"line": 1760, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/me.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\nimport type { JoinParams } from '../../utilities/sanitizeJoinParams.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { sanitizeJoinParams } from '../../utilities/sanitizeJoinParams.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { extractJWT } from '../extractJWT.js'\nimport { meOperation } from '../operations/me.js'\n\nexport const meHandler: PayloadHandler = async (req) => {\n  const { searchParams } = req\n  const collection = getRequestCollection(req)\n  const currentToken = extractJWT(req)\n  const depthFromSearchParams = searchParams.get('depth')\n  const draftFromSearchParams = searchParams.get('depth')\n\n  const {\n    depth: depthFromQuery,\n    draft: draftFromQuery,\n    joins,\n    populate,\n    select,\n  } = req.query as {\n    depth?: string\n    draft?: string\n    joins?: JoinParams\n    populate?: Record<string, unknown>\n    select?: Record<string, unknown>\n  }\n\n  const depth = depthFromQuery || depthFromSearchParams\n  const draft = draftFromQuery || draftFromSearchParams\n\n  const result = await meOperation({\n    collection,\n    currentToken: currentToken!,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true',\n    joins: sanitizeJoinParams(joins),\n    populate: sanitizePopulateParam(populate),\n    req,\n    select: sanitizeSelectParam(select),\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      ...result,\n      message: req.t('authentication:account'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","isNumber","sanitizeJoinParams","sanitizePopulateParam","sanitizeSelectParam","extractJWT","meOperation","meHandler","req","searchParams","collection","currentToken","depthFromSearchParams","get","draftFromSearchParams","depth","depthFromQuery","draft","draftFromQuery","joins","populate","select","query","result","Number","undefined","config","auth","removeTokenFromResponses","token","Response","json","message","t","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,kBAAkB,QAAQ,wCAAuC;AAC1E,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,UAAU,QAAQ,mBAAkB;AAC7C,SAASC,WAAW,QAAQ,sBAAqB;;;;;;;;;;AAE1C,MAAMC,YAA4B,OAAOC;IAC9C,MAAM,EAAEC,YAAY,EAAE,GAAGD;IACzB,MAAME,iBAAaX,0LAAAA,EAAqBS;IACxC,MAAMG,mBAAeN,qKAAAA,EAAWG;IAChC,MAAMI,wBAAwBH,aAAaI,GAAG,CAAC;IAC/C,MAAMC,wBAAwBL,aAAaI,GAAG,CAAC;IAE/C,MAAM,EACJE,OAAOC,cAAc,EACrBC,OAAOC,cAAc,EACrBC,KAAK,EACLC,QAAQ,EACRC,MAAM,EACP,GAAGb,IAAIc,KAAK;IAQb,MAAMP,QAAQC,kBAAkBJ;IAChC,MAAMK,QAAQC,kBAAkBJ;IAEhC,MAAMS,SAAS,UAAMjB,4KAAAA,EAAY;QAC/BI;QACAC,cAAcA;QACdI,WAAOd,sKAAAA,EAASc,SAASS,OAAOT,SAASU;QACzCR,OAAOA,UAAU;QACjBE,WAAOjB,0LAAAA,EAAmBiB;QAC1BC,cAAUjB,gMAAAA,EAAsBiB;QAChCZ;QACAa,YAAQjB,4LAAAA,EAAoBiB;IAC9B;IAEA,IAAIX,WAAWgB,MAAM,CAACC,IAAI,CAACC,wBAAwB,EAAE;QACnD,OAAOL,OAAOM,KAAK;IACrB;IAEA,OAAOC,SAASC,IAAI,CAClB;QACE,GAAGR,MAAM;QACTS,SAASxB,IAAIyB,CAAC,CAAC;IACjB,GACA;QACEC,aAASlC,oLAAAA,EAAgB;YACvBkC,SAAS,IAAIC;YACb3B;QACF;QACAX,QAAQC,sMAAAA,CAAWsC,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/refresh.ts"],"sourcesContent":["import type { Collection } from '../../collections/config/types.js'\nimport type { Document, PayloadRequest } from '../../types/index.js'\n\nimport { buildAfterOperation } from '../../collections/operations/utilities/buildAfterOperation.js'\nimport { buildBeforeOperation } from '../../collections/operations/utilities/buildBeforeOperation.js'\nimport { Forbidden } from '../../errors/index.js'\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { getFieldsToSign } from '../getFieldsToSign.js'\nimport { jwtSign } from '../jwt.js'\nimport { removeExpiredSessions } from '../sessions.js'\n\nexport type Result = {\n  exp: number\n  refreshedToken: string\n  setCookie?: boolean\n  /** @deprecated\n   * use:\n   * ```ts\n   * user._strategy\n   * ```\n   */\n  strategy?: string\n  user: Document\n}\n\nexport type Arguments = {\n  collection: Collection\n  req: PayloadRequest\n}\n\nexport const refreshOperation = async (incomingArgs: Arguments): Promise<Result> => {\n  let args = incomingArgs\n\n  try {\n    const shouldCommit = await initTransaction(args.req)\n\n    // /////////////////////////////////////\n    // beforeOperation - Collection\n    // /////////////////////////////////////\n\n    args = await buildBeforeOperation({\n      args,\n      collection: args.collection.config,\n      operation: 'refresh',\n      overrideAccess: false,\n    })\n\n    // /////////////////////////////////////\n    // Refresh\n    // /////////////////////////////////////\n\n    const {\n      collection: { config: collectionConfig },\n      req,\n      req: {\n        payload: { config, secret },\n      },\n    } = args\n\n    if (!args.req.user) {\n      throw new Forbidden(args.req.t)\n    }\n\n    const pathname = new URL(args.req.url!).pathname\n\n    const isGraphQL = pathname === config.routes.graphQL\n\n    let user = await req.payload.db.findOne<any>({\n      collection: collectionConfig.slug,\n      req,\n      where: { id: { equals: args.req.user.id } },\n    })\n\n    const sid = args.req.user._sid\n\n    if (collectionConfig.auth.useSessions && !collectionConfig.auth.disableLocalStrategy) {\n      if (!Array.isArray(user.sessions) || !sid) {\n        throw new Forbidden(args.req.t)\n      }\n\n      const existingSession = user.sessions.find(({ id }: { id: number }) => id === sid)\n\n      const now = new Date()\n      const tokenExpInMs = collectionConfig.auth.tokenExpiration * 1000\n      existingSession.expiresAt = new Date(now.getTime() + tokenExpInMs)\n\n      // Prevent updatedAt from being updated when only refreshing a session\n      user.updatedAt = null\n\n      await req.payload.db.updateOne({\n        id: user.id,\n        collection: collectionConfig.slug,\n        data: {\n          ...user,\n          sessions: removeExpiredSessions(user.sessions),\n        },\n        req,\n        returning: false,\n      })\n    }\n\n    user = await req.payload.findByID({\n      id: user.id,\n      collection: collectionConfig.slug,\n      depth: isGraphQL ? 0 : args.collection.config.auth.depth,\n      req: args.req,\n    })\n\n    if (user) {\n      user.collection = args.req.user.collection\n      user._strategy = args.req.user._strategy\n    }\n\n    let result!: Result\n\n    // /////////////////////////////////////\n    // refresh hook - Collection\n    // /////////////////////////////////////\n\n    for (const refreshHook of args.collection.config.hooks.refresh) {\n      const hookResult = await refreshHook({ args, user })\n\n      if (hookResult) {\n        result = hookResult\n        break\n      }\n    }\n\n    if (!result) {\n      const fieldsToSign = getFieldsToSign({\n        collectionConfig,\n        email: user?.email as string,\n        sid,\n        user: args?.req?.user,\n      })\n\n      const { exp, token: refreshedToken } = await jwtSign({\n        fieldsToSign,\n        secret,\n        tokenExpiration: collectionConfig.auth.tokenExpiration,\n      })\n\n      result = {\n        exp,\n        refreshedToken,\n        setCookie: true,\n        /** @deprecated\n         * use:\n         * ```ts\n         * user._strategy\n         * ```\n         */\n        strategy: args.req.user._strategy,\n        user,\n      }\n    }\n\n    // /////////////////////////////////////\n    // After Refresh - Collection\n    // /////////////////////////////////////\n\n    if (collectionConfig.hooks?.afterRefresh?.length) {\n      for (const hook of collectionConfig.hooks.afterRefresh) {\n        result =\n          (await hook({\n            collection: args.collection?.config,\n            context: args.req.context,\n            exp: result.exp,\n            req: args.req,\n            token: result.refreshedToken,\n          })) || result\n      }\n    }\n\n    // /////////////////////////////////////\n    // afterOperation - Collection\n    // /////////////////////////////////////\n\n    result = await buildAfterOperation({\n      args,\n      collection: args.collection?.config,\n      operation: 'refresh',\n      overrideAccess: false,\n      result,\n    })\n\n    // /////////////////////////////////////\n    // Return results\n    // /////////////////////////////////////\n\n    if (shouldCommit) {\n      await commitTransaction(req)\n    }\n\n    return result\n  } catch (error: unknown) {\n    await killTransaction(args.req)\n    throw error\n  }\n}\n"],"names":["buildAfterOperation","buildBeforeOperation","Forbidden","commitTransaction","initTransaction","killTransaction","getFieldsToSign","jwtSign","removeExpiredSessions","refreshOperation","incomingArgs","args","shouldCommit","req","collection","config","operation","overrideAccess","collectionConfig","payload","secret","user","t","pathname","URL","url","isGraphQL","routes","graphQL","db","findOne","slug","where","id","equals","sid","_sid","auth","useSessions","disableLocalStrategy","Array","isArray","sessions","existingSession","find","now","Date","tokenExpInMs","tokenExpiration","expiresAt","getTime","updatedAt","updateOne","data","returning","findByID","depth","_strategy","result","refreshHook","hooks","refresh","hookResult","fieldsToSign","email","exp","token","refreshedToken","setCookie","strategy","afterRefresh","length","hook","context","error"],"mappings":"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"}},
    {"offset": {"line": 1984, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/refresh.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { generatePayloadCookie } from '../cookies.js'\nimport { refreshOperation } from '../operations/refresh.js'\n\nexport const refreshHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { t } = req\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  const result = await refreshOperation({\n    collection,\n    req,\n  })\n\n  if (result.setCookie) {\n    const cookie = generatePayloadCookie({\n      collectionAuthConfig: collection.config.auth,\n      cookiePrefix: req.payload.config.cookiePrefix,\n      token: result.refreshedToken,\n    })\n\n    if (collection.config.auth.removeTokenFromResponses) {\n      // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n      delete result.refreshedToken\n    }\n\n    headers.set('Set-Cookie', cookie)\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:tokenRefreshSuccessful'),\n      ...result,\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","generatePayloadCookie","refreshOperation","refreshHandler","req","collection","t","headers","Headers","result","setCookie","cookie","collectionAuthConfig","config","auth","cookiePrefix","payload","token","refreshedToken","removeTokenFromResponses","set","Response","json","message","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,qBAAqB,QAAQ,gBAAe;AACrD,SAASC,gBAAgB,QAAQ,2BAA0B;;;;;;AAEpD,MAAMC,iBAAiC,OAAOC;IACnD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IACxC,MAAM,EAAEE,CAAC,EAAE,GAAGF;IAEd,MAAMG,cAAUP,oLAAAA,EAAgB;QAC9BO,SAAS,IAAIC;QACbJ;IACF;IAEA,MAAMK,SAAS,UAAMP,sLAAAA,EAAiB;QACpCG;QACAD;IACF;IAEA,IAAIK,OAAOC,SAAS,EAAE;QACpB,MAAMC,aAASV,6KAAAA,EAAsB;YACnCW,sBAAsBP,WAAWQ,MAAM,CAACC,IAAI;YAC5CC,cAAcX,IAAIY,OAAO,CAACH,MAAM,CAACE,YAAY;YAC7CE,OAAOR,OAAOS,cAAc;QAC9B;QAEA,IAAIb,WAAWQ,MAAM,CAACC,IAAI,CAACK,wBAAwB,EAAE;YACnD,oFAAoF;YACpF,OAAOV,OAAOS,cAAc;QAC9B;QAEAX,QAAQa,GAAG,CAAC,cAAcT;IAC5B;IAEA,OAAOU,SAASC,IAAI,CAClB;QACEC,SAASjB,EAAE;QACX,GAAGG,MAAM;IACX,GACA;QACEF;QACAV,QAAQC,sMAAAA,CAAW0B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2034, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/operations/registerFirstUser.ts"],"sourcesContent":["import type {\n  AuthOperationsFromCollectionSlug,\n  Collection,\n  DataFromCollectionSlug,\n  RequiredDataFromCollectionSlug,\n} from '../../collections/config/types.js'\nimport type { CollectionSlug } from '../../index.js'\nimport type { PayloadRequest, SelectType } from '../../types/index.js'\n\nimport { Forbidden } from '../../errors/index.js'\nimport { appendNonTrashedFilter } from '../../utilities/appendNonTrashedFilter.js'\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { ensureUsernameOrEmail } from '../ensureUsernameOrEmail.js'\n\nexport type Arguments<TSlug extends CollectionSlug> = {\n  collection: Collection\n  data: AuthOperationsFromCollectionSlug<TSlug>['registerFirstUser'] &\n    RequiredDataFromCollectionSlug<TSlug>\n  req: PayloadRequest\n}\n\nexport type Result<TData> = {\n  exp?: number\n  token?: string\n  user?: TData\n}\n\nexport const registerFirstUserOperation = async <TSlug extends CollectionSlug>(\n  args: Arguments<TSlug>,\n): Promise<Result<DataFromCollectionSlug<TSlug>>> => {\n  const {\n    collection: {\n      config,\n      config: {\n        slug,\n        auth: { verify },\n      },\n    },\n    data,\n    req,\n    req: { payload },\n  } = args\n\n  if (config.auth.disableLocalStrategy) {\n    throw new Forbidden(req.t)\n  }\n\n  try {\n    const shouldCommit = await initTransaction(req)\n\n    ensureUsernameOrEmail<TSlug>({\n      authOptions: config.auth,\n      collectionSlug: slug,\n      data,\n      operation: 'create',\n      req,\n    })\n\n    const where = appendNonTrashedFilter({\n      enableTrash: Boolean(config.trash),\n      trash: false,\n      where: {}, // no initial filter; just exclude trashed docs\n    })\n\n    const doc = await payload.db.findOne({\n      collection: config.slug,\n      req,\n      where,\n    })\n\n    if (doc) {\n      throw new Forbidden(req.t)\n    }\n\n    // /////////////////////////////////////\n    // Register first user\n    // /////////////////////////////////////\n\n    const result = await payload.create<TSlug, SelectType>({\n      collection: slug as TSlug,\n      data,\n      overrideAccess: true,\n      req,\n    })\n\n    // auto-verify (if applicable)\n    if (verify) {\n      await payload.update({\n        id: result.id,\n        collection: slug,\n        data: {\n          _verified: true,\n        },\n        req,\n      })\n    }\n\n    // /////////////////////////////////////\n    // Log in new user\n    // /////////////////////////////////////\n\n    const { exp, token } = await payload.login({\n      ...args,\n      collection: slug,\n      req,\n    })\n\n    result.collection = slug\n    result._strategy = 'local-jwt'\n\n    if (shouldCommit) {\n      await commitTransaction(req)\n    }\n\n    return {\n      exp,\n      token,\n      user: result,\n    }\n  } catch (error: unknown) {\n    await killTransaction(req)\n    throw error\n  }\n}\n"],"names":["Forbidden","appendNonTrashedFilter","commitTransaction","initTransaction","killTransaction","ensureUsernameOrEmail","registerFirstUserOperation","args","collection","config","slug","auth","verify","data","req","payload","disableLocalStrategy","t","shouldCommit","authOptions","collectionSlug","operation","where","enableTrash","Boolean","trash","doc","db","findOne","result","create","overrideAccess","update","id","_verified","exp","token","login","_strategy","user","error"],"mappings":";;;;AASA,SAASA,SAAS,QAAQ,wBAAuB;AACjD,SAASC,sBAAsB,QAAQ,4CAA2C;AAClF,SAASC,iBAAiB,QAAQ,uCAAsC;AACxE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,qBAAqB,QAAQ,8BAA6B;;;;;;;AAe5D,MAAMC,6BAA6B,OACxCC;IAEA,MAAM,EACJC,YAAY,EACVC,MAAM,EACNA,QAAQ,EACNC,IAAI,EACJC,MAAM,EAAEC,MAAM,EAAE,EACjB,EACF,EACDC,IAAI,EACJC,GAAG,EACHA,KAAK,EAAEC,OAAO,EAAE,EACjB,GAAGR;IAEJ,IAAIE,OAAOE,IAAI,CAACK,oBAAoB,EAAE;QACpC,MAAM,IAAIhB,qKAAAA,CAAUc,IAAIG,CAAC;IAC3B;IAEA,IAAI;QACF,MAAMC,eAAe,UAAMf,oLAAAA,EAAgBW;YAE3CT,2LAAAA,EAA6B;YAC3Bc,aAAaV,OAAOE,IAAI;YACxBS,gBAAgBV;YAChBG;YACAQ,WAAW;YACXP;QACF;QAEA,MAAMQ,YAAQrB,kMAAAA,EAAuB;YACnCsB,aAAaC,QAAQf,OAAOgB,KAAK;YACjCA,OAAO;YACPH,OAAO,CAAC;QACV;QAEA,MAAMI,MAAM,MAAMX,QAAQY,EAAE,CAACC,OAAO,CAAC;YACnCpB,YAAYC,OAAOC,IAAI;YACvBI;YACAQ;QACF;QAEA,IAAII,KAAK;YACP,MAAM,IAAI1B,qKAAAA,CAAUc,IAAIG,CAAC;QAC3B;QAEA,wCAAwC;QACxC,sBAAsB;QACtB,wCAAwC;QAExC,MAAMY,SAAS,MAAMd,QAAQe,MAAM,CAAoB;YACrDtB,YAAYE;YACZG;YACAkB,gBAAgB;YAChBjB;QACF;QAEA,8BAA8B;QAC9B,IAAIF,QAAQ;YACV,MAAMG,QAAQiB,MAAM,CAAC;gBACnBC,IAAIJ,OAAOI,EAAE;gBACbzB,YAAYE;gBACZG,MAAM;oBACJqB,WAAW;gBACb;gBACApB;YACF;QACF;QAEA,wCAAwC;QACxC,kBAAkB;QAClB,wCAAwC;QAExC,MAAM,EAAEqB,GAAG,EAAEC,KAAK,EAAE,GAAG,MAAMrB,QAAQsB,KAAK,CAAC;YACzC,GAAG9B,IAAI;YACPC,YAAYE;YACZI;QACF;QAEAe,OAAOrB,UAAU,GAAGE;QACpBmB,OAAOS,SAAS,GAAG;QAEnB,IAAIpB,cAAc;YAChB,UAAMhB,wLAAAA,EAAkBY;QAC1B;QAEA,OAAO;YACLqB;YACAC;YACAG,MAAMV;QACR;IACF,EAAE,OAAOW,OAAgB;QACvB,UAAMpC,oLAAAA,EAAgBU;QACtB,MAAM0B;IACR;AACF,EAAC"}},
    {"offset": {"line": 2124, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/registerFirstUser.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { generatePayloadCookie } from '../cookies.js'\nimport { registerFirstUserOperation } from '../operations/registerFirstUser.js'\n\nexport const registerFirstUserHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { data, t } = req\n  const authData = collection.config.auth?.loginWithUsername\n    ? {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        password: typeof req.data?.password === 'string' ? req.data.password : '',\n        username: typeof req.data?.username === 'string' ? req.data.username : '',\n      }\n    : {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        password: typeof req.data?.password === 'string' ? req.data.password : '',\n      }\n\n  const result = await registerFirstUserOperation({\n    collection,\n    data: {\n      ...data,\n      ...authData,\n    },\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token!,\n  })\n\n  return Response.json(\n    {\n      exp: result.exp,\n      message: t('authentication:successfullyRegisteredFirstUser'),\n      token: result.token,\n      user: result.user,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","generatePayloadCookie","registerFirstUserOperation","registerFirstUserHandler","req","collection","data","t","authData","config","auth","loginWithUsername","email","password","username","result","cookie","collectionAuthConfig","cookiePrefix","payload","token","Response","json","exp","message","user","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,qBAAqB,QAAQ,gBAAe;AACrD,SAASC,0BAA0B,QAAQ,qCAAoC;;;;;;AAExE,MAAMC,2BAA2C,OAAOC;IAC7D,MAAMC,iBAAaN,0LAAAA,EAAqBK;IACxC,MAAM,EAAEE,IAAI,EAAEC,CAAC,EAAE,GAAGH;IACpB,MAAMI,WAAWH,WAAWI,MAAM,CAACC,IAAI,EAAEC,oBACrC;QACEC,OAAO,OAAOR,IAAIE,IAAI,EAAEM,UAAU,WAAWR,IAAIE,IAAI,CAACM,KAAK,GAAG;QAC9DC,UAAU,OAAOT,IAAIE,IAAI,EAAEO,aAAa,WAAWT,IAAIE,IAAI,CAACO,QAAQ,GAAG;QACvEC,UAAU,OAAOV,IAAIE,IAAI,EAAEQ,aAAa,WAAWV,IAAIE,IAAI,CAACQ,QAAQ,GAAG;IACzE,IACA;QACEF,OAAO,OAAOR,IAAIE,IAAI,EAAEM,UAAU,WAAWR,IAAIE,IAAI,CAACM,KAAK,GAAG;QAC9DC,UAAU,OAAOT,IAAIE,IAAI,EAAEO,aAAa,WAAWT,IAAIE,IAAI,CAACO,QAAQ,GAAG;IACzE;IAEJ,MAAME,SAAS,UAAMb,0MAAAA,EAA2B;QAC9CG;QACAC,MAAM;YACJ,GAAGA,IAAI;YACP,GAAGE,QAAQ;QACb;QACAJ;IACF;IAEA,MAAMY,aAASf,6KAAAA,EAAsB;QACnCgB,sBAAsBZ,WAAWI,MAAM,CAACC,IAAI;QAC5CQ,cAAcd,IAAIe,OAAO,CAACV,MAAM,CAACS,YAAY;QAC7CE,OAAOL,OAAOK,KAAK;IACrB;IAEA,OAAOC,SAASC,IAAI,CAClB;QACEC,KAAKR,OAAOQ,GAAG;QACfC,SAASjB,EAAE;QACXa,OAAOL,OAAOK,KAAK;QACnBK,MAAMV,OAAOU,IAAI;IACnB,GACA;QACEC,aAAS1B,oLAAAA,EAAgB;YACvB0B,SAAS,IAAIC,QAAQ;gBACnB,cAAcX;YAChB;YACAZ;QACF;QACAP,QAAQC,sMAAAA,CAAW8B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2182, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/resetPassword.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { generatePayloadCookie } from '../cookies.js'\nimport { resetPasswordOperation } from '../operations/resetPassword.js'\n\nexport const resetPasswordHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { searchParams, t } = req\n  const depth = searchParams.get('depth')\n\n  const result = await resetPasswordOperation({\n    collection,\n    data: {\n      password: typeof req.data?.password === 'string' ? req.data.password : '',\n      token: typeof req.data?.token === 'string' ? req.data.token : '',\n    },\n    depth: depth ? Number(depth) : undefined,\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token!,\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:passwordResetSuccessfully'),\n      ...result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","generatePayloadCookie","resetPasswordOperation","resetPasswordHandler","req","collection","searchParams","t","depth","get","result","data","password","token","Number","undefined","cookie","collectionAuthConfig","config","auth","cookiePrefix","payload","removeTokenFromResponses","Response","json","message","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,qBAAqB,QAAQ,gBAAe;AACrD,SAASC,sBAAsB,QAAQ,iCAAgC;;;;;;AAEhE,MAAMC,uBAAuC,OAAOC;IACzD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IACxC,MAAM,EAAEE,YAAY,EAAEC,CAAC,EAAE,GAAGH;IAC5B,MAAMI,QAAQF,aAAaG,GAAG,CAAC;IAE/B,MAAMC,SAAS,UAAMR,kMAAAA,EAAuB;QAC1CG;QACAM,MAAM;YACJC,UAAU,OAAOR,IAAIO,IAAI,EAAEC,aAAa,WAAWR,IAAIO,IAAI,CAACC,QAAQ,GAAG;YACvEC,OAAO,OAAOT,IAAIO,IAAI,EAAEE,UAAU,WAAWT,IAAIO,IAAI,CAACE,KAAK,GAAG;QAChE;QACAL,OAAOA,QAAQM,OAAON,SAASO;QAC/BX;IACF;IAEA,MAAMY,aAASf,6KAAAA,EAAsB;QACnCgB,sBAAsBZ,WAAWa,MAAM,CAACC,IAAI;QAC5CC,cAAchB,IAAIiB,OAAO,CAACH,MAAM,CAACE,YAAY;QAC7CP,OAAOH,OAAOG,KAAK;IACrB;IAEA,IAAIR,WAAWa,MAAM,CAACC,IAAI,CAACG,wBAAwB,EAAE;QACnD,OAAOZ,OAAOG,KAAK;IACrB;IAEA,OAAOU,SAASC,IAAI,CAClB;QACEC,SAASlB,EAAE;QACX,GAAGG,MAAM;IACX,GACA;QACEgB,aAAS1B,oLAAAA,EAAgB;YACvB0B,SAAS,IAAIC,QAAQ;gBACnB,cAAcX;YAChB;YACAZ;QACF;QACAP,QAAQC,sMAAAA,CAAW8B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2235, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/unlock.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { unlockOperation } from '../operations/unlock.js'\n\nexport const unlockHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n  const { t } = req\n\n  const authData =\n    collection.config.auth?.loginWithUsername !== false\n      ? {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          username: typeof req.data?.username === 'string' ? req.data.username : '',\n        }\n      : {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n        }\n\n  await unlockOperation({\n    collection,\n    data: authData,\n    req,\n  })\n\n  return Response.json(\n    {\n      message: t('general:success'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","unlockOperation","unlockHandler","req","collection","t","authData","config","auth","loginWithUsername","email","data","username","Response","json","message","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,0BAAyB;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,iBAAaL,0LAAAA,EAAqBI;IACxC,MAAM,EAAEE,CAAC,EAAE,GAAGF;IAEd,MAAMG,WACJF,WAAWG,MAAM,CAACC,IAAI,EAAEC,sBAAsB,QAC1C;QACEC,OAAO,OAAOP,IAAIQ,IAAI,EAAED,UAAU,WAAWP,IAAIQ,IAAI,CAACD,KAAK,GAAG;QAC9DE,UAAU,OAAOT,IAAIQ,IAAI,EAAEC,aAAa,WAAWT,IAAIQ,IAAI,CAACC,QAAQ,GAAG;IACzE,IACA;QACEF,OAAO,OAAOP,IAAIQ,IAAI,EAAED,UAAU,WAAWP,IAAIQ,IAAI,CAACD,KAAK,GAAG;IAChE;IAEN,UAAMT,oLAAAA,EAAgB;QACpBG;QACAO,MAAML;QACNH;IACF;IAEA,OAAOU,SAASC,IAAI,CAClB;QACEC,SAASV,EAAE;IACb,GACA;QACEW,aAAShB,oLAAAA,EAAgB;YACvBgB,SAAS,IAAIC;YACbd;QACF;QACAN,QAAQC,sMAAAA,CAAWoB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2276, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/verifyEmail.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { verifyEmailOperation } from '../operations/verifyEmail.js'\n\nexport const verifyEmailHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req, { disableSanitize: true })\n  const { t } = req\n  await verifyEmailOperation({\n    collection,\n    req,\n    token: id,\n  })\n\n  return Response.json(\n    {\n      message: t('authentication:accountVerified'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","verifyEmailOperation","verifyEmailHandler","req","id","collection","disableSanitize","t","token","Response","json","message","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,oBAAoB,QAAQ,+BAA8B;;;;;AAE5D,MAAMC,qBAAqC,OAAOC;IACvD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGN,gMAAAA,EAA2BI,KAAK;QAAEG,iBAAiB;IAAK;IACnF,MAAM,EAAEC,CAAC,EAAE,GAAGJ;IACd,UAAMF,8LAAAA,EAAqB;QACzBI;QACAF;QACAK,OAAOJ;IACT;IAEA,OAAOK,SAASC,IAAI,CAClB;QACEC,SAASJ,EAAE;IACb,GACA;QACEK,aAASZ,oLAAAA,EAAgB;YACvBY,SAAS,IAAIC;YACbV;QACF;QACAN,QAAQC,sMAAAA,CAAWgB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2313, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/endpoints/index.ts"],"sourcesContent":["import type { Endpoint } from '../../config/types.js'\n\nimport { wrapInternalEndpoints } from '../../utilities/wrapInternalEndpoints.js'\nimport { accessHandler } from './access.js'\nimport { forgotPasswordHandler } from './forgotPassword.js'\nimport { initHandler } from './init.js'\nimport { loginHandler } from './login.js'\nimport { logoutHandler } from './logout.js'\nimport { meHandler } from './me.js'\nimport { refreshHandler } from './refresh.js'\nimport { registerFirstUserHandler } from './registerFirstUser.js'\nimport { resetPasswordHandler } from './resetPassword.js'\nimport { unlockHandler } from './unlock.js'\nimport { verifyEmailHandler } from './verifyEmail.js'\n\nexport const authRootEndpoints: Endpoint[] = wrapInternalEndpoints([\n  {\n    handler: accessHandler,\n    method: 'get',\n    path: '/access',\n  },\n])\n\nexport const authCollectionEndpoints: Endpoint[] = wrapInternalEndpoints([\n  {\n    handler: forgotPasswordHandler,\n    method: 'post',\n    path: '/forgot-password',\n  },\n  {\n    handler: initHandler,\n    method: 'get',\n    path: '/init',\n  },\n  {\n    handler: loginHandler,\n    method: 'post',\n    path: '/login',\n  },\n  {\n    handler: logoutHandler,\n    method: 'post',\n    path: '/logout',\n  },\n  {\n    handler: meHandler,\n    method: 'get',\n    path: '/me',\n  },\n  {\n    handler: refreshHandler,\n    method: 'post',\n    path: '/refresh-token',\n  },\n  {\n    handler: registerFirstUserHandler,\n    method: 'post',\n    path: '/first-register',\n  },\n  {\n    handler: resetPasswordHandler,\n    method: 'post',\n    path: '/reset-password',\n  },\n  {\n    handler: unlockHandler,\n    method: 'post',\n    path: '/unlock',\n  },\n  {\n    handler: verifyEmailHandler,\n    method: 'post',\n    path: '/verify/:id',\n  },\n])\n"],"names":["wrapInternalEndpoints","accessHandler","forgotPasswordHandler","initHandler","loginHandler","logoutHandler","meHandler","refreshHandler","registerFirstUserHandler","resetPasswordHandler","unlockHandler","verifyEmailHandler","authRootEndpoints","handler","method","path","authCollectionEndpoints"],"mappings":";;;;;;AAEA,SAASA,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,qBAAqB,QAAQ,sBAAqB;AAC3D,SAASC,WAAW,QAAQ,YAAW;AACvC,SAASC,YAAY,QAAQ,aAAY;AACzC,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,SAAS,QAAQ,UAAS;AACnC,SAASC,cAAc,QAAQ,eAAc;AAC7C,SAASC,wBAAwB,QAAQ,yBAAwB;AACjE,SAASC,oBAAoB,QAAQ,qBAAoB;AACzD,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,kBAAkB,QAAQ,mBAAkB;;;;;;;;;;;;;AAE9C,MAAMC,wBAAgCZ,gMAAAA,EAAsB;IACjE;QACEa,SAASZ,iLAAAA;QACTa,QAAQ;QACRC,MAAM;IACR;CACD,EAAC;AAEK,MAAMC,8BAAsChB,gMAAAA,EAAsB;IACvE;QACEa,SAASX,iMAAAA;QACTY,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASV,6KAAAA;QACTW,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAAST,+KAAAA;QACTU,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASR,iLAAAA;QACTS,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASP,yKAAAA;QACTQ,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASN,mLAAAA;QACTO,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASL,uMAAAA;QACTM,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASJ,+LAAAA;QACTK,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASH,iLAAAA;QACTI,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASF,2LAAAA;QACTG,QAAQ;QACRC,MAAM;IACR;CACD,EAAC"}},
    {"offset": {"line": 2406, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/accountLock.ts"],"sourcesContent":["import type { Field } from '../../fields/config/types.js'\n\nexport const accountLockFields: Field[] = [\n  {\n    name: 'loginAttempts',\n    type: 'number',\n    defaultValue: 0,\n    hidden: true,\n  },\n  {\n    name: 'lockUntil',\n    type: 'date',\n    hidden: true,\n  },\n] as Field[]\n"],"names":["accountLockFields","name","type","defaultValue","hidden"],"mappings":";;;;AAEO,MAAMA,oBAA6B;IACxC;QACEC,MAAM;QACNC,MAAM;QACNC,cAAc;QACdC,QAAQ;IACV;IACA;QACEH,MAAM;QACNC,MAAM;QACNE,QAAQ;IACV;CACD,CAAW"}},
    {"offset": {"line": 2427, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/apiKey.ts"],"sourcesContent":["import crypto from 'crypto'\n\nimport type { Field, FieldHook } from '../../fields/config/types.js'\n\nconst encryptKey: FieldHook = ({ req, value }) =>\n  value ? req.payload.encrypt(value as string) : null\nconst decryptKey: FieldHook = ({ req, value }) =>\n  value ? req.payload.decrypt(value as string) : undefined\n\nexport const apiKeyFields = [\n  {\n    name: 'enableAPIKey',\n    type: 'checkbox',\n    admin: {\n      components: {\n        Field: false,\n      },\n    },\n    label: ({ t }) => t('authentication:enableAPIKey'),\n  },\n  {\n    name: 'apiKey',\n    type: 'text',\n    admin: {\n      components: {\n        Field: false,\n      },\n    },\n    hooks: {\n      afterRead: [decryptKey],\n      beforeChange: [encryptKey],\n    },\n    label: ({ t }) => t('authentication:apiKey'),\n  },\n  {\n    name: 'apiKeyIndex',\n    type: 'text',\n    admin: {\n      disabled: true,\n    },\n    hidden: true,\n    hooks: {\n      beforeValidate: [\n        ({ data, req, value }) => {\n          if (data?.apiKey === false || data?.apiKey === null) {\n            return null\n          }\n          if (data?.enableAPIKey === false || data?.enableAPIKey === null) {\n            return null\n          }\n          if (data?.apiKey) {\n            return crypto\n              .createHmac('sha256', req.payload.secret)\n              .update(data.apiKey as string)\n              .digest('hex')\n          }\n          return value\n        },\n      ],\n    },\n  },\n] as Field[]\n"],"names":["crypto","encryptKey","req","value","payload","encrypt","decryptKey","decrypt","undefined","apiKeyFields","name","type","admin","components","Field","label","t","hooks","afterRead","beforeChange","disabled","hidden","beforeValidate","data","apiKey","enableAPIKey","createHmac","secret","update","digest"],"mappings":";;;;AAAA,OAAOA,YAAY,SAAQ;;AAI3B,MAAMC,aAAwB,CAAC,EAAEC,GAAG,EAAEC,KAAK,EAAE,GAC3CA,QAAQD,IAAIE,OAAO,CAACC,OAAO,CAACF,SAAmB;AACjD,MAAMG,aAAwB,CAAC,EAAEJ,GAAG,EAAEC,KAAK,EAAE,GAC3CA,QAAQD,IAAIE,OAAO,CAACG,OAAO,CAACJ,SAAmBK;AAE1C,MAAMC,eAAe;IAC1B;QACEC,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,OAAO;YACT;QACF;QACAC,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;IACtB;IACA;QACEN,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,OAAO;YACT;QACF;QACAG,OAAO;YACLC,WAAW;gBAACZ;aAAW;YACvBa,cAAc;gBAAClB;aAAW;QAC5B;QACAc,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;IACtB;IACA;QACEN,MAAM;QACNC,MAAM;QACNC,OAAO;YACLQ,UAAU;QACZ;QACAC,QAAQ;QACRJ,OAAO;YACLK,gBAAgB;gBACd,CAAC,EAAEC,IAAI,EAAErB,GAAG,EAAEC,KAAK,EAAE;oBACnB,IAAIoB,MAAMC,WAAW,SAASD,MAAMC,WAAW,MAAM;wBACnD,OAAO;oBACT;oBACA,IAAID,MAAME,iBAAiB,SAASF,MAAME,iBAAiB,MAAM;wBAC/D,OAAO;oBACT;oBACA,IAAIF,MAAMC,QAAQ;wBAChB,OAAOxB,gHAAAA,CACJ0B,UAAU,CAAC,UAAUxB,IAAIE,OAAO,CAACuB,MAAM,EACvCC,MAAM,CAACL,KAAKC,MAAM,EAClBK,MAAM,CAAC;oBACZ;oBACA,OAAO1B;gBACT;aACD;QACH;IACF;CACD,CAAW"}},
    {"offset": {"line": 2493, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/auth.ts"],"sourcesContent":["import type { Field } from '../../fields/config/types.js'\n\nexport const baseAuthFields: Field[] = [\n  {\n    name: 'resetPasswordToken',\n    type: 'text',\n    hidden: true,\n  },\n  {\n    name: 'resetPasswordExpiration',\n    type: 'date',\n    hidden: true,\n  },\n  {\n    name: 'salt',\n    type: 'text',\n    hidden: true,\n  },\n  {\n    name: 'hash',\n    type: 'text',\n    hidden: true,\n  },\n]\n"],"names":["baseAuthFields","name","type","hidden"],"mappings":";;;;AAEO,MAAMA,iBAA0B;IACrC;QACEC,MAAM;QACNC,MAAM;QACNC,QAAQ;IACV;IACA;QACEF,MAAM;QACNC,MAAM;QACNC,QAAQ;IACV;IACA;QACEF,MAAM;QACNC,MAAM;QACNC,QAAQ;IACV;IACA;QACEF,MAAM;QACNC,MAAM;QACNC,QAAQ;IACV;CACD,CAAA"}},
    {"offset": {"line": 2523, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/email.ts"],"sourcesContent":["import type { EmailField } from '../../fields/config/types.js'\n\nimport { email } from '../../fields/validations.js'\n\nexport const emailFieldConfig: EmailField = {\n  name: 'email',\n  type: 'email',\n  admin: {\n    components: {\n      Field: false,\n    },\n  },\n  hooks: {\n    beforeChange: [\n      ({ value }) => {\n        if (value) {\n          return value.toLowerCase().trim()\n        }\n      },\n    ],\n  },\n  label: ({ t }) => t('general:email'),\n  required: true,\n  unique: true,\n  validate: email,\n}\n"],"names":["email","emailFieldConfig","name","type","admin","components","Field","hooks","beforeChange","value","toLowerCase","trim","label","t","required","unique","validate"],"mappings":";;;;AAEA,SAASA,KAAK,QAAQ,8BAA6B;;AAE5C,MAAMC,mBAA+B;IAC1CC,MAAM;IACNC,MAAM;IACNC,OAAO;QACLC,YAAY;YACVC,OAAO;QACT;IACF;IACAC,OAAO;QACLC,cAAc;YACZ,CAAC,EAAEC,KAAK,EAAE;gBACR,IAAIA,OAAO;oBACT,OAAOA,MAAMC,WAAW,GAAGC,IAAI;gBACjC;YACF;SACD;IACH;IACAC,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;IACpBC,UAAU;IACVC,QAAQ;IACRC,UAAUhB,mKAAAA;AACZ,EAAC"}},
    {"offset": {"line": 2555, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/sessions.ts"],"sourcesContent":["import type { ArrayField } from '../../fields/config/types.js'\n\nexport const sessionsFieldConfig: ArrayField = {\n  name: 'sessions',\n  type: 'array',\n  access: {\n    read: ({ doc, req: { user } }) => {\n      return user?.id === doc?.id\n    },\n    update: () => false,\n  },\n  admin: {\n    disabled: true,\n  },\n  fields: [\n    {\n      name: 'id',\n      type: 'text',\n      required: true,\n    },\n    {\n      name: 'createdAt',\n      type: 'date',\n      defaultValue: () => new Date(),\n    },\n    {\n      name: 'expiresAt',\n      type: 'date',\n      required: true,\n    },\n  ],\n}\n"],"names":["sessionsFieldConfig","name","type","access","read","doc","req","user","id","update","admin","disabled","fields","required","defaultValue","Date"],"mappings":";;;;AAEO,MAAMA,sBAAkC;IAC7CC,MAAM;IACNC,MAAM;IACNC,QAAQ;QACNC,MAAM,CAAC,EAAEC,GAAG,EAAEC,KAAK,EAAEC,IAAI,EAAE,EAAE;YAC3B,OAAOA,MAAMC,OAAOH,KAAKG;QAC3B;QACAC,QAAQ,IAAM;IAChB;IACAC,OAAO;QACLC,UAAU;IACZ;IACAC,QAAQ;QACN;YACEX,MAAM;YACNC,MAAM;YACNW,UAAU;QACZ;QACA;YACEZ,MAAM;YACNC,MAAM;YACNY,cAAc,IAAM,IAAIC;QAC1B;QACA;YACEd,MAAM;YACNC,MAAM;YACNW,UAAU;QACZ;KACD;AACH,EAAC"}},
    {"offset": {"line": 2593, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/username.ts"],"sourcesContent":["import type { TextField } from '../../fields/config/types.js'\n\nimport { username } from '../../fields/validations.js'\n\nexport const usernameFieldConfig: TextField = {\n  name: 'username',\n  type: 'text',\n  admin: {\n    components: {\n      Field: false,\n    },\n  },\n  hooks: {\n    beforeChange: [\n      ({ value }) => {\n        if (value) {\n          return value.toLowerCase().trim()\n        }\n      },\n    ],\n  },\n  label: ({ t }) => t('authentication:username'),\n  required: true,\n  unique: true,\n  validate: username,\n}\n"],"names":["username","usernameFieldConfig","name","type","admin","components","Field","hooks","beforeChange","value","toLowerCase","trim","label","t","required","unique","validate"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,8BAA6B;;AAE/C,MAAMC,sBAAiC;IAC5CC,MAAM;IACNC,MAAM;IACNC,OAAO;QACLC,YAAY;YACVC,OAAO;QACT;IACF;IACAC,OAAO;QACLC,cAAc;YACZ,CAAC,EAAEC,KAAK,EAAE;gBACR,IAAIA,OAAO;oBACT,OAAOA,MAAMC,WAAW,GAAGC,IAAI;gBACjC;YACF;SACD;IACH;IACAC,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;IACpBC,UAAU;IACVC,QAAQ;IACRC,UAAUhB,sKAAAA;AACZ,EAAC"}},
    {"offset": {"line": 2625, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/baseFields/verification.ts"],"sourcesContent":["import type { Field, FieldHook } from '../../fields/config/types.js'\n\nconst autoRemoveVerificationToken: FieldHook = ({ data, operation, originalDoc, value }) => {\n  // If a user manually sets `_verified` to true,\n  // and it was `false`, set _verificationToken to `null`.\n  // This is useful because the admin panel\n  // allows users to set `_verified` to true manually\n\n  if (operation === 'update') {\n    if (data?._verified === true && originalDoc?._verified === false) {\n      return null\n    }\n  }\n\n  return value\n}\n\nexport const verificationFields: Field[] = [\n  {\n    name: '_verified',\n    type: 'checkbox',\n    access: {\n      create: ({ req: { user } }) => Boolean(user),\n      read: ({ req: { user } }) => Boolean(user),\n      update: ({ req: { user } }) => Boolean(user),\n    },\n    admin: {\n      components: {\n        Field: false,\n      },\n    },\n    label: ({ t }) => t('authentication:verified'),\n  },\n  {\n    name: '_verificationToken',\n    type: 'text',\n    hidden: true,\n    hooks: {\n      beforeChange: [autoRemoveVerificationToken],\n    },\n  },\n] as Field[]\n"],"names":["autoRemoveVerificationToken","data","operation","originalDoc","value","_verified","verificationFields","name","type","access","create","req","user","Boolean","read","update","admin","components","Field","label","t","hidden","hooks","beforeChange"],"mappings":";;;;AAEA,MAAMA,8BAAyC,CAAC,EAAEC,IAAI,EAAEC,SAAS,EAAEC,WAAW,EAAEC,KAAK,EAAE;IACrF,+CAA+C;IAC/C,wDAAwD;IACxD,yCAAyC;IACzC,mDAAmD;IAEnD,IAAIF,cAAc,UAAU;QAC1B,IAAID,MAAMI,cAAc,QAAQF,aAAaE,cAAc,OAAO;YAChE,OAAO;QACT;IACF;IAEA,OAAOD;AACT;AAEO,MAAME,qBAA8B;IACzC;QACEC,MAAM;QACNC,MAAM;QACNC,QAAQ;YACNC,QAAQ,CAAC,EAAEC,KAAK,EAAEC,IAAI,EAAE,EAAE,GAAKC,QAAQD;YACvCE,MAAM,CAAC,EAAEH,KAAK,EAAEC,IAAI,EAAE,EAAE,GAAKC,QAAQD;YACrCG,QAAQ,CAAC,EAAEJ,KAAK,EAAEC,IAAI,EAAE,EAAE,GAAKC,QAAQD;QACzC;QACAI,OAAO;YACLC,YAAY;gBACVC,OAAO;YACT;QACF;QACAC,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;IACtB;IACA;QACEb,MAAM;QACNC,MAAM;QACNa,QAAQ;QACRC,OAAO;YACLC,cAAc;gBAACvB;aAA4B;QAC7C;IACF;CACD,CAAW"}},
    {"offset": {"line": 2672, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/auth/getAuthFields.ts"],"sourcesContent":["import type { Field, TextField } from '../fields/config/types.js'\nimport type { IncomingAuthType } from './types.js'\n\nimport { accountLockFields } from './baseFields/accountLock.js'\nimport { apiKeyFields } from './baseFields/apiKey.js'\nimport { baseAuthFields } from './baseFields/auth.js'\nimport { emailFieldConfig } from './baseFields/email.js'\nimport { sessionsFieldConfig } from './baseFields/sessions.js'\nimport { usernameFieldConfig } from './baseFields/username.js'\nimport { verificationFields } from './baseFields/verification.js'\n\nexport const getBaseAuthFields = (authConfig: IncomingAuthType): Field[] => {\n  const authFields: Field[] = []\n\n  if (authConfig.useAPIKey) {\n    authFields.push(...apiKeyFields)\n  }\n\n  if (\n    !authConfig.disableLocalStrategy ||\n    (typeof authConfig.disableLocalStrategy === 'object' &&\n      authConfig.disableLocalStrategy.enableFields)\n  ) {\n    const emailField = { ...emailFieldConfig }\n    let usernameField: TextField | undefined\n\n    if (authConfig.loginWithUsername) {\n      usernameField = { ...usernameFieldConfig }\n      if (typeof authConfig.loginWithUsername === 'object') {\n        if (authConfig.loginWithUsername.requireEmail === false) {\n          emailField.required = false\n        }\n        if (authConfig.loginWithUsername.requireUsername === false) {\n          usernameField.required = false\n        }\n        if (authConfig.loginWithUsername.allowEmailLogin === false) {\n          emailField.unique = false\n        }\n      }\n    }\n\n    authFields.push(emailField)\n    if (usernameField) {\n      authFields.push(usernameField)\n    }\n\n    authFields.push(...baseAuthFields)\n\n    if (authConfig.verify) {\n      authFields.push(...verificationFields)\n    }\n\n    if (authConfig?.maxLoginAttempts && authConfig.maxLoginAttempts > 0) {\n      authFields.push(...accountLockFields)\n    }\n\n    if (authConfig.useSessions) {\n      authFields.push(sessionsFieldConfig)\n    }\n  }\n\n  return authFields\n}\n"],"names":["accountLockFields","apiKeyFields","baseAuthFields","emailFieldConfig","sessionsFieldConfig","usernameFieldConfig","verificationFields","getBaseAuthFields","authConfig","authFields","useAPIKey","push","disableLocalStrategy","enableFields","emailField","usernameField","loginWithUsername","requireEmail","required","requireUsername","allowEmailLogin","unique","verify","maxLoginAttempts","useSessions"],"mappings":";;;;AAGA,SAASA,iBAAiB,QAAQ,8BAA6B;AAC/D,SAASC,YAAY,QAAQ,yBAAwB;AACrD,SAASC,cAAc,QAAQ,uBAAsB;AACrD,SAASC,gBAAgB,QAAQ,wBAAuB;AACxD,SAASC,mBAAmB,QAAQ,2BAA0B;AAC9D,SAASC,mBAAmB,QAAQ,2BAA0B;AAC9D,SAASC,kBAAkB,QAAQ,+BAA8B;;;;;;;;AAE1D,MAAMC,oBAAoB,CAACC;IAChC,MAAMC,aAAsB,EAAE;IAE9B,IAAID,WAAWE,SAAS,EAAE;QACxBD,WAAWE,IAAI,IAAIV,iLAAAA;IACrB;IAEA,IACE,CAACO,WAAWI,oBAAoB,IAC/B,OAAOJ,WAAWI,oBAAoB,KAAK,YAC1CJ,WAAWI,oBAAoB,CAACC,YAAY,EAC9C;QACA,MAAMC,aAAa;YAAE,GAAGX,oLAAgB;QAAC;QACzC,IAAIY;QAEJ,IAAIP,WAAWQ,iBAAiB,EAAE;YAChCD,gBAAgB;gBAAE,GAAGV,0LAAmB;YAAC;YACzC,IAAI,OAAOG,WAAWQ,iBAAiB,KAAK,UAAU;gBACpD,IAAIR,WAAWQ,iBAAiB,CAACC,YAAY,KAAK,OAAO;oBACvDH,WAAWI,QAAQ,GAAG;gBACxB;gBACA,IAAIV,WAAWQ,iBAAiB,CAACG,eAAe,KAAK,OAAO;oBAC1DJ,cAAcG,QAAQ,GAAG;gBAC3B;gBACA,IAAIV,WAAWQ,iBAAiB,CAACI,eAAe,KAAK,OAAO;oBAC1DN,WAAWO,MAAM,GAAG;gBACtB;YACF;QACF;QAEAZ,WAAWE,IAAI,CAACG;QAChB,IAAIC,eAAe;YACjBN,WAAWE,IAAI,CAACI;QAClB;QAEAN,WAAWE,IAAI,IAAIT,iLAAAA;QAEnB,IAAIM,WAAWc,MAAM,EAAE;YACrBb,WAAWE,IAAI,IAAIL,6LAAAA;QACrB;QAEA,IAAIE,YAAYe,oBAAoBf,WAAWe,gBAAgB,GAAG,GAAG;YACnEd,WAAWE,IAAI,IAAIX,2LAAAA;QACrB;QAEA,IAAIQ,WAAWgB,WAAW,EAAE;YAC1Bf,WAAWE,IAAI,CAACP,0LAAAA;QAClB;IACF;IAEA,OAAOK;AACT,EAAC"}},
    {"offset": {"line": 2737, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/TimestampsRequired.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class TimestampsRequired extends APIError {\n  constructor(collection: CollectionConfig) {\n    super(\n      `Timestamps are required in the collection ${collection.slug} because you have opted in to Versions.`,\n    )\n  }\n}\n"],"names":["APIError","TimestampsRequired","collection","slug"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,2BAA2BD,mKAAAA;IACtC,YAAYE,UAA4B,CAAE;QACxC,KAAK,CACH,CAAC,0CAA0C,EAAEA,WAAWC,IAAI,CAAC,uCAAuC,CAAC;IAEzG;AACF"}},
    {"offset": {"line": 2752, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/DuplicateFieldName.ts"],"sourcesContent":["import { APIError } from './APIError.js'\n\nexport class DuplicateFieldName extends APIError {\n  constructor(fieldName: string) {\n    super(\n      `A field with the name '${fieldName}' was found multiple times on the same level. Field names must be unique.`,\n    )\n  }\n}\n"],"names":["APIError","DuplicateFieldName","fieldName"],"mappings":";;;;AAAA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,2BAA2BD,mKAAAA;IACtC,YAAYE,SAAiB,CAAE;QAC7B,KAAK,CACH,CAAC,uBAAuB,EAAEA,UAAU,yEAAyE,CAAC;IAElH;AACF"}},
    {"offset": {"line": 2767, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/InvalidConfiguration.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidConfiguration extends APIError {\n  constructor(message: string) {\n    super(message, httpStatus.INTERNAL_SERVER_ERROR)\n  }\n}\n"],"names":["status","httpStatus","APIError","InvalidConfiguration","message","INTERNAL_SERVER_ERROR"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,6BAA6BD,mKAAAA;IACxC,YAAYE,OAAe,CAAE;QAC3B,KAAK,CAACA,SAASH,sMAAAA,CAAWI,qBAAqB;IACjD;AACF"}},
    {"offset": {"line": 2785, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/InvalidFieldName.ts"],"sourcesContent":["import type { FieldAffectingData } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldName extends APIError {\n  constructor(field: FieldAffectingData, fieldName: string) {\n    super(\n      `Field ${field.label} has invalid name '${fieldName}'. Field names can not include periods (.) and must be alphanumeric.`,\n    )\n  }\n}\n"],"names":["APIError","InvalidFieldName","field","fieldName","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,yBAAyBD,mKAAAA;IACpC,YAAYE,KAAyB,EAAEC,SAAiB,CAAE;QACxD,KAAK,CACH,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,mBAAmB,EAAED,UAAU,oEAAoE,CAAC;IAE7H;AACF"}},
    {"offset": {"line": 2800, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/InvalidFieldRelationship.ts"],"sourcesContent":["import type { RelationshipField, UploadField } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldRelationship extends APIError {\n  constructor(field: RelationshipField | UploadField, relationship: string) {\n    super(`Field ${field.label} has invalid relationship '${relationship}'.`)\n  }\n}\n"],"names":["APIError","InvalidFieldRelationship","field","relationship","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,iCAAiCD,mKAAAA;IAC5C,YAAYE,KAAsC,EAAEC,YAAoB,CAAE;QACxE,KAAK,CAAC,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,2BAA2B,EAAED,aAAa,EAAE,CAAC;IAC1E;AACF"}},
    {"offset": {"line": 2815, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/MissingFieldType.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\n\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { APIError } from './APIError.js'\n\nexport class MissingFieldType extends APIError {\n  constructor(field: Field) {\n    super(\n      `Field${\n        fieldAffectsData(field) ? ` \"${field.name}\"` : ''\n      } is either missing a field type or it does not match an available field type`,\n    )\n  }\n}\n"],"names":["fieldAffectsData","APIError","MissingFieldType","field","name"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,4BAA2B;AAC5D,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,yBAAyBD,mKAAAA;IACpC,YAAYE,KAAY,CAAE;QACxB,KAAK,CACH,CAAC,KAAK,MACJH,kLAAAA,EAAiBG,SAAS,CAAC,EAAE,EAAEA,MAAMC,IAAI,CAAC,CAAC,CAAC,GAAG,GAChD,4EAA4E,CAAC;IAElF;AACF"}},
    {"offset": {"line": 2832, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/ReservedFieldName.ts"],"sourcesContent":["import type { FieldAffectingData } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class ReservedFieldName extends APIError {\n  constructor(field: FieldAffectingData, fieldName: string) {\n    super(`Field ${field.label} has reserved name '${fieldName}'.`)\n  }\n}\n"],"names":["APIError","ReservedFieldName","field","fieldName","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,0BAA0BD,mKAAAA;IACrC,YAAYE,KAAyB,EAAEC,SAAiB,CAAE;QACxD,KAAK,CAAC,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,oBAAoB,EAAED,UAAU,EAAE,CAAC;IAChE;AACF"}},
    {"offset": {"line": 2847, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/flattenAllFields.ts"],"sourcesContent":["import type {\n  Block,\n  Field,\n  FlattenedBlock,\n  FlattenedBlocksField,\n  FlattenedField,\n  FlattenedJoinField,\n} from '../fields/config/types.js'\n\nimport { fieldAffectsData, tabHasName } from '../fields/config/types.js'\n\nexport const flattenBlock = ({ block }: { block: Block }): FlattenedBlock => {\n  return {\n    ...block,\n    flattenedFields: flattenAllFields({ fields: block.fields }),\n  }\n}\n\nconst flattenedFieldsCache = new Map<Field[], FlattenedField[]>()\n\n/**\n * Flattens all fields in a collection, preserving the nested field structure.\n * @param cache\n * @param fields\n */\nexport const flattenAllFields = ({\n  cache,\n  fields,\n}: {\n  /** Allows you to get FlattenedField[] from Field[] anywhere without performance overhead by caching. */\n  cache?: boolean\n  fields: Field[]\n}): FlattenedField[] => {\n  if (cache) {\n    const maybeFields = flattenedFieldsCache.get(fields)\n    if (maybeFields) {\n      return maybeFields\n    }\n  }\n\n  const result: FlattenedField[] = []\n\n  for (const field of fields) {\n    switch (field.type) {\n      case 'array':\n      case 'group': {\n        if (fieldAffectsData(field)) {\n          result.push({ ...field, flattenedFields: flattenAllFields({ fields: field.fields }) })\n        } else {\n          for (const nestedField of flattenAllFields({ fields: field.fields })) {\n            result.push(nestedField)\n          }\n        }\n        break\n      }\n\n      case 'blocks': {\n        const blocks: FlattenedBlock[] = []\n        let blockReferences: (FlattenedBlock | string)[] | undefined = undefined\n        if (field.blockReferences) {\n          blockReferences = []\n          for (const block of field.blockReferences) {\n            if (typeof block === 'string') {\n              blockReferences.push(block)\n              continue\n            }\n            blockReferences.push(flattenBlock({ block }))\n          }\n        } else {\n          for (const block of field.blocks) {\n            if (typeof block === 'string') {\n              blocks.push(block)\n              continue\n            }\n            blocks.push(flattenBlock({ block }))\n          }\n        }\n\n        const resultField: FlattenedBlocksField = {\n          ...field,\n          blockReferences,\n          blocks,\n        }\n\n        result.push(resultField)\n        break\n      }\n\n      case 'collapsible':\n      case 'row': {\n        for (const nestedField of flattenAllFields({ fields: field.fields })) {\n          result.push(nestedField)\n        }\n        break\n      }\n\n      case 'join': {\n        result.push(field as FlattenedJoinField)\n        break\n      }\n\n      case 'tabs': {\n        for (const tab of field.tabs) {\n          if (!tabHasName(tab)) {\n            for (const nestedField of flattenAllFields({ fields: tab.fields })) {\n              result.push(nestedField)\n            }\n          } else {\n            result.push({\n              ...tab,\n              type: 'tab',\n              flattenedFields: flattenAllFields({ fields: tab.fields }),\n            })\n          }\n        }\n        break\n      }\n\n      default: {\n        if (field.type !== 'ui') {\n          result.push(field)\n        }\n      }\n    }\n  }\n\n  flattenedFieldsCache.set(fields, result)\n\n  return result\n}\n"],"names":["fieldAffectsData","tabHasName","flattenBlock","block","flattenedFields","flattenAllFields","fields","flattenedFieldsCache","Map","cache","maybeFields","get","result","field","type","push","nestedField","blocks","blockReferences","undefined","resultField","tab","tabs","set"],"mappings":";;;;;;AASA,SAASA,gBAAgB,EAAEC,UAAU,QAAQ,4BAA2B;;AAEjE,MAAMC,eAAe,CAAC,EAAEC,KAAK,EAAoB;IACtD,OAAO;QACL,GAAGA,KAAK;QACRC,iBAAiBC,iBAAiB;YAAEC,QAAQH,MAAMG,MAAM;QAAC;IAC3D;AACF,EAAC;AAED,MAAMC,uBAAuB,IAAIC;AAO1B,MAAMH,mBAAmB,CAAC,EAC/BI,KAAK,EACLH,MAAM,EAKP;IACC,IAAIG,OAAO;QACT,MAAMC,cAAcH,qBAAqBI,GAAG,CAACL;QAC7C,IAAII,aAAa;YACf,OAAOA;QACT;IACF;IAEA,MAAME,SAA2B,EAAE;IAEnC,KAAK,MAAMC,SAASP,OAAQ;QAC1B,OAAQO,MAAMC,IAAI;YAChB,KAAK;YACL,KAAK;gBAAS;oBACZ,QAAId,kLAAAA,EAAiBa,QAAQ;wBAC3BD,OAAOG,IAAI,CAAC;4BAAE,GAAGF,KAAK;4BAAET,iBAAiBC,iBAAiB;gCAAEC,QAAQO,MAAMP,MAAM;4BAAC;wBAAG;oBACtF,OAAO;wBACL,KAAK,MAAMU,eAAeX,iBAAiB;4BAAEC,QAAQO,MAAMP,MAAM;wBAAC,GAAI;4BACpEM,OAAOG,IAAI,CAACC;wBACd;oBACF;oBACA;gBACF;YAEA,KAAK;gBAAU;oBACb,MAAMC,SAA2B,EAAE;oBACnC,IAAIC,kBAA2DC;oBAC/D,IAAIN,MAAMK,eAAe,EAAE;wBACzBA,kBAAkB,EAAE;wBACpB,KAAK,MAAMf,SAASU,MAAMK,eAAe,CAAE;4BACzC,IAAI,OAAOf,UAAU,UAAU;gCAC7Be,gBAAgBH,IAAI,CAACZ;gCACrB;4BACF;4BACAe,gBAAgBH,IAAI,CAACb,aAAa;gCAAEC;4BAAM;wBAC5C;oBACF,OAAO;wBACL,KAAK,MAAMA,SAASU,MAAMI,MAAM,CAAE;4BAChC,IAAI,OAAOd,UAAU,UAAU;gCAC7Bc,OAAOF,IAAI,CAACZ;gCACZ;4BACF;4BACAc,OAAOF,IAAI,CAACb,aAAa;gCAAEC;4BAAM;wBACnC;oBACF;oBAEA,MAAMiB,cAAoC;wBACxC,GAAGP,KAAK;wBACRK;wBACAD;oBACF;oBAEAL,OAAOG,IAAI,CAACK;oBACZ;gBACF;YAEA,KAAK;YACL,KAAK;gBAAO;oBACV,KAAK,MAAMJ,eAAeX,iBAAiB;wBAAEC,QAAQO,MAAMP,MAAM;oBAAC,GAAI;wBACpEM,OAAOG,IAAI,CAACC;oBACd;oBACA;gBACF;YAEA,KAAK;gBAAQ;oBACXJ,OAAOG,IAAI,CAACF;oBACZ;gBACF;YAEA,KAAK;gBAAQ;oBACX,KAAK,MAAMQ,OAAOR,MAAMS,IAAI,CAAE;wBAC5B,IAAI,KAACrB,4KAAAA,EAAWoB,MAAM;4BACpB,KAAK,MAAML,eAAeX,iBAAiB;gCAAEC,QAAQe,IAAIf,MAAM;4BAAC,GAAI;gCAClEM,OAAOG,IAAI,CAACC;4BACd;wBACF,OAAO;4BACLJ,OAAOG,IAAI,CAAC;gCACV,GAAGM,GAAG;gCACNP,MAAM;gCACNV,iBAAiBC,iBAAiB;oCAAEC,QAAQe,IAAIf,MAAM;gCAAC;4BACzD;wBACF;oBACF;oBACA;gBACF;YAEA;gBAAS;oBACP,IAAIO,MAAMC,IAAI,KAAK,MAAM;wBACvBF,OAAOG,IAAI,CAACF;oBACd;gBACF;QACF;IACF;IAEAN,qBAAqBgB,GAAG,CAACjB,QAAQM;IAEjC,OAAOA;AACT,EAAC"}},
    {"offset": {"line": 2978, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/formatLabels.ts"],"sourcesContent":["import pluralize from 'pluralize'\nconst { isPlural, singular } = pluralize\n\nconst capitalizeFirstLetter = (string: string): string =>\n  string.charAt(0).toUpperCase() + string.slice(1)\n\nconst toWords = (inputString: string, joinWords = false): string => {\n  const notNullString = inputString || ''\n  const trimmedString = notNullString.trim()\n  const arrayOfStrings = trimmedString.split(/[\\s-]/)\n\n  const splitStringsArray: string[] = []\n  arrayOfStrings.forEach((tempString) => {\n    if (tempString !== '') {\n      const splitWords = tempString.split(/(?=[A-Z])/).join(' ')\n      splitStringsArray.push(capitalizeFirstLetter(splitWords))\n    }\n  })\n\n  return joinWords ? splitStringsArray.join('').replace(/\\s/g, '') : splitStringsArray.join(' ')\n}\n\nconst formatLabels = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug)\n\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nconst formatNames = (slug: string): { plural: string; singular: string } => {\n  const words = toWords(slug, true)\n  return isPlural(slug)\n    ? {\n        plural: words,\n        singular: singular(words),\n      }\n    : {\n        plural: pluralize(words),\n        singular: words,\n      }\n}\n\nexport { formatLabels, formatNames, toWords }\n"],"names":["pluralize","isPlural","singular","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toWords","inputString","joinWords","notNullString","trimmedString","trim","arrayOfStrings","split","splitStringsArray","forEach","tempString","splitWords","join","push","replace","formatLabels","slug","words","plural","formatNames"],"mappings":";;;;;;;;AAAA,OAAOA,eAAe,YAAW;;AACjC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE,GAAGF,mJAAAA;AAE/B,MAAMG,wBAAwB,CAACC,SAC7BA,OAAOC,MAAM,CAAC,GAAGC,WAAW,KAAKF,OAAOG,KAAK,CAAC;AAEhD,MAAMC,UAAU,CAACC,aAAqBC,YAAY,KAAK;IACrD,MAAMC,gBAAgBF,eAAe;IACrC,MAAMG,gBAAgBD,cAAcE,IAAI;IACxC,MAAMC,iBAAiBF,cAAcG,KAAK,CAAC;IAE3C,MAAMC,oBAA8B,EAAE;IACtCF,eAAeG,OAAO,CAAC,CAACC;QACtB,IAAIA,eAAe,IAAI;YACrB,MAAMC,aAAaD,WAAWH,KAAK,CAAC,aAAaK,IAAI,CAAC;YACtDJ,kBAAkBK,IAAI,CAAClB,sBAAsBgB;QAC/C;IACF;IAEA,OAAOT,YAAYM,kBAAkBI,IAAI,CAAC,IAAIE,OAAO,CAAC,OAAO,MAAMN,kBAAkBI,IAAI,CAAC;AAC5F;AAEA,MAAMG,eAAe,CAACC;IACpB,MAAMC,QAAQjB,QAAQgB;IAEtB,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,YAAQ1B,mJAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN;AAEA,MAAME,cAAc,CAACH;IACnB,MAAMC,QAAQjB,QAAQgB,MAAM;IAC5B,OAAOvB,SAASuB,QACZ;QACEE,QAAQD;QACRvB,UAAUA,SAASuB;IACrB,IACA;QACEC,YAAQ1B,mJAAAA,EAAUyB;QAClBvB,UAAUuB;IACZ;AACN"}},
    {"offset": {"line": 3029, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/validateTimezones.ts"],"sourcesContent":["import type { Timezone } from '../config/types.js'\n\nimport { InvalidConfiguration } from '../errors/index.js'\n\ntype ValidateTimezonesArgs = {\n  /**\n   * The source of the timezones for error messaging\n   */\n  source?: string\n  /**\n   * Array of timezones to validate\n   */\n  timezones: Timezone[] | undefined\n}\n\n/**\n * Validates a UTC offset string.\n * Only supports the HH:mm format (e.g., +05:30, -08:00).\n *\n * Valid ranges: hours -12 to +14, minutes 0-59\n *\n * @returns true if the offset is valid\n */\nconst isValidUtcOffset = (value: string): boolean => {\n  // Strict format check: only HH:mm\n  const match = value.match(/^([+-])(\\d{2}):(\\d{2})$/)\n  if (!match) {\n    return false\n  }\n\n  const sign = match[1] === '+' ? 1 : -1\n  const hours = parseInt(match[2]!, 10)\n  const minutes = parseInt(match[3]!, 10)\n\n  // Minutes must be 0-59\n  if (minutes > 59) {\n    return false\n  }\n\n  // Valid range: -12:00 (-720 min) to +14:00 (+840 min)\n  const totalMinutes = sign * (hours * 60 + minutes)\n  return totalMinutes >= -720 && totalMinutes <= 840\n}\n\n/**\n * Checks if a timezone is supported by the current runtime.\n * Supports both IANA timezone names and UTC offset formats.\n *\n * For IANA names: Uses Intl.DateTimeFormat and Intl.supportedValuesOf\n * For UTC offsets: Uses native Date API to validate (HH:mm format only)\n */\nconst isTimezoneSupported = (timezoneValue: string): boolean => {\n  // UTC is always supported\n  if (timezoneValue === 'UTC') {\n    return true\n  }\n\n  // Check if it's a UTC offset format (starts with + or -)\n  if (timezoneValue.startsWith('+') || timezoneValue.startsWith('-')) {\n    return isValidUtcOffset(timezoneValue)\n  }\n\n  // For IANA timezone names, use Intl.DateTimeFormat as primary check\n  try {\n    new Intl.DateTimeFormat('en-US', { timeZone: timezoneValue })\n    return true\n  } catch {\n    // DateTimeFormat failed, timezone is not supported\n  }\n\n  // Secondary check: verify against supportedValuesOf if available\n  if (typeof Intl.supportedValuesOf === 'function') {\n    const supportedTimezones = Intl.supportedValuesOf('timeZone')\n    if (supportedTimezones.includes(timezoneValue)) {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Validates that all provided timezones are supported by the current runtime's Intl API.\n * Uses both Intl.DateTimeFormat and Intl.supportedValuesOf for comprehensive validation.\n *\n * @throws InvalidConfiguration if an unsupported timezone is found\n */\nexport const validateTimezones = ({ source, timezones }: ValidateTimezonesArgs): void => {\n  if (!timezones?.length) {\n    return\n  }\n\n  for (const timezone of timezones) {\n    if (!isTimezoneSupported(timezone.value)) {\n      const sourceText = source ? ` in ${source}` : ''\n      throw new InvalidConfiguration(\n        `Timezone ${timezone.value}${sourceText} is not supported by the current runtime via the Intl API.`,\n      )\n    }\n  }\n}\n"],"names":["InvalidConfiguration","isValidUtcOffset","value","match","sign","hours","parseInt","minutes","totalMinutes","isTimezoneSupported","timezoneValue","startsWith","Intl","DateTimeFormat","timeZone","supportedValuesOf","supportedTimezones","includes","validateTimezones","source","timezones","length","timezone","sourceText"],"mappings":";;;;AAEA,SAASA,oBAAoB,QAAQ,qBAAoB;;AAazD;;;;;;;CAOC,GACD,MAAMC,mBAAmB,CAACC;IACxB,mCAAmC;IACnC,MAAMC,QAAQD,MAAMC,KAAK,CAAC;IAC1B,IAAI,CAACA,OAAO;QACV,OAAO;IACT;IAEA,MAAMC,OAAOD,KAAK,CAAC,EAAE,KAAK,MAAM,IAAI,CAAC;IACrC,MAAME,QAAQC,SAASH,KAAK,CAAC,EAAE,EAAG;IAClC,MAAMI,UAAUD,SAASH,KAAK,CAAC,EAAE,EAAG;IAEpC,uBAAuB;IACvB,IAAII,UAAU,IAAI;QAChB,OAAO;IACT;IAEA,sDAAsD;IACtD,MAAMC,eAAeJ,OAAQC,CAAAA,QAAQ,KAAKE,OAAM;IAChD,OAAOC,gBAAgB,CAAC,OAAOA,gBAAgB;AACjD;AAEA;;;;;;CAMC,GACD,MAAMC,sBAAsB,CAACC;IAC3B,0BAA0B;IAC1B,IAAIA,kBAAkB,OAAO;QAC3B,OAAO;IACT;IAEA,yDAAyD;IACzD,IAAIA,cAAcC,UAAU,CAAC,QAAQD,cAAcC,UAAU,CAAC,MAAM;QAClE,OAAOV,iBAAiBS;IAC1B;IAEA,oEAAoE;IACpE,IAAI;QACF,IAAIE,KAAKC,cAAc,CAAC,SAAS;YAAEC,UAAUJ;QAAc;QAC3D,OAAO;IACT,EAAE,OAAM;IACN,mDAAmD;IACrD;IAEA,iEAAiE;IACjE,IAAI,OAAOE,KAAKG,iBAAiB,KAAK,YAAY;QAChD,MAAMC,qBAAqBJ,KAAKG,iBAAiB,CAAC;QAClD,IAAIC,mBAAmBC,QAAQ,CAACP,gBAAgB;YAC9C,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAQO,MAAMQ,oBAAoB,CAAC,EAAEC,MAAM,EAAEC,SAAS,EAAyB;IAC5E,IAAI,CAACA,WAAWC,QAAQ;QACtB;IACF;IAEA,KAAK,MAAMC,YAAYF,UAAW;QAChC,IAAI,CAACX,oBAAoBa,SAASpB,KAAK,GAAG;YACxC,MAAMqB,aAAaJ,SAAS,CAAC,IAAI,EAAEA,QAAQ,GAAG;YAC9C,MAAM,IAAInB,2LAAAA,CACR,CAAC,SAAS,EAAEsB,SAASpB,KAAK,GAAGqB,WAAW,0DAA0D,CAAC;QAEvG;IACF;AACF,EAAC"}},
    {"offset": {"line": 3107, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/baseFields/baseIDField.ts"],"sourcesContent":["import ObjectIdImport from 'bson-objectid'\n\nimport type { TextField } from '../config/types.js'\n\nconst ObjectId = 'default' in ObjectIdImport ? ObjectIdImport.default : ObjectIdImport\n\nexport const baseIDField: TextField = {\n  name: 'id',\n  type: 'text',\n  admin: {\n    hidden: true,\n  },\n  defaultValue: () => new ObjectId().toHexString(),\n  hooks: {\n    beforeChange: [({ value }) => value || new ObjectId().toHexString()],\n    // ID field values for arrays and blocks need to be unique when duplicating, as on postgres they are stored on the same table as primary keys.\n    beforeDuplicate: [() => new ObjectId().toHexString()],\n  },\n  label: 'ID',\n}\n"],"names":["ObjectIdImport","ObjectId","default","baseIDField","name","type","admin","hidden","defaultValue","toHexString","hooks","beforeChange","value","beforeDuplicate","label"],"mappings":";;;;AAAA,OAAOA,oBAAoB,gBAAe;;AAI1C,MAAMC,WAAW,aAAaD,yJAAAA,GAAiBA,yJAAAA,CAAeE,OAAO,GAAGF,yJAAAA;AAEjE,MAAMG,cAAyB;IACpCC,MAAM;IACNC,MAAM;IACNC,OAAO;QACLC,QAAQ;IACV;IACAC,cAAc,IAAM,IAAIP,WAAWQ,WAAW;IAC9CC,OAAO;QACLC,cAAc;YAAC,CAAC,EAAEC,KAAK,EAAE,GAAKA,SAAS,IAAIX,WAAWQ,WAAW;SAAG;QACpE,8IAA8I;QAC9II,iBAAiB;YAAC,IAAM,IAAIZ,WAAWQ,WAAW;SAAG;IACvD;IACAK,OAAO;AACT,EAAC"}},
    {"offset": {"line": 3136, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/baseFields/baseBlockFields.ts"],"sourcesContent":["import type { Field } from '../config/types.js'\n\nimport { baseIDField } from './baseIDField.js'\n\nexport const baseBlockFields: Field[] = [\n  baseIDField,\n  {\n    name: 'blockName',\n    type: 'text',\n    admin: {\n      disabled: true,\n    },\n    label: 'Block Name',\n    required: false,\n  },\n]\n"],"names":["baseIDField","baseBlockFields","name","type","admin","disabled","label","required"],"mappings":";;;;AAEA,SAASA,WAAW,QAAQ,mBAAkB;;AAEvC,MAAMC,kBAA2B;IACtCD,uLAAAA;IACA;QACEE,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,UAAU;QACZ;QACAC,OAAO;QACPC,UAAU;IACZ;CACD,CAAA"}},
    {"offset": {"line": 3158, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/baseFields/timezone/baseField.ts"],"sourcesContent":["import type { StaticLabel } from '../../../config/types.js'\nimport type { SelectField } from '../../config/types.js'\n\nexport const baseTimezoneField: (\n  args: { label?: StaticLabel } & Partial<SelectField>,\n) => SelectField = ({ name, defaultValue, label, options, required }) => {\n  return {\n    name: name!,\n    type: 'select',\n    admin: {\n      hidden: true,\n    },\n    defaultValue,\n    label,\n    options: options!,\n    required,\n  }\n}\n"],"names":["baseTimezoneField","name","defaultValue","label","options","required","type","admin","hidden"],"mappings":";;;;AAGO,MAAMA,oBAEM,CAAC,EAAEC,IAAI,EAAEC,YAAY,EAAEC,KAAK,EAAEC,OAAO,EAAEC,QAAQ,EAAE;IAClE,OAAO;QACLJ,MAAMA;QACNK,MAAM;QACNC,OAAO;YACLC,QAAQ;QACV;QACAN;QACAC;QACAC,SAASA;QACTC;IACF;AACF,EAAC"}},
    {"offset": {"line": 3179, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/baseFields/timezone/defaultTimezones.ts"],"sourcesContent":["import type { Timezone } from '../../../config/types.js'\n\n/**\n * List of supported timezones\n *\n * label: UTC offset and location\n * value: IANA timezone name\n *\n * @example\n * { label: '(UTC-12:00) International Date Line West', value: 'Dateline Standard Time' }\n */\nexport const defaultTimezones: Timezone[] = [\n  { label: '(UTC-11:00) Midway Island, Samoa', value: 'Pacific/Midway' },\n  { label: '(UTC-11:00) Niue', value: 'Pacific/Niue' },\n  { label: '(UTC-10:00) Hawaii', value: 'Pacific/Honolulu' },\n  { label: '(UTC-10:00) Cook Islands', value: 'Pacific/Rarotonga' },\n  { label: '(UTC-09:00) Alaska', value: 'America/Anchorage' },\n  { label: '(UTC-09:00) Gambier Islands', value: 'Pacific/Gambier' },\n  { label: '(UTC-08:00) Pacific Time (US & Canada)', value: 'America/Los_Angeles' },\n  { label: '(UTC-08:00) Tijuana, Baja California', value: 'America/Tijuana' },\n  { label: '(UTC-07:00) Mountain Time (US & Canada)', value: 'America/Denver' },\n  { label: '(UTC-07:00) Arizona (No DST)', value: 'America/Phoenix' },\n  { label: '(UTC-06:00) Central Time (US & Canada)', value: 'America/Chicago' },\n  { label: '(UTC-06:00) Central America', value: 'America/Guatemala' },\n  { label: '(UTC-05:00) Eastern Time (US & Canada)', value: 'America/New_York' },\n  { label: '(UTC-05:00) Bogota, Lima, Quito', value: 'America/Bogota' },\n  { label: '(UTC-04:00) Caracas', value: 'America/Caracas' },\n  { label: '(UTC-04:00) Santiago', value: 'America/Santiago' },\n  { label: '(UTC-03:00) Buenos Aires', value: 'America/Buenos_Aires' },\n  { label: '(UTC-03:00) Brasilia', value: 'America/Sao_Paulo' },\n  { label: '(UTC-02:00) South Georgia', value: 'Atlantic/South_Georgia' },\n  { label: '(UTC-01:00) Azores', value: 'Atlantic/Azores' },\n  { label: '(UTC-01:00) Cape Verde', value: 'Atlantic/Cape_Verde' },\n  { label: '(UTC+00:00) London (GMT)', value: 'Europe/London' },\n  { label: '(UTC+01:00) Berlin, Paris', value: 'Europe/Berlin' },\n  { label: '(UTC+01:00) Lagos', value: 'Africa/Lagos' },\n  { label: '(UTC+02:00) Athens, Bucharest', value: 'Europe/Athens' },\n  { label: '(UTC+02:00) Cairo', value: 'Africa/Cairo' },\n  { label: '(UTC+03:00) Moscow, St. Petersburg', value: 'Europe/Moscow' },\n  { label: '(UTC+03:00) Riyadh', value: 'Asia/Riyadh' },\n  { label: '(UTC+04:00) Dubai', value: 'Asia/Dubai' },\n  { label: '(UTC+04:00) Baku', value: 'Asia/Baku' },\n  { label: '(UTC+05:00) Islamabad, Karachi', value: 'Asia/Karachi' },\n  { label: '(UTC+05:00) Tashkent', value: 'Asia/Tashkent' },\n  { label: '(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi', value: 'Asia/Calcutta' },\n  { label: '(UTC+06:00) Dhaka', value: 'Asia/Dhaka' },\n  { label: '(UTC+06:00) Almaty', value: 'Asia/Almaty' },\n  { label: '(UTC+07:00) Jakarta', value: 'Asia/Jakarta' },\n  { label: '(UTC+07:00) Bangkok', value: 'Asia/Bangkok' },\n  { label: '(UTC+08:00) Beijing, Shanghai', value: 'Asia/Shanghai' },\n  { label: '(UTC+08:00) Singapore', value: 'Asia/Singapore' },\n  { label: '(UTC+09:00) Tokyo, Osaka, Sapporo', value: 'Asia/Tokyo' },\n  { label: '(UTC+09:00) Seoul', value: 'Asia/Seoul' },\n  { label: '(UTC+10:00) Brisbane', value: 'Australia/Brisbane' },\n  { label: '(UTC+10:00) Sydney, Melbourne', value: 'Australia/Sydney' },\n  { label: '(UTC+10:00) Guam, Port Moresby', value: 'Pacific/Guam' },\n  { label: '(UTC+11:00) New Caledonia', value: 'Pacific/Noumea' },\n  { label: '(UTC+12:00) Auckland, Wellington', value: 'Pacific/Auckland' },\n  { label: '(UTC+12:00) Fiji', value: 'Pacific/Fiji' },\n]\n"],"names":["defaultTimezones","label","value"],"mappings":"AAEA;;;;;;;;CAQC,GACD;;;;AAAO,MAAMA,mBAA+B;IAC1C;QAAEC,OAAO;QAAoCC,OAAO;IAAiB;IACrE;QAAED,OAAO;QAAoBC,OAAO;IAAe;IACnD;QAAED,OAAO;QAAsBC,OAAO;IAAmB;IACzD;QAAED,OAAO;QAA4BC,OAAO;IAAoB;IAChE;QAAED,OAAO;QAAsBC,OAAO;IAAoB;IAC1D;QAAED,OAAO;QAA+BC,OAAO;IAAkB;IACjE;QAAED,OAAO;QAA0CC,OAAO;IAAsB;IAChF;QAAED,OAAO;QAAwCC,OAAO;IAAkB;IAC1E;QAAED,OAAO;QAA2CC,OAAO;IAAiB;IAC5E;QAAED,OAAO;QAAgCC,OAAO;IAAkB;IAClE;QAAED,OAAO;QAA0CC,OAAO;IAAkB;IAC5E;QAAED,OAAO;QAA+BC,OAAO;IAAoB;IACnE;QAAED,OAAO;QAA0CC,OAAO;IAAmB;IAC7E;QAAED,OAAO;QAAmCC,OAAO;IAAiB;IACpE;QAAED,OAAO;QAAuBC,OAAO;IAAkB;IACzD;QAAED,OAAO;QAAwBC,OAAO;IAAmB;IAC3D;QAAED,OAAO;QAA4BC,OAAO;IAAuB;IACnE;QAAED,OAAO;QAAwBC,OAAO;IAAoB;IAC5D;QAAED,OAAO;QAA6BC,OAAO;IAAyB;IACtE;QAAED,OAAO;QAAsBC,OAAO;IAAkB;IACxD;QAAED,OAAO;QAA0BC,OAAO;IAAsB;IAChE;QAAED,OAAO;QAA4BC,OAAO;IAAgB;IAC5D;QAAED,OAAO;QAA6BC,OAAO;IAAgB;IAC7D;QAAED,OAAO;QAAqBC,OAAO;IAAe;IACpD;QAAED,OAAO;QAAiCC,OAAO;IAAgB;IACjE;QAAED,OAAO;QAAqBC,OAAO;IAAe;IACpD;QAAED,OAAO;QAAsCC,OAAO;IAAgB;IACtE;QAAED,OAAO;QAAsBC,OAAO;IAAc;IACpD;QAAED,OAAO;QAAqBC,OAAO;IAAa;IAClD;QAAED,OAAO;QAAoBC,OAAO;IAAY;IAChD;QAAED,OAAO;QAAkCC,OAAO;IAAe;IACjE;QAAED,OAAO;QAAwBC,OAAO;IAAgB;IACxD;QAAED,OAAO;QAAmDC,OAAO;IAAgB;IACnF;QAAED,OAAO;QAAqBC,OAAO;IAAa;IAClD;QAAED,OAAO;QAAsBC,OAAO;IAAc;IACpD;QAAED,OAAO;QAAuBC,OAAO;IAAe;IACtD;QAAED,OAAO;QAAuBC,OAAO;IAAe;IACtD;QAAED,OAAO;QAAiCC,OAAO;IAAgB;IACjE;QAAED,OAAO;QAAyBC,OAAO;IAAiB;IAC1D;QAAED,OAAO;QAAqCC,OAAO;IAAa;IAClE;QAAED,OAAO;QAAqBC,OAAO;IAAa;IAClD;QAAED,OAAO;QAAwBC,OAAO;IAAqB;IAC7D;QAAED,OAAO;QAAiCC,OAAO;IAAmB;IACpE;QAAED,OAAO;QAAkCC,OAAO;IAAe;IACjE;QAAED,OAAO;QAA6BC,OAAO;IAAiB;IAC9D;QAAED,OAAO;QAAoCC,OAAO;IAAmB;IACvE;QAAED,OAAO;QAAoBC,OAAO;IAAe;CACpD,CAAA"}},
    {"offset": {"line": 3385, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/setDefaultBeforeDuplicate.ts"],"sourcesContent":["// @ts-strict-ignore\n// default beforeDuplicate hook for required and unique fields\nimport { type FieldAffectingData, type FieldHook, fieldShouldBeLocalized } from './config/types.js'\n\nconst isStringValue = (value: unknown) => typeof value === 'string' && value.trim() !== ''\nconst unique: FieldHook = ({ value }) => (isStringValue(value) ? `${value} - Copy` : undefined)\nconst localizedUnique: FieldHook = ({ req, value }) =>\n  isStringValue(value) ? `${value} - ${req?.t('general:copy') ?? 'Copy'}` : undefined\n\nexport const setDefaultBeforeDuplicate = (\n  field: FieldAffectingData,\n  parentIsLocalized: boolean,\n) => {\n  if (\n    (('required' in field && field.required) || field.unique) &&\n    'hooks' in field &&\n    (!field.hooks?.beforeDuplicate ||\n      (Array.isArray(field.hooks.beforeDuplicate) && field.hooks.beforeDuplicate.length === 0))\n  ) {\n    if (field.unique) {\n      if (['email', 'number', 'point', 'relationship', 'select', 'upload'].includes(field.type)) {\n        field.hooks!.beforeDuplicate = [() => undefined]\n      } else if (['code', 'json', 'text', 'textarea'].includes(field.type)) {\n        field.hooks!.beforeDuplicate = fieldShouldBeLocalized({ field, parentIsLocalized })\n          ? [localizedUnique]\n          : [unique]\n      }\n    }\n  }\n}\n"],"names":["fieldShouldBeLocalized","isStringValue","value","trim","unique","undefined","localizedUnique","req","t","setDefaultBeforeDuplicate","field","parentIsLocalized","required","hooks","beforeDuplicate","Array","isArray","length","includes","type"],"mappings":";;;;AAAA,oBAAoB;AACpB,8DAA8D;AAC9D,SAAkDA,sBAAsB,QAAQ,oBAAmB;;AAEnG,MAAMC,gBAAgB,CAACC,QAAmB,OAAOA,UAAU,YAAYA,MAAMC,IAAI,OAAO;AACxF,MAAMC,SAAoB,CAAC,EAAEF,KAAK,EAAE,GAAMD,cAAcC,SAAS,GAAGA,MAAM,OAAO,CAAC,GAAGG;AACrF,MAAMC,kBAA6B,CAAC,EAAEC,GAAG,EAAEL,KAAK,EAAE,GAChDD,cAAcC,SAAS,GAAGA,MAAM,GAAG,EAAEK,KAAKC,EAAE,mBAAmB,QAAQ,GAAGH;AAErE,MAAMI,4BAA4B,CACvCC,OACAC;IAEA,IACG,CAAC,cAAcD,SAASA,MAAME,QAAQ,IAAKF,MAAMN,MAAK,KACvD,WAAWM,SACV,CAAA,CAACA,MAAMG,KAAK,EAAEC,mBACZC,MAAMC,OAAO,CAACN,MAAMG,KAAK,CAACC,eAAe,KAAKJ,MAAMG,KAAK,CAACC,eAAe,CAACG,MAAM,KAAK,CAAC,GACzF;QACA,IAAIP,MAAMN,MAAM,EAAE;YAChB,IAAI;gBAAC;gBAAS;gBAAU;gBAAS;gBAAgB;gBAAU;aAAS,CAACc,QAAQ,CAACR,MAAMS,IAAI,GAAG;gBACzFT,MAAMG,KAAK,CAAEC,eAAe,GAAG;oBAAC,IAAMT;iBAAU;YAClD,OAAO,IAAI;gBAAC;gBAAQ;gBAAQ;gBAAQ;aAAW,CAACa,QAAQ,CAACR,MAAMS,IAAI,GAAG;gBACpET,MAAMG,KAAK,CAAEC,eAAe,OAAGd,wLAAAA,EAAuB;oBAAEU;oBAAOC;gBAAkB,KAC7E;oBAACL;iBAAgB,GACjB;oBAACF;iBAAO;YACd;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 3432, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/config/reservedFieldNames.ts"],"sourcesContent":["/**\n * Reserved field names for collections with auth config enabled\n */\nexport const reservedBaseAuthFieldNames = [\n  /* 'email',\n    'resetPasswordToken',\n    'resetPasswordExpiration', */\n  'salt',\n  'hash',\n]\n\n/**\n * Reserved field names for auth collections with verify: true\n */\nexport const reservedVerifyFieldNames = [\n  /* '_verified', '_verificationToken' */\n]\n\n/**\n * Reserved field names for auth collections with useApiKey: true\n */\nexport const reservedAPIKeyFieldNames = [\n  /* 'enableAPIKey', 'apiKeyIndex', 'apiKey' */\n]\n\n/**\n * Reserved field names for collections with upload config enabled\n */\nexport const reservedBaseUploadFieldNames = [\n  'file',\n  /* 'mimeType',\n    'thumbnailURL',\n    'width',\n    'height',\n    'filesize',\n    'filename',\n    'url',\n    'focalX',\n    'focalY',\n    'sizes', */\n]\n\n/**\n * Reserved field names for collections with versions enabled\n */\nexport const reservedVersionsFieldNames = [\n  /* '__v', '_status' */\n]\n"],"names":["reservedBaseAuthFieldNames","reservedVerifyFieldNames","reservedAPIKeyFieldNames","reservedBaseUploadFieldNames","reservedVersionsFieldNames"],"mappings":"AAAA;;CAEC,GACD;;;;;;;;;;;;AAAO,MAAMA,6BAA6B;IACxC;;+BAE6B,GAC7B;IACA;CACD,CAAA;AAKM,MAAMC,2BAA2B,EAEvC,CAAA;AAKM,MAAMC,2BAA2B,EAEvC,CAAA;AAKM,MAAMC,+BAA+B;IAC1C;CAWD,CAAA;AAKM,MAAMC,6BAA6B,EAEzC,CAAA"}},
    {"offset": {"line": 3462, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/InvalidFieldJoin.ts"],"sourcesContent":["import type { JoinField } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldJoin extends APIError {\n  constructor(field: JoinField) {\n    super(\n      `Invalid join field ${field.name}. The config does not have a field '${field.on}' in collection '${field.collection}'.`,\n    )\n  }\n}\n"],"names":["APIError","InvalidFieldJoin","field","name","on","collection"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,yBAAyBD,mKAAAA;IACpC,YAAYE,KAAgB,CAAE;QAC5B,KAAK,CACH,CAAC,mBAAmB,EAAEA,MAAMC,IAAI,CAAC,oCAAoC,EAAED,MAAME,EAAE,CAAC,iBAAiB,EAAEF,MAAMG,UAAU,CAAC,EAAE,CAAC;IAE3H;AACF"}},
    {"offset": {"line": 3477, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/config/sanitizeJoinField.ts"],"sourcesContent":["import type { SanitizedJoin, SanitizedJoins } from '../../collections/config/types.js'\nimport type { Config } from '../../config/types.js'\nimport type { FlattenedJoinField, JoinField } from './types.js'\n\nimport { APIError } from '../../errors/index.js'\nimport { InvalidFieldJoin } from '../../errors/InvalidFieldJoin.js'\nimport { flattenAllFields } from '../../utilities/flattenAllFields.js'\nimport { getFieldByPath } from '../../utilities/getFieldByPath.js'\n\nexport const sanitizeJoinField = ({\n  config,\n  field,\n  joinPath,\n  joins,\n  parentIsLocalized,\n  polymorphicJoins,\n  validateOnly,\n}: {\n  config: Config\n  field: FlattenedJoinField | JoinField\n  joinPath?: string\n  joins?: SanitizedJoins\n  parentIsLocalized: boolean\n  polymorphicJoins?: SanitizedJoin[]\n  validateOnly?: boolean\n}) => {\n  // the `joins` arg is not passed for globals or when recursing on fields that do not allow a join field\n  if (typeof joins === 'undefined') {\n    throw new APIError('Join fields cannot be added to arrays, blocks or globals.')\n  }\n  if (typeof field.maxDepth === 'undefined') {\n    field.maxDepth = 1\n  }\n  const join: SanitizedJoin = {\n    field,\n    joinPath: `${joinPath ? joinPath + '.' : ''}${field.name}`,\n    parentIsLocalized,\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    targetField: undefined,\n  }\n\n  if (Array.isArray(field.collection)) {\n    for (const collection of field.collection) {\n      const sanitizedField = {\n        ...field,\n        collection,\n      } as FlattenedJoinField\n\n      sanitizeJoinField({\n        config,\n        field: sanitizedField,\n        joinPath,\n        joins,\n        parentIsLocalized,\n        polymorphicJoins,\n        validateOnly: true,\n      })\n    }\n\n    if (Array.isArray(polymorphicJoins)) {\n      polymorphicJoins.push(join)\n    }\n\n    return\n  }\n\n  const joinCollection = config.collections?.find(\n    (collection) => collection.slug === field.collection,\n  )\n  if (!joinCollection) {\n    throw new InvalidFieldJoin(field)\n  }\n\n  const relationshipField = getFieldByPath({\n    fields: flattenAllFields({ cache: true, fields: joinCollection.fields }),\n    path: field.on,\n  })\n\n  if (\n    !relationshipField ||\n    (relationshipField.field.type !== 'relationship' && relationshipField.field.type !== 'upload')\n  ) {\n    throw new InvalidFieldJoin(join.field)\n  }\n\n  if (relationshipField.pathHasLocalized) {\n    join.getForeignPath = ({ locale }) => {\n      return relationshipField.localizedPath.replace('<locale>', locale!)\n    }\n  }\n\n  if (!relationshipField.field.index && !relationshipField.field.unique) {\n    relationshipField.field.index = true\n  }\n\n  if (validateOnly) {\n    return\n  }\n\n  join.targetField = relationshipField.field\n\n  // override the join field localized property to use whatever the relationship field has\n  // or if it's nested to a localized array / blocks / tabs / group\n  field.localized = relationshipField.field.localized\n  // override the join field hasMany property to use whatever the relationship field has\n  field.hasMany = relationshipField.field.hasMany\n\n  // @ts-expect-error converting JoinField to FlattenedJoinField to track targetField\n  field.targetField = join.targetField\n\n  if (!joins[field.collection]) {\n    joins[field.collection] = [join]\n  } else {\n    joins[field.collection]?.push(join)\n  }\n}\n"],"names":["APIError","InvalidFieldJoin","flattenAllFields","getFieldByPath","sanitizeJoinField","config","field","joinPath","joins","parentIsLocalized","polymorphicJoins","validateOnly","maxDepth","join","name","targetField","undefined","Array","isArray","collection","sanitizedField","push","joinCollection","collections","find","slug","relationshipField","fields","cache","path","on","type","pathHasLocalized","getForeignPath","locale","localizedPath","replace","index","unique","localized","hasMany"],"mappings":";;;;AAIA,SAASA,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,gBAAgB,QAAQ,mCAAkC;AACnE,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,cAAc,QAAQ,oCAAmC;;;;;AAE3D,MAAMC,oBAAoB,CAAC,EAChCC,MAAM,EACNC,KAAK,EACLC,QAAQ,EACRC,KAAK,EACLC,iBAAiB,EACjBC,gBAAgB,EAChBC,YAAY,EASb;IACC,uGAAuG;IACvG,IAAI,OAAOH,UAAU,aAAa;QAChC,MAAM,IAAIR,mKAAAA,CAAS;IACrB;IACA,IAAI,OAAOM,MAAMM,QAAQ,KAAK,aAAa;QACzCN,MAAMM,QAAQ,GAAG;IACnB;IACA,MAAMC,OAAsB;QAC1BP;QACAC,UAAU,GAAGA,WAAWA,WAAW,MAAM,KAAKD,MAAMQ,IAAI,EAAE;QAC1DL;QACA,oFAAoF;QACpFM,aAAaC;IACf;IAEA,IAAIC,MAAMC,OAAO,CAACZ,MAAMa,UAAU,GAAG;QACnC,KAAK,MAAMA,cAAcb,MAAMa,UAAU,CAAE;YACzC,MAAMC,iBAAiB;gBACrB,GAAGd,KAAK;gBACRa;YACF;YAEAf,kBAAkB;gBAChBC;gBACAC,OAAOc;gBACPb;gBACAC;gBACAC;gBACAC;gBACAC,cAAc;YAChB;QACF;QAEA,IAAIM,MAAMC,OAAO,CAACR,mBAAmB;YACnCA,iBAAiBW,IAAI,CAACR;QACxB;QAEA;IACF;IAEA,MAAMS,iBAAiBjB,OAAOkB,WAAW,EAAEC,KACzC,CAACL,aAAeA,WAAWM,IAAI,KAAKnB,MAAMa,UAAU;IAEtD,IAAI,CAACG,gBAAgB;QACnB,MAAM,IAAIrB,mLAAAA,CAAiBK;IAC7B;IAEA,MAAMoB,wBAAoBvB,kLAAAA,EAAe;QACvCwB,YAAQzB,sLAAAA,EAAiB;YAAE0B,OAAO;YAAMD,QAAQL,eAAeK,MAAM;QAAC;QACtEE,MAAMvB,MAAMwB,EAAE;IAChB;IAEA,IACE,CAACJ,qBACAA,kBAAkBpB,KAAK,CAACyB,IAAI,KAAK,kBAAkBL,kBAAkBpB,KAAK,CAACyB,IAAI,KAAK,UACrF;QACA,MAAM,IAAI9B,mLAAAA,CAAiBY,KAAKP,KAAK;IACvC;IAEA,IAAIoB,kBAAkBM,gBAAgB,EAAE;QACtCnB,KAAKoB,cAAc,GAAG,CAAC,EAAEC,MAAM,EAAE;YAC/B,OAAOR,kBAAkBS,aAAa,CAACC,OAAO,CAAC,YAAYF;QAC7D;IACF;IAEA,IAAI,CAACR,kBAAkBpB,KAAK,CAAC+B,KAAK,IAAI,CAACX,kBAAkBpB,KAAK,CAACgC,MAAM,EAAE;QACrEZ,kBAAkBpB,KAAK,CAAC+B,KAAK,GAAG;IAClC;IAEA,IAAI1B,cAAc;QAChB;IACF;IAEAE,KAAKE,WAAW,GAAGW,kBAAkBpB,KAAK;IAE1C,wFAAwF;IACxF,iEAAiE;IACjEA,MAAMiC,SAAS,GAAGb,kBAAkBpB,KAAK,CAACiC,SAAS;IACnD,sFAAsF;IACtFjC,MAAMkC,OAAO,GAAGd,kBAAkBpB,KAAK,CAACkC,OAAO;IAE/C,mFAAmF;IACnFlC,MAAMS,WAAW,GAAGF,KAAKE,WAAW;IAEpC,IAAI,CAACP,KAAK,CAACF,MAAMa,UAAU,CAAC,EAAE;QAC5BX,KAAK,CAACF,MAAMa,UAAU,CAAC,GAAG;YAACN;SAAK;IAClC,OAAO;QACLL,KAAK,CAACF,MAAMa,UAAU,CAAC,EAAEE,KAAKR;IAChC;AACF,EAAC"}},
    {"offset": {"line": 3570, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/config/sanitize.ts"],"sourcesContent":["import { deepMergeSimple } from '@payloadcms/translations/utilities'\n\nimport type {\n  CollectionConfig,\n  SanitizedJoin,\n  SanitizedJoins,\n} from '../../collections/config/types.js'\nimport type { Config, SanitizedConfig } from '../../config/types.js'\nimport type { GlobalConfig } from '../../globals/config/types.js'\nimport type { Field } from './types.js'\n\nimport {\n  DuplicateFieldName,\n  InvalidConfiguration,\n  InvalidFieldName,\n  InvalidFieldRelationship,\n  MissingEditorProp,\n  MissingFieldType,\n} from '../../errors/index.js'\nimport { ReservedFieldName } from '../../errors/ReservedFieldName.js'\nimport { flattenAllFields } from '../../utilities/flattenAllFields.js'\nimport { formatLabels, toWords } from '../../utilities/formatLabels.js'\nimport { validateTimezones } from '../../utilities/validateTimezones.js'\nimport { baseBlockFields } from '../baseFields/baseBlockFields.js'\nimport { baseIDField } from '../baseFields/baseIDField.js'\nimport { baseTimezoneField } from '../baseFields/timezone/baseField.js'\nimport { defaultTimezones } from '../baseFields/timezone/defaultTimezones.js'\nimport { getFieldPaths } from '../getFieldPaths.js'\nimport { setDefaultBeforeDuplicate } from '../setDefaultBeforeDuplicate.js'\nimport { validations } from '../validations.js'\nimport {\n  reservedAPIKeyFieldNames,\n  reservedBaseAuthFieldNames,\n  reservedBaseUploadFieldNames,\n  reservedVerifyFieldNames,\n} from './reservedFieldNames.js'\nimport { sanitizeJoinField } from './sanitizeJoinField.js'\nimport {\n  fieldAffectsData as _fieldAffectsData,\n  fieldIsLocalized,\n  fieldIsVirtual,\n  tabHasName,\n} from './types.js'\n\ntype Args = {\n  collectionConfig?: CollectionConfig\n  config: Config\n  existingFieldNames?: Set<string>\n  fields: Field[]\n  globalConfig?: GlobalConfig\n  /**\n   * Used to prevent unnecessary sanitization of fields that are not top-level.\n   */\n  isTopLevelField?: boolean\n  joinPath?: string\n  /**\n   * When not passed in, assume that join are not supported (globals, arrays, blocks)\n   */\n  joins?: SanitizedJoins\n  /**\n   * A string of '-' separated indexes representing where\n   * to find this field in a given field schema array.\n   */\n  parentIndexPath?: string\n  parentIsLocalized: boolean\n  /**\n   * Path for parent fields relative to their position in the schema.\n   */\n  parentSchemaPath?: string\n  polymorphicJoins?: SanitizedJoin[]\n  /**\n   * If true, a richText field will require an editor property to be set, as the sanitizeFields function will not add it from the payload config if not present.\n   *\n   * @default false\n   */\n  requireFieldLevelRichTextEditor?: boolean\n  /**\n   * If this property is set, RichText fields won't be sanitized immediately. Instead, they will be added to this array as promises\n   * so that you can sanitize them together, after the config has been sanitized.\n   */\n  richTextSanitizationPromises?: Array<(config: SanitizedConfig) => Promise<void>>\n  /**\n   * If not null, will validate that upload and relationship fields do not relate to a collection that is not in this array.\n   * This validation will be skipped if validRelationships is null.\n   */\n  validRelationships: null | string[]\n}\n\nexport const sanitizeFields = async ({\n  collectionConfig,\n  config,\n  existingFieldNames = new Set(),\n  fields,\n  globalConfig,\n  isTopLevelField = true,\n  joinPath = '',\n  joins,\n  parentIndexPath = '',\n  parentIsLocalized,\n  parentSchemaPath = '',\n  polymorphicJoins,\n  requireFieldLevelRichTextEditor = false,\n  richTextSanitizationPromises,\n  validRelationships,\n}: Args): Promise<Field[]> => {\n  if (!fields) {\n    return []\n  }\n\n  for (let i = 0; i < fields.length; i++) {\n    const field = fields[i]!\n\n    if ('_sanitized' in field && field._sanitized === true) {\n      continue\n    }\n\n    if ('_sanitized' in field) {\n      field._sanitized = true\n    }\n\n    if (!field.type) {\n      throw new MissingFieldType(field)\n    }\n\n    const fieldAffectsData = _fieldAffectsData(field)\n\n    const { indexPath, schemaPath } = getFieldPaths({\n      field,\n      index: i,\n      parentIndexPath,\n      parentSchemaPath,\n    })\n\n    if (isTopLevelField && fieldAffectsData && field.name) {\n      if (collectionConfig && collectionConfig.upload) {\n        if (reservedBaseUploadFieldNames.includes(field.name)) {\n          throw new ReservedFieldName(field, field.name)\n        }\n      }\n\n      if (\n        collectionConfig &&\n        collectionConfig.auth &&\n        typeof collectionConfig.auth === 'object' &&\n        !collectionConfig.auth.disableLocalStrategy\n      ) {\n        if (reservedBaseAuthFieldNames.includes(field.name)) {\n          throw new ReservedFieldName(field, field.name)\n        }\n\n        if (collectionConfig.auth.verify) {\n          // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n          if (reservedAPIKeyFieldNames.includes(field.name)) {\n            throw new ReservedFieldName(field, field.name)\n          }\n\n          // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n          if (reservedVerifyFieldNames.includes(field.name)) {\n            throw new ReservedFieldName(field, field.name)\n          }\n        }\n      }\n    }\n\n    // assert that field names do not contain forbidden characters\n    if (fieldAffectsData && field.name.includes('.')) {\n      throw new InvalidFieldName(field, field.name)\n    }\n\n    // Auto-label\n    if (\n      'name' in field &&\n      field.name &&\n      typeof field.label !== 'object' &&\n      typeof field.label !== 'string' &&\n      typeof field.label !== 'function' &&\n      field.label !== false\n    ) {\n      field.label = toWords(field.name)\n    }\n\n    if (\n      field.type === 'checkbox' &&\n      typeof field.defaultValue === 'undefined' &&\n      field.required === true\n    ) {\n      field.defaultValue = false\n    }\n\n    if (field.type === 'join') {\n      sanitizeJoinField({ config, field, joinPath, joins, parentIsLocalized, polymorphicJoins })\n    }\n\n    if (field.type === 'relationship' || field.type === 'upload') {\n      // Validate that relationTo is not empty\n      if (Array.isArray(field.relationTo) && field.relationTo.length === 0) {\n        throw new Error(\n          `Field \"${field.name}\" of type \"${field.type}\" has an empty relationTo array. At least one collection must be specified.`,\n        )\n      }\n\n      if (validRelationships) {\n        const relationships = Array.isArray(field.relationTo)\n          ? field.relationTo\n          : [field.relationTo]\n\n        relationships.forEach((relationship: string) => {\n          if (!validRelationships.includes(relationship)) {\n            throw new InvalidFieldRelationship(field, relationship)\n          }\n        })\n      }\n\n      if (field.min && !field.minRows) {\n        console.warn(\n          `(payload): The \"min\" property is deprecated for the Relationship field \"${field.name}\" and will be removed in a future version. Please use \"minRows\" instead.`,\n        )\n        field.minRows = field.min\n      }\n\n      if (field.max && !field.maxRows) {\n        console.warn(\n          `(payload): The \"max\" property is deprecated for the Relationship field \"${field.name}\" and will be removed in a future version. Please use \"maxRows\" instead.`,\n        )\n        field.maxRows = field.max\n      }\n    }\n\n    if (field.type === 'upload') {\n      if (!field.admin || !('isSortable' in field.admin)) {\n        field.admin = {\n          isSortable: true,\n          ...field.admin,\n        }\n      }\n    }\n\n    if (field.type === 'array' && field.fields) {\n      const hasCustomID = field.fields.some((f) => 'name' in f && f.name === 'id')\n      if (!hasCustomID) {\n        field.fields.push(baseIDField)\n      }\n    }\n\n    if ((field.type === 'blocks' || field.type === 'array') && field.label) {\n      field.labels = field.labels || formatLabels(field.name)\n    }\n\n    if (fieldAffectsData) {\n      if (existingFieldNames.has(field.name)) {\n        throw new DuplicateFieldName(field.name)\n      } else if (!['blockName', 'id'].includes(field.name)) {\n        existingFieldNames.add(field.name)\n      }\n\n      if (typeof field.localized !== 'undefined') {\n        let shouldDisableLocalized = !config.localization\n\n        if (\n          process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized !== 'true' &&\n          parentIsLocalized &&\n          // @todo PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY=true will be the default in 4.0\n          process.env.PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY !== 'true'\n        ) {\n          shouldDisableLocalized = true\n        }\n\n        if (shouldDisableLocalized) {\n          delete field.localized\n        }\n      }\n\n      if (typeof field.validate === 'undefined') {\n        const defaultValidate = validations[field.type as keyof typeof validations]\n        if (defaultValidate) {\n          field.validate = (val: any, options: any) =>\n            defaultValidate(val, { ...field, ...options })\n        } else {\n          field.validate = (): true => true\n        }\n      }\n\n      if (!field.hooks) {\n        field.hooks = {}\n      }\n\n      if (!field.access) {\n        field.access = {}\n      }\n\n      setDefaultBeforeDuplicate(field, parentIsLocalized)\n    }\n\n    if (!field.admin) {\n      field.admin = {}\n    }\n\n    // Make sure that the richText field has an editor\n    if (field.type === 'richText') {\n      const sanitizeRichText = async (_config: SanitizedConfig) => {\n        if (!field.editor) {\n          if (_config.editor && !requireFieldLevelRichTextEditor) {\n            // config.editor should be sanitized at this point\n            field.editor = _config.editor\n          } else {\n            throw new MissingEditorProp(field) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n          }\n        }\n\n        if (typeof field.editor === 'function') {\n          field.editor = await field.editor({\n            config: _config,\n            isRoot: requireFieldLevelRichTextEditor,\n            parentIsLocalized: (parentIsLocalized || field.localized)!,\n          })\n        }\n\n        if (field.editor.i18n && Object.keys(field.editor.i18n).length >= 0) {\n          config.i18n!.translations = deepMergeSimple(config.i18n!.translations!, field.editor.i18n)\n        }\n      }\n      if (richTextSanitizationPromises) {\n        richTextSanitizationPromises.push(sanitizeRichText)\n      } else {\n        await sanitizeRichText(config as unknown as SanitizedConfig)\n      }\n    }\n\n    if (field.type === 'blocks' && field.blocks) {\n      if (field.blockReferences && field.blocks?.length) {\n        throw new Error('You cannot have both blockReferences and blocks in the same blocks field')\n      }\n\n      const blockSlugs: string[] = []\n\n      for (const block of field.blockReferences ?? field.blocks) {\n        const blockSlug = typeof block === 'string' ? block : block.slug\n\n        if (blockSlugs.includes(blockSlug)) {\n          throw new DuplicateFieldName(blockSlug)\n        }\n\n        blockSlugs.push(blockSlug)\n\n        if (typeof block === 'string') {\n          continue\n        }\n\n        if (block._sanitized === true) {\n          continue\n        }\n\n        block._sanitized = true\n        block.fields = block.fields.concat(baseBlockFields)\n        block.labels = !block.labels ? formatLabels(block.slug) : block.labels\n\n        block.fields = await sanitizeFields({\n          collectionConfig,\n          config,\n          existingFieldNames: new Set(),\n          fields: block.fields,\n          isTopLevelField: false,\n          parentIndexPath: '',\n          parentIsLocalized: (parentIsLocalized || field.localized)!,\n          parentSchemaPath: schemaPath + '.' + block.slug,\n          requireFieldLevelRichTextEditor,\n          richTextSanitizationPromises,\n          validRelationships,\n        })\n      }\n    }\n\n    if ('fields' in field && field.fields) {\n      field.fields = await sanitizeFields({\n        collectionConfig,\n        config,\n        existingFieldNames: fieldAffectsData ? new Set() : existingFieldNames,\n        fields: field.fields,\n        isTopLevelField: isTopLevelField && !fieldAffectsData,\n        joinPath: fieldAffectsData ? `${joinPath ? joinPath + '.' : ''}${field.name}` : joinPath,\n        joins,\n        parentIndexPath: fieldAffectsData ? '' : indexPath,\n        parentIsLocalized: parentIsLocalized || fieldIsLocalized(field),\n        parentSchemaPath: schemaPath,\n        polymorphicJoins,\n        requireFieldLevelRichTextEditor,\n        richTextSanitizationPromises,\n        validRelationships,\n      })\n    }\n\n    if (field.type === 'tabs') {\n      for (let j = 0; j < field.tabs.length; j++) {\n        const tab = field.tabs[j]!\n\n        const isNamedTab = tabHasName(tab)\n\n        if (isNamedTab && typeof tab.label === 'undefined') {\n          tab.label = toWords(tab.name)\n        }\n\n        const { indexPath: tabIndexPath, schemaPath: tabSchemaPath } = getFieldPaths({\n          field: tab,\n          index: j,\n          parentIndexPath: indexPath,\n          parentSchemaPath: schemaPath,\n        })\n\n        if (\n          'admin' in tab &&\n          tab.admin?.condition &&\n          typeof tab.admin.condition === 'function' &&\n          !tab.id\n        ) {\n          tab.id = tabSchemaPath\n        }\n\n        tab.fields = await sanitizeFields({\n          collectionConfig,\n          config,\n          existingFieldNames: isNamedTab ? new Set() : existingFieldNames,\n          fields: tab.fields,\n          isTopLevelField: isTopLevelField && !isNamedTab,\n          joinPath: isNamedTab ? `${joinPath ? joinPath + '.' : ''}${tab.name}` : joinPath,\n          joins,\n          parentIndexPath: isNamedTab ? '' : tabIndexPath,\n          parentIsLocalized: parentIsLocalized || (isNamedTab && tab.localized)!,\n          parentSchemaPath: tabSchemaPath,\n          polymorphicJoins,\n          requireFieldLevelRichTextEditor,\n          richTextSanitizationPromises,\n          validRelationships,\n        })\n\n        field.tabs[j] = tab\n      }\n    }\n\n    if (field.type === 'ui' && typeof field.admin.disableBulkEdit === 'undefined') {\n      field.admin.disableBulkEdit = true\n    }\n\n    fields[i] = field\n\n    // Insert our field after assignment\n    if (field.type === 'date' && field.timezone) {\n      const name = field.name + '_tz'\n\n      let defaultTimezone =\n        field.timezone && typeof field.timezone === 'object'\n          ? field.timezone.defaultTimezone\n          : config.admin?.timezones?.defaultTimezone\n\n      const required =\n        field.required ||\n        (field.timezone && typeof field.timezone === 'object' && field.timezone.required)\n\n      const supportedTimezones =\n        field.timezone && typeof field.timezone === 'object' && field.timezone.supportedTimezones\n          ? field.timezone.supportedTimezones\n          : config.admin?.timezones?.supportedTimezones\n\n      const options =\n        typeof supportedTimezones === 'function'\n          ? supportedTimezones({ defaultTimezones })\n          : supportedTimezones\n\n      validateTimezones({\n        source: `field \"${field.name}\" timezone.supportedTimezones`,\n        timezones: options,\n      })\n\n      if (options && options.length === 1 && options[0]?.value) {\n        defaultTimezone = options[0].value\n      }\n\n      // Generate label for timezone field\n      // Use parent field's label + ' Tz' if it's a simple string, otherwise fallback to name\n      const timezoneLabel = typeof field.label === 'string' ? `${field.label} Tz` : toWords(name)\n\n      // Need to set the options here manually so that any database enums are generated correctly\n      // The UI component will import the options from the config\n      const baseField = baseTimezoneField({\n        name,\n        defaultValue: defaultTimezone,\n        label: timezoneLabel,\n        options,\n        required,\n      })\n\n      // Apply override if provided\n      const timezoneField =\n        typeof field.timezone === 'object' && typeof field.timezone.override === 'function'\n          ? field.timezone.override({ baseField })\n          : baseField\n\n      fields.splice(++i, 0, timezoneField)\n    }\n\n    if ('virtual' in field && typeof field.virtual === 'string') {\n      const virtualField = field\n      const fields = (collectionConfig || globalConfig)?.fields\n      if (fields) {\n        let flattenFields = flattenAllFields({ fields })\n        const paths = field.virtual.split('.')\n        let isHasMany = false\n\n        for (const [i, segment] of paths.entries()) {\n          const field = flattenFields.find((e) => e.name === segment)\n          if (!field) {\n            break\n          }\n\n          if (field.type === 'group' || field.type === 'tab' || field.type === 'array') {\n            flattenFields = field.flattenedFields\n          } else if (\n            (field.type === 'relationship' || field.type === 'upload') &&\n            i !== paths.length - 1 &&\n            typeof field.relationTo === 'string'\n          ) {\n            if (\n              field.hasMany &&\n              (virtualField.type === 'text' ||\n                virtualField.type === 'number' ||\n                virtualField.type === 'select')\n            ) {\n              if (isHasMany) {\n                throw new InvalidConfiguration(\n                  `Virtual field ${virtualField.name} in ${globalConfig ? `global ${globalConfig.slug}` : `collection ${collectionConfig?.slug}`} references 2 or more hasMany relationships on the path ${virtualField.virtual} which is not allowed.`,\n                )\n              }\n\n              isHasMany = true\n              virtualField.hasMany = true\n            }\n            const relatedCollection = config.collections?.find((e) => e.slug === field.relationTo)\n            if (relatedCollection) {\n              flattenFields = flattenAllFields({ fields: relatedCollection.fields })\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return fields\n}\n"],"names":["deepMergeSimple","DuplicateFieldName","InvalidConfiguration","InvalidFieldName","InvalidFieldRelationship","MissingEditorProp","MissingFieldType","ReservedFieldName","flattenAllFields","formatLabels","toWords","validateTimezones","baseBlockFields","baseIDField","baseTimezoneField","defaultTimezones","getFieldPaths","setDefaultBeforeDuplicate","validations","reservedAPIKeyFieldNames","reservedBaseAuthFieldNames","reservedBaseUploadFieldNames","reservedVerifyFieldNames","sanitizeJoinField","fieldAffectsData","_fieldAffectsData","fieldIsLocalized","tabHasName","sanitizeFields","collectionConfig","config","existingFieldNames","Set","fields","globalConfig","isTopLevelField","joinPath","joins","parentIndexPath","parentIsLocalized","parentSchemaPath","polymorphicJoins","requireFieldLevelRichTextEditor","richTextSanitizationPromises","validRelationships","i","length","field","_sanitized","type","indexPath","schemaPath","index","name","upload","includes","auth","disableLocalStrategy","verify","label","defaultValue","required","Array","isArray","relationTo","Error","relationships","forEach","relationship","min","minRows","console","warn","max","maxRows","admin","isSortable","hasCustomID","some","f","push","labels","has","add","localized","shouldDisableLocalized","localization","process","env","NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized","PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY","validate","defaultValidate","val","options","hooks","access","sanitizeRichText","_config","editor","isRoot","i18n","Object","keys","translations","blocks","blockReferences","blockSlugs","block","blockSlug","slug","concat","j","tabs","tab","isNamedTab","tabIndexPath","tabSchemaPath","condition","id","disableBulkEdit","timezone","defaultTimezone","timezones","supportedTimezones","source","value","timezoneLabel","baseField","timezoneField","override","splice","virtual","virtualField","flattenFields","paths","split","isHasMany","segment","entries","find","e","flattenedFields","hasMany","relatedCollection","collections"],"mappings":"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"}},
    {"offset": {"line": 3954, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/fields/mergeBaseFields.ts"],"sourcesContent":["import type { Field, FieldWithSubFields } from './config/types.js'\n\nimport { deepMergeWithReactComponents } from '../utilities/deepMerge.js'\nimport { fieldAffectsData, fieldHasSubFields } from './config/types.js'\n\nexport const mergeBaseFields = (fields: Field[], baseFields: Field[]): Field[] => {\n  const mergedFields = [...(fields || [])]\n\n  baseFields.forEach((baseField) => {\n    let matchedIndex: null | number = null\n\n    if (fieldAffectsData(baseField)) {\n      const match = mergedFields.find((field, i) => {\n        if (fieldAffectsData(field) && field.name === baseField.name) {\n          matchedIndex = i\n          return true\n        }\n\n        return false\n      })\n\n      if (match) {\n        const matchCopy: Field = { ...match }\n        mergedFields.splice(matchedIndex!, 1)\n\n        const mergedField = deepMergeWithReactComponents<Field>(baseField, matchCopy)\n\n        if (fieldHasSubFields(baseField) && fieldHasSubFields(matchCopy)) {\n          ;(mergedField as FieldWithSubFields).fields = mergeBaseFields(\n            matchCopy.fields,\n            baseField.fields,\n          )\n        }\n\n        mergedFields.push(mergedField)\n      } else {\n        mergedFields.push(baseField)\n      }\n    }\n  })\n\n  return mergedFields\n}\n"],"names":["deepMergeWithReactComponents","fieldAffectsData","fieldHasSubFields","mergeBaseFields","fields","baseFields","mergedFields","forEach","baseField","matchedIndex","match","find","field","i","name","matchCopy","splice","mergedField","push"],"mappings":";;;;AAEA,SAASA,4BAA4B,QAAQ,4BAA2B;AACxE,SAASC,gBAAgB,EAAEC,iBAAiB,QAAQ,oBAAmB;;;AAEhE,MAAMC,kBAAkB,CAACC,QAAiBC;IAC/C,MAAMC,eAAe;WAAKF,UAAU,EAAE;KAAE;IAExCC,WAAWE,OAAO,CAAC,CAACC;QAClB,IAAIC,eAA8B;QAElC,QAAIR,kLAAAA,EAAiBO,YAAY;YAC/B,MAAME,QAAQJ,aAAaK,IAAI,CAAC,CAACC,OAAOC;gBACtC,QAAIZ,kLAAAA,EAAiBW,UAAUA,MAAME,IAAI,KAAKN,UAAUM,IAAI,EAAE;oBAC5DL,eAAeI;oBACf,OAAO;gBACT;gBAEA,OAAO;YACT;YAEA,IAAIH,OAAO;gBACT,MAAMK,YAAmB;oBAAE,GAAGL,KAAK;gBAAC;gBACpCJ,aAAaU,MAAM,CAACP,cAAe;gBAEnC,MAAMQ,kBAAcjB,2MAAAA,EAAoCQ,WAAWO;gBAEnE,QAAIb,mLAAAA,EAAkBM,kBAAcN,mLAAAA,EAAkBa,YAAY;;oBAC9DE,YAAmCb,MAAM,GAAGD,gBAC5CY,UAAUX,MAAM,EAChBI,UAAUJ,MAAM;gBAEpB;gBAEAE,aAAaY,IAAI,CAACD;YACpB,OAAO;gBACLX,aAAaY,IAAI,CAACV;YACpB;QACF;IACF;IAEA,OAAOF;AACT,EAAC"}},
    {"offset": {"line": 3998, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/checkFileAccess.ts"],"sourcesContent":["import type { Collection, TypeWithID } from '../collections/config/types.js'\nimport type { PayloadRequest, Where } from '../types/index.js'\n\nimport { executeAccess } from '../auth/executeAccess.js'\nimport { Forbidden } from '../errors/Forbidden.js'\n\nexport const checkFileAccess = async ({\n  collection,\n  filename,\n  req,\n}: {\n  collection: Collection\n  filename: string\n  req: PayloadRequest\n}): Promise<TypeWithID | undefined> => {\n  if (filename.includes('../') || filename.includes('..\\\\')) {\n    throw new Forbidden(req.t)\n  }\n  const { config } = collection\n\n  const accessResult = await executeAccess(\n    { data: { filename }, isReadingStaticFile: true, req },\n    config.access.read,\n  )\n\n  if (typeof accessResult === 'object') {\n    const queryToBuild: Where = {\n      and: [\n        {\n          or: [\n            {\n              filename: {\n                equals: filename,\n              },\n            },\n          ],\n        },\n        accessResult,\n      ],\n    }\n\n    if (config.upload.imageSizes) {\n      config.upload.imageSizes.forEach(({ name }) => {\n        queryToBuild.and?.[0]?.or?.push({\n          [`sizes.${name}.filename`]: {\n            equals: filename,\n          },\n        })\n      })\n    }\n\n    const doc = await req.payload.db.findOne({\n      collection: config.slug,\n      req,\n      where: queryToBuild,\n    })\n\n    if (!doc) {\n      throw new Forbidden(req.t)\n    }\n\n    return doc\n  }\n}\n"],"names":["executeAccess","Forbidden","checkFileAccess","collection","filename","req","includes","t","config","accessResult","data","isReadingStaticFile","access","read","queryToBuild","and","or","equals","upload","imageSizes","forEach","name","push","doc","payload","db","findOne","slug","where"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,SAAS,QAAQ,yBAAwB;;;AAE3C,MAAMC,kBAAkB,OAAO,EACpCC,UAAU,EACVC,QAAQ,EACRC,GAAG,EAKJ;IACC,IAAID,SAASE,QAAQ,CAAC,UAAUF,SAASE,QAAQ,CAAC,SAAS;QACzD,MAAM,IAAIL,qKAAAA,CAAUI,IAAIE,CAAC;IAC3B;IACA,MAAM,EAAEC,MAAM,EAAE,GAAGL;IAEnB,MAAMM,eAAe,UAAMT,2KAAAA,EACzB;QAAEU,MAAM;YAAEN;QAAS;QAAGO,qBAAqB;QAAMN;IAAI,GACrDG,OAAOI,MAAM,CAACC,IAAI;IAGpB,IAAI,OAAOJ,iBAAiB,UAAU;QACpC,MAAMK,eAAsB;YAC1BC,KAAK;gBACH;oBACEC,IAAI;wBACF;4BACEZ,UAAU;gCACRa,QAAQb;4BACV;wBACF;qBACD;gBACH;gBACAK;aACD;QACH;QAEA,IAAID,OAAOU,MAAM,CAACC,UAAU,EAAE;YAC5BX,OAAOU,MAAM,CAACC,UAAU,CAACC,OAAO,CAAC,CAAC,EAAEC,IAAI,EAAE;gBACxCP,aAAaC,GAAG,EAAE,CAAC,EAAE,EAAEC,IAAIM,KAAK;oBAC9B,CAAC,CAAC,MAAM,EAAED,KAAK,SAAS,CAAC,CAAC,EAAE;wBAC1BJ,QAAQb;oBACV;gBACF;YACF;QACF;QAEA,MAAMmB,MAAM,MAAMlB,IAAImB,OAAO,CAACC,EAAE,CAACC,OAAO,CAAC;YACvCvB,YAAYK,OAAOmB,IAAI;YACvBtB;YACAuB,OAAOd;QACT;QAEA,IAAI,CAACS,KAAK;YACR,MAAM,IAAItB,qKAAAA,CAAUI,IAAIE,CAAC;QAC3B;QAEA,OAAOgB;IACT;AACF,EAAC"}},
    {"offset": {"line": 4057, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/fetchAPI-stream-file/index.ts"],"sourcesContent":["import fs from 'fs'\n\nexport function iteratorToStream(iterator: AsyncIterator<Uint8Array>) {\n  return new ReadableStream({\n    async pull(controller) {\n      const { done, value } = await iterator.next()\n      if (done) {\n        controller.close()\n      } else {\n        controller.enqueue(value)\n      }\n    },\n  })\n}\n\nexport async function* nodeStreamToIterator(stream: fs.ReadStream) {\n  for await (const chunk of stream) {\n    yield new Uint8Array(chunk)\n  }\n}\n\nexport function streamFile({\n  filePath,\n  options,\n}: {\n  filePath: string\n  options?: { end?: number; start?: number }\n}): ReadableStream {\n  const nodeStream = fs.createReadStream(filePath, options)\n  const data: ReadableStream = iteratorToStream(nodeStreamToIterator(nodeStream))\n  return data\n}\n"],"names":["fs","iteratorToStream","iterator","ReadableStream","pull","controller","done","value","next","close","enqueue","nodeStreamToIterator","stream","chunk","Uint8Array","streamFile","filePath","options","nodeStream","createReadStream","data"],"mappings":";;;;;;;;AAAA,OAAOA,QAAQ,KAAI;;AAEZ,SAASC,iBAAiBC,QAAmC;IAClE,OAAO,IAAIC,eAAe;QACxB,MAAMC,MAAKC,UAAU;YACnB,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE,GAAG,MAAML,SAASM,IAAI;YAC3C,IAAIF,MAAM;gBACRD,WAAWI,KAAK;YAClB,OAAO;gBACLJ,WAAWK,OAAO,CAACH;YACrB;QACF;IACF;AACF;AAEO,gBAAgBI,qBAAqBC,MAAqB;IAC/D,WAAW,MAAMC,SAASD,OAAQ;QAChC,MAAM,IAAIE,WAAWD;IACvB;AACF;AAEO,SAASE,WAAW,EACzBC,QAAQ,EACRC,OAAO,EAIR;IACC,MAAMC,aAAalB,wGAAAA,CAAGmB,gBAAgB,CAACH,UAAUC;IACjD,MAAMG,OAAuBnB,iBAAiBU,qBAAqBO;IACnE,OAAOE;AACT"}},
    {"offset": {"line": 4093, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/parseRangeHeader.ts"],"sourcesContent":["import parseRange from 'range-parser'\n\nexport type ByteRange = {\n  end: number\n  start: number\n}\n\nexport type ParseRangeResult =\n  | { range: ByteRange; type: 'partial' }\n  | { range: null; type: 'full' }\n  | { range: null; type: 'invalid' }\n\n/**\n * Parses HTTP Range header according to RFC 7233\n *\n * @returns Result object indicating whether to serve full file, partial content, or invalid range\n */\nexport function parseRangeHeader({\n  fileSize,\n  rangeHeader,\n}: {\n  fileSize: number\n  rangeHeader: null | string\n}): ParseRangeResult {\n  // No Range header - serve full file\n  if (!rangeHeader) {\n    return { type: 'full', range: null }\n  }\n\n  const result = parseRange(fileSize, rangeHeader)\n\n  // Invalid range syntax or unsatisfiable range\n  if (result === -1 || result === -2) {\n    return { type: 'invalid', range: null }\n  }\n\n  // Must be bytes range type\n  if (result.type !== 'bytes' || result.length === 0) {\n    return { type: 'invalid', range: null }\n  }\n\n  // Multi-range requests: use first range only (standard simplification)\n  const range = result[0]\n\n  if (!range) {\n    return { type: 'invalid', range: null }\n  }\n\n  return {\n    type: 'partial',\n    range: {\n      end: range.end,\n      start: range.start,\n    },\n  }\n}\n"],"names":["parseRange","parseRangeHeader","fileSize","rangeHeader","type","range","result","length","end","start"],"mappings":";;;;AAAA,OAAOA,gBAAgB,eAAc;;AAiB9B,SAASC,iBAAiB,EAC/BC,QAAQ,EACRC,WAAW,EAIZ;IACC,oCAAoC;IACpC,IAAI,CAACA,aAAa;QAChB,OAAO;YAAEC,MAAM;YAAQC,OAAO;QAAK;IACrC;IAEA,MAAMC,aAASN,qJAAAA,EAAWE,UAAUC;IAEpC,8CAA8C;IAC9C,IAAIG,WAAW,CAAC,KAAKA,WAAW,CAAC,GAAG;QAClC,OAAO;YAAEF,MAAM;YAAWC,OAAO;QAAK;IACxC;IAEA,2BAA2B;IAC3B,IAAIC,OAAOF,IAAI,KAAK,WAAWE,OAAOC,MAAM,KAAK,GAAG;QAClD,OAAO;YAAEH,MAAM;YAAWC,OAAO;QAAK;IACxC;IAEA,uEAAuE;IACvE,MAAMA,QAAQC,MAAM,CAAC,EAAE;IAEvB,IAAI,CAACD,OAAO;QACV,OAAO;YAAED,MAAM;YAAWC,OAAO;QAAK;IACxC;IAEA,OAAO;QACLD,MAAM;QACNC,OAAO;YACLG,KAAKH,MAAMG,GAAG;YACdC,OAAOJ,MAAMI,KAAK;QACpB;IACF;AACF"}},
    {"offset": {"line": 4142, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/endpoints/getFile.ts"],"sourcesContent":["import type { Stats } from 'fs'\n\nimport { fileTypeFromFile } from 'file-type'\nimport fsPromises from 'fs/promises'\nimport { status as httpStatus } from 'http-status'\nimport path from 'path'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { APIError } from '../../errors/APIError.js'\nimport { checkFileAccess } from '../../uploads/checkFileAccess.js'\nimport { streamFile } from '../../uploads/fetchAPI-stream-file/index.js'\nimport { getFileTypeFallback } from '../../uploads/getFileTypeFallback.js'\nimport { parseRangeHeader } from '../../uploads/parseRangeHeader.js'\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\n\nexport const getFileHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const filename = req.routeParams?.filename as string\n\n  if (!collection.config.upload) {\n    throw new APIError(\n      `This collection is not an upload collection: ${collection.config.slug}`,\n      httpStatus.BAD_REQUEST,\n    )\n  }\n\n  const accessResult = (await checkFileAccess({\n    collection,\n    filename,\n    req,\n  }))!\n\n  if (accessResult instanceof Response) {\n    return accessResult\n  }\n\n  if (collection.config.upload.handlers?.length) {\n    let customResponse: null | Response | void = null\n    const headers = new Headers()\n\n    for (const handler of collection.config.upload.handlers) {\n      customResponse = await handler(req, {\n        doc: accessResult,\n        headers,\n        params: {\n          collection: collection.config.slug,\n          filename,\n        },\n      })\n      if (customResponse && customResponse instanceof Response) {\n        break\n      }\n    }\n\n    if (customResponse instanceof Response) {\n      return customResponse\n    }\n  }\n\n  const fileDir = collection.config.upload?.staticDir || collection.config.slug\n  const filePath = path.resolve(`${fileDir}/${filename}`)\n  let stats: Stats\n\n  try {\n    stats = await fsPromises.stat(filePath)\n  } catch (err) {\n    if ((err as { code?: string }).code === 'ENOENT') {\n      req.payload.logger.error(\n        `File ${filename} for collection ${collection.config.slug} is missing on the disk. Expected path: ${filePath}`,\n      )\n\n      // Omit going to the routeError handler by returning response instead of\n      // throwing an error to cut down log noise. The response still matches what you get with APIError to not leak details to the user.\n      return Response.json(\n        {\n          errors: [\n            {\n              message: 'Something went wrong.',\n            },\n          ],\n        },\n        {\n          headers: headersWithCors({\n            headers: new Headers(),\n            req,\n          }),\n          status: 500,\n        },\n      )\n    }\n\n    throw err\n  }\n\n  const fileTypeResult = (await fileTypeFromFile(filePath)) || getFileTypeFallback(filePath)\n  let mimeType = fileTypeResult.mime\n\n  if (filePath.endsWith('.svg') && fileTypeResult.mime === 'application/xml') {\n    mimeType = 'image/svg+xml'\n  }\n\n  // Parse Range header for byte range requests\n  const rangeHeader = req.headers.get('range')\n  const rangeResult = parseRangeHeader({\n    fileSize: stats.size,\n    rangeHeader,\n  })\n\n  if (rangeResult.type === 'invalid') {\n    let headers = new Headers()\n    headers.set('Content-Range', `bytes */${stats.size}`)\n    headers = collection.config.upload?.modifyResponseHeaders\n      ? collection.config.upload.modifyResponseHeaders({ headers }) || headers\n      : headers\n\n    return new Response(null, {\n      headers: headersWithCors({\n        headers,\n        req,\n      }),\n      status: httpStatus.REQUESTED_RANGE_NOT_SATISFIABLE,\n    })\n  }\n\n  let headers = new Headers()\n  headers.set('Content-Type', mimeType)\n  headers.set('Accept-Ranges', 'bytes')\n\n  let data: ReadableStream\n  let status: number\n  const isPartial = rangeResult.type === 'partial'\n  const range = rangeResult.range\n\n  if (isPartial && range) {\n    const contentLength = range.end - range.start + 1\n    headers.set('Content-Length', String(contentLength))\n    headers.set('Content-Range', `bytes ${range.start}-${range.end}/${stats.size}`)\n    data = streamFile({ filePath, options: { end: range.end, start: range.start } })\n    status = httpStatus.PARTIAL_CONTENT\n  } else {\n    headers.set('Content-Length', String(stats.size))\n    data = streamFile({ filePath })\n    status = httpStatus.OK\n  }\n\n  headers = collection.config.upload?.modifyResponseHeaders\n    ? collection.config.upload.modifyResponseHeaders({ headers }) || headers\n    : headers\n\n  return new Response(data, {\n    headers: headersWithCors({\n      headers,\n      req,\n    }),\n    status,\n  })\n}\n"],"names":["fileTypeFromFile","fsPromises","status","httpStatus","path","APIError","checkFileAccess","streamFile","getFileTypeFallback","parseRangeHeader","getRequestCollection","headersWithCors","getFileHandler","req","collection","filename","routeParams","config","upload","slug","BAD_REQUEST","accessResult","Response","handlers","length","customResponse","headers","Headers","handler","doc","params","fileDir","staticDir","filePath","resolve","stats","stat","err","code","payload","logger","error","json","errors","message","fileTypeResult","mimeType","mime","endsWith","rangeHeader","get","rangeResult","fileSize","size","type","set","modifyResponseHeaders","REQUESTED_RANGE_NOT_SATISFIABLE","data","isPartial","range","contentLength","end","start","String","options","PARTIAL_CONTENT","OK"],"mappings":"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"}},
    {"offset": {"line": 4295, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/endpoints/getFileFromURL.ts"],"sourcesContent":["import type { PayloadHandler } from '../../config/types.js'\n\nimport { executeAccess } from '../../auth/executeAccess.js'\nimport { APIError } from '../../errors/APIError.js'\nimport { Forbidden } from '../../errors/Forbidden.js'\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { isURLAllowed } from '../../utilities/isURLAllowed.js'\n\n// If doc id is provided, it means we are updating the doc\n// /:collectionSlug/paste-url/:doc-id?src=:fileUrl\n\n// If doc id is not provided, it means we are creating a new doc\n// /:collectionSlug/paste-url?src=:fileUrl\n\nexport const getFileFromURLHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req, { optionalID: true })\n\n  if (!req.user) {\n    throw new Forbidden(req.t)\n  }\n\n  const config = collection?.config\n\n  if (id) {\n    // updating doc\n    const accessResult = await executeAccess({ req }, config.access.update)\n    if (!accessResult) {\n      throw new Forbidden(req.t)\n    }\n  } else {\n    // creating doc\n    const accessResult = await executeAccess({ req }, config.access?.create)\n    if (!accessResult) {\n      throw new Forbidden(req.t)\n    }\n  }\n  try {\n    if (!req.url) {\n      throw new APIError('Request URL is missing.', 400)\n    }\n\n    const { searchParams } = new URL(req.url)\n    const src = searchParams.get('src')\n\n    if (!src || typeof src !== 'string') {\n      throw new APIError('A valid URL string is required.', 400)\n    }\n\n    const validatedUrl = new URL(src)\n\n    if (\n      typeof config.upload?.pasteURL === 'object' &&\n      !isURLAllowed(validatedUrl.href, config.upload.pasteURL.allowList)\n    ) {\n      throw new APIError(`The provided URL (${validatedUrl.href}) is not allowed.`, 400)\n    }\n\n    // Fetch the file with no compression\n    const response = await fetch(validatedUrl.href, {\n      headers: {\n        'Accept-Encoding': 'identity',\n      },\n    })\n\n    if (!response.ok) {\n      throw new APIError(`Failed to fetch file from ${validatedUrl.href}`, response.status)\n    }\n\n    const decodedFileName = decodeURIComponent(validatedUrl.pathname.split('/').pop() || '')\n\n    return new Response(response.body, {\n      headers: {\n        'Content-Disposition': `attachment; filename=\"${decodedFileName}\"`,\n        'Content-Length': response.headers.get('content-length') || '',\n        'Content-Type': response.headers.get('content-type') || 'application/octet-stream',\n      },\n    })\n  } catch (err) {\n    throw new APIError(\n      `Error fetching file: ${err instanceof Error ? err.message : 'Unknown error'}`,\n      500,\n    )\n  }\n}\n"],"names":["executeAccess","APIError","Forbidden","getRequestCollectionWithID","isURLAllowed","getFileFromURLHandler","req","id","collection","optionalID","user","t","config","accessResult","access","update","create","url","searchParams","URL","src","get","validatedUrl","upload","pasteURL","href","allowList","response","fetch","headers","ok","status","decodedFileName","decodeURIComponent","pathname","split","pop","Response","body","err","Error","message"],"mappings":";;;;AAEA,SAASA,aAAa,QAAQ,8BAA6B;AAC3D,SAASC,QAAQ,QAAQ,2BAA0B;AACnD,SAASC,SAAS,QAAQ,4BAA2B;AACrD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,YAAY,QAAQ,kCAAiC;;;;;;AAQvD,MAAMC,wBAAwC,OAAOC;IAC1D,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGL,gMAAAA,EAA2BG,KAAK;QAAEG,YAAY;IAAK;IAE9E,IAAI,CAACH,IAAII,IAAI,EAAE;QACb,MAAM,IAAIR,qKAAAA,CAAUI,IAAIK,CAAC;IAC3B;IAEA,MAAMC,SAASJ,YAAYI;IAE3B,IAAIL,IAAI;QACN,eAAe;QACf,MAAMM,eAAe,UAAMb,2KAAAA,EAAc;YAAEM;QAAI,GAAGM,OAAOE,MAAM,CAACC,MAAM;QACtE,IAAI,CAACF,cAAc;YACjB,MAAM,IAAIX,qKAAAA,CAAUI,IAAIK,CAAC;QAC3B;IACF,OAAO;QACL,eAAe;QACf,MAAME,eAAe,UAAMb,2KAAAA,EAAc;YAAEM;QAAI,GAAGM,OAAOE,MAAM,EAAEE;QACjE,IAAI,CAACH,cAAc;YACjB,MAAM,IAAIX,qKAAAA,CAAUI,IAAIK,CAAC;QAC3B;IACF;IACA,IAAI;QACF,IAAI,CAACL,IAAIW,GAAG,EAAE;YACZ,MAAM,IAAIhB,mKAAAA,CAAS,2BAA2B;QAChD;QAEA,MAAM,EAAEiB,YAAY,EAAE,GAAG,IAAIC,IAAIb,IAAIW,GAAG;QACxC,MAAMG,MAAMF,aAAaG,GAAG,CAAC;QAE7B,IAAI,CAACD,OAAO,OAAOA,QAAQ,UAAU;YACnC,MAAM,IAAInB,mKAAAA,CAAS,mCAAmC;QACxD;QAEA,MAAMqB,eAAe,IAAIH,IAAIC;QAE7B,IACE,OAAOR,OAAOW,MAAM,EAAEC,aAAa,YACnC,KAACpB,8KAAAA,EAAakB,aAAaG,IAAI,EAAEb,OAAOW,MAAM,CAACC,QAAQ,CAACE,SAAS,GACjE;YACA,MAAM,IAAIzB,mKAAAA,CAAS,CAAC,kBAAkB,EAAEqB,aAAaG,IAAI,CAAC,iBAAiB,CAAC,EAAE;QAChF;QAEA,qCAAqC;QACrC,MAAME,WAAW,MAAMC,MAAMN,aAAaG,IAAI,EAAE;YAC9CI,SAAS;gBACP,mBAAmB;YACrB;QACF;QAEA,IAAI,CAACF,SAASG,EAAE,EAAE;YAChB,MAAM,IAAI7B,mKAAAA,CAAS,CAAC,0BAA0B,EAAEqB,aAAaG,IAAI,EAAE,EAAEE,SAASI,MAAM;QACtF;QAEA,MAAMC,kBAAkBC,mBAAmBX,aAAaY,QAAQ,CAACC,KAAK,CAAC,KAAKC,GAAG,MAAM;QAErF,OAAO,IAAIC,SAASV,SAASW,IAAI,EAAE;YACjCT,SAAS;gBACP,uBAAuB,CAAC,sBAAsB,EAAEG,gBAAgB,CAAC,CAAC;gBAClE,kBAAkBL,SAASE,OAAO,CAACR,GAAG,CAAC,qBAAqB;gBAC5D,gBAAgBM,SAASE,OAAO,CAACR,GAAG,CAAC,mBAAmB;YAC1D;QACF;IACF,EAAE,OAAOkB,KAAK;QACZ,MAAM,IAAItC,mKAAAA,CACR,CAAC,qBAAqB,EAAEsC,eAAeC,QAAQD,IAAIE,OAAO,GAAG,iBAAiB,EAC9E;IAEJ;AACF,EAAC"}},
    {"offset": {"line": 4372, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/endpoints/index.ts"],"sourcesContent":["import type { Endpoint } from '../../config/types.js'\n\nimport { wrapInternalEndpoints } from '../../utilities/wrapInternalEndpoints.js'\nimport { getFileHandler } from './getFile.js'\nimport { getFileFromURLHandler } from './getFileFromURL.js'\n\nexport const uploadCollectionEndpoints: Endpoint[] = wrapInternalEndpoints([\n  {\n    handler: getFileFromURLHandler,\n    method: 'get',\n    path: '/paste-url/:id?',\n  },\n  {\n    handler: getFileHandler,\n    method: 'get',\n    path: '/file/:filename',\n  },\n])\n"],"names":["wrapInternalEndpoints","getFileHandler","getFileFromURLHandler","uploadCollectionEndpoints","handler","method","path"],"mappings":";;;;AAEA,SAASA,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,cAAc,QAAQ,eAAc;AAC7C,SAASC,qBAAqB,QAAQ,sBAAqB;;;;AAEpD,MAAMC,gCAAwCH,gMAAAA,EAAsB;IACzE;QACEI,SAASF,oMAAAA;QACTG,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASH,sLAAAA;QACTI,QAAQ;QACRC,MAAM;IACR;CACD,EAAC"}},
    {"offset": {"line": 4398, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/generateFilePathOrURL.ts"],"sourcesContent":["import type { Config } from '../config/types.js'\n\nimport { formatAdminURL } from '../utilities/formatAdminURL.js'\n\n/**\n * Generates a file path or URL based on the provided parameters.\n *\n * If urlOrPath is an external URL, it returns it as is.\n * If a filename is provided, it constructs a URL using the collection slug and API route.\n * If neither condition is met, it returns null.\n *\n * If you set relative to true, the returned URL will be relative to the serverURL (unless external).\n */\nexport function generateFilePathOrURL({\n  collectionSlug,\n  config,\n  filename,\n  relative,\n  serverURL,\n  urlOrPath,\n}: {\n  collectionSlug: string\n  config: Config\n  filename?: string\n  relative: boolean\n  serverURL?: string\n  urlOrPath: string | undefined\n}): null | string {\n  if (urlOrPath) {\n    if (!urlOrPath.startsWith('/') && !urlOrPath.startsWith(serverURL || '')) {\n      // external url\n      return urlOrPath\n    }\n  }\n\n  if (filename) {\n    // local file url\n    return formatAdminURL({\n      apiRoute: config.routes?.api || '',\n      path: `/${collectionSlug}/file/${encodeURIComponent(filename)}`,\n      relative,\n      serverURL: config.serverURL,\n    })\n  }\n\n  return null\n}\n"],"names":["formatAdminURL","generateFilePathOrURL","collectionSlug","config","filename","relative","serverURL","urlOrPath","startsWith","apiRoute","routes","api","path","encodeURIComponent"],"mappings":";;;;AAEA,SAASA,cAAc,QAAQ,iCAAgC;;AAWxD,SAASC,sBAAsB,EACpCC,cAAc,EACdC,MAAM,EACNC,QAAQ,EACRC,QAAQ,EACRC,SAAS,EACTC,SAAS,EAQV;IACC,IAAIA,WAAW;QACb,IAAI,CAACA,UAAUC,UAAU,CAAC,QAAQ,CAACD,UAAUC,UAAU,CAACF,aAAa,KAAK;YACxE,eAAe;YACf,OAAOC;QACT;IACF;IAEA,IAAIH,UAAU;QACZ,iBAAiB;QACjB,WAAOJ,kLAAAA,EAAe;YACpBS,UAAUN,OAAOO,MAAM,EAAEC,OAAO;YAChCC,MAAM,CAAC,CAAC,EAAEV,eAAe,MAAM,EAAEW,mBAAmBT,WAAW;YAC/DC;YACAC,WAAWH,OAAOG,SAAS;QAC7B;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 4426, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/mimeTypeValidator.ts"],"sourcesContent":["import type { Validate } from '../fields/config/types.js'\n\nimport { validateMimeType } from '../utilities/validateMimeType.js'\n\nexport const mimeTypeValidator =\n  (mimeTypes: string[]): Validate =>\n  (val: string, { siblingData }) => {\n    if (!siblingData.filename) {\n      return true\n    }\n\n    if (!val) {\n      return 'Invalid file type'\n    }\n\n    const isValidMimeType = validateMimeType(val, mimeTypes)\n    return isValidMimeType ? true : `Invalid file type: '${val}'`\n  }\n"],"names":["validateMimeType","mimeTypeValidator","mimeTypes","val","siblingData","filename","isValidMimeType"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,mCAAkC;;AAE5D,MAAMC,oBACX,CAACC,YACD,CAACC,KAAa,EAAEC,WAAW,EAAE;QAC3B,IAAI,CAACA,YAAYC,QAAQ,EAAE;YACzB,OAAO;QACT;QAEA,IAAI,CAACF,KAAK;YACR,OAAO;QACT;QAEA,MAAMG,sBAAkBN,sLAAAA,EAAiBG,KAAKD;QAC9C,OAAOI,kBAAkB,OAAO,CAAC,oBAAoB,EAAEH,IAAI,CAAC,CAAC;IAC/D,EAAC"}},
    {"offset": {"line": 4446, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/uploads/getBaseFields.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Config } from '../config/types.js'\nimport type { Field } from '../fields/config/types.js'\nimport type { UploadConfig } from './types.js'\n\nimport { generateFilePathOrURL } from './generateFilePathOrURL.js'\nimport { mimeTypeValidator } from './mimeTypeValidator.js'\n\ntype Options = {\n  collection: CollectionConfig\n  config: Config\n}\n\nexport const getBaseUploadFields = ({ collection, config }: Options): Field[] => {\n  const uploadOptions: UploadConfig = typeof collection.upload === 'object' ? collection.upload : {}\n\n  const mimeType: Field = {\n    name: 'mimeType',\n    type: 'text',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    label: 'MIME Type',\n  }\n\n  const thumbnailURL: Field = {\n    name: 'thumbnailURL',\n    type: 'text',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    hooks: {\n      afterRead: [\n        ({ originalDoc, req }) => {\n          const adminThumbnail =\n            typeof collection.upload !== 'boolean' ? collection.upload?.adminThumbnail : undefined\n\n          if (typeof adminThumbnail === 'function') {\n            return adminThumbnail({ doc: originalDoc })\n          }\n\n          return generateFilePathOrURL({\n            collectionSlug: collection.slug,\n            config,\n            filename:\n              typeof adminThumbnail === 'string'\n                ? (originalDoc.sizes?.[adminThumbnail].filename as string)\n                : undefined,\n            relative: false,\n            serverURL: req.payload.config.serverURL,\n            urlOrPath:\n              typeof adminThumbnail === 'string'\n                ? (originalDoc.sizes?.[adminThumbnail].url as string)\n                : undefined,\n          })\n        },\n      ],\n    },\n    label: 'Thumbnail URL',\n  }\n\n  const width: Field = {\n    name: 'width',\n    type: 'number',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    label: ({ t }) => t('upload:width'),\n  }\n\n  const height: Field = {\n    name: 'height',\n    type: 'number',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    label: ({ t }) => t('upload:height'),\n  }\n\n  const filesize: Field = {\n    name: 'filesize',\n    type: 'number',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    label: ({ t }) => t('upload:fileSize'),\n  }\n\n  const filename: Field = {\n    name: 'filename',\n    type: 'text',\n    admin: {\n      disableBulkEdit: true,\n      hidden: true,\n      readOnly: true,\n    },\n    index: true,\n    label: ({ t }) => t('upload:fileName'),\n  }\n\n  // Only set unique: true if the collection does not have a compound index\n  if (\n    collection.upload === true ||\n    (typeof collection.upload === 'object' && !collection.upload.filenameCompoundIndex)\n  ) {\n    filename.unique = true\n  }\n\n  const url: Field = {\n    name: 'url',\n    type: 'text',\n    admin: {\n      hidden: true,\n      readOnly: true,\n    },\n    label: 'URL',\n  }\n\n  let uploadFields: Field[] = [\n    {\n      ...url,\n      hooks: {\n        afterRead: [\n          ({ data, originalDoc, req, value }) =>\n            generateFilePathOrURL({\n              collectionSlug: collection.slug,\n              config,\n              filename: data?.filename || originalDoc?.filename,\n              relative: false,\n              serverURL: req.payload.config.serverURL,\n              urlOrPath: value,\n            }),\n        ],\n        beforeChange: [\n          ({ collection, data, originalDoc, req, value }) =>\n            generateFilePathOrURL({\n              collectionSlug: collection?.slug as string,\n              config,\n              filename: data?.filename || originalDoc?.filename,\n              relative: true,\n              serverURL: req.payload.config.serverURL,\n              urlOrPath: value,\n            }),\n        ],\n      },\n    },\n    thumbnailURL,\n    filename,\n    mimeType,\n    filesize,\n    width,\n    height,\n  ]\n\n  // Add focal point fields if not disabled\n  if (\n    uploadOptions.focalPoint !== false ||\n    uploadOptions.imageSizes ||\n    uploadOptions.resizeOptions\n  ) {\n    uploadFields = uploadFields.concat(\n      ['focalX', 'focalY'].map((name) => {\n        return {\n          name,\n          type: 'number',\n          admin: {\n            disableGroupBy: true,\n            disableListColumn: true,\n            disableListFilter: true,\n            hidden: true,\n          },\n        }\n      }),\n    )\n  }\n\n  if (uploadOptions.mimeTypes) {\n    mimeType.validate = mimeTypeValidator(uploadOptions.mimeTypes)\n  }\n\n  // In Payload v4, image size subfields (`url`, `width`, `height`, etc.) should\n  // default to `disableGroupBy: true`, `disableListColumn: true` and `disableListFilter: true`\n  // to avoid cluttering the collection list view and filters by default.\n  if (uploadOptions.imageSizes) {\n    uploadFields = uploadFields.concat([\n      {\n        name: 'sizes',\n        type: 'group',\n        admin: {\n          hidden: true,\n        },\n        fields: uploadOptions.imageSizes.map((size) => ({\n          name: size.name,\n          type: 'group',\n          admin: {\n            hidden: true,\n            ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n            ...(size.admin?.disableListColumn && { disableListColumn: true }),\n            ...(size.admin?.disableListFilter && { disableListFilter: true }),\n          },\n          fields: [\n            {\n              ...url,\n              admin: {\n                ...url.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n              hooks: {\n                afterRead: [\n                  ({ collection, data, originalDoc, req, value }) =>\n                    generateFilePathOrURL({\n                      collectionSlug: collection?.slug as string,\n                      config,\n                      filename:\n                        data?.sizes?.[size.name]?.filename ||\n                        originalDoc?.sizes?.[size.name]?.filename,\n                      relative: false,\n                      serverURL: req.payload.config.serverURL,\n                      urlOrPath: value,\n                    }),\n                ],\n                beforeChange: [\n                  ({ collection, data, originalDoc, req, value }) =>\n                    generateFilePathOrURL({\n                      collectionSlug: collection?.slug as string,\n                      config,\n                      filename:\n                        data?.sizes?.[size.name]?.filename ||\n                        originalDoc?.sizes?.[size.name]?.filename ||\n                        data?.filename ||\n                        originalDoc?.filename,\n                      relative: true,\n                      serverURL: req.payload.config.serverURL,\n                      urlOrPath: value,\n                    }),\n                ],\n              },\n            },\n            {\n              ...width,\n              admin: {\n                ...width.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n            },\n            {\n              ...height,\n              admin: {\n                ...height.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n            },\n            {\n              ...mimeType,\n              admin: {\n                ...mimeType.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n            },\n            {\n              ...filesize,\n              admin: {\n                ...filesize.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n            },\n            {\n              ...filename,\n              admin: {\n                ...filename.admin,\n                ...(size.admin?.disableGroupBy && { disableGroupBy: true }),\n                ...(size.admin?.disableListColumn && { disableListColumn: true }),\n                ...(size.admin?.disableListFilter && { disableListFilter: true }),\n              },\n              unique: false,\n            },\n          ],\n          label: size.name,\n        })),\n        label: ({ t }) => t('upload:sizes'),\n      },\n    ])\n  }\n  return uploadFields\n}\n"],"names":["generateFilePathOrURL","mimeTypeValidator","getBaseUploadFields","collection","config","uploadOptions","upload","mimeType","name","type","admin","hidden","readOnly","label","thumbnailURL","hooks","afterRead","originalDoc","req","adminThumbnail","undefined","doc","collectionSlug","slug","filename","sizes","relative","serverURL","payload","urlOrPath","url","width","t","height","filesize","disableBulkEdit","index","filenameCompoundIndex","unique","uploadFields","data","value","beforeChange","focalPoint","imageSizes","resizeOptions","concat","map","disableGroupBy","disableListColumn","disableListFilter","mimeTypes","validate","fields","size"],"mappings":"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"}},
    {"offset": {"line": 4752, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/miniChalk.ts"],"sourcesContent":["const codes = {\n  blue: '\\x1b[34m',\n  bold: '\\x1b[1m',\n  cyan: '\\x1b[36m',\n  dim: '\\x1b[2m',\n  green: '\\x1b[32m',\n  magenta: '\\x1b[35m',\n  red: '\\x1b[31m',\n  reset: '\\x1b[0m',\n  underline: '\\x1b[4m',\n  white: '\\x1b[37m',\n  yellow: '\\x1b[33m',\n}\n\nfunction colorize(str: string, ...styles: (keyof typeof codes)[]) {\n  const start = styles.map((s) => codes[s] || '').join('')\n  return `${start}${str}${codes.reset}`\n}\n\nexport const miniChalk = {\n  blue: (str: string) => colorize(str, 'blue'),\n  bold: (str: string) => colorize(str, 'bold'),\n  cyan: (str: string) => colorize(str, 'cyan'),\n  dim: (str: string) => colorize(str, 'dim'),\n  green: (str: string) => colorize(str, 'green'),\n  magenta: (str: string) => colorize(str, 'magenta'),\n  red: (str: string) => colorize(str, 'red'),\n  underline: (str: string) => colorize(str, 'underline'),\n  white: (str: string) => colorize(str, 'white'),\n  yellow: (str: string) => colorize(str, 'yellow'),\n\n  // combos\n  redBold: (str: string) => colorize(str, 'red', 'bold'),\n  yellowBold: (str: string) => colorize(str, 'yellow', 'bold'),\n}\n"],"names":["codes","blue","bold","cyan","dim","green","magenta","red","reset","underline","white","yellow","colorize","str","styles","start","map","s","join","miniChalk","redBold","yellowBold"],"mappings":";;;;AAAA,MAAMA,QAAQ;IACZC,MAAM;IACNC,MAAM;IACNC,MAAM;IACNC,KAAK;IACLC,OAAO;IACPC,SAAS;IACTC,KAAK;IACLC,OAAO;IACPC,WAAW;IACXC,OAAO;IACPC,QAAQ;AACV;AAEA,SAASC,SAASC,GAAW,EAAE,GAAGC,MAA8B;IAC9D,MAAMC,QAAQD,OAAOE,GAAG,CAAC,CAACC,IAAMjB,KAAK,CAACiB,EAAE,IAAI,IAAIC,IAAI,CAAC;IACrD,OAAO,GAAGH,QAAQF,MAAMb,MAAMQ,KAAK,EAAE;AACvC;AAEO,MAAMW,YAAY;IACvBlB,MAAM,CAACY,MAAgBD,SAASC,KAAK;IACrCX,MAAM,CAACW,MAAgBD,SAASC,KAAK;IACrCV,MAAM,CAACU,MAAgBD,SAASC,KAAK;IACrCT,KAAK,CAACS,MAAgBD,SAASC,KAAK;IACpCR,OAAO,CAACQ,MAAgBD,SAASC,KAAK;IACtCP,SAAS,CAACO,MAAgBD,SAASC,KAAK;IACxCN,KAAK,CAACM,MAAgBD,SAASC,KAAK;IACpCJ,WAAW,CAACI,MAAgBD,SAASC,KAAK;IAC1CH,OAAO,CAACG,MAAgBD,SAASC,KAAK;IACtCF,QAAQ,CAACE,MAAgBD,SAASC,KAAK;IAEvC,SAAS;IACTO,SAAS,CAACP,MAAgBD,SAASC,KAAK,OAAO;IAC/CQ,YAAY,CAACR,MAAgBD,SAASC,KAAK,UAAU;AACvD,EAAC"}},
    {"offset": {"line": 4792, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/traverseForLocalizedFields.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\n\nexport const traverseForLocalizedFields = (fields: Field[]): boolean => {\n  for (const field of fields) {\n    if ('localized' in field && field.localized) {\n      return true\n    }\n\n    switch (field.type) {\n      case 'array':\n      case 'collapsible':\n      case 'group':\n      case 'row':\n        if (field.fields && traverseForLocalizedFields(field.fields)) {\n          return true\n        }\n        break\n\n      case 'blocks':\n        if (field.blocks) {\n          for (const block of field.blocks) {\n            if (block.fields && traverseForLocalizedFields(block.fields)) {\n              return true\n            }\n          }\n        }\n        break\n\n      case 'tabs':\n        if (field.tabs) {\n          for (const tab of field.tabs) {\n            if ('localized' in tab && tab.localized) {\n              return true\n            }\n            if ('fields' in tab && tab.fields && traverseForLocalizedFields(tab.fields)) {\n              return true\n            }\n          }\n        }\n        break\n    }\n  }\n\n  return false\n}\n"],"names":["traverseForLocalizedFields","fields","field","localized","type","blocks","block","tabs","tab"],"mappings":";;;;AAEO,MAAMA,6BAA6B,CAACC;IACzC,KAAK,MAAMC,SAASD,OAAQ;QAC1B,IAAI,eAAeC,SAASA,MAAMC,SAAS,EAAE;YAC3C,OAAO;QACT;QAEA,OAAQD,MAAME,IAAI;YAChB,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBACH,IAAIF,MAAMD,MAAM,IAAID,2BAA2BE,MAAMD,MAAM,GAAG;oBAC5D,OAAO;gBACT;gBACA;YAEF,KAAK;gBACH,IAAIC,MAAMG,MAAM,EAAE;oBAChB,KAAK,MAAMC,SAASJ,MAAMG,MAAM,CAAE;wBAChC,IAAIC,MAAML,MAAM,IAAID,2BAA2BM,MAAML,MAAM,GAAG;4BAC5D,OAAO;wBACT;oBACF;gBACF;gBACA;YAEF,KAAK;gBACH,IAAIC,MAAMK,IAAI,EAAE;oBACd,KAAK,MAAMC,OAAON,MAAMK,IAAI,CAAE;wBAC5B,IAAI,eAAeC,OAAOA,IAAIL,SAAS,EAAE;4BACvC,OAAO;wBACT;wBACA,IAAI,YAAYK,OAAOA,IAAIP,MAAM,IAAID,2BAA2BQ,IAAIP,MAAM,GAAG;4BAC3E,OAAO;wBACT;oBACF;gBACF;gBACA;QACJ;IACF;IAEA,OAAO;AACT,EAAC"}},
    {"offset": {"line": 4839, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/parseBooleanString.ts"],"sourcesContent":["/**\n * Useful when parsing query parameters where booleans are represented as strings.\n * Falls back to `undefined` to allow default handling elsewhere.\n */\nexport const parseBooleanString = (\n  value: boolean | null | string | undefined,\n): boolean | undefined => {\n  if (typeof value === 'boolean') {\n    return value\n  }\n\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  return undefined\n}\n"],"names":["parseBooleanString","value","undefined"],"mappings":"AAAA;;;CAGC,GACD;;;;AAAO,MAAMA,qBAAqB,CAChCC;IAEA,IAAI,OAAOA,UAAU,WAAW;QAC9B,OAAOA;IACT;IAEA,IAAIA,UAAU,QAAQ;QACpB,OAAO;IACT;IAEA,IAAIA,UAAU,SAAS;QACrB,OAAO;IACT;IAEA,OAAOC;AACT,EAAC"}},
    {"offset": {"line": 4862, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/sanitizeSortParams.ts"],"sourcesContent":["export const sanitizeSortParams = (sort: unknown): string[] | undefined => {\n  if (typeof sort === 'string') {\n    return sort.split(',')\n  }\n\n  if (Array.isArray(sort) && sort.every((value) => typeof value === 'string')) {\n    return sort\n  }\n\n  return undefined\n}\n"],"names":["sanitizeSortParams","sort","split","Array","isArray","every","value","undefined"],"mappings":";;;;AAAO,MAAMA,qBAAqB,CAACC;IACjC,IAAI,OAAOA,SAAS,UAAU;QAC5B,OAAOA,KAAKC,KAAK,CAAC;IACpB;IAEA,IAAIC,MAAMC,OAAO,CAACH,SAASA,KAAKI,KAAK,CAAC,CAACC,QAAU,OAAOA,UAAU,WAAW;QAC3E,OAAOL;IACT;IAEA,OAAOM;AACT,EAAC"}},
    {"offset": {"line": 4879, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/parseParams/index.ts"],"sourcesContent":["import type { JoinQuery, PopulateType, SelectType, Where } from '../../types/index.js'\nimport type { JoinParams } from '../sanitizeJoinParams.js'\n\nimport { isNumber } from '../isNumber.js'\nimport { parseBooleanString } from '../parseBooleanString.js'\nimport { sanitizeJoinParams } from '../sanitizeJoinParams.js'\nimport { sanitizePopulateParam } from '../sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../sanitizeSelectParam.js'\nimport { sanitizeSortParams } from '../sanitizeSortParams.js'\n\ntype RawParams = {\n  [key: string]: unknown\n  autosave?: string\n  data?: string\n  depth?: string\n  draft?: string\n  field?: string\n  flattenLocales?: string\n  joins?: JoinParams\n  limit?: string\n  overrideLock?: string\n  page?: string\n  pagination?: string\n  populate?: unknown\n  publishAllLocales?: string\n  publishSpecificLocale?: string\n  select?: unknown\n  selectedLocales?: string\n  sort?: string | string[]\n  trash?: string\n  unpublishAllLocales?: string\n  where?: Where\n}\n\ntype ParsedParams = {\n  autosave?: boolean\n  data?: Record<string, unknown>\n  depth?: number\n  draft?: boolean\n  field?: string\n  flattenLocales?: boolean\n  joins?: JoinQuery\n  limit?: number\n  overrideLock?: boolean\n  page?: number\n  pagination?: boolean\n  populate?: PopulateType\n  publishAllLocales?: boolean\n  publishSpecificLocale?: string\n  select?: SelectType\n  selectedLocales?: string[]\n  sort?: string[]\n  trash?: boolean\n  unpublishAllLocales?: boolean\n  where?: Where\n} & Record<string, unknown>\n\nexport const booleanParams = [\n  'autosave',\n  'draft',\n  'trash',\n  'overrideLock',\n  'pagination',\n  'flattenLocales',\n]\n\nexport const numberParams = ['depth', 'limit', 'page']\n\n/**\n * Takes raw query parameters and parses them into the correct types that Payload expects.\n * Examples:\n *   a. `draft` provided as a string of \"true\" is converted to a boolean\n *   b. `depth` provided as a string of \"0\" is converted to a number\n *   c. `sort` provided as a comma-separated string or array is converted to an array of strings\n */\nexport const parseParams = (params: RawParams): ParsedParams => {\n  const parsedParams = (params || {}) as ParsedParams\n\n  // iterate through known params to make this very fast\n  for (const key of booleanParams) {\n    if (key in params) {\n      parsedParams[key] = parseBooleanString(params[key] as boolean | string)\n    }\n  }\n\n  for (const key of numberParams) {\n    if (key in params) {\n      if (isNumber(params[key])) {\n        parsedParams[key] = Number(params[key])\n      }\n    }\n  }\n\n  if ('populate' in params) {\n    parsedParams.populate = sanitizePopulateParam(params.populate)\n  }\n\n  if ('select' in params) {\n    parsedParams.select = sanitizeSelectParam(params.select)\n  }\n\n  if ('joins' in params) {\n    parsedParams.joins = sanitizeJoinParams(params.joins as JoinParams)\n  }\n\n  if ('sort' in params) {\n    parsedParams.sort = sanitizeSortParams(params.sort)\n  }\n\n  if ('data' in params && typeof params.data === 'string' && params.data.length > 0) {\n    parsedParams.data = JSON.parse(params.data)\n  }\n\n  return parsedParams\n}\n"],"names":["isNumber","parseBooleanString","sanitizeJoinParams","sanitizePopulateParam","sanitizeSelectParam","sanitizeSortParams","booleanParams","numberParams","parseParams","params","parsedParams","key","Number","populate","select","joins","sort","data","length","JSON","parse"],"mappings":";;;;;;;;AAGA,SAASA,QAAQ,QAAQ,iBAAgB;AACzC,SAASC,kBAAkB,QAAQ,2BAA0B;AAC7D,SAASC,kBAAkB,QAAQ,2BAA0B;AAC7D,SAASC,qBAAqB,QAAQ,8BAA6B;AACnE,SAASC,mBAAmB,QAAQ,4BAA2B;AAC/D,SAASC,kBAAkB,QAAQ,2BAA0B;;;;;;;AAiDtD,MAAMC,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;CACD,CAAA;AAEM,MAAMC,eAAe;IAAC;IAAS;IAAS;CAAO,CAAA;AAS/C,MAAMC,cAAc,CAACC;IAC1B,MAAMC,eAAgBD,UAAU,CAAC;IAEjC,sDAAsD;IACtD,KAAK,MAAME,OAAOL,cAAe;QAC/B,IAAIK,OAAOF,QAAQ;YACjBC,YAAY,CAACC,IAAI,OAAGV,0LAAAA,EAAmBQ,MAAM,CAACE,IAAI;QACpD;IACF;IAEA,KAAK,MAAMA,OAAOJ,aAAc;QAC9B,IAAII,OAAOF,QAAQ;YACjB,QAAIT,sKAAAA,EAASS,MAAM,CAACE,IAAI,GAAG;gBACzBD,YAAY,CAACC,IAAI,GAAGC,OAAOH,MAAM,CAACE,IAAI;YACxC;QACF;IACF;IAEA,IAAI,cAAcF,QAAQ;QACxBC,aAAaG,QAAQ,OAAGV,gMAAAA,EAAsBM,OAAOI,QAAQ;IAC/D;IAEA,IAAI,YAAYJ,QAAQ;QACtBC,aAAaI,MAAM,OAAGV,4LAAAA,EAAoBK,OAAOK,MAAM;IACzD;IAEA,IAAI,WAAWL,QAAQ;QACrBC,aAAaK,KAAK,OAAGb,0LAAAA,EAAmBO,OAAOM,KAAK;IACtD;IAEA,IAAI,UAAUN,QAAQ;QACpBC,aAAaM,IAAI,OAAGX,0LAAAA,EAAmBI,OAAOO,IAAI;IACpD;IAEA,IAAI,UAAUP,UAAU,OAAOA,OAAOQ,IAAI,KAAK,YAAYR,OAAOQ,IAAI,CAACC,MAAM,GAAG,GAAG;QACjFR,aAAaO,IAAI,GAAGE,KAAKC,KAAK,CAACX,OAAOQ,IAAI;IAC5C;IAEA,OAAOP;AACT,EAAC"}},
    {"offset": {"line": 4948, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/count.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { countOperation } from '../operations/count.js'\n\nexport const countHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { trash, where } = parseParams(req.query)\n\n  const result = await countOperation({\n    collection,\n    req,\n    trash,\n    where,\n  })\n\n  return Response.json(result, {\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollection","parseParams","countOperation","countHandler","req","collection","trash","where","query","result","Response","json","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,cAAc,QAAQ,yBAAwB;;;;;AAEhD,MAAMC,eAA+B,OAAOC;IACjD,MAAMC,iBAAaL,0LAAAA,EAAqBI;IAExC,MAAM,EAAEE,KAAK,EAAEC,KAAK,EAAE,OAAGN,qLAAAA,EAAYG,IAAII,KAAK;IAE9C,MAAMC,SAAS,UAAMP,yLAAAA,EAAe;QAClCG;QACAD;QACAE;QACAC;IACF;IAEA,OAAOG,SAASC,IAAI,CAACF,QAAQ;QAC3BX,QAAQC,sMAAAA,CAAWa,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 4978, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/create.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { createOperation } from '../operations/create.js'\n\nexport const createHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { autosave, depth, draft, populate, publishAllLocales, select } = parseParams(req.query)\n\n  const publishSpecificLocale = req.query.publishSpecificLocale as string | undefined\n\n  const doc = await createOperation({\n    autosave,\n    collection,\n    data: req.data!,\n    depth,\n    draft,\n    populate,\n    publishAllLocales,\n    publishSpecificLocale,\n    req,\n    select,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('general:successfullyCreated', {\n        label: getTranslation(collection.config.labels.singular, req.i18n),\n      }),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.CREATED,\n    },\n  )\n}\n"],"names":["getTranslation","status","httpStatus","getRequestCollection","headersWithCors","parseParams","createOperation","createHandler","req","collection","autosave","depth","draft","populate","publishAllLocales","select","query","publishSpecificLocale","doc","data","Response","json","message","t","label","config","labels","singular","i18n","headers","Headers","CREATED"],"mappings":";;;;AAAA,SAASA,cAAc,QAAQ,2BAA0B;;AACzD,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,eAAe,QAAQ,0BAAyB;;;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IAExC,MAAM,EAAEE,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,iBAAiB,EAAEC,MAAM,EAAE,OAAGV,qLAAAA,EAAYG,IAAIQ,KAAK;IAE7F,MAAMC,wBAAwBT,IAAIQ,KAAK,CAACC,qBAAqB;IAE7D,MAAMC,MAAM,UAAMZ,2LAAAA,EAAgB;QAChCI;QACAD;QACAU,MAAMX,IAAIW,IAAI;QACdR;QACAC;QACAC;QACAC;QACAG;QACAT;QACAO;IACF;IAEA,OAAOK,SAASC,IAAI,CAClB;QACEH;QACAI,SAASd,IAAIe,CAAC,CAAC,+BAA+B;YAC5CC,WAAOxB,uMAAAA,EAAeS,WAAWgB,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAEnB,IAAIoB,IAAI;QACnE;IACF,GACA;QACEC,aAASzB,oLAAAA,EAAgB;YACvByB,SAAS,IAAIC;YACbtB;QACF;QACAP,QAAQC,sMAAAA,CAAW6B,OAAO;IAC5B;AAEJ,EAAC"}},
    {"offset": {"line": 5028, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/delete.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { deleteOperation } from '../operations/delete.js'\n\nexport const deleteHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { depth, overrideLock, populate, select, trash, where } = parseParams(req.query)\n\n  const result = await deleteOperation({\n    collection,\n    depth,\n    overrideLock: overrideLock ?? false,\n    populate,\n    req,\n    select,\n    trash,\n    where: where!,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (result.errors.length === 0) {\n    const message = req.t('general:deletedCountSuccessfully', {\n      count: result.docs.length,\n      label: getTranslation(\n        collection.config.labels[result.docs.length === 1 ? 'singular' : 'plural'],\n        req.i18n,\n      ),\n    })\n\n    return Response.json(\n      {\n        ...result,\n        message,\n      },\n      {\n        headers,\n        status: httpStatus.OK,\n      },\n    )\n  }\n\n  result.errors = result.errors.map((error) =>\n    error.isPublic\n      ? error\n      : {\n          ...error,\n          message: 'Something went wrong.',\n        },\n  )\n\n  const total = result.docs.length + result.errors.length\n\n  const message = req.t('error:unableToDeleteCount', {\n    count: result.errors.length,\n    label: getTranslation(collection.config.labels[total === 1 ? 'singular' : 'plural'], req.i18n),\n    total,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message,\n    },\n    {\n      headers,\n      status: httpStatus.BAD_REQUEST,\n    },\n  )\n}\n"],"names":["getTranslation","status","httpStatus","getRequestCollection","headersWithCors","parseParams","deleteOperation","deleteHandler","req","collection","depth","overrideLock","populate","select","trash","where","query","result","headers","Headers","errors","length","message","t","count","docs","label","config","labels","i18n","Response","json","OK","map","error","isPublic","total","BAD_REQUEST"],"mappings":";;;;AAAA,SAASA,cAAc,QAAQ,2BAA0B;;AACzD,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,eAAe,QAAQ,0BAAyB;;;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IAExC,MAAM,EAAEE,KAAK,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAE,OAAGV,qLAAAA,EAAYG,IAAIQ,KAAK;IAErF,MAAMC,SAAS,UAAMX,2LAAAA,EAAgB;QACnCG;QACAC;QACAC,cAAcA,gBAAgB;QAC9BC;QACAJ;QACAK;QACAC;QACAC,OAAOA;IACT;IAEA,MAAMG,cAAUd,oLAAAA,EAAgB;QAC9Bc,SAAS,IAAIC;QACbX;IACF;IAEA,IAAIS,OAAOG,MAAM,CAACC,MAAM,KAAK,GAAG;QAC9B,MAAMC,UAAUd,IAAIe,CAAC,CAAC,oCAAoC;YACxDC,OAAOP,OAAOQ,IAAI,CAACJ,MAAM;YACzBK,WAAO1B,uMAAAA,EACLS,WAAWkB,MAAM,CAACC,MAAM,CAACX,OAAOQ,IAAI,CAACJ,MAAM,KAAK,IAAI,aAAa,SAAS,EAC1Eb,IAAIqB,IAAI;QAEZ;QAEA,OAAOC,SAASC,IAAI,CAClB;YACE,GAAGd,MAAM;YACTK;QACF,GACA;YACEJ;YACAjB,QAAQC,sMAAAA,CAAW8B,EAAE;QACvB;IAEJ;IAEAf,OAAOG,MAAM,GAAGH,OAAOG,MAAM,CAACa,GAAG,CAAC,CAACC,QACjCA,MAAMC,QAAQ,GACVD,QACA;YACE,GAAGA,KAAK;YACRZ,SAAS;QACX;IAGN,MAAMc,QAAQnB,OAAOQ,IAAI,CAACJ,MAAM,GAAGJ,OAAOG,MAAM,CAACC,MAAM;IAEvD,MAAMC,UAAUd,IAAIe,CAAC,CAAC,6BAA6B;QACjDC,OAAOP,OAAOG,MAAM,CAACC,MAAM;QAC3BK,WAAO1B,uMAAAA,EAAeS,WAAWkB,MAAM,CAACC,MAAM,CAACQ,UAAU,IAAI,aAAa,SAAS,EAAE5B,IAAIqB,IAAI;QAC7FO;IACF;IAEA,OAAON,SAASC,IAAI,CAClB;QACE,GAAGd,MAAM;QACTK;IACF,GACA;QACEJ;QACAjB,QAAQC,sMAAAA,CAAWmC,WAAW;IAChC;AAEJ,EAAC"}},
    {"offset": {"line": 5097, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/deleteByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { deleteByIDOperation } from '../operations/deleteByID.js'\n\nexport const deleteByIDHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const { depth, overrideLock, populate, select, trash } = parseParams(req.query)\n\n  const doc = await deleteByIDOperation({\n    id,\n    collection,\n    depth,\n    overrideLock: overrideLock ?? false,\n    populate,\n    req,\n    select,\n    trash,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (!doc) {\n    return Response.json(\n      {\n        message: req.t('general:notFound'),\n      },\n      {\n        headers,\n        status: httpStatus.NOT_FOUND,\n      },\n    )\n  }\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('general:deletedSuccessfully'),\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","deleteByIDOperation","deleteByIDHandler","req","id","collection","depth","overrideLock","populate","select","trash","query","doc","headers","Headers","Response","json","message","t","NOT_FOUND","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,mBAAmB,QAAQ,8BAA6B;;;;;;AAE1D,MAAMC,oBAAoC,OAAOC;IACtD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGP,gMAAAA,EAA2BK;IAEtD,MAAM,EAAEG,KAAK,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,EAAE,OAAGV,qLAAAA,EAAYG,IAAIQ,KAAK;IAE9E,MAAMC,MAAM,UAAMX,mMAAAA,EAAoB;QACpCG;QACAC;QACAC;QACAC,cAAcA,gBAAgB;QAC9BC;QACAL;QACAM;QACAC;IACF;IAEA,MAAMG,cAAUd,oLAAAA,EAAgB;QAC9Bc,SAAS,IAAIC;QACbX;IACF;IAEA,IAAI,CAACS,KAAK;QACR,OAAOG,SAASC,IAAI,CAClB;YACEC,SAASd,IAAIe,CAAC,CAAC;QACjB,GACA;YACEL;YACAjB,QAAQC,sMAAAA,CAAWsB,SAAS;QAC9B;IAEJ;IAEA,OAAOJ,SAASC,IAAI,CAClB;QACEJ;QACAK,SAASd,IAAIe,CAAC,CAAC;IACjB,GACA;QACEL;QACAjB,QAAQC,sMAAAA,CAAWuB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 5149, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/operations/docAccess.ts"],"sourcesContent":["import type { SanitizedCollectionPermission } from '../../auth/index.js'\nimport type { AllOperations, JsonObject, PayloadRequest } from '../../types/index.js'\nimport type { Collection } from '../config/types.js'\n\nimport { getEntityPermissions } from '../../utilities/getEntityPermissions/getEntityPermissions.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { sanitizePermissions } from '../../utilities/sanitizePermissions.js'\n\nconst allOperations: AllOperations[] = ['create', 'read', 'update', 'delete']\n\ntype Arguments = {\n  collection: Collection\n  /**\n   * If the document data is passed, it will be used to check access instead of fetching the document from the database.\n   */\n  data?: JsonObject\n  /**\n   * When called for creating a new document, id is not provided.\n   */\n  id?: number | string\n  req: PayloadRequest\n}\n\nexport async function docAccessOperation(args: Arguments): Promise<SanitizedCollectionPermission> {\n  const {\n    id,\n    collection: { config },\n    data,\n    req,\n  } = args\n\n  const collectionOperations = [...allOperations]\n\n  if (\n    config.auth &&\n    typeof config.auth.maxLoginAttempts !== 'undefined' &&\n    config.auth.maxLoginAttempts !== 0\n  ) {\n    collectionOperations.push('unlock')\n  }\n\n  if (config.versions) {\n    collectionOperations.push('readVersions')\n  }\n\n  try {\n    const result = await getEntityPermissions({\n      id: id!,\n      blockReferencesPermissions: {},\n      data,\n      entity: config,\n      entityType: 'collection',\n      fetchData: id ? true : (false as true),\n      operations: collectionOperations,\n      req,\n    })\n\n    const sanitizedPermissions = sanitizePermissions({\n      collections: {\n        [config.slug]: result,\n      },\n    })\n\n    const collectionPermissions = sanitizedPermissions?.collections?.[config.slug]\n    return collectionPermissions ?? { fields: {} }\n  } catch (e: unknown) {\n    await killTransaction(req)\n    throw e\n  }\n}\n"],"names":["getEntityPermissions","killTransaction","sanitizePermissions","allOperations","docAccessOperation","args","id","collection","config","data","req","collectionOperations","auth","maxLoginAttempts","push","versions","result","blockReferencesPermissions","entity","entityType","fetchData","operations","sanitizedPermissions","collections","slug","collectionPermissions","fields","e"],"mappings":";;;;AAIA,SAASA,oBAAoB,QAAQ,+DAA8D;AACnG,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,mBAAmB,QAAQ,yCAAwC;;;;AAE5E,MAAMC,gBAAiC;IAAC;IAAU;IAAQ;IAAU;CAAS;AAetE,eAAeC,mBAAmBC,IAAe;IACtD,MAAM,EACJC,EAAE,EACFC,YAAY,EAAEC,MAAM,EAAE,EACtBC,IAAI,EACJC,GAAG,EACJ,GAAGL;IAEJ,MAAMM,uBAAuB;WAAIR;KAAc;IAE/C,IACEK,OAAOI,IAAI,IACX,OAAOJ,OAAOI,IAAI,CAACC,gBAAgB,KAAK,eACxCL,OAAOI,IAAI,CAACC,gBAAgB,KAAK,GACjC;QACAF,qBAAqBG,IAAI,CAAC;IAC5B;IAEA,IAAIN,OAAOO,QAAQ,EAAE;QACnBJ,qBAAqBG,IAAI,CAAC;IAC5B;IAEA,IAAI;QACF,MAAME,SAAS,UAAMhB,sNAAAA,EAAqB;YACxCM,IAAIA;YACJW,4BAA4B,CAAC;YAC7BR;YACAS,QAAQV;YACRW,YAAY;YACZC,WAAWd,KAAK,OAAQ;YACxBe,YAAYV;YACZD;QACF;QAEA,MAAMY,2BAAuBpB,4LAAAA,EAAoB;YAC/CqB,aAAa;gBACX,CAACf,OAAOgB,IAAI,CAAC,EAAER;YACjB;QACF;QAEA,MAAMS,wBAAwBH,sBAAsBC,aAAa,CAACf,OAAOgB,IAAI,CAAC;QAC9E,OAAOC,yBAAyB;YAAEC,QAAQ,CAAC;QAAE;IAC/C,EAAE,OAAOC,GAAY;QACnB,UAAM1B,oLAAAA,EAAgBS;QACtB,MAAMiB;IACR;AACF"}},
    {"offset": {"line": 5205, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/docAccess.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { docAccessOperation } from '../operations/docAccess.js'\n\nexport const docAccessHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req, { optionalID: true })\n\n  const result = await docAccessOperation({\n    id,\n    collection,\n    data: req.data,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","docAccessOperation","docAccessHandler","req","id","collection","optionalID","result","data","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,kBAAkB,QAAQ,6BAA4B;;;;;AAExD,MAAMC,mBAAmC,OAAOC;IACrD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGN,gMAAAA,EAA2BI,KAAK;QAAEG,YAAY;IAAK;IAE9E,MAAMC,SAAS,UAAMN,iMAAAA,EAAmB;QACtCG;QACAC;QACAG,MAAML,IAAIK,IAAI;QACdL;IACF;IAEA,OAAOM,SAASC,IAAI,CAACH,QAAQ;QAC3BI,aAASX,oLAAAA,EAAgB;YACvBW,SAAS,IAAIC;YACbT;QACF;QACAN,QAAQC,sMAAAA,CAAWe,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 5240, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/duplicate.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { duplicateOperation } from '../operations/duplicate.js'\n\nexport const duplicateHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const { depth, draft, populate, select, selectedLocales } = parseParams(req.query)\n\n  const doc = await duplicateOperation({\n    id,\n    collection,\n    data: req.data,\n    depth,\n    draft,\n    populate,\n    req,\n    select,\n    selectedLocales,\n  })\n\n  const message = req.t('general:successfullyDuplicated', {\n    label: getTranslation(collection.config.labels.singular, req.i18n),\n  })\n\n  return Response.json(\n    {\n      doc,\n      message,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["getTranslation","status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","duplicateOperation","duplicateHandler","req","id","collection","depth","draft","populate","select","selectedLocales","query","doc","data","message","t","label","config","labels","singular","i18n","Response","json","headers","Headers","OK"],"mappings":";;;;AAAA,SAASA,cAAc,QAAQ,2BAA0B;;AACzD,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,kBAAkB,QAAQ,6BAA4B;;;;;;;AAExD,MAAMC,mBAAmC,OAAOC;IACrD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGP,gMAAAA,EAA2BK;IAEtD,MAAM,EAAEG,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,eAAe,EAAE,OAAGV,qLAAAA,EAAYG,IAAIQ,KAAK;IAEjF,MAAMC,MAAM,UAAMX,iMAAAA,EAAmB;QACnCG;QACAC;QACAQ,MAAMV,IAAIU,IAAI;QACdP;QACAC;QACAC;QACAL;QACAM;QACAC;IACF;IAEA,MAAMI,UAAUX,IAAIY,CAAC,CAAC,kCAAkC;QACtDC,WAAOrB,uMAAAA,EAAeU,WAAWY,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAEhB,IAAIiB,IAAI;IACnE;IAEA,OAAOC,SAASC,IAAI,CAClB;QACEV;QACAE;IACF,GACA;QACES,aAASxB,oLAAAA,EAAgB;YACvBwB,SAAS,IAAIC;YACbrB;QACF;QACAP,QAAQC,sMAAAA,CAAW4B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 5289, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/find.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { findOperation } from '../operations/find.js'\n\nexport const findHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { depth, draft, joins, limit, page, pagination, populate, select, sort, trash, where } =\n    parseParams(req.query)\n\n  const result = await findOperation({\n    collection,\n    depth,\n    draft,\n    joins,\n    limit,\n    page,\n    pagination,\n    populate,\n    req,\n    select,\n    sort,\n    trash,\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","parseParams","findOperation","findHandler","req","collection","depth","draft","joins","limit","page","pagination","populate","select","sort","trash","where","query","result","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,aAAa,QAAQ,wBAAuB;;;;;;AAE9C,MAAMC,cAA8B,OAAOC;IAChD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IAExC,MAAM,EAAEE,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE,OAC1Ff,qLAAAA,EAAYG,IAAIa,KAAK;IAEvB,MAAMC,SAAS,UAAMhB,uLAAAA,EAAc;QACjCG;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAR;QACAS;QACAC;QACAC;QACAC;IACF;IAEA,OAAOG,SAASC,IAAI,CAACF,QAAQ;QAC3BG,aAASrB,oLAAAA,EAAgB;YACvBqB,SAAS,IAAIC;YACblB;QACF;QACAP,QAAQC,sMAAAA,CAAWyB,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 5334, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/findByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { findByIDOperation } from '../operations/findByID.js'\n\nexport const findByIDHandler: PayloadHandler = async (req) => {\n  const { data: dataArg } = req\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const { data, depth, draft, flattenLocales, joins, populate, select, trash } = parseParams({\n    ...req.query,\n    ...dataArg,\n  })\n\n  const result = await findByIDOperation({\n    id,\n    collection,\n    data,\n    depth,\n    draft,\n    flattenLocales,\n    joins,\n    populate,\n    req,\n    select,\n    trash,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","findByIDOperation","findByIDHandler","req","data","dataArg","id","collection","depth","draft","flattenLocales","joins","populate","select","trash","query","result","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,iBAAiB,QAAQ,4BAA2B;;;;;;AAEtD,MAAMC,kBAAkC,OAAOC;IACpD,MAAM,EAAEC,MAAMC,OAAO,EAAE,GAAGF;IAC1B,MAAM,EAAEG,EAAE,EAAEC,UAAU,EAAE,OAAGT,gMAAAA,EAA2BK;IAEtD,MAAM,EAAEC,IAAI,EAAEI,KAAK,EAAEC,KAAK,EAAEC,cAAc,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,EAAE,OAAGd,qLAAAA,EAAY;QACzF,GAAGG,IAAIY,KAAK;QACZ,GAAGV,OAAO;IACZ;IAEA,MAAMW,SAAS,UAAMf,+LAAAA,EAAkB;QACrCK;QACAC;QACAH;QACAI;QACAC;QACAC;QACAC;QACAC;QACAT;QACAU;QACAC;IACF;IAEA,OAAOG,SAASC,IAAI,CAACF,QAAQ;QAC3BG,aAASpB,oLAAAA,EAAgB;YACvBoB,SAAS,IAAIC;YACbjB;QACF;QACAP,QAAQC,sMAAAA,CAAWwB,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 5381, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/findVersionByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { findVersionByIDOperation } from '../operations/findVersionByID.js'\n\nexport const findVersionByIDHandler: PayloadHandler = async (req) => {\n  const { depth, populate, select, trash } = parseParams(req.query)\n\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const result = await findVersionByIDOperation({\n    id,\n    collection,\n    depth,\n    populate,\n    req,\n    select,\n    trash,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","findVersionByIDOperation","findVersionByIDHandler","req","depth","populate","select","trash","query","id","collection","result","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,wBAAwB,QAAQ,mCAAkC;;;;;;AAEpE,MAAMC,yBAAyC,OAAOC;IAC3D,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,EAAE,OAAGP,qLAAAA,EAAYG,IAAIK,KAAK;IAEhE,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGZ,gMAAAA,EAA2BK;IAEtD,MAAMQ,SAAS,UAAMV,6MAAAA,EAAyB;QAC5CQ;QACAC;QACAN;QACAC;QACAF;QACAG;QACAC;IACF;IAEA,OAAOK,SAASC,IAAI,CAACF,QAAQ;QAC3BG,aAASf,oLAAAA,EAAgB;YACvBe,SAAS,IAAIC;YACbZ;QACF;QACAP,QAAQC,sMAAAA,CAAWmB,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 5420, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/findVersions.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { findVersionsOperation } from '../operations/findVersions.js'\n\nexport const findVersionsHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { depth, limit, page, pagination, populate, select, sort, trash, where } = parseParams(\n    req.query,\n  )\n\n  const result = await findVersionsOperation({\n    collection,\n    depth,\n    limit,\n    page,\n    pagination,\n    populate,\n    req,\n    select,\n    sort,\n    trash,\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollection","headersWithCors","parseParams","findVersionsOperation","findVersionsHandler","req","collection","depth","limit","page","pagination","populate","select","sort","trash","where","query","result","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,qBAAqB,QAAQ,gCAA+B;;;;;;AAE9D,MAAMC,sBAAsC,OAAOC;IACxD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IAExC,MAAM,EAAEE,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE,OAAGb,qLAAAA,EAC/EG,IAAIW,KAAK;IAGX,MAAMC,SAAS,UAAMd,uMAAAA,EAAsB;QACzCG;QACAC;QACAC;QACAC;QACAC;QACAC;QACAN;QACAO;QACAC;QACAC;QACAC;IACF;IAEA,OAAOG,SAASC,IAAI,CAACF,QAAQ;QAC3BG,aAASnB,oLAAAA,EAAgB;YACvBmB,SAAS,IAAIC;YACbhB;QACF;QACAP,QAAQC,sMAAAA,CAAWuB,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 5463, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/restoreVersion.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { restoreVersionOperation } from '../operations/restoreVersion.js'\n\nexport const restoreVersionHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const { depth, draft, populate } = parseParams(req.query)\n\n  const result = await restoreVersionOperation({\n    id,\n    collection,\n    depth,\n    draft,\n    populate,\n    req,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message: req.t('version:restoredSuccessfully'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","restoreVersionOperation","restoreVersionHandler","req","id","collection","depth","draft","populate","query","result","Response","json","message","t","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,uBAAuB,QAAQ,kCAAiC;;;;;;AAElE,MAAMC,wBAAwC,OAAOC;IAC1D,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGP,gMAAAA,EAA2BK;IAEtD,MAAM,EAAEG,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAE,OAAGR,qLAAAA,EAAYG,IAAIM,KAAK;IAExD,MAAMC,SAAS,UAAMT,2MAAAA,EAAwB;QAC3CG;QACAC;QACAC;QACAC;QACAC;QACAL;IACF;IAEA,OAAOQ,SAASC,IAAI,CAClB;QACE,GAAGF,MAAM;QACTG,SAASV,IAAIW,CAAC,CAAC;IACjB,GACA;QACEC,aAAShB,oLAAAA,EAAgB;YACvBgB,SAAS,IAAIC;YACbb;QACF;QACAP,QAAQC,sMAAAA,CAAWoB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 5504, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/update.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { updateOperation } from '../operations/update.js'\n\nexport const updateHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const {\n    depth,\n    draft,\n    limit,\n    overrideLock,\n    populate,\n    publishAllLocales,\n    select,\n    sort,\n    trash,\n    unpublishAllLocales,\n    where,\n  } = parseParams(req.query)\n\n  const result = await updateOperation({\n    collection,\n    data: req.data!,\n    depth,\n    draft,\n    limit,\n    overrideLock: overrideLock ?? false,\n    populate,\n    publishAllLocales,\n    req,\n    select,\n    sort,\n    trash,\n    unpublishAllLocales,\n    where: where!,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (result.errors.length === 0) {\n    const message = req.t('general:updatedCountSuccessfully', {\n      count: result.docs.length,\n      label: getTranslation(\n        collection.config.labels[result.docs.length === 1 ? 'singular' : 'plural'],\n        req.i18n,\n      ),\n    })\n\n    return Response.json(\n      {\n        ...result,\n        message,\n      },\n      {\n        headers,\n        status: httpStatus.OK,\n      },\n    )\n  }\n\n  result.errors = result.errors.map((error) =>\n    error.isPublic\n      ? error\n      : {\n          ...error,\n          message: 'Something went wrong.',\n        },\n  )\n\n  const total = result.docs.length + result.errors.length\n  const message = req.t('error:unableToUpdateCount', {\n    count: result.errors.length,\n    label: getTranslation(collection.config.labels[total === 1 ? 'singular' : 'plural'], req.i18n),\n    total,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message,\n    },\n    {\n      headers,\n      status: httpStatus.BAD_REQUEST,\n    },\n  )\n}\n"],"names":["getTranslation","status","httpStatus","getRequestCollection","headersWithCors","parseParams","updateOperation","updateHandler","req","collection","depth","draft","limit","overrideLock","populate","publishAllLocales","select","sort","trash","unpublishAllLocales","where","query","result","data","headers","Headers","errors","length","message","t","count","docs","label","config","labels","i18n","Response","json","OK","map","error","isPublic","total","BAD_REQUEST"],"mappings":";;;;AAAA,SAASA,cAAc,QAAQ,2BAA0B;;AACzD,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,eAAe,QAAQ,0BAAyB;;;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,iBAAaN,0LAAAA,EAAqBK;IAExC,MAAM,EACJE,KAAK,EACLC,KAAK,EACLC,KAAK,EACLC,YAAY,EACZC,QAAQ,EACRC,iBAAiB,EACjBC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,mBAAmB,EACnBC,KAAK,EACN,OAAGf,qLAAAA,EAAYG,IAAIa,KAAK;IAEzB,MAAMC,SAAS,UAAMhB,2LAAAA,EAAgB;QACnCG;QACAc,MAAMf,IAAIe,IAAI;QACdb;QACAC;QACAC;QACAC,cAAcA,gBAAgB;QAC9BC;QACAC;QACAP;QACAQ;QACAC;QACAC;QACAC;QACAC,OAAOA;IACT;IAEA,MAAMI,cAAUpB,oLAAAA,EAAgB;QAC9BoB,SAAS,IAAIC;QACbjB;IACF;IAEA,IAAIc,OAAOI,MAAM,CAACC,MAAM,KAAK,GAAG;QAC9B,MAAMC,UAAUpB,IAAIqB,CAAC,CAAC,oCAAoC;YACxDC,OAAOR,OAAOS,IAAI,CAACJ,MAAM;YACzBK,WAAOhC,uMAAAA,EACLS,WAAWwB,MAAM,CAACC,MAAM,CAACZ,OAAOS,IAAI,CAACJ,MAAM,KAAK,IAAI,aAAa,SAAS,EAC1EnB,IAAI2B,IAAI;QAEZ;QAEA,OAAOC,SAASC,IAAI,CAClB;YACE,GAAGf,MAAM;YACTM;QACF,GACA;YACEJ;YACAvB,QAAQC,sMAAAA,CAAWoC,EAAE;QACvB;IAEJ;IAEAhB,OAAOI,MAAM,GAAGJ,OAAOI,MAAM,CAACa,GAAG,CAAC,CAACC,QACjCA,MAAMC,QAAQ,GACVD,QACA;YACE,GAAGA,KAAK;YACRZ,SAAS;QACX;IAGN,MAAMc,QAAQpB,OAAOS,IAAI,CAACJ,MAAM,GAAGL,OAAOI,MAAM,CAACC,MAAM;IACvD,MAAMC,UAAUpB,IAAIqB,CAAC,CAAC,6BAA6B;QACjDC,OAAOR,OAAOI,MAAM,CAACC,MAAM;QAC3BK,WAAOhC,uMAAAA,EAAeS,WAAWwB,MAAM,CAACC,MAAM,CAACQ,UAAU,IAAI,aAAa,SAAS,EAAElC,IAAI2B,IAAI;QAC7FO;IACF;IAEA,OAAON,SAASC,IAAI,CAClB;QACE,GAAGf,MAAM;QACTM;IACF,GACA;QACEJ;QACAvB,QAAQC,sMAAAA,CAAWyC,WAAW;IAChC;AAEJ,EAAC"}},
    {"offset": {"line": 5579, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/updateByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { updateByIDOperation } from '../operations/updateByID.js'\n\nexport const updateByIDHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const {\n    autosave,\n    depth,\n    draft,\n    overrideLock,\n    populate,\n    publishAllLocales,\n    publishSpecificLocale,\n    select,\n    trash,\n    unpublishAllLocales,\n  } = parseParams(req.query)\n\n  const doc = await updateByIDOperation({\n    id,\n    autosave,\n    collection,\n    data: req.data!,\n    depth,\n    draft,\n    overrideLock: overrideLock ?? false,\n    populate,\n    publishAllLocales,\n    publishSpecificLocale,\n    req,\n    select,\n    trash,\n    unpublishAllLocales,\n  })\n\n  let message = req.t('general:updatedSuccessfully')\n\n  if (draft) {\n    message = req.t('version:draftSavedSuccessfully')\n  }\n  if (autosave) {\n    message = req.t('version:autosavedSuccessfully')\n  }\n\n  return Response.json(\n    {\n      doc,\n      message,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","updateByIDOperation","updateByIDHandler","req","id","collection","autosave","depth","draft","overrideLock","populate","publishAllLocales","publishSpecificLocale","select","trash","unpublishAllLocales","query","doc","data","message","t","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,mBAAmB,QAAQ,8BAA6B;;;;;;AAE1D,MAAMC,oBAAoC,OAAOC;IACtD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,OAAGP,gMAAAA,EAA2BK;IAEtD,MAAM,EACJG,QAAQ,EACRC,KAAK,EACLC,KAAK,EACLC,YAAY,EACZC,QAAQ,EACRC,iBAAiB,EACjBC,qBAAqB,EACrBC,MAAM,EACNC,KAAK,EACLC,mBAAmB,EACpB,OAAGf,qLAAAA,EAAYG,IAAIa,KAAK;IAEzB,MAAMC,MAAM,UAAMhB,mMAAAA,EAAoB;QACpCG;QACAE;QACAD;QACAa,MAAMf,IAAIe,IAAI;QACdX;QACAC;QACAC,cAAcA,gBAAgB;QAC9BC;QACAC;QACAC;QACAT;QACAU;QACAC;QACAC;IACF;IAEA,IAAII,UAAUhB,IAAIiB,CAAC,CAAC;IAEpB,IAAIZ,OAAO;QACTW,UAAUhB,IAAIiB,CAAC,CAAC;IAClB;IACA,IAAId,UAAU;QACZa,UAAUhB,IAAIiB,CAAC,CAAC;IAClB;IAEA,OAAOC,SAASC,IAAI,CAClB;QACEL;QACAE;IACF,GACA;QACEI,aAASxB,oLAAAA,EAAgB;YACvBwB,SAAS,IAAIC;YACbrB;QACF;QACAP,QAAQC,sMAAAA,CAAW4B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 5635, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/endpoints/index.ts"],"sourcesContent":["import type { Endpoint } from '../../config/types.js'\n\nimport { wrapInternalEndpoints } from '../../utilities/wrapInternalEndpoints.js'\nimport { countHandler } from './count.js'\nimport { createHandler } from './create.js'\nimport { deleteHandler } from './delete.js'\nimport { deleteByIDHandler } from './deleteByID.js'\nimport { docAccessHandler } from './docAccess.js'\nimport { duplicateHandler } from './duplicate.js'\nimport { findHandler } from './find.js'\nimport { findByIDHandler } from './findByID.js'\n// import { findDistinctHandler } from './findDistinct.js'\nimport { findVersionByIDHandler } from './findVersionByID.js'\nimport { findVersionsHandler } from './findVersions.js'\nimport { restoreVersionHandler } from './restoreVersion.js'\nimport { updateHandler } from './update.js'\nimport { updateByIDHandler } from './updateByID.js'\n\nexport const defaultCollectionEndpoints: Endpoint[] = [\n  ...wrapInternalEndpoints([\n    {\n      handler: countHandler,\n      method: 'get',\n      path: '/count',\n    },\n    {\n      handler: createHandler,\n      method: 'post',\n      path: '/',\n    },\n    {\n      handler: deleteHandler,\n      method: 'delete',\n      path: '/',\n    },\n    {\n      handler: deleteByIDHandler,\n      method: 'delete',\n      path: '/:id',\n    },\n    {\n      handler: docAccessHandler,\n      method: 'post',\n      path: '/access/:id?',\n    },\n    {\n      handler: findVersionsHandler,\n      method: 'get',\n      path: '/versions',\n    },\n    // Might be uncommented in the future\n    // {\n    //   handler: findDistinctHandler,\n    //   method: 'get',\n    //   path: '/distinct',\n    // },\n    {\n      handler: duplicateHandler,\n      method: 'post',\n      path: '/:id/duplicate',\n    },\n    {\n      handler: findHandler,\n      method: 'get',\n      path: '/',\n    },\n    {\n      handler: findByIDHandler,\n      method: 'get',\n      path: '/:id',\n    },\n    {\n      handler: findVersionByIDHandler,\n      method: 'get',\n      path: '/versions/:id',\n    },\n    {\n      handler: restoreVersionHandler,\n      method: 'post',\n      path: '/versions/:id',\n    },\n    {\n      handler: updateHandler,\n      method: 'patch',\n      path: '/',\n    },\n    {\n      handler: updateByIDHandler,\n      method: 'patch',\n      path: '/:id',\n    },\n  ]),\n]\n"],"names":["wrapInternalEndpoints","countHandler","createHandler","deleteHandler","deleteByIDHandler","docAccessHandler","duplicateHandler","findHandler","findByIDHandler","findVersionByIDHandler","findVersionsHandler","restoreVersionHandler","updateHandler","updateByIDHandler","defaultCollectionEndpoints","handler","method","path"],"mappings":";;;;AAEA,SAASA,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,YAAY,QAAQ,aAAY;AACzC,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,iBAAiB,QAAQ,kBAAiB;AACnD,SAASC,gBAAgB,QAAQ,iBAAgB;AACjD,SAASC,gBAAgB,QAAQ,iBAAgB;AACjD,SAASC,WAAW,QAAQ,YAAW;AACvC,SAASC,eAAe,QAAQ,gBAAe;AAC/C,0DAA0D;AAC1D,SAASC,sBAAsB,QAAQ,uBAAsB;AAC7D,SAASC,mBAAmB,QAAQ,oBAAmB;AACvD,SAASC,qBAAqB,QAAQ,sBAAqB;AAC3D,SAASC,aAAa,QAAQ,cAAa;AAC3C,SAASC,iBAAiB,QAAQ,kBAAiB;;;;;;;;;;;;;;;AAE5C,MAAMC,6BAAyC;WACjDd,gMAAAA,EAAsB;QACvB;YACEe,SAASd,sLAAAA;YACTe,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASb,wLAAAA;YACTc,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASZ,wLAAAA;YACTa,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASX,gMAAAA;YACTY,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASV,8LAAAA;YACTW,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASL,oMAAAA;YACTM,QAAQ;YACRC,MAAM;QACR;QACA,qCAAqC;QACrC,IAAI;QACJ,kCAAkC;QAClC,mBAAmB;QACnB,uBAAuB;QACvB,KAAK;QACL;YACEF,SAAST,8LAAAA;YACTU,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASR,oLAAAA;YACTS,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASP,4LAAAA;YACTQ,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASN,0MAAAA;YACTO,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASJ,wMAAAA;YACTK,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASH,wLAAAA;YACTI,QAAQ;YACRC,MAAM;QACR;QACA;YACEF,SAASF,gMAAAA;YACTG,QAAQ;YACRC,MAAM;QACR;KACD;CACF,CAAA"}},
    {"offset": {"line": 5747, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/config/defaults.ts"],"sourcesContent":["import type { IncomingAuthType, LoginWithUsernameOptions } from '../../auth/types.js'\nimport type { CollectionConfig } from './types.js'\n\nimport { defaultAccess } from '../../auth/defaultAccess.js'\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const defaults: Partial<CollectionConfig> = {\n  access: {\n    create: defaultAccess,\n    delete: defaultAccess,\n    read: defaultAccess,\n    unlock: defaultAccess,\n    update: defaultAccess,\n  },\n  admin: {\n    components: {},\n    custom: {},\n    enableRichTextLink: true,\n    enableRichTextRelationship: true,\n    pagination: {\n      defaultLimit: 10,\n      limits: [5, 10, 25, 50, 100],\n    },\n    useAsTitle: 'id',\n  },\n  auth: false,\n  custom: {},\n  endpoints: [],\n  fields: [],\n  hooks: {\n    afterChange: [],\n    afterDelete: [],\n    afterForgotPassword: [],\n    afterLogin: [],\n    afterLogout: [],\n    afterMe: [],\n    afterOperation: [],\n    afterRead: [],\n    afterRefresh: [],\n    beforeChange: [],\n    beforeDelete: [],\n    beforeLogin: [],\n    beforeOperation: [],\n    beforeRead: [],\n    beforeValidate: [],\n    me: [],\n    refresh: [],\n  },\n  indexes: [],\n  timestamps: true,\n  upload: false,\n  versions: false,\n}\n\nexport const addDefaultsToCollectionConfig = (collection: CollectionConfig): CollectionConfig => {\n  collection.access = {\n    create: defaultAccess,\n    delete: defaultAccess,\n    read: defaultAccess,\n    unlock: defaultAccess,\n    update: defaultAccess,\n    ...(collection.access || {}),\n  }\n\n  collection.admin = {\n    components: {},\n    custom: {},\n    enableRichTextLink: true,\n    enableRichTextRelationship: true,\n    useAsTitle: 'id',\n    ...(collection.admin || {}),\n    pagination: {\n      defaultLimit: 10,\n      limits: [5, 10, 25, 50, 100],\n      ...(collection.admin?.pagination || {}),\n    },\n  }\n\n  collection.auth = collection.auth ?? false\n  collection.custom = collection.custom ?? {}\n  collection.endpoints = collection.endpoints ?? []\n  collection.fields = collection.fields ?? []\n  collection.folders = collection.folders ?? false\n\n  collection.hooks = {\n    afterChange: [],\n    afterDelete: [],\n    afterForgotPassword: [],\n    afterLogin: [],\n    afterLogout: [],\n    afterMe: [],\n    afterOperation: [],\n    afterRead: [],\n    afterRefresh: [],\n    beforeChange: [],\n    beforeDelete: [],\n    beforeLogin: [],\n    beforeOperation: [],\n    beforeRead: [],\n    beforeValidate: [],\n    me: [],\n    refresh: [],\n    ...(collection.hooks || {}),\n  }\n\n  collection.timestamps = collection.timestamps ?? true\n  collection.upload = collection.upload ?? false\n  collection.versions = collection.versions ?? false\n\n  collection.indexes = collection.indexes ?? []\n\n  return collection\n}\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const authDefaults: IncomingAuthType = {\n  cookies: {\n    sameSite: 'Lax',\n    secure: false,\n  },\n  forgotPassword: {},\n  lockTime: 600000, // 10 minutes\n  loginWithUsername: false,\n  maxLoginAttempts: 5,\n  tokenExpiration: 7200,\n  useSessions: true,\n  verify: false,\n}\n\nexport const addDefaultsToAuthConfig = (auth: IncomingAuthType): IncomingAuthType => {\n  auth.cookies = {\n    sameSite: 'Lax',\n    secure: false,\n    ...(auth.cookies || {}),\n  }\n\n  auth.forgotPassword = auth.forgotPassword ?? {}\n  auth.lockTime = auth.lockTime ?? 600000 // 10 minutes\n  auth.loginWithUsername = auth.loginWithUsername ?? false\n  auth.maxLoginAttempts = auth.maxLoginAttempts ?? 5\n  auth.tokenExpiration = auth.tokenExpiration ?? 7200\n  auth.useSessions = auth.useSessions ?? true\n  auth.verify = auth.verify ?? false\n  auth.strategies = auth.strategies ?? []\n\n  if (!auth.disableLocalStrategy && auth.verify === true) {\n    auth.verify = {}\n  }\n\n  return auth\n}\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const loginWithUsernameDefaults: LoginWithUsernameOptions = {\n  allowEmailLogin: false,\n  requireEmail: false,\n  requireUsername: true,\n}\n\nexport const addDefaultsToLoginWithUsernameConfig = (\n  loginWithUsername: LoginWithUsernameOptions,\n): LoginWithUsernameOptions =>\n  ({\n    allowEmailLogin: false,\n    requireEmail: false,\n    requireUsername: true,\n    ...(loginWithUsername || {}),\n  }) as LoginWithUsernameOptions\n"],"names":["defaultAccess","defaults","access","create","delete","read","unlock","update","admin","components","custom","enableRichTextLink","enableRichTextRelationship","pagination","defaultLimit","limits","useAsTitle","auth","endpoints","fields","hooks","afterChange","afterDelete","afterForgotPassword","afterLogin","afterLogout","afterMe","afterOperation","afterRead","afterRefresh","beforeChange","beforeDelete","beforeLogin","beforeOperation","beforeRead","beforeValidate","me","refresh","indexes","timestamps","upload","versions","addDefaultsToCollectionConfig","collection","folders","authDefaults","cookies","sameSite","secure","forgotPassword","lockTime","loginWithUsername","maxLoginAttempts","tokenExpiration","useSessions","verify","addDefaultsToAuthConfig","strategies","disableLocalStrategy","loginWithUsernameDefaults","allowEmailLogin","requireEmail","requireUsername","addDefaultsToLoginWithUsernameConfig"],"mappings":"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"}},
    {"offset": {"line": 5922, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/config/sanitizeCompoundIndexes.ts"],"sourcesContent":["import type { FlattenedField } from '../../fields/config/types.js'\nimport type { CompoundIndex, SanitizedCompoundIndex } from './types.js'\n\nimport { InvalidConfiguration } from '../../errors/InvalidConfiguration.js'\nimport { getFieldByPath } from '../../utilities/getFieldByPath.js'\n\nexport const sanitizeCompoundIndexes = ({\n  fields,\n  indexes,\n}: {\n  fields: FlattenedField[]\n  indexes: CompoundIndex[]\n}): SanitizedCompoundIndex[] => {\n  const sanitizedCompoundIndexes: SanitizedCompoundIndex[] = []\n\n  for (const index of indexes) {\n    const sanitized: SanitizedCompoundIndex = { fields: [], unique: index.unique ?? false }\n    for (const path of index.fields) {\n      const result = getFieldByPath({ fields, path })\n\n      if (!result) {\n        throw new InvalidConfiguration(`Field ${path} was not found`)\n      }\n\n      const { field, localizedPath, pathHasLocalized } = result\n\n      if (['array', 'blocks', 'group', 'tab'].includes(field.type)) {\n        throw new InvalidConfiguration(\n          `Compound index on ${field.type} cannot be set. Path: ${localizedPath}`,\n        )\n      }\n\n      sanitized.fields.push({ field, localizedPath, path, pathHasLocalized })\n    }\n\n    sanitizedCompoundIndexes.push(sanitized)\n  }\n\n  return sanitizedCompoundIndexes\n}\n"],"names":["InvalidConfiguration","getFieldByPath","sanitizeCompoundIndexes","fields","indexes","sanitizedCompoundIndexes","index","sanitized","unique","path","result","field","localizedPath","pathHasLocalized","includes","type","push"],"mappings":";;;;AAGA,SAASA,oBAAoB,QAAQ,uCAAsC;AAC3E,SAASC,cAAc,QAAQ,oCAAmC;;;AAE3D,MAAMC,0BAA0B,CAAC,EACtCC,MAAM,EACNC,OAAO,EAIR;IACC,MAAMC,2BAAqD,EAAE;IAE7D,KAAK,MAAMC,SAASF,QAAS;QAC3B,MAAMG,YAAoC;YAAEJ,QAAQ,EAAE;YAAEK,QAAQF,MAAME,MAAM,IAAI;QAAM;QACtF,KAAK,MAAMC,QAAQH,MAAMH,MAAM,CAAE;YAC/B,MAAMO,aAAST,kLAAAA,EAAe;gBAAEE;gBAAQM;YAAK;YAE7C,IAAI,CAACC,QAAQ;gBACX,MAAM,IAAIV,2LAAAA,CAAqB,CAAC,MAAM,EAAES,KAAK,cAAc,CAAC;YAC9D;YAEA,MAAM,EAAEE,KAAK,EAAEC,aAAa,EAAEC,gBAAgB,EAAE,GAAGH;YAEnD,IAAI;gBAAC;gBAAS;gBAAU;gBAAS;aAAM,CAACI,QAAQ,CAACH,MAAMI,IAAI,GAAG;gBAC5D,MAAM,IAAIf,2LAAAA,CACR,CAAC,kBAAkB,EAAEW,MAAMI,IAAI,CAAC,sBAAsB,EAAEH,eAAe;YAE3E;YAEAL,UAAUJ,MAAM,CAACa,IAAI,CAAC;gBAAEL;gBAAOC;gBAAeH;gBAAMI;YAAiB;QACvE;QAEAR,yBAAyBW,IAAI,CAACT;IAChC;IAEA,OAAOF;AACT,EAAC"}},
    {"offset": {"line": 5969, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/flattenTopLevelFields.ts"],"sourcesContent":["import type { I18nClient } from '@payloadcms/translations'\n\nimport { getTranslation } from '@payloadcms/translations'\n\nimport type { ClientTab } from '../admin/fields/Tabs.js'\nimport type { ClientField } from '../fields/config/client.js'\nimport type {\n  Field,\n  FieldAffectingData,\n  FieldAffectingDataClient,\n  FieldPresentationalOnly,\n  FieldPresentationalOnlyClient,\n  Tab,\n} from '../fields/config/types.js'\n\nimport {\n  fieldAffectsData,\n  fieldHasSubFields,\n  fieldIsPresentationalOnly,\n  tabHasName,\n} from '../fields/config/types.js'\n\ntype FlattenedField<TField> = TField extends ClientField\n  ? { accessor?: string; labelWithPrefix?: string } & (\n      | FieldAffectingDataClient\n      | FieldPresentationalOnlyClient\n    )\n  : { accessor?: string; labelWithPrefix?: string } & (FieldAffectingData | FieldPresentationalOnly)\n\ntype TabType<TField> = TField extends ClientField ? ClientTab : Tab\n\n/**\n * Options to control how fields are flattened.\n */\ntype FlattenFieldsOptions = {\n  /**\n   * i18n context used for translating `label` values via `getTranslation`.\n   */\n  i18n?: I18nClient\n  /**\n   * If true, presentational-only fields (like UI fields) will be included\n   * in the output. Otherwise, they will be skipped.\n   * Default: false.\n   */\n  keepPresentationalFields?: boolean\n  /**\n   * A label prefix to prepend to translated labels when building `labelWithPrefix`.\n   * Used recursively when flattening nested fields.\n   */\n  labelPrefix?: string\n  /**\n   * If true, nested fields inside `group` & `tabs` fields will be lifted to the top level\n   * and given contextual `accessor` and `labelWithPrefix` values.\n   * Default: false.\n   */\n  moveSubFieldsToTop?: boolean\n  /**\n   * A path prefix to prepend to field names when building the `accessor`.\n   * Used recursively when flattening nested fields.\n   */\n  pathPrefix?: string\n}\n\n/**\n * Flattens a collection's fields into a single array of fields, optionally\n * extracting nested fields in group fields.\n *\n * @param fields - Array of fields to flatten\n * @param options - Options to control the flattening behavior\n */\nexport function flattenTopLevelFields<TField extends ClientField | Field>(\n  fields: TField[] = [],\n  options?: boolean | FlattenFieldsOptions,\n): FlattenedField<TField>[] {\n  const normalizedOptions: FlattenFieldsOptions =\n    typeof options === 'boolean' ? { keepPresentationalFields: options } : (options ?? {})\n\n  const {\n    i18n,\n    keepPresentationalFields,\n    labelPrefix,\n    moveSubFieldsToTop = false,\n    pathPrefix,\n  } = normalizedOptions\n\n  return fields.reduce<FlattenedField<TField>[]>((acc, field) => {\n    // If a group field has subfields and has a name, otherwise we catch it below along with collapsible and row fields\n    if (field.type === 'group' && 'fields' in field) {\n      if (moveSubFieldsToTop) {\n        const isNamedGroup = 'name' in field && typeof field.name === 'string' && !!field.name\n        const groupName = 'name' in field ? field.name : undefined\n\n        const translatedLabel =\n          'label' in field && field.label && i18n\n            ? getTranslation(field.label as string, i18n)\n            : undefined\n\n        const labelWithPrefix = labelPrefix\n          ? `${labelPrefix} > ${translatedLabel ?? groupName}`\n          : (translatedLabel ?? groupName)\n\n        const nameWithPrefix =\n          'name' in field && field.name\n            ? pathPrefix\n              ? `${pathPrefix}.${field.name}`\n              : field.name\n            : pathPrefix\n\n        acc.push(\n          // Need to include the top-level group field when hoisting its subfields,\n          // so that `buildColumnState` can detect and render a column if the group\n          // has a custom admin Cell component defined in its configuration.\n          // See: packages/ui/src/providers/TableColumns/buildColumnState/index.tsx\n          field as FlattenedField<TField>,\n          ...flattenTopLevelFields(field.fields as TField[], {\n            i18n,\n            keepPresentationalFields,\n            labelPrefix: isNamedGroup ? labelWithPrefix : labelPrefix,\n            moveSubFieldsToTop,\n            pathPrefix: isNamedGroup ? nameWithPrefix : pathPrefix,\n          }),\n        )\n      } else {\n        if (fieldAffectsData(field)) {\n          // Hoisting diabled - keep as top level field\n          acc.push(field as FlattenedField<TField>)\n        } else {\n          acc.push(...flattenTopLevelFields(field.fields as TField[], options))\n        }\n      }\n    } else if (field.type === 'tabs' && 'tabs' in field) {\n      return [\n        ...acc,\n        ...field.tabs.reduce<FlattenedField<TField>[]>((tabFields, tab) => {\n          if (tabHasName(tab)) {\n            if (moveSubFieldsToTop) {\n              const translatedLabel =\n                'label' in tab && tab.label && i18n ? getTranslation(tab.label, i18n) : undefined\n\n              const labelWithPrefixForTab = labelPrefix\n                ? `${labelPrefix} > ${translatedLabel ?? tab.name}`\n                : (translatedLabel ?? tab.name)\n\n              const pathPrefixForTab = tab.name\n                ? pathPrefix\n                  ? `${pathPrefix}.${tab.name}`\n                  : tab.name\n                : pathPrefix\n\n              return [\n                ...tabFields,\n                ...flattenTopLevelFields(tab.fields as TField[], {\n                  i18n,\n                  keepPresentationalFields,\n                  labelPrefix: labelWithPrefixForTab,\n                  moveSubFieldsToTop,\n                  pathPrefix: pathPrefixForTab,\n                }),\n              ]\n            } else {\n              // Named tab, hoisting disabled: keep as top-level field\n              return [\n                ...tabFields,\n                {\n                  ...tab,\n                  type: 'tab',\n                } as unknown as FlattenedField<TField>,\n              ]\n            }\n          } else {\n            // Unnamed tab: always hoist its fields\n            return [...tabFields, ...flattenTopLevelFields<TField>(tab.fields as TField[], options)]\n          }\n        }, []),\n      ]\n    } else if (fieldHasSubFields(field) && ['collapsible', 'row'].includes(field.type)) {\n      // Recurse into row and collapsible\n      acc.push(...flattenTopLevelFields(field.fields as TField[], options))\n    } else if (\n      fieldAffectsData(field) ||\n      (keepPresentationalFields && fieldIsPresentationalOnly(field))\n    ) {\n      // Ignore nested `id` fields when inside nested structure\n      if (field.name === 'id' && labelPrefix !== undefined) {\n        return acc\n      }\n\n      const translatedLabel =\n        'label' in field && field.label && i18n ? getTranslation(field.label, i18n) : undefined\n\n      const name = 'name' in field ? field.name : undefined\n\n      const isHoistingFromGroup = pathPrefix !== undefined || labelPrefix !== undefined\n\n      acc.push({\n        ...(field as FlattenedField<TField>),\n        ...(moveSubFieldsToTop &&\n          isHoistingFromGroup && {\n            accessor: pathPrefix && name ? `${pathPrefix}.${name}` : (name ?? ''),\n            labelWithPrefix: labelPrefix\n              ? `${labelPrefix} > ${translatedLabel ?? name}`\n              : (translatedLabel ?? name),\n          }),\n      })\n    }\n\n    return acc\n  }, [])\n}\n"],"names":["getTranslation","fieldAffectsData","fieldHasSubFields","fieldIsPresentationalOnly","tabHasName","flattenTopLevelFields","fields","options","normalizedOptions","keepPresentationalFields","i18n","labelPrefix","moveSubFieldsToTop","pathPrefix","reduce","acc","field","type","isNamedGroup","name","groupName","undefined","translatedLabel","label","labelWithPrefix","nameWithPrefix","push","tabs","tabFields","tab","labelWithPrefixForTab","pathPrefixForTab","includes","isHoistingFromGroup","accessor"],"mappings":"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"}},
    {"offset": {"line": 6076, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/config/useAsTitle.ts"],"sourcesContent":["import type { CollectionConfig } from '../../index.js'\n\nimport { InvalidConfiguration } from '../../errors/InvalidConfiguration.js'\nimport { fieldAffectsData } from '../../fields/config/types.js'\nimport { flattenTopLevelFields } from '../../utilities/flattenTopLevelFields.js'\n\n/**\n * Validate useAsTitle for collections.\n */\nexport const validateUseAsTitle = (config: CollectionConfig) => {\n  if (config.admin?.useAsTitle?.includes('.')) {\n    throw new InvalidConfiguration(\n      `\"useAsTitle\" cannot be a nested field. Please specify a top-level field in the collection \"${config.slug}\"`,\n    )\n  }\n\n  if (config?.admin && config.admin?.useAsTitle && config.admin.useAsTitle !== 'id') {\n    const fields = flattenTopLevelFields(config.fields)\n    const useAsTitleField = fields.find((field) => {\n      if (fieldAffectsData(field) && config.admin) {\n        return field.name === config.admin.useAsTitle\n      }\n      return false\n    })\n\n    // If auth is enabled then we don't need to\n    if (config.auth) {\n      if (config.admin.useAsTitle !== 'email') {\n        if (!useAsTitleField) {\n          throw new InvalidConfiguration(\n            `The field \"${config.admin.useAsTitle}\" specified in \"admin.useAsTitle\" does not exist in the collection \"${config.slug}\"`,\n          )\n        }\n      }\n    } else {\n      if (useAsTitleField && 'virtual' in useAsTitleField && useAsTitleField.virtual === true) {\n        throw new InvalidConfiguration(\n          `The field \"${config.admin.useAsTitle}\" specified in \"admin.useAsTitle\" in the collection \"${config.slug}\" is virtual. A virtual field can be used as the title only when linked to a relationship field.`,\n        )\n      }\n      if (!useAsTitleField) {\n        throw new InvalidConfiguration(\n          `The field \"${config.admin.useAsTitle}\" specified in \"admin.useAsTitle\" does not exist in the collection \"${config.slug}\"`,\n        )\n      }\n    }\n  }\n}\n"],"names":["InvalidConfiguration","fieldAffectsData","flattenTopLevelFields","validateUseAsTitle","config","admin","useAsTitle","includes","slug","fields","useAsTitleField","find","field","name","auth","virtual"],"mappings":";;;;AAEA,SAASA,oBAAoB,QAAQ,uCAAsC;AAC3E,SAASC,gBAAgB,QAAQ,+BAA8B;AAC/D,SAASC,qBAAqB,QAAQ,2CAA0C;;;;AAKzE,MAAMC,qBAAqB,CAACC;IACjC,IAAIA,OAAOC,KAAK,EAAEC,YAAYC,SAAS,MAAM;QAC3C,MAAM,IAAIP,2LAAAA,CACR,CAAC,2FAA2F,EAAEI,OAAOI,IAAI,CAAC,CAAC,CAAC;IAEhH;IAEA,IAAIJ,QAAQC,SAASD,OAAOC,KAAK,EAAEC,cAAcF,OAAOC,KAAK,CAACC,UAAU,KAAK,MAAM;QACjF,MAAMG,aAASP,gMAAAA,EAAsBE,OAAOK,MAAM;QAClD,MAAMC,kBAAkBD,OAAOE,IAAI,CAAC,CAACC;YACnC,QAAIX,kLAAAA,EAAiBW,UAAUR,OAAOC,KAAK,EAAE;gBAC3C,OAAOO,MAAMC,IAAI,KAAKT,OAAOC,KAAK,CAACC,UAAU;YAC/C;YACA,OAAO;QACT;QAEA,2CAA2C;QAC3C,IAAIF,OAAOU,IAAI,EAAE;YACf,IAAIV,OAAOC,KAAK,CAACC,UAAU,KAAK,SAAS;gBACvC,IAAI,CAACI,iBAAiB;oBACpB,MAAM,IAAIV,2LAAAA,CACR,CAAC,WAAW,EAAEI,OAAOC,KAAK,CAACC,UAAU,CAAC,oEAAoE,EAAEF,OAAOI,IAAI,CAAC,CAAC,CAAC;gBAE9H;YACF;QACF,OAAO;YACL,IAAIE,mBAAmB,aAAaA,mBAAmBA,gBAAgBK,OAAO,KAAK,MAAM;gBACvF,MAAM,IAAIf,2LAAAA,CACR,CAAC,WAAW,EAAEI,OAAOC,KAAK,CAACC,UAAU,CAAC,qDAAqD,EAAEF,OAAOI,IAAI,CAAC,gGAAgG,CAAC;YAE9M;YACA,IAAI,CAACE,iBAAiB;gBACpB,MAAM,IAAIV,2LAAAA,CACR,CAAC,WAAW,EAAEI,OAAOC,KAAK,CAACC,UAAU,CAAC,oEAAoE,EAAEF,OAAOI,IAAI,CAAC,CAAC,CAAC;YAE9H;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 6119, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/collections/config/sanitize.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from '../../config/types.js'\nimport type {\n  CollectionConfig,\n  SanitizedCollectionConfig,\n  SanitizedJoin,\n  SanitizedJoins,\n} from './types.js'\n\nimport { authCollectionEndpoints } from '../../auth/endpoints/index.js'\nimport { getBaseAuthFields } from '../../auth/getAuthFields.js'\nimport { TimestampsRequired } from '../../errors/TimestampsRequired.js'\nimport { sanitizeFields } from '../../fields/config/sanitize.js'\nimport { fieldAffectsData } from '../../fields/config/types.js'\nimport { mergeBaseFields } from '../../fields/mergeBaseFields.js'\nimport { uploadCollectionEndpoints } from '../../uploads/endpoints/index.js'\nimport { getBaseUploadFields } from '../../uploads/getBaseFields.js'\nimport { flattenAllFields } from '../../utilities/flattenAllFields.js'\nimport { formatLabels } from '../../utilities/formatLabels.js'\nimport { miniChalk } from '../../utilities/miniChalk.js'\nimport { traverseForLocalizedFields } from '../../utilities/traverseForLocalizedFields.js'\nimport { baseVersionFields } from '../../versions/baseFields.js'\nimport { versionDefaults } from '../../versions/defaults.js'\nimport { defaultCollectionEndpoints } from '../endpoints/index.js'\nimport {\n  addDefaultsToAuthConfig,\n  addDefaultsToCollectionConfig,\n  addDefaultsToLoginWithUsernameConfig,\n} from './defaults.js'\nimport { sanitizeCompoundIndexes } from './sanitizeCompoundIndexes.js'\nimport { validateUseAsTitle } from './useAsTitle.js'\n\nexport const sanitizeCollection = async (\n  config: Config,\n  collection: CollectionConfig,\n  /**\n   * If this property is set, RichText fields won't be sanitized immediately. Instead, they will be added to this array as promises\n   * so that you can sanitize them together, after the config has been sanitized.\n   */\n  richTextSanitizationPromises?: Array<(config: SanitizedConfig) => Promise<void>>,\n  _validRelationships?: string[],\n): Promise<SanitizedCollectionConfig> => {\n  if (collection._sanitized) {\n    return collection as SanitizedCollectionConfig\n  }\n\n  collection._sanitized = true\n\n  // /////////////////////////////////\n  // Make copy of collection config\n  // /////////////////////////////////\n\n  const sanitized: CollectionConfig = addDefaultsToCollectionConfig(collection)\n\n  // /////////////////////////////////\n  // Sanitize fields\n  // /////////////////////////////////\n\n  const validRelationships = _validRelationships ?? config.collections!.map((c) => c.slug) ?? []\n\n  const joins: SanitizedJoins = {}\n\n  const polymorphicJoins: SanitizedJoin[] = []\n\n  sanitized.fields = await sanitizeFields({\n    collectionConfig: sanitized,\n    config,\n    fields: sanitized.fields,\n    joinPath: '',\n    joins,\n    parentIsLocalized: false,\n    polymorphicJoins,\n    richTextSanitizationPromises,\n    validRelationships,\n  })\n\n  if (sanitized.endpoints !== false) {\n    if (!sanitized.endpoints) {\n      sanitized.endpoints = []\n    }\n\n    if (sanitized.auth) {\n      for (const endpoint of authCollectionEndpoints) {\n        sanitized.endpoints.push(endpoint)\n      }\n    }\n\n    if (sanitized.upload) {\n      for (const endpoint of uploadCollectionEndpoints) {\n        sanitized.endpoints.push(endpoint)\n      }\n    }\n\n    for (const endpoint of defaultCollectionEndpoints) {\n      sanitized.endpoints.push(endpoint)\n    }\n  }\n\n  if (sanitized.timestamps !== false) {\n    // add default timestamps fields only as needed\n    let hasUpdatedAt: boolean | null = null\n    let hasCreatedAt: boolean | null = null\n    let hasDeletedAt: boolean | null = null\n\n    sanitized.fields.some((field) => {\n      if (fieldAffectsData(field)) {\n        if (field.name === 'updatedAt') {\n          hasUpdatedAt = true\n        }\n\n        if (field.name === 'createdAt') {\n          hasCreatedAt = true\n        }\n\n        if (field.name === 'deletedAt') {\n          hasDeletedAt = true\n        }\n      }\n\n      return hasCreatedAt && hasUpdatedAt && (!sanitized.trash || hasDeletedAt)\n    })\n\n    if (!hasUpdatedAt) {\n      sanitized.fields.push({\n        name: 'updatedAt',\n        type: 'date',\n        admin: {\n          disableBulkEdit: true,\n          hidden: true,\n        },\n        index: true,\n        label: ({ t }) => t('general:updatedAt'),\n      })\n    }\n\n    if (!hasCreatedAt) {\n      sanitized.fields.push({\n        name: 'createdAt',\n        admin: {\n          disableBulkEdit: true,\n          hidden: true,\n        },\n        // The default sort for list view is createdAt. Thus, enabling indexing by default, is a major performance improvement, especially for large or a large amount of collections.\n        type: 'date',\n        index: true,\n        label: ({ t }) => t('general:createdAt'),\n      })\n    }\n\n    if (sanitized.trash && !hasDeletedAt) {\n      sanitized.fields.push({\n        name: 'deletedAt',\n        type: 'date',\n        admin: {\n          disableBulkEdit: true,\n          hidden: true,\n        },\n        index: true,\n        label: ({ t }) => t('general:deletedAt'),\n      })\n    }\n  }\n\n  const defaultLabels = formatLabels(sanitized.slug)\n\n  sanitized.labels = {\n    plural: sanitized.labels?.plural || defaultLabels.plural,\n    singular: sanitized.labels?.singular || defaultLabels.singular,\n  }\n\n  if (sanitized.versions) {\n    if (sanitized.timestamps === false) {\n      throw new TimestampsRequired(collection)\n    }\n\n    if (sanitized.versions === true) {\n      sanitized.versions = {\n        drafts: false,\n        maxPerDoc: 100,\n      }\n    }\n\n    sanitized.versions.maxPerDoc =\n      typeof sanitized.versions.maxPerDoc === 'number' ? sanitized.versions.maxPerDoc : 100\n\n    if (sanitized.versions.drafts) {\n      if (sanitized.versions.drafts === true) {\n        sanitized.versions.drafts = {\n          autosave: false,\n          validate: false,\n        }\n      }\n\n      const hasLocalizedFields = traverseForLocalizedFields(sanitized.fields)\n\n      if (config.localization) {\n        if (hasLocalizedFields && sanitized.versions.drafts.localizeStatus === undefined) {\n          sanitized.versions.drafts.localizeStatus = false\n        }\n      }\n\n      // TODO v4: remove this sanitization check, should not need to enable the experimental flag\n      if (sanitized.versions.drafts.localizeStatus && !config.experimental?.localizeStatus) {\n        sanitized.versions.drafts.localizeStatus = false\n        console.log(\n          miniChalk.yellowBold(\n            `Warning: \"localizeStatus\" for drafts is an experimental feature. To enable, set \"experimental.localizeStatus\" to true in your Payload config.`,\n          ),\n        )\n      }\n\n      if (sanitized.versions.drafts.autosave === true) {\n        sanitized.versions.drafts.autosave = {\n          interval: versionDefaults.autosaveInterval,\n        }\n      }\n\n      if (sanitized.versions.drafts.validate === undefined) {\n        sanitized.versions.drafts.validate = false\n      }\n\n      sanitized.fields = mergeBaseFields(\n        sanitized.fields,\n        baseVersionFields({\n          localized: sanitized.versions.drafts.localizeStatus ?? false,\n        }),\n      )\n    }\n  } else {\n    delete sanitized.versions\n  }\n\n  if (sanitized.folders === true) {\n    sanitized.folders = {\n      browseByFolder: true,\n    }\n  } else if (sanitized.folders) {\n    sanitized.folders.browseByFolder = sanitized.folders.browseByFolder ?? true\n  }\n\n  if (sanitized.upload) {\n    if (sanitized.upload === true) {\n      sanitized.upload = {}\n    }\n\n    sanitized.upload.cacheTags = sanitized.upload?.cacheTags ?? true\n    sanitized.upload.bulkUpload = sanitized.upload?.bulkUpload ?? true\n    sanitized.upload.staticDir = sanitized.upload.staticDir || sanitized.slug\n    sanitized.admin!.useAsTitle =\n      sanitized.admin?.useAsTitle && sanitized.admin.useAsTitle !== 'id'\n        ? sanitized.admin.useAsTitle\n        : 'filename'\n\n    const uploadFields = getBaseUploadFields({\n      collection: sanitized,\n      config,\n    })\n\n    sanitized.fields = mergeBaseFields(sanitized.fields, uploadFields)\n  }\n\n  if (sanitized.auth) {\n    sanitized.auth = addDefaultsToAuthConfig(\n      typeof sanitized.auth === 'boolean' ? {} : sanitized.auth,\n    )\n\n    // disable duplicate for auth enabled collections by default\n    sanitized.disableDuplicate = sanitized.disableDuplicate ?? true\n\n    if (sanitized.auth.loginWithUsername) {\n      if (sanitized.auth.loginWithUsername === true) {\n        sanitized.auth.loginWithUsername = addDefaultsToLoginWithUsernameConfig({})\n      } else {\n        const loginWithUsernameWithDefaults = addDefaultsToLoginWithUsernameConfig(\n          sanitized.auth.loginWithUsername,\n        )\n\n        // if allowEmailLogin is false, requireUsername must be true\n        if (loginWithUsernameWithDefaults.allowEmailLogin === false) {\n          loginWithUsernameWithDefaults.requireUsername = true\n        }\n        sanitized.auth.loginWithUsername = loginWithUsernameWithDefaults\n      }\n    } else {\n      sanitized.auth.loginWithUsername = false\n    }\n\n    if (!collection?.admin?.useAsTitle) {\n      sanitized.admin!.useAsTitle = sanitized.auth.loginWithUsername ? 'username' : 'email'\n    }\n\n    sanitized.fields = mergeBaseFields(sanitized.fields, getBaseAuthFields(sanitized.auth))\n  }\n\n  if (collection?.admin?.pagination?.limits?.length) {\n    sanitized.admin!.pagination!.limits = collection.admin.pagination.limits\n  }\n\n  validateUseAsTitle(sanitized)\n\n  const sanitizedConfig = sanitized as SanitizedCollectionConfig\n\n  sanitizedConfig.joins = joins\n  sanitizedConfig.polymorphicJoins = polymorphicJoins\n\n  sanitizedConfig.flattenedFields = flattenAllFields({ fields: sanitizedConfig.fields })\n\n  sanitizedConfig.sanitizedIndexes = sanitizeCompoundIndexes({\n    fields: sanitizedConfig.flattenedFields,\n    indexes: sanitizedConfig.indexes,\n  })\n\n  return sanitizedConfig\n}\n"],"names":["authCollectionEndpoints","getBaseAuthFields","TimestampsRequired","sanitizeFields","fieldAffectsData","mergeBaseFields","uploadCollectionEndpoints","getBaseUploadFields","flattenAllFields","formatLabels","miniChalk","traverseForLocalizedFields","baseVersionFields","versionDefaults","defaultCollectionEndpoints","addDefaultsToAuthConfig","addDefaultsToCollectionConfig","addDefaultsToLoginWithUsernameConfig","sanitizeCompoundIndexes","validateUseAsTitle","sanitizeCollection","config","collection","richTextSanitizationPromises","_validRelationships","_sanitized","sanitized","validRelationships","collections","map","c","slug","joins","polymorphicJoins","fields","collectionConfig","joinPath","parentIsLocalized","endpoints","auth","endpoint","push","upload","timestamps","hasUpdatedAt","hasCreatedAt","hasDeletedAt","some","field","name","trash","type","admin","disableBulkEdit","hidden","index","label","t","defaultLabels","labels","plural","singular","versions","drafts","maxPerDoc","autosave","validate","hasLocalizedFields","localization","localizeStatus","undefined","experimental","console","log","yellowBold","interval","autosaveInterval","localized","folders","browseByFolder","cacheTags","bulkUpload","staticDir","useAsTitle","uploadFields","disableDuplicate","loginWithUsername","loginWithUsernameWithDefaults","allowEmailLogin","requireUsername","pagination","limits","length","sanitizedConfig","flattenedFields","sanitizedIndexes","indexes"],"mappings":"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"}},
    {"offset": {"line": 6376, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrationsCollection.ts"],"sourcesContent":["import type { CollectionConfig } from '../../collections/config/types.js'\n\nexport const migrationsCollection: CollectionConfig = {\n  slug: 'payload-migrations',\n  admin: {\n    hidden: true,\n  },\n  endpoints: false,\n  fields: [\n    {\n      name: 'name',\n      type: 'text',\n    },\n    {\n      name: 'batch',\n      type: 'number',\n      // NOTE: This value is -1 if it is a \"dev push\"\n    },\n  ],\n  graphQL: false,\n  lockDocuments: false,\n}\n"],"names":["migrationsCollection","slug","admin","hidden","endpoints","fields","name","type","graphQL","lockDocuments"],"mappings":";;;;AAEO,MAAMA,uBAAyC;IACpDC,MAAM;IACNC,OAAO;QACLC,QAAQ;IACV;IACAC,WAAW;IACXC,QAAQ;QACN;YACEC,MAAM;YACNC,MAAM;QACR;QACA;YACED,MAAM;YACNC,MAAM;QAER;KACD;IACDC,SAAS;IACTC,eAAe;AACjB,EAAC"}},
    {"offset": {"line": 6403, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/errors/DuplicateCollection.ts"],"sourcesContent":["import { APIError } from './APIError.js'\n\nexport class DuplicateCollection extends APIError {\n  constructor(propertyName: string, duplicate: string) {\n    super(`Collection ${propertyName} already in use: \"${duplicate}\"`)\n  }\n}\n"],"names":["APIError","DuplicateCollection","propertyName","duplicate"],"mappings":";;;;AAAA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,4BAA4BD,mKAAAA;IACvC,YAAYE,YAAoB,EAAEC,SAAiB,CAAE;QACnD,KAAK,CAAC,CAAC,WAAW,EAAED,aAAa,kBAAkB,EAAEC,UAAU,CAAC,CAAC;IACnE;AACF"}},
    {"offset": {"line": 6418, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/extractID.ts"],"sourcesContent":["export const extractID = <IDType extends number | string>(\n  objectOrID: { id: IDType } | IDType,\n): IDType => {\n  if (typeof objectOrID === 'string' || typeof objectOrID === 'number') {\n    return objectOrID\n  }\n\n  return objectOrID.id\n}\n"],"names":["extractID","objectOrID","id"],"mappings":";;;;AAAO,MAAMA,YAAY,CACvBC;IAEA,IAAI,OAAOA,eAAe,YAAY,OAAOA,eAAe,UAAU;QACpE,OAAOA;IACT;IAEA,OAAOA,WAAWC,EAAE;AACtB,EAAC"}},
    {"offset": {"line": 6432, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/buildFolderField.ts"],"sourcesContent":["import type { SingleRelationshipField } from '../fields/config/types.js'\nimport type { Document } from '../types/index.js'\n\nimport { extractID } from '../utilities/extractID.js'\n\nexport const buildFolderField = ({\n  collectionSpecific,\n  folderFieldName,\n  folderSlug,\n  overrides = {},\n}: {\n  collectionSpecific: boolean\n  folderFieldName: string\n  folderSlug: string\n  overrides?: Partial<SingleRelationshipField>\n}): SingleRelationshipField => {\n  const field: SingleRelationshipField = {\n    name: folderFieldName,\n    type: 'relationship',\n    admin: {},\n    hasMany: false,\n    index: true,\n    label: 'Folder',\n    relationTo: folderSlug,\n    validate: async (value, { collectionSlug, data, overrideAccess, previousValue, req }) => {\n      if (!collectionSpecific) {\n        // if collection scoping is not enabled, no validation required since folders can contain any type of document\n        return true\n      }\n\n      if (!value) {\n        // no folder, no validation required\n        return true\n      }\n\n      const newID = extractID<Document>(value)\n      if (previousValue && extractID<Document>(previousValue) === newID) {\n        // value did not change, no validation required\n        return true\n      } else {\n        // need to validat the folder value allows this collection type\n        let parentFolder: Document = null\n        if (typeof value === 'string' || typeof value === 'number') {\n          // need to populate the value with the document\n          parentFolder = await req.payload.findByID({\n            id: newID,\n            collection: folderSlug,\n            depth: 0, // no need to populate nested folders\n            overrideAccess,\n            req,\n            select: {\n              folderType: true, // only need to check folderType\n            },\n            user: req.user,\n          })\n        }\n\n        if (parentFolder && collectionSlug) {\n          const parentFolderTypes: string[] = (parentFolder.folderType as string[]) || []\n\n          // if the parent folder has no folder types, it accepts all collections\n          if (parentFolderTypes.length === 0) {\n            return true\n          }\n\n          // validation for a folder document\n          if (collectionSlug === folderSlug) {\n            // ensure the parent accepts ALL folder types\n            const folderTypes: string[] = 'folderType' in data ? (data.folderType as string[]) : []\n            const invalidSlugs = folderTypes.filter((validCollectionSlug: string) => {\n              return !parentFolderTypes.includes(validCollectionSlug)\n            })\n            if (invalidSlugs.length === 0) {\n              return true\n            } else {\n              return `Folder with ID ${newID} does not allow documents of type ${invalidSlugs.join(', ')}`\n            }\n          }\n\n          // validation for a non-folder document\n          if (parentFolderTypes.includes(collectionSlug)) {\n            return true\n          } else {\n            return `Folder with ID ${newID} does not allow documents of type ${collectionSlug}`\n          }\n        } else {\n          return `Folder with ID ${newID} not found in collection ${folderSlug}`\n        }\n      }\n    },\n  }\n\n  if (overrides?.admin) {\n    field.admin = {\n      ...field.admin,\n      ...(overrides.admin || {}),\n    }\n\n    if (overrides.admin.components) {\n      field.admin.components = {\n        ...field.admin.components,\n        ...(overrides.admin.components || {}),\n      }\n    }\n  }\n\n  return field\n}\n"],"names":["extractID","buildFolderField","collectionSpecific","folderFieldName","folderSlug","overrides","field","name","type","admin","hasMany","index","label","relationTo","validate","value","collectionSlug","data","overrideAccess","previousValue","req","newID","parentFolder","payload","findByID","id","collection","depth","select","folderType","user","parentFolderTypes","length","folderTypes","invalidSlugs","filter","validCollectionSlug","includes","join","components"],"mappings":";;;;AAGA,SAASA,SAAS,QAAQ,4BAA2B;;AAE9C,MAAMC,mBAAmB,CAAC,EAC/BC,kBAAkB,EAClBC,eAAe,EACfC,UAAU,EACVC,YAAY,CAAC,CAAC,EAMf;IACC,MAAMC,QAAiC;QACrCC,MAAMJ;QACNK,MAAM;QACNC,OAAO,CAAC;QACRC,SAAS;QACTC,OAAO;QACPC,OAAO;QACPC,YAAYT;QACZU,UAAU,OAAOC,OAAO,EAAEC,cAAc,EAAEC,IAAI,EAAEC,cAAc,EAAEC,aAAa,EAAEC,GAAG,EAAE;YAClF,IAAI,CAAClB,oBAAoB;gBACvB,8GAA8G;gBAC9G,OAAO;YACT;YAEA,IAAI,CAACa,OAAO;gBACV,oCAAoC;gBACpC,OAAO;YACT;YAEA,MAAMM,YAAQrB,wKAAAA,EAAoBe;YAClC,IAAII,qBAAiBnB,wKAAAA,EAAoBmB,mBAAmBE,OAAO;gBACjE,+CAA+C;gBAC/C,OAAO;YACT,OAAO;gBACL,+DAA+D;gBAC/D,IAAIC,eAAyB;gBAC7B,IAAI,OAAOP,UAAU,YAAY,OAAOA,UAAU,UAAU;oBAC1D,+CAA+C;oBAC/CO,eAAe,MAAMF,IAAIG,OAAO,CAACC,QAAQ,CAAC;wBACxCC,IAAIJ;wBACJK,YAAYtB;wBACZuB,OAAO;wBACPT;wBACAE;wBACAQ,QAAQ;4BACNC,YAAY;wBACd;wBACAC,MAAMV,IAAIU,IAAI;oBAChB;gBACF;gBAEA,IAAIR,gBAAgBN,gBAAgB;oBAClC,MAAMe,oBAA+BT,aAAaO,UAAU,IAAiB,EAAE;oBAE/E,uEAAuE;oBACvE,IAAIE,kBAAkBC,MAAM,KAAK,GAAG;wBAClC,OAAO;oBACT;oBAEA,mCAAmC;oBACnC,IAAIhB,mBAAmBZ,YAAY;wBACjC,6CAA6C;wBAC7C,MAAM6B,cAAwB,gBAAgBhB,OAAQA,KAAKY,UAAU,GAAgB,EAAE;wBACvF,MAAMK,eAAeD,YAAYE,MAAM,CAAC,CAACC;4BACvC,OAAO,CAACL,kBAAkBM,QAAQ,CAACD;wBACrC;wBACA,IAAIF,aAAaF,MAAM,KAAK,GAAG;4BAC7B,OAAO;wBACT,OAAO;4BACL,OAAO,CAAC,eAAe,EAAEX,MAAM,kCAAkC,EAAEa,aAAaI,IAAI,CAAC,OAAO;wBAC9F;oBACF;oBAEA,uCAAuC;oBACvC,IAAIP,kBAAkBM,QAAQ,CAACrB,iBAAiB;wBAC9C,OAAO;oBACT,OAAO;wBACL,OAAO,CAAC,eAAe,EAAEK,MAAM,kCAAkC,EAAEL,gBAAgB;oBACrF;gBACF,OAAO;oBACL,OAAO,CAAC,eAAe,EAAEK,MAAM,yBAAyB,EAAEjB,YAAY;gBACxE;YACF;QACF;IACF;IAEA,IAAIC,WAAWI,OAAO;QACpBH,MAAMG,KAAK,GAAG;YACZ,GAAGH,MAAMG,KAAK;YACd,GAAIJ,UAAUI,KAAK,IAAI,CAAC,CAAC;QAC3B;QAEA,IAAIJ,UAAUI,KAAK,CAAC8B,UAAU,EAAE;YAC9BjC,MAAMG,KAAK,CAAC8B,UAAU,GAAG;gBACvB,GAAGjC,MAAMG,KAAK,CAAC8B,UAAU;gBACzB,GAAIlC,UAAUI,KAAK,CAAC8B,UAAU,IAAI,CAAC,CAAC;YACtC;QACF;IACF;IAEA,OAAOjC;AACT,EAAC"}},
    {"offset": {"line": 6526, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/hooks/deleteSubfoldersAfterDelete.ts"],"sourcesContent":["import type { CollectionBeforeDeleteHook } from '../../index.js'\n\ntype Args = {\n  folderFieldName: string\n  folderSlug: string\n}\nexport const deleteSubfoldersBeforeDelete = ({\n  folderFieldName,\n  folderSlug,\n}: Args): CollectionBeforeDeleteHook => {\n  return async ({ id, req }) => {\n    await req.payload.delete({\n      collection: folderSlug,\n      req,\n      where: {\n        [folderFieldName]: {\n          equals: id,\n        },\n      },\n    })\n  }\n}\n"],"names":["deleteSubfoldersBeforeDelete","folderFieldName","folderSlug","id","req","payload","delete","collection","where","equals"],"mappings":";;;;AAMO,MAAMA,+BAA+B,CAAC,EAC3CC,eAAe,EACfC,UAAU,EACL;IACL,OAAO,OAAO,EAAEC,EAAE,EAAEC,GAAG,EAAE;QACvB,MAAMA,IAAIC,OAAO,CAACC,MAAM,CAAC;YACvBC,YAAYL;YACZE;YACAI,OAAO;gBACL,CAACP,gBAAgB,EAAE;oBACjBQ,QAAQN;gBACV;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 6547, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/hooks/dissasociateAfterDelete.ts"],"sourcesContent":["import type { CollectionAfterDeleteHook } from '../../index.js'\n\ntype Args = {\n  collectionSlugs: string[]\n  folderFieldName: string\n}\nexport const dissasociateAfterDelete = ({\n  collectionSlugs,\n  folderFieldName,\n}: Args): CollectionAfterDeleteHook => {\n  return async ({ id, req }) => {\n    for (const collectionSlug of collectionSlugs) {\n      await req.payload.update({\n        collection: collectionSlug,\n        data: {\n          [folderFieldName]: null,\n        },\n        req,\n        where: {\n          [folderFieldName]: {\n            equals: id,\n          },\n        },\n      })\n    }\n  }\n}\n"],"names":["dissasociateAfterDelete","collectionSlugs","folderFieldName","id","req","collectionSlug","payload","update","collection","data","where","equals"],"mappings":";;;;AAMO,MAAMA,0BAA0B,CAAC,EACtCC,eAAe,EACfC,eAAe,EACV;IACL,OAAO,OAAO,EAAEC,EAAE,EAAEC,GAAG,EAAE;QACvB,KAAK,MAAMC,kBAAkBJ,gBAAiB;YAC5C,MAAMG,IAAIE,OAAO,CAACC,MAAM,CAAC;gBACvBC,YAAYH;gBACZI,MAAM;oBACJ,CAACP,gBAAgB,EAAE;gBACrB;gBACAE;gBACAM,OAAO;oBACL,CAACR,gBAAgB,EAAE;wBACjBS,QAAQR;oBACV;gBACF;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 6573, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/hooks/ensureSafeCollectionsChange.ts"],"sourcesContent":["import { APIError, type CollectionBeforeValidateHook, type CollectionSlug } from '../../index.js'\nimport { extractID } from '../../utilities/extractID.js'\nimport { getTranslatedLabel } from '../../utilities/getTranslatedLabel.js'\n\nexport const ensureSafeCollectionsChange =\n  ({ foldersSlug }: { foldersSlug: CollectionSlug }): CollectionBeforeValidateHook =>\n  async ({ data, originalDoc, req }) => {\n    const currentFolderID = extractID(originalDoc || {})\n    const parentFolderID = extractID(data?.folder || originalDoc?.folder || {})\n    if (Array.isArray(data?.folderType) && data.folderType.length > 0) {\n      const folderType = data.folderType as string[]\n      const currentlyAssignedCollections: string[] | undefined =\n        Array.isArray(originalDoc?.folderType) && originalDoc.folderType.length > 0\n          ? originalDoc.folderType\n          : undefined\n      /**\n       * Check if the assigned collections have changed.\n       * example:\n       * - originalAssignedCollections: ['posts', 'pages']\n       * - folderType: ['posts']\n       *\n       * The user is narrowing the types of documents that can be associated with this folder.\n       * If the user is only expanding the types of documents that can be associated with this folder,\n       * we do not need to do anything.\n       */\n      const newCollections = currentlyAssignedCollections\n        ? // user is narrowing the current scope of the folder\n          currentlyAssignedCollections.filter((c) => !folderType.includes(c))\n        : // user is adding a scope to the folder\n          folderType\n\n      if (newCollections && newCollections.length > 0) {\n        let hasDependentDocuments = false\n        if (typeof currentFolderID === 'string' || typeof currentFolderID === 'number') {\n          const childDocumentsResult = await req.payload.findByID({\n            id: currentFolderID,\n            collection: foldersSlug,\n            joins: {\n              documentsAndFolders: {\n                limit: 100_000_000,\n                where: {\n                  or: [\n                    {\n                      relationTo: {\n                        in: newCollections,\n                      },\n                    },\n                  ],\n                },\n              },\n            },\n            overrideAccess: true,\n            req,\n          })\n\n          hasDependentDocuments = childDocumentsResult.documentsAndFolders.docs.length > 0\n        }\n\n        // matches folders that are directly related to the removed collections\n        let hasDependentFolders = false\n        if (\n          !hasDependentDocuments &&\n          (typeof currentFolderID === 'string' || typeof currentFolderID === 'number')\n        ) {\n          const childFoldersResult = await req.payload.find({\n            collection: foldersSlug,\n            limit: 1,\n            req,\n            where: {\n              and: [\n                {\n                  folderType: {\n                    in: newCollections,\n                  },\n                },\n                {\n                  folder: {\n                    equals: currentFolderID,\n                  },\n                },\n              ],\n            },\n          })\n          hasDependentFolders = childFoldersResult.totalDocs > 0\n        }\n\n        if (hasDependentDocuments || hasDependentFolders) {\n          const translatedLabels = newCollections.map((collectionSlug) => {\n            if (req.payload.collections[collectionSlug]?.config.labels.singular) {\n              return getTranslatedLabel(\n                req.payload.collections[collectionSlug]?.config.labels.plural,\n                req.i18n,\n              )\n            }\n            return collectionSlug\n          })\n\n          throw new APIError(\n            `The folder \"${data.name || originalDoc.name}\" contains ${hasDependentDocuments ? 'documents' : 'folders'} that still belong to the following collections: ${translatedLabels.join(', ')}`,\n            400,\n          )\n        }\n        return data\n      }\n    } else if (\n      (data?.folderType === null ||\n        (Array.isArray(data?.folderType) && data?.folderType.length === 0)) &&\n      parentFolderID\n    ) {\n      // attempting to set the folderType to catch-all, so we need to ensure that the parent allows this\n      let parentFolder\n      if (typeof parentFolderID === 'string' || typeof parentFolderID === 'number') {\n        try {\n          parentFolder = await req.payload.findByID({\n            id: parentFolderID,\n            collection: foldersSlug,\n            overrideAccess: true,\n            req,\n            select: {\n              name: true,\n              folderType: true,\n            },\n            user: req.user,\n          })\n        } catch (_) {\n          // parent folder does not exist\n        }\n      }\n\n      if (\n        parentFolder &&\n        parentFolder?.folderType &&\n        Array.isArray(parentFolder.folderType) &&\n        parentFolder.folderType.length > 0\n      ) {\n        throw new APIError(\n          `The folder \"${data?.name || originalDoc.name}\" must have folder-type set since its parent folder ${parentFolder?.name ? `\"${parentFolder?.name}\" ` : ''}has a folder-type set.`,\n          400,\n        )\n      }\n    }\n\n    return data\n  }\n"],"names":["APIError","extractID","getTranslatedLabel","ensureSafeCollectionsChange","foldersSlug","data","originalDoc","req","currentFolderID","parentFolderID","folder","Array","isArray","folderType","length","currentlyAssignedCollections","undefined","newCollections","filter","c","includes","hasDependentDocuments","childDocumentsResult","payload","findByID","id","collection","joins","documentsAndFolders","limit","where","or","relationTo","in","overrideAccess","docs","hasDependentFolders","childFoldersResult","find","and","equals","totalDocs","translatedLabels","map","collectionSlug","collections","config","labels","singular","plural","i18n","name","join","parentFolder","select","user","_"],"mappings":"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"}},
    {"offset": {"line": 6689, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/hooks/reparentChildFolder.ts"],"sourcesContent":["import type { CollectionAfterChangeHook, Payload } from '../../index.js'\n\nimport { extractID } from '../../utilities/extractID.js'\n\ntype Args = {\n  folderCollectionSlug: string\n  folderFieldName: string\n  folderID: number | string\n  parentIDToFind: number | string\n  payload: Payload\n}\n\n/**\n * Determines if a child folder belongs to a parent folder by\n * recursively checking upwards through the folder hierarchy.\n */\nasync function isChildOfFolder({\n  folderCollectionSlug,\n  folderFieldName,\n  folderID,\n  parentIDToFind,\n  payload,\n}: Args): Promise<boolean> {\n  const parentFolder = await payload.findByID({\n    id: folderID,\n    collection: folderCollectionSlug,\n  })\n\n  const parentFolderID = parentFolder[folderFieldName]\n    ? extractID(parentFolder[folderFieldName])\n    : undefined\n\n  if (!parentFolderID) {\n    // made it to the root\n    return false\n  }\n\n  if (parentFolderID === parentIDToFind) {\n    // found match, would be cyclic\n    return true\n  }\n\n  return isChildOfFolder({\n    folderCollectionSlug,\n    folderFieldName,\n    folderID: parentFolderID,\n    parentIDToFind,\n    payload,\n  })\n}\n\n/**\n * If a parent is moved into a child folder, we need to re-parent the child\n * \n * @example\n * \n * ```ts\n     F1\n       F2\n         F2A\n       F3\n\n  Moving F1  F2A becomes:\n\n     F2A\n       F1\n         F2\n         F3\n  ```\n */\nexport const reparentChildFolder = ({\n  folderFieldName,\n}: {\n  folderFieldName: string\n}): CollectionAfterChangeHook => {\n  return async ({ doc, previousDoc, req }) => {\n    if (\n      previousDoc[folderFieldName] !== doc[folderFieldName] &&\n      doc[folderFieldName] &&\n      req.payload.config.folders\n    ) {\n      const newParentFolderID = extractID(doc[folderFieldName])\n      const isMovingToChild = newParentFolderID\n        ? await isChildOfFolder({\n            folderCollectionSlug: req.payload.config.folders.slug,\n            folderFieldName,\n            folderID: newParentFolderID,\n            parentIDToFind: doc.id,\n            payload: req.payload,\n          })\n        : false\n\n      if (isMovingToChild) {\n        // if the folder was moved into a child folder, the child folder needs\n        // to be re-parented with the parent of the folder that was moved\n        await req.payload.update({\n          id: newParentFolderID,\n          collection: req.payload.config.folders.slug,\n          data: {\n            [folderFieldName]: previousDoc[folderFieldName]\n              ? extractID(previousDoc[folderFieldName])\n              : null,\n          },\n          req,\n        })\n      }\n    }\n  }\n}\n"],"names":["extractID","isChildOfFolder","folderCollectionSlug","folderFieldName","folderID","parentIDToFind","payload","parentFolder","findByID","id","collection","parentFolderID","undefined","reparentChildFolder","doc","previousDoc","req","config","folders","newParentFolderID","isMovingToChild","slug","update","data"],"mappings":";;;;AAEA,SAASA,SAAS,QAAQ,+BAA8B;;AAUxD;;;CAGC,GACD,eAAeC,gBAAgB,EAC7BC,oBAAoB,EACpBC,eAAe,EACfC,QAAQ,EACRC,cAAc,EACdC,OAAO,EACF;IACL,MAAMC,eAAe,MAAMD,QAAQE,QAAQ,CAAC;QAC1CC,IAAIL;QACJM,YAAYR;IACd;IAEA,MAAMS,iBAAiBJ,YAAY,CAACJ,gBAAgB,OAChDH,wKAAAA,EAAUO,YAAY,CAACJ,gBAAgB,IACvCS;IAEJ,IAAI,CAACD,gBAAgB;QACnB,sBAAsB;QACtB,OAAO;IACT;IAEA,IAAIA,mBAAmBN,gBAAgB;QACrC,+BAA+B;QAC/B,OAAO;IACT;IAEA,OAAOJ,gBAAgB;QACrBC;QACAC;QACAC,UAAUO;QACVN;QACAC;IACF;AACF;AAqBO,MAAMO,sBAAsB,CAAC,EAClCV,eAAe,EAGhB;IACC,OAAO,OAAO,EAAEW,GAAG,EAAEC,WAAW,EAAEC,GAAG,EAAE;QACrC,IACED,WAAW,CAACZ,gBAAgB,KAAKW,GAAG,CAACX,gBAAgB,IACrDW,GAAG,CAACX,gBAAgB,IACpBa,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,EAC1B;YACA,MAAMC,wBAAoBnB,wKAAAA,EAAUc,GAAG,CAACX,gBAAgB;YACxD,MAAMiB,kBAAkBD,oBACpB,MAAMlB,gBAAgB;gBACpBC,sBAAsBc,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,CAACG,IAAI;gBACrDlB;gBACAC,UAAUe;gBACVd,gBAAgBS,IAAIL,EAAE;gBACtBH,SAASU,IAAIV,OAAO;YACtB,KACA;YAEJ,IAAIc,iBAAiB;gBACnB,sEAAsE;gBACtE,iEAAiE;gBACjE,MAAMJ,IAAIV,OAAO,CAACgB,MAAM,CAAC;oBACvBb,IAAIU;oBACJT,YAAYM,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,CAACG,IAAI;oBAC3CE,MAAM;wBACJ,CAACpB,gBAAgB,EAAEY,WAAW,CAACZ,gBAAgB,OAC3CH,wKAAAA,EAAUe,WAAW,CAACZ,gBAAgB,IACtC;oBACN;oBACAa;gBACF;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 6750, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/createFolderCollection.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Field, Option, SelectField } from '../fields/config/types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\nimport { buildFolderField } from './buildFolderField.js'\nimport { deleteSubfoldersBeforeDelete } from './hooks/deleteSubfoldersAfterDelete.js'\nimport { dissasociateAfterDelete } from './hooks/dissasociateAfterDelete.js'\nimport { ensureSafeCollectionsChange } from './hooks/ensureSafeCollectionsChange.js'\nimport { reparentChildFolder } from './hooks/reparentChildFolder.js'\n\ntype CreateFolderCollectionArgs = {\n  collectionSpecific: boolean\n  debug?: boolean\n  folderEnabledCollections: CollectionConfig[]\n  folderFieldName: string\n  slug: string\n}\nexport const createFolderCollection = ({\n  slug,\n  collectionSpecific,\n  debug,\n  folderEnabledCollections,\n  folderFieldName,\n}: CreateFolderCollectionArgs): CollectionConfig => {\n  const { collectionOptions, collectionSlugs } = folderEnabledCollections.reduce(\n    (acc, collection: CollectionConfig) => {\n      acc.collectionSlugs.push(collection.slug)\n      acc.collectionOptions.push({\n        label: collection.labels?.plural || collection.slug,\n        value: collection.slug,\n      })\n\n      return acc\n    },\n    {\n      collectionOptions: [] as Option[],\n      collectionSlugs: [] as string[],\n    },\n  )\n\n  return {\n    slug,\n    access: {\n      create: defaultAccess,\n      delete: defaultAccess,\n      read: defaultAccess,\n      readVersions: defaultAccess,\n      update: defaultAccess,\n    },\n    admin: {\n      hidden: !debug,\n      useAsTitle: 'name',\n    },\n    fields: [\n      {\n        name: 'name',\n        type: 'text',\n        index: true,\n        required: true,\n      },\n      buildFolderField({\n        collectionSpecific,\n        folderFieldName,\n        folderSlug: slug,\n        overrides: {\n          admin: {\n            hidden: !debug,\n          },\n        },\n      }),\n      {\n        name: 'documentsAndFolders',\n        type: 'join',\n        admin: {\n          hidden: !debug,\n        },\n        collection: [slug, ...collectionSlugs],\n        hasMany: true,\n        on: folderFieldName,\n      },\n      ...(collectionSpecific\n        ? [\n            {\n              name: 'folderType',\n              type: 'select',\n              admin: {\n                components: {\n                  Field: {\n                    path: '@payloadcms/next/client#FolderTypeField',\n                  },\n                },\n                position: 'sidebar',\n              },\n              hasMany: true,\n              options: collectionOptions,\n            } satisfies SelectField,\n          ]\n        : ([] as Field[])),\n    ],\n    hooks: {\n      afterChange: [\n        reparentChildFolder({\n          folderFieldName,\n        }),\n      ],\n      afterDelete: [\n        dissasociateAfterDelete({\n          collectionSlugs,\n          folderFieldName,\n        }),\n      ],\n      beforeDelete: [deleteSubfoldersBeforeDelete({ folderFieldName, folderSlug: slug })],\n      beforeValidate: [\n        ...(collectionSpecific ? [ensureSafeCollectionsChange({ foldersSlug: slug })] : []),\n      ],\n    },\n    labels: {\n      plural: 'Folders',\n      singular: 'Folder',\n    },\n    typescript: {\n      interface: 'FolderInterface',\n    },\n  }\n}\n"],"names":["defaultAccess","buildFolderField","deleteSubfoldersBeforeDelete","dissasociateAfterDelete","ensureSafeCollectionsChange","reparentChildFolder","createFolderCollection","slug","collectionSpecific","debug","folderEnabledCollections","folderFieldName","collectionOptions","collectionSlugs","reduce","acc","collection","push","label","labels","plural","value","access","create","delete","read","readVersions","update","admin","hidden","useAsTitle","fields","name","type","index","required","folderSlug","overrides","hasMany","on","components","Field","path","position","options","hooks","afterChange","afterDelete","beforeDelete","beforeValidate","foldersSlug","singular","typescript","interface"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,gBAAgB,QAAQ,wBAAuB;AACxD,SAASC,4BAA4B,QAAQ,yCAAwC;AACrF,SAASC,uBAAuB,QAAQ,qCAAoC;AAC5E,SAASC,2BAA2B,QAAQ,yCAAwC;AACpF,SAASC,mBAAmB,QAAQ,iCAAgC;;;;;;;AAS7D,MAAMC,yBAAyB,CAAC,EACrCC,IAAI,EACJC,kBAAkB,EAClBC,KAAK,EACLC,wBAAwB,EACxBC,eAAe,EACY;IAC3B,MAAM,EAAEC,iBAAiB,EAAEC,eAAe,EAAE,GAAGH,yBAAyBI,MAAM,CAC5E,CAACC,KAAKC;QACJD,IAAIF,eAAe,CAACI,IAAI,CAACD,WAAWT,IAAI;QACxCQ,IAAIH,iBAAiB,CAACK,IAAI,CAAC;YACzBC,OAAOF,WAAWG,MAAM,EAAEC,UAAUJ,WAAWT,IAAI;YACnDc,OAAOL,WAAWT,IAAI;QACxB;QAEA,OAAOQ;IACT,GACA;QACEH,mBAAmB,EAAE;QACrBC,iBAAiB,EAAE;IACrB;IAGF,OAAO;QACLN;QACAe,QAAQ;YACNC,QAAQvB,2KAAAA;YACRwB,QAAQxB,2KAAAA;YACRyB,MAAMzB,2KAAAA;YACN0B,cAAc1B,2KAAAA;YACd2B,QAAQ3B,2KAAAA;QACV;QACA4B,OAAO;YACLC,QAAQ,CAACpB;YACTqB,YAAY;QACd;QACAC,QAAQ;YACN;gBACEC,MAAM;gBACNC,MAAM;gBACNC,OAAO;gBACPC,UAAU;YACZ;gBACAlC,oLAAAA,EAAiB;gBACfO;gBACAG;gBACAyB,YAAY7B;gBACZ8B,WAAW;oBACTT,OAAO;wBACLC,QAAQ,CAACpB;oBACX;gBACF;YACF;YACA;gBACEuB,MAAM;gBACNC,MAAM;gBACNL,OAAO;oBACLC,QAAQ,CAACpB;gBACX;gBACAO,YAAY;oBAACT;uBAASM;iBAAgB;gBACtCyB,SAAS;gBACTC,IAAI5B;YACN;eACIH,qBACA;gBACE;oBACEwB,MAAM;oBACNC,MAAM;oBACNL,OAAO;wBACLY,YAAY;4BACVC,OAAO;gCACLC,MAAM;4BACR;wBACF;wBACAC,UAAU;oBACZ;oBACAL,SAAS;oBACTM,SAAShC;gBACX;aACD,GACA,EAAE;SACR;QACDiC,OAAO;YACLC,aAAa;oBACXzC,mMAAAA,EAAoB;oBAClBM;gBACF;aACD;YACDoC,aAAa;oBACX5C,2MAAAA,EAAwB;oBACtBU;oBACAF;gBACF;aACD;YACDqC,cAAc;oBAAC9C,oNAAAA,EAA6B;oBAAES;oBAAiByB,YAAY7B;gBAAK;aAAG;YACnF0C,gBAAgB;mBACVzC,qBAAqB;wBAACJ,mNAAAA,EAA4B;wBAAE8C,aAAa3C;oBAAK;iBAAG,GAAG,EAAE;aACnF;QACH;QACAY,QAAQ;YACNC,QAAQ;YACR+B,UAAU;QACZ;QACAC,YAAY;YACVC,WAAW;QACb;IACF;AACF,EAAC"}},
    {"offset": {"line": 6877, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/addFolderCollection.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from '../config/types.js'\nimport type { CollectionConfig } from '../index.js'\n\nimport { sanitizeCollection } from '../collections/config/sanitize.js'\nimport { createFolderCollection } from './createFolderCollection.js'\n\nexport async function addFolderCollection({\n  collectionSpecific,\n  config,\n  folderEnabledCollections,\n  richTextSanitizationPromises = [],\n  validRelationships = [],\n}: {\n  collectionSpecific: boolean\n  config: NonNullable<Config>\n  folderEnabledCollections: CollectionConfig[]\n  richTextSanitizationPromises?: Array<(config: SanitizedConfig) => Promise<void>>\n  validRelationships?: string[]\n}): Promise<void> {\n  if (config.folders === false) {\n    return\n  }\n\n  let folderCollectionConfig = createFolderCollection({\n    slug: config.folders!.slug as string,\n    collectionSpecific,\n    debug: config.folders!.debug,\n    folderEnabledCollections,\n    folderFieldName: config.folders!.fieldName as string,\n  })\n\n  const collectionIndex = config.collections!.push(folderCollectionConfig)\n\n  if (\n    Array.isArray(config.folders?.collectionOverrides) &&\n    config?.folders.collectionOverrides.length\n  ) {\n    for (const override of config.folders.collectionOverrides) {\n      folderCollectionConfig = await override({ collection: folderCollectionConfig })\n    }\n  }\n\n  const sanitizedCollectionWithOverrides = await sanitizeCollection(\n    config as unknown as Config,\n    folderCollectionConfig,\n    richTextSanitizationPromises,\n    validRelationships,\n  )\n\n  config.collections![collectionIndex - 1] = sanitizedCollectionWithOverrides\n}\n"],"names":["sanitizeCollection","createFolderCollection","addFolderCollection","collectionSpecific","config","folderEnabledCollections","richTextSanitizationPromises","validRelationships","folders","folderCollectionConfig","slug","debug","folderFieldName","fieldName","collectionIndex","collections","push","Array","isArray","collectionOverrides","length","override","collection","sanitizedCollectionWithOverrides"],"mappings":";;;;AAGA,SAASA,kBAAkB,QAAQ,oCAAmC;AACtE,SAASC,sBAAsB,QAAQ,8BAA6B;;;AAE7D,eAAeC,oBAAoB,EACxCC,kBAAkB,EAClBC,MAAM,EACNC,wBAAwB,EACxBC,+BAA+B,EAAE,EACjCC,qBAAqB,EAAE,EAOxB;IACC,IAAIH,OAAOI,OAAO,KAAK,OAAO;QAC5B;IACF;IAEA,IAAIC,6BAAyBR,gMAAAA,EAAuB;QAClDS,MAAMN,OAAOI,OAAO,CAAEE,IAAI;QAC1BP;QACAQ,OAAOP,OAAOI,OAAO,CAAEG,KAAK;QAC5BN;QACAO,iBAAiBR,OAAOI,OAAO,CAAEK,SAAS;IAC5C;IAEA,MAAMC,kBAAkBV,OAAOW,WAAW,CAAEC,IAAI,CAACP;IAEjD,IACEQ,MAAMC,OAAO,CAACd,OAAOI,OAAO,EAAEW,wBAC9Bf,QAAQI,QAAQW,oBAAoBC,QACpC;QACA,KAAK,MAAMC,YAAYjB,OAAOI,OAAO,CAACW,mBAAmB,CAAE;YACzDV,yBAAyB,MAAMY,SAAS;gBAAEC,YAAYb;YAAuB;QAC/E;IACF;IAEA,MAAMc,mCAAmC,UAAMvB,4LAAAA,EAC7CI,QACAK,wBACAH,8BACAC;IAGFH,OAAOW,WAAY,CAACD,kBAAkB,EAAE,GAAGS;AAC7C"}},
    {"offset": {"line": 6911, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/addFolderFieldToCollection.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../index.js'\n\nimport { buildFolderField } from './buildFolderField.js'\n\nexport const addFolderFieldToCollection = ({\n  collection,\n  collectionSpecific,\n  folderFieldName,\n  folderSlug,\n}: {\n  collection: SanitizedCollectionConfig\n  collectionSpecific: boolean\n  folderFieldName: string\n  folderSlug: string\n}): void => {\n  collection.fields.push(\n    buildFolderField({\n      collectionSpecific,\n      folderFieldName,\n      folderSlug,\n      overrides: {\n        admin: {\n          allowCreate: false,\n          allowEdit: false,\n          components: {\n            Cell: '@payloadcms/next/rsc#FolderTableCell',\n            Field: '@payloadcms/next/rsc#FolderField',\n          },\n        },\n      },\n    }),\n  )\n}\n"],"names":["buildFolderField","addFolderFieldToCollection","collection","collectionSpecific","folderFieldName","folderSlug","fields","push","overrides","admin","allowCreate","allowEdit","components","Cell","Field"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,wBAAuB;;AAEjD,MAAMC,6BAA6B,CAAC,EACzCC,UAAU,EACVC,kBAAkB,EAClBC,eAAe,EACfC,UAAU,EAMX;IACCH,WAAWI,MAAM,CAACC,IAAI,KACpBP,oLAAAA,EAAiB;QACfG;QACAC;QACAC;QACAG,WAAW;YACTC,OAAO;gBACLC,aAAa;gBACbC,WAAW;gBACXC,YAAY;oBACVC,MAAM;oBACNC,OAAO;gBACT;YACF;QACF;IACF;AAEJ,EAAC"}},
    {"offset": {"line": 6938, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/operations/docAccess.ts"],"sourcesContent":["import type { SanitizedGlobalPermission } from '../../auth/index.js'\nimport type { AllOperations, JsonObject, PayloadRequest } from '../../types/index.js'\nimport type { SanitizedGlobalConfig } from '../config/types.js'\n\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { getEntityPermissions } from '../../utilities/getEntityPermissions/getEntityPermissions.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { sanitizePermissions } from '../../utilities/sanitizePermissions.js'\n\ntype Arguments = {\n  /**\n   * If the document data is passed, it will be used to check access instead of fetching the document from the database.\n   */\n  data?: JsonObject\n  globalConfig: SanitizedGlobalConfig\n  req: PayloadRequest\n}\n\nexport const docAccessOperation = async (args: Arguments): Promise<SanitizedGlobalPermission> => {\n  const { data, globalConfig, req } = args\n\n  const globalOperations: AllOperations[] = ['read', 'update']\n\n  if (globalConfig.versions) {\n    globalOperations.push('readVersions')\n  }\n\n  try {\n    const result = await getEntityPermissions({\n      id: undefined,\n      blockReferencesPermissions: {},\n      data,\n      entity: globalConfig,\n      entityType: 'global',\n      fetchData: true,\n      operations: globalOperations,\n      req,\n    })\n\n    const sanitizedPermissions = sanitizePermissions({\n      globals: {\n        [globalConfig.slug]: result,\n      },\n    })\n\n    const globalPermissions = sanitizedPermissions?.globals?.[globalConfig.slug]\n    return globalPermissions ?? { fields: {} }\n  } catch (e: unknown) {\n    await killTransaction(req)\n    throw e\n  }\n}\n"],"names":["getEntityPermissions","killTransaction","sanitizePermissions","docAccessOperation","args","data","globalConfig","req","globalOperations","versions","push","result","id","undefined","blockReferencesPermissions","entity","entityType","fetchData","operations","sanitizedPermissions","globals","slug","globalPermissions","fields","e"],"mappings":";;;;AAKA,SAASA,oBAAoB,QAAQ,+DAA8D;AAEnG,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,mBAAmB,QAAQ,yCAAwC;;;;AAWrE,MAAMC,qBAAqB,OAAOC;IACvC,MAAM,EAAEC,IAAI,EAAEC,YAAY,EAAEC,GAAG,EAAE,GAAGH;IAEpC,MAAMI,mBAAoC;QAAC;QAAQ;KAAS;IAE5D,IAAIF,aAAaG,QAAQ,EAAE;QACzBD,iBAAiBE,IAAI,CAAC;IACxB;IAEA,IAAI;QACF,MAAMC,SAAS,UAAMX,sNAAAA,EAAqB;YACxCY,IAAIC;YACJC,4BAA4B,CAAC;YAC7BT;YACAU,QAAQT;YACRU,YAAY;YACZC,WAAW;YACXC,YAAYV;YACZD;QACF;QAEA,MAAMY,2BAAuBjB,4LAAAA,EAAoB;YAC/CkB,SAAS;gBACP,CAACd,aAAae,IAAI,CAAC,EAAEV;YACvB;QACF;QAEA,MAAMW,oBAAoBH,sBAAsBC,SAAS,CAACd,aAAae,IAAI,CAAC;QAC5E,OAAOC,qBAAqB;YAAEC,QAAQ,CAAC;QAAE;IAC3C,EAAE,OAAOC,GAAY;QACnB,UAAMvB,oLAAAA,EAAgBM;QACtB,MAAMiB;IACR;AACF,EAAC"}},
    {"offset": {"line": 6986, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/docAccess.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { docAccessOperation } from '../operations/docAccess.js'\n\nexport const docAccessHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const result = await docAccessOperation({\n    data: req.data,\n    globalConfig,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestGlobal","headersWithCors","docAccessOperation","docAccessHandler","req","globalConfig","result","data","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,kBAAkB,QAAQ,6BAA4B;;;;;AAExD,MAAMC,mBAAmC,OAAOC;IACrD,MAAMC,mBAAeL,sLAAAA,EAAiBI;IACtC,MAAME,SAAS,UAAMJ,6LAAAA,EAAmB;QACtCK,MAAMH,IAAIG,IAAI;QACdF;QACAD;IACF;IAEA,OAAOI,SAASC,IAAI,CAACH,QAAQ;QAC3BI,aAAST,oLAAAA,EAAgB;YACvBS,SAAS,IAAIC;YACbP;QACF;QACAN,QAAQC,sMAAAA,CAAWa,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 7018, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/findOne.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { findOneOperation } from '../operations/findOne.js'\n\nexport const findOneHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const { data, searchParams } = req\n  const depth = data ? data.depth : searchParams.get('depth')\n  const flattenLocales = data\n    ? data.flattenLocales\n    : searchParams.has('flattenLocales')\n      ? searchParams.get('flattenLocales') === 'true'\n      : // flattenLocales should be undfined if not provided, so that the default (true) is applied in the operation\n        undefined\n\n  const result = await findOneOperation({\n    slug: globalConfig.slug,\n    data: data\n      ? data?.data\n      : searchParams.get('data')\n        ? JSON.parse(searchParams.get('data') as string)\n        : undefined,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: data ? data.draft : searchParams.get('draft') === 'true',\n    flattenLocales,\n    globalConfig,\n    populate: sanitizePopulateParam(req.query.populate),\n    req,\n    select: sanitizeSelectParam(req.query.select),\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestGlobal","headersWithCors","isNumber","sanitizePopulateParam","sanitizeSelectParam","findOneOperation","findOneHandler","req","globalConfig","data","searchParams","depth","get","flattenLocales","has","undefined","result","slug","JSON","parse","Number","draft","populate","query","select","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,gBAAgB,QAAQ,2BAA0B;;;;;;;;AAEpD,MAAMC,iBAAiC,OAAOC;IACnD,MAAMC,mBAAeR,sLAAAA,EAAiBO;IACtC,MAAM,EAAEE,IAAI,EAAEC,YAAY,EAAE,GAAGH;IAC/B,MAAMI,QAAQF,OAAOA,KAAKE,KAAK,GAAGD,aAAaE,GAAG,CAAC;IACnD,MAAMC,iBAAiBJ,OACnBA,KAAKI,cAAc,GACnBH,aAAaI,GAAG,CAAC,oBACfJ,aAAaE,GAAG,CAAC,sBAAsB,SAEvCG;IAEN,MAAMC,SAAS,UAAMX,yLAAAA,EAAiB;QACpCY,MAAMT,aAAaS,IAAI;QACvBR,MAAMA,OACFA,MAAMA,OACNC,aAAaE,GAAG,CAAC,UACfM,KAAKC,KAAK,CAACT,aAAaE,GAAG,CAAC,WAC5BG;QACNJ,WAAOT,sKAAAA,EAASS,SAASS,OAAOT,SAASI;QACzCM,OAAOZ,OAAOA,KAAKY,KAAK,GAAGX,aAAaE,GAAG,CAAC,aAAa;QACzDC;QACAL;QACAc,cAAUnB,gMAAAA,EAAsBI,IAAIgB,KAAK,CAACD,QAAQ;QAClDf;QACAiB,YAAQpB,4LAAAA,EAAoBG,IAAIgB,KAAK,CAACC,MAAM;IAC9C;IAEA,OAAOC,SAASC,IAAI,CAACV,QAAQ;QAC3BW,aAAS1B,oLAAAA,EAAgB;YACvB0B,SAAS,IAAIC;YACbrB;QACF;QACAT,QAAQC,sMAAAA,CAAW8B,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 7065, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/findVersionByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { findVersionByIDOperation } from '../operations/findVersionByID.js'\n\nexport const findVersionByIDHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const result = await findVersionByIDOperation({\n    id: req.routeParams!.id as string,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    globalConfig,\n    populate: sanitizePopulateParam(req.query.populate),\n    req,\n    select: sanitizeSelectParam(req.query.select),\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestGlobal","headersWithCors","isNumber","sanitizePopulateParam","sanitizeSelectParam","findVersionByIDOperation","findVersionByIDHandler","req","globalConfig","searchParams","depth","get","result","id","routeParams","Number","undefined","populate","query","select","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,wBAAwB,QAAQ,mCAAkC;;;;;;;;AAEpE,MAAMC,yBAAyC,OAAOC;IAC3D,MAAMC,mBAAeR,sLAAAA,EAAiBO;IACtC,MAAM,EAAEE,YAAY,EAAE,GAAGF;IACzB,MAAMG,QAAQD,aAAaE,GAAG,CAAC;IAE/B,MAAMC,SAAS,UAAMP,yMAAAA,EAAyB;QAC5CQ,IAAIN,IAAIO,WAAW,CAAED,EAAE;QACvBH,WAAOR,sKAAAA,EAASQ,SAASK,OAAOL,SAASM;QACzCR;QACAS,cAAUd,gMAAAA,EAAsBI,IAAIW,KAAK,CAACD,QAAQ;QAClDV;QACAY,YAAQf,4LAAAA,EAAoBG,IAAIW,KAAK,CAACC,MAAM;IAC9C;IAEA,OAAOC,SAASC,IAAI,CAACT,QAAQ;QAC3BU,aAASrB,oLAAAA,EAAgB;YACvBqB,SAAS,IAAIC;YACbhB;QACF;QACAT,QAAQC,sMAAAA,CAAWyB,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 7108, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/findVersions.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\nimport type { Where } from '../../types/index.js'\n\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { sanitizeSortParams } from '../../utilities/sanitizeSortParams.js'\nimport { findVersionsOperation } from '../operations/findVersions.js'\n\nexport const findVersionsHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const { depth, limit, page, pagination, populate, select, sort, where } = req.query as {\n    depth?: string\n    limit?: string\n    page?: string\n    pagination?: string\n    populate?: Record<string, unknown>\n    select?: Record<string, unknown>\n    sort?: string | string[]\n    where?: Where\n  }\n\n  const result = await findVersionsOperation({\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    globalConfig,\n    limit: isNumber(limit) ? Number(limit) : undefined,\n    page: isNumber(page) ? Number(page) : undefined,\n    pagination: pagination === 'false' ? false : undefined,\n    populate: sanitizePopulateParam(populate),\n    req,\n    select: sanitizeSelectParam(select),\n    sort: sanitizeSortParams(sort),\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestGlobal","headersWithCors","isNumber","sanitizePopulateParam","sanitizeSelectParam","sanitizeSortParams","findVersionsOperation","findVersionsHandler","req","globalConfig","depth","limit","page","pagination","populate","select","sort","where","query","result","Number","undefined","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,kBAAkB,QAAQ,wCAAuC;AAC1E,SAASC,qBAAqB,QAAQ,gCAA+B;;;;;;;;;AAE9D,MAAMC,sBAAsC,OAAOC;IACxD,MAAMC,mBAAeT,sLAAAA,EAAiBQ;IACtC,MAAM,EAAEE,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE,GAAGT,IAAIU,KAAK;IAWnF,MAAMC,SAAS,UAAMb,mMAAAA,EAAsB;QACzCI,WAAOR,sKAAAA,EAASQ,SAASU,OAAOV,SAASW;QACzCZ;QACAE,WAAOT,sKAAAA,EAASS,SAASS,OAAOT,SAASU;QACzCT,UAAMV,sKAAAA,EAASU,QAAQQ,OAAOR,QAAQS;QACtCR,YAAYA,eAAe,UAAU,QAAQQ;QAC7CP,cAAUX,gMAAAA,EAAsBW;QAChCN;QACAO,YAAQX,4LAAAA,EAAoBW;QAC5BC,UAAMX,0LAAAA,EAAmBW;QACzBC;IACF;IAEA,OAAOK,SAASC,IAAI,CAACJ,QAAQ;QAC3BK,aAASvB,oLAAAA,EAAgB;YACvBuB,SAAS,IAAIC;YACbjB;QACF;QACAV,QAAQC,sMAAAA,CAAW2B,EAAE;IACvB;AACF,EAAC"}},
    {"offset": {"line": 7165, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/restoreVersion.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { restoreVersionOperationGlobal, sanitizePopulateParam } from '../../index.js'\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\n\nexport const restoreVersionHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const draft = searchParams.get('draft')\n\n  const doc = await restoreVersionOperationGlobal({\n    id: req.routeParams!.id as string,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true' ? true : undefined,\n    globalConfig,\n    populate: sanitizePopulateParam(req.query.populate),\n    req,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('version:restoredSuccessfully'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","restoreVersionOperationGlobal","sanitizePopulateParam","getRequestGlobal","headersWithCors","isNumber","restoreVersionHandler","req","globalConfig","searchParams","depth","get","draft","doc","id","routeParams","Number","undefined","populate","query","Response","json","message","t","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;;AAIlD,SAASC,6BAA6B,EAAEC,qBAAqB,QAAQ,iBAAgB;AACrF,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;;;;;;AAE/C,MAAMC,wBAAwC,OAAOC;IAC1D,MAAMC,mBAAeL,sLAAAA,EAAiBI;IACtC,MAAM,EAAEE,YAAY,EAAE,GAAGF;IACzB,MAAMG,QAAQD,aAAaE,GAAG,CAAC;IAC/B,MAAMC,QAAQH,aAAaE,GAAG,CAAC;IAE/B,MAAME,MAAM,UAAMZ,yRAAAA,EAA8B;QAC9Ca,IAAIP,IAAIQ,WAAW,CAAED,EAAE;QACvBJ,WAAOL,sKAAAA,EAASK,SAASM,OAAON,SAASO;QACzCL,OAAOA,UAAU,SAAS,OAAOK;QACjCT;QACAU,cAAUhB,gMAAAA,EAAsBK,IAAIY,KAAK,CAACD,QAAQ;QAClDX;IACF;IAEA,OAAOa,SAASC,IAAI,CAClB;QACER;QACAS,SAASf,IAAIgB,CAAC,CAAC;IACjB,GACA;QACEC,aAASpB,oLAAAA,EAAgB;YACvBoB,SAAS,IAAIC;YACblB;QACF;QACAR,QAAQC,sMAAAA,CAAW0B,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 7209, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/update.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestGlobal } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { updateOperation } from '../operations/update.js'\n\nexport const updateHandler: PayloadHandler = async (req) => {\n  const globalConfig = getRequestGlobal(req)\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const draft = searchParams.get('draft') === 'true'\n  const autosave = searchParams.get('autosave') === 'true'\n  const publishSpecificLocale = req.query.publishSpecificLocale as string | undefined\n  const publishAllLocales = searchParams.get('publishAllLocales') === 'true'\n  const unpublishAllLocales = searchParams.get('unpublishAllLocales') === 'true'\n\n  const result = await updateOperation({\n    slug: globalConfig.slug,\n    autosave,\n    data: req.data!,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft,\n    globalConfig,\n    populate: sanitizePopulateParam(req.query.populate),\n    publishAllLocales,\n    publishSpecificLocale,\n    req,\n    select: sanitizeSelectParam(req.query.select),\n    unpublishAllLocales,\n  })\n\n  let message = req.t('general:updatedSuccessfully')\n\n  if (draft) {\n    message = req.t('version:draftSavedSuccessfully')\n  }\n  if (autosave) {\n    message = req.t('version:autosavedSuccessfully')\n  }\n\n  return Response.json(\n    {\n      message,\n      result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestGlobal","headersWithCors","isNumber","sanitizePopulateParam","sanitizeSelectParam","updateOperation","updateHandler","req","globalConfig","searchParams","depth","get","draft","autosave","publishSpecificLocale","query","publishAllLocales","unpublishAllLocales","result","slug","data","Number","undefined","populate","select","message","t","Response","json","headers","Headers","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,gBAAgB,QAAQ,sCAAqC;AACtE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,eAAe,QAAQ,0BAAyB;;;;;;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,mBAAeR,sLAAAA,EAAiBO;IACtC,MAAM,EAAEE,YAAY,EAAE,GAAGF;IACzB,MAAMG,QAAQD,aAAaE,GAAG,CAAC;IAC/B,MAAMC,QAAQH,aAAaE,GAAG,CAAC,aAAa;IAC5C,MAAME,WAAWJ,aAAaE,GAAG,CAAC,gBAAgB;IAClD,MAAMG,wBAAwBP,IAAIQ,KAAK,CAACD,qBAAqB;IAC7D,MAAME,oBAAoBP,aAAaE,GAAG,CAAC,yBAAyB;IACpE,MAAMM,sBAAsBR,aAAaE,GAAG,CAAC,2BAA2B;IAExE,MAAMO,SAAS,UAAMb,uLAAAA,EAAgB;QACnCc,MAAMX,aAAaW,IAAI;QACvBN;QACAO,MAAMb,IAAIa,IAAI;QACdV,WAAOR,sKAAAA,EAASQ,SAASW,OAAOX,SAASY;QACzCV;QACAJ;QACAe,cAAUpB,gMAAAA,EAAsBI,IAAIQ,KAAK,CAACQ,QAAQ;QAClDP;QACAF;QACAP;QACAiB,YAAQpB,4LAAAA,EAAoBG,IAAIQ,KAAK,CAACS,MAAM;QAC5CP;IACF;IAEA,IAAIQ,UAAUlB,IAAImB,CAAC,CAAC;IAEpB,IAAId,OAAO;QACTa,UAAUlB,IAAImB,CAAC,CAAC;IAClB;IACA,IAAIb,UAAU;QACZY,UAAUlB,IAAImB,CAAC,CAAC;IAClB;IAEA,OAAOC,SAASC,IAAI,CAClB;QACEH;QACAP;IACF,GACA;QACEW,aAAS5B,oLAAAA,EAAgB;YACvB4B,SAAS,IAAIC;YACbvB;QACF;QACAT,QAAQC,sMAAAA,CAAWgC,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 7273, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/endpoints/index.ts"],"sourcesContent":["import type { Endpoint } from '../../config/types.js'\n\nimport { wrapInternalEndpoints } from '../../utilities/wrapInternalEndpoints.js'\nimport { docAccessHandler } from './docAccess.js'\nimport { findOneHandler } from './findOne.js'\nimport { findVersionByIDHandler } from './findVersionByID.js'\nimport { findVersionsHandler } from './findVersions.js'\nimport { restoreVersionHandler } from './restoreVersion.js'\nimport { updateHandler } from './update.js'\n\nexport const defaultGlobalEndpoints: Endpoint[] = wrapInternalEndpoints([\n  {\n    handler: docAccessHandler,\n    method: 'post',\n    path: '/access',\n  },\n  {\n    handler: findOneHandler,\n    method: 'get',\n    path: '/',\n  },\n  {\n    handler: findVersionByIDHandler,\n    method: 'get',\n    path: '/versions/:id',\n  },\n  {\n    handler: findVersionsHandler,\n    method: 'get',\n    path: '/versions',\n  },\n  {\n    handler: restoreVersionHandler,\n    method: 'post',\n    path: '/versions/:id',\n  },\n  {\n    handler: updateHandler,\n    method: 'post',\n    path: '/',\n  },\n])\n"],"names":["wrapInternalEndpoints","docAccessHandler","findOneHandler","findVersionByIDHandler","findVersionsHandler","restoreVersionHandler","updateHandler","defaultGlobalEndpoints","handler","method","path"],"mappings":";;;;AAEA,SAASA,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,gBAAgB,QAAQ,iBAAgB;AACjD,SAASC,cAAc,QAAQ,eAAc;AAC7C,SAASC,sBAAsB,QAAQ,uBAAsB;AAC7D,SAASC,mBAAmB,QAAQ,oBAAmB;AACvD,SAASC,qBAAqB,QAAQ,sBAAqB;AAC3D,SAASC,aAAa,QAAQ,cAAa;;;;;;;;AAEpC,MAAMC,6BAAqCP,gMAAAA,EAAsB;IACtE;QACEQ,SAASP,0LAAAA;QACTQ,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASN,sLAAAA;QACTO,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASL,sMAAAA;QACTM,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASJ,gMAAAA;QACTK,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASH,oMAAAA;QACTI,QAAQ;QACRC,MAAM;IACR;IACA;QACEF,SAASF,oLAAAA;QACTG,QAAQ;QACRC,MAAM;IACR;CACD,EAAC"}},
    {"offset": {"line": 7327, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/globals/config/sanitize.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from '../../config/types.js'\nimport type { GlobalConfig, SanitizedGlobalConfig } from './types.js'\n\nimport { defaultAccess } from '../../auth/defaultAccess.js'\nimport { sanitizeFields } from '../../fields/config/sanitize.js'\nimport { fieldAffectsData } from '../../fields/config/types.js'\nimport { mergeBaseFields } from '../../fields/mergeBaseFields.js'\nimport { flattenAllFields } from '../../utilities/flattenAllFields.js'\nimport { toWords } from '../../utilities/formatLabels.js'\nimport { traverseForLocalizedFields } from '../../utilities/traverseForLocalizedFields.js'\nimport { baseVersionFields } from '../../versions/baseFields.js'\nimport { versionDefaults } from '../../versions/defaults.js'\nimport { defaultGlobalEndpoints } from '../endpoints/index.js'\nexport const sanitizeGlobal = async (\n  config: Config,\n  global: GlobalConfig,\n  /**\n   * If this property is set, RichText fields won't be sanitized immediately. Instead, they will be added to this array as promises\n   * so that you can sanitize them together, after the config has been sanitized.\n   */\n  richTextSanitizationPromises?: Array<(config: SanitizedConfig) => Promise<void>>,\n  _validRelationships?: string[],\n): Promise<SanitizedGlobalConfig> => {\n  if (global._sanitized) {\n    return global as SanitizedGlobalConfig\n  }\n\n  global._sanitized = true\n\n  global.label = global.label || toWords(global.slug)\n\n  // /////////////////////////////////\n  // Ensure that collection has required object structure\n  // /////////////////////////////////\n\n  global.endpoints = global.endpoints ?? []\n\n  if (!global.hooks) {\n    global.hooks = {}\n  }\n\n  if (!global.access) {\n    global.access = {}\n  }\n\n  if (!global.admin) {\n    global.admin = {}\n  }\n\n  if (!global.access.read) {\n    global.access.read = defaultAccess\n  }\n\n  if (!global.access.update) {\n    global.access.update = defaultAccess\n  }\n\n  if (!global.hooks.beforeValidate) {\n    global.hooks.beforeValidate = []\n  }\n\n  if (!global.hooks.beforeChange) {\n    global.hooks.beforeChange = []\n  }\n\n  if (!global.hooks.afterChange) {\n    global.hooks.afterChange = []\n  }\n\n  if (!global.hooks.beforeRead) {\n    global.hooks.beforeRead = []\n  }\n\n  if (!global.hooks.afterRead) {\n    global.hooks.afterRead = []\n  }\n\n  // Sanitize fields\n  const validRelationships = _validRelationships ?? config.collections?.map((c) => c.slug) ?? []\n\n  global.fields = await sanitizeFields({\n    config,\n    fields: global.fields,\n    globalConfig: global,\n    parentIsLocalized: false,\n    richTextSanitizationPromises,\n    validRelationships,\n  })\n\n  if (global.endpoints !== false) {\n    if (!global.endpoints) {\n      global.endpoints = []\n    }\n\n    for (const endpoint of defaultGlobalEndpoints) {\n      global.endpoints.push(endpoint)\n    }\n  }\n\n  if (global.versions) {\n    if (global.versions === true) {\n      global.versions = {\n        drafts: false,\n        max: 100,\n      }\n    }\n\n    global.versions.max = typeof global.versions.max === 'number' ? global.versions.max : 100\n\n    if (global.versions.drafts) {\n      if (global.versions.drafts === true) {\n        global.versions.drafts = {\n          autosave: false,\n          validate: false,\n        }\n      }\n\n      const hasLocalizedFields = traverseForLocalizedFields(global.fields)\n\n      if (config.localization && hasLocalizedFields) {\n        if (global.versions.drafts.localizeStatus === undefined) {\n          global.versions.drafts.localizeStatus = false\n        }\n      }\n\n      global.versions.drafts.localizeStatus = config.experimental?.localizeStatus\n        ? global.versions.drafts.localizeStatus\n        : false\n\n      if (global.versions.drafts.autosave === true) {\n        global.versions.drafts.autosave = {\n          interval: versionDefaults.autosaveInterval,\n        }\n      }\n\n      if (global.versions.drafts.validate === undefined) {\n        global.versions.drafts.validate = false\n      }\n\n      global.fields = mergeBaseFields(\n        global.fields,\n        baseVersionFields({\n          localized: global.versions.drafts.localizeStatus ?? false,\n        }),\n      )\n    }\n  }\n\n  if (!global.custom) {\n    global.custom = {}\n  }\n\n  // /////////////////////////////////\n  // Sanitize fields\n  // /////////////////////////////////\n  let hasUpdatedAt: boolean | null = null\n  let hasCreatedAt: boolean | null = null\n  global.fields.some((field) => {\n    if (fieldAffectsData(field)) {\n      if (field.name === 'updatedAt') {\n        hasUpdatedAt = true\n      }\n      if (field.name === 'createdAt') {\n        hasCreatedAt = true\n      }\n    }\n    return hasCreatedAt && hasUpdatedAt\n  })\n  if (!hasUpdatedAt) {\n    global.fields.push({\n      name: 'updatedAt',\n      type: 'date',\n      admin: {\n        disableBulkEdit: true,\n        hidden: true,\n      },\n      label: ({ t }) => t('general:updatedAt'),\n    })\n  }\n  if (!hasCreatedAt) {\n    global.fields.push({\n      name: 'createdAt',\n      type: 'date',\n      admin: {\n        disableBulkEdit: true,\n        hidden: true,\n      },\n      label: ({ t }) => t('general:createdAt'),\n    })\n  }\n\n  ;(global as SanitizedGlobalConfig).flattenedFields = flattenAllFields({ fields: global.fields })\n\n  return global as SanitizedGlobalConfig\n}\n"],"names":["defaultAccess","sanitizeFields","fieldAffectsData","mergeBaseFields","flattenAllFields","toWords","traverseForLocalizedFields","baseVersionFields","versionDefaults","defaultGlobalEndpoints","sanitizeGlobal","config","global","richTextSanitizationPromises","_validRelationships","_sanitized","label","slug","endpoints","hooks","access","admin","read","update","beforeValidate","beforeChange","afterChange","beforeRead","afterRead","validRelationships","collections","map","c","fields","globalConfig","parentIsLocalized","endpoint","push","versions","drafts","max","autosave","validate","hasLocalizedFields","localization","localizeStatus","undefined","experimental","interval","autosaveInterval","localized","custom","hasUpdatedAt","hasCreatedAt","some","field","name","type","disableBulkEdit","hidden","t","flattenedFields"],"mappings":"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"}},
    {"offset": {"line": 7498, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/transformWhereQuery.ts"],"sourcesContent":["import type { Where } from '../types/index.js'\n\n/**\n * Transforms a basic \"where\" query into a format in which the \"where builder\" can understand.\n * Even though basic queries are valid, we need to hoist them into the \"and\" / \"or\" format.\n * Use this function alongside `validateWhereQuery` to check that for valid queries before transforming.\n * @example\n * Inaccurate: [text][equals]=example%20post\n * Accurate: [or][0][and][0][text][equals]=example%20post\n */\nexport const transformWhereQuery = (whereQuery: Where): Where => {\n  if (!whereQuery) {\n    return {}\n  }\n\n  // Check if 'whereQuery' has 'or' field but no 'and'. This is the case for \"correct\" queries\n  if (whereQuery.or && !whereQuery.and) {\n    return {\n      or: whereQuery.or.map((query) => {\n        // ...but if the or query does not have an and, we need to add it\n        if (!query.and) {\n          return {\n            and: [query],\n          }\n        }\n        return query\n      }),\n    }\n  }\n\n  // Check if 'whereQuery' has 'and' field but no 'or'.\n  if (whereQuery.and && !whereQuery.or) {\n    return {\n      or: [\n        {\n          and: whereQuery.and,\n        },\n      ],\n    }\n  }\n\n  // Check if 'whereQuery' has neither 'or' nor 'and'.\n  if (!whereQuery.or && !whereQuery.and) {\n    return {\n      or: [\n        {\n          and: [whereQuery], // top-level siblings are considered 'and'\n        },\n      ],\n    }\n  }\n\n  // If 'whereQuery' has 'or' and 'and', just return it as it is.\n  return whereQuery\n}\n"],"names":["transformWhereQuery","whereQuery","or","and","map","query"],"mappings":"AAEA;;;;;;;CAOC,GACD;;;;AAAO,MAAMA,sBAAsB,CAACC;IAClC,IAAI,CAACA,YAAY;QACf,OAAO,CAAC;IACV;IAEA,4FAA4F;IAC5F,IAAIA,WAAWC,EAAE,IAAI,CAACD,WAAWE,GAAG,EAAE;QACpC,OAAO;YACLD,IAAID,WAAWC,EAAE,CAACE,GAAG,CAAC,CAACC;gBACrB,iEAAiE;gBACjE,IAAI,CAACA,MAAMF,GAAG,EAAE;oBACd,OAAO;wBACLA,KAAK;4BAACE;yBAAM;oBACd;gBACF;gBACA,OAAOA;YACT;QACF;IACF;IAEA,qDAAqD;IACrD,IAAIJ,WAAWE,GAAG,IAAI,CAACF,WAAWC,EAAE,EAAE;QACpC,OAAO;YACLA,IAAI;gBACF;oBACEC,KAAKF,WAAWE,GAAG;gBACrB;aACD;QACH;IACF;IAEA,oDAAoD;IACpD,IAAI,CAACF,WAAWC,EAAE,IAAI,CAACD,WAAWE,GAAG,EAAE;QACrC,OAAO;YACLD,IAAI;gBACF;oBACEC,KAAK;wBAACF;qBAAW;gBACnB;aACD;QACH;IACF;IAEA,+DAA+D;IAC/D,OAAOA;AACT,EAAC"}},
    {"offset": {"line": 7558, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/validateWhereQuery.ts"],"sourcesContent":["import type { Operator, Where } from '../types/index.js'\n\nimport { validOperatorSet } from '../types/constants.js'\n\n/**\n * Validates that a \"where\" query is in a format in which the \"where builder\" can understand.\n * Even though basic queries are valid, we need to hoist them into the \"and\" / \"or\" format.\n * Use this function alongside `transformWhereQuery` to perform a transformation if the query is not valid.\n * @example\n * Inaccurate: [text][equals]=example%20post\n * Accurate: [or][0][and][0][text][equals]=example%20post\n */\nexport const validateWhereQuery = (whereQuery: Where): whereQuery is Where => {\n  if (\n    whereQuery?.or &&\n    (whereQuery?.or?.length === 0 ||\n      (whereQuery?.or?.length > 0 &&\n        whereQuery?.or?.[0]?.and &&\n        whereQuery?.or?.[0]?.and?.length > 0))\n  ) {\n    // At this point we know that the whereQuery has 'or' and 'and' fields,\n    // now let's check the structure and content of these fields.\n\n    const isValid = whereQuery.or.every((orQuery) => {\n      if (orQuery.and && Array.isArray(orQuery.and)) {\n        return orQuery.and.every((andQuery) => {\n          if (typeof andQuery !== 'object') {\n            return false\n          }\n\n          const andKeys = Object.keys(andQuery)\n\n          // If there are no keys, it's not a valid WhereField.\n          if (andKeys.length === 0) {\n            return false\n          }\n\n          for (const key of andKeys) {\n            const operator = Object.keys(andQuery[key]!)[0]\n            // Check if the key is a valid Operator.\n            if (!operator || !validOperatorSet.has(operator as Operator)) {\n              return false\n            }\n          }\n          return true\n        })\n      }\n      return false\n    })\n\n    return isValid\n  }\n\n  return false\n}\n"],"names":["validOperatorSet","validateWhereQuery","whereQuery","or","length","and","isValid","every","orQuery","Array","isArray","andQuery","andKeys","Object","keys","key","operator","has"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,wBAAuB;;AAUjD,MAAMC,qBAAqB,CAACC;IACjC,IACEA,YAAYC,MACXD,CAAAA,YAAYC,IAAIC,WAAW,KACzBF,YAAYC,IAAIC,SAAS,KACxBF,YAAYC,IAAI,CAAC,EAAE,EAAEE,OACrBH,YAAYC,IAAI,CAAC,EAAE,EAAEE,KAAKD,SAAS,CAAC,GACxC;QACA,uEAAuE;QACvE,6DAA6D;QAE7D,MAAME,UAAUJ,WAAWC,EAAE,CAACI,KAAK,CAAC,CAACC;YACnC,IAAIA,QAAQH,GAAG,IAAII,MAAMC,OAAO,CAACF,QAAQH,GAAG,GAAG;gBAC7C,OAAOG,QAAQH,GAAG,CAACE,KAAK,CAAC,CAACI;oBACxB,IAAI,OAAOA,aAAa,UAAU;wBAChC,OAAO;oBACT;oBAEA,MAAMC,UAAUC,OAAOC,IAAI,CAACH;oBAE5B,qDAAqD;oBACrD,IAAIC,QAAQR,MAAM,KAAK,GAAG;wBACxB,OAAO;oBACT;oBAEA,KAAK,MAAMW,OAAOH,QAAS;wBACzB,MAAMI,WAAWH,OAAOC,IAAI,CAACH,QAAQ,CAACI,IAAI,CAAE,CAAC,EAAE;wBAC/C,wCAAwC;wBACxC,IAAI,CAACC,YAAY,CAAChB,2KAAAA,CAAiBiB,GAAG,CAACD,WAAuB;4BAC5D,OAAO;wBACT;oBACF;oBACA,OAAO;gBACT;YACF;YACA,OAAO;QACT;QAEA,OAAOV;IACT;IAEA,OAAO;AACT,EAAC"}},
    {"offset": {"line": 7599, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/query-presets/access.ts"],"sourcesContent":["import type { Access, Config } from '../config/types.js'\nimport type { Operation } from '../types/index.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\n\nconst operations: Operation[] = ['delete', 'read', 'update', 'create'] as const\n\nconst defaultCollectionAccess = {\n  create: defaultAccess,\n  delete: defaultAccess,\n  read: defaultAccess,\n  unlock: defaultAccess,\n  update: defaultAccess,\n}\n\nexport const getAccess = (config: Config): Record<Operation, Access> =>\n  operations.reduce(\n    (acc, operation) => {\n      acc[operation] = async (args) => {\n        const { req } = args\n\n        const collectionAccess = config?.queryPresets?.access?.[operation]\n          ? await config.queryPresets.access[operation](args)\n          : defaultCollectionAccess?.[operation]\n            ? defaultCollectionAccess[operation](args)\n            : true\n\n        // If collection-level access control is `false`, no need to continue to document-level access\n        if (collectionAccess === false) {\n          return false\n        }\n\n        // The `create` operation does not affect the document-level access control\n        if (operation === 'create') {\n          return collectionAccess\n        }\n\n        return {\n          and: [\n            {\n              or: [\n                // Default access control ensures a user exists, but custom access control may not\n                ...(req?.user\n                  ? [\n                      {\n                        and: [\n                          {\n                            [`access.${operation}.users`]: {\n                              in: [req.user.id],\n                            },\n                          },\n                          {\n                            [`access.${operation}.constraint`]: {\n                              in: ['onlyMe', 'specificUsers'],\n                            },\n                          },\n                        ],\n                      },\n                    ]\n                  : []),\n                {\n                  [`access.${operation}.constraint`]: {\n                    equals: 'everyone',\n                  },\n                },\n                ...(await Promise.all(\n                  (config?.queryPresets?.constraints?.[operation] || []).map(async (constraint) => {\n                    const constraintAccess = constraint.access\n                      ? await constraint.access(args)\n                      : undefined\n\n                    return {\n                      and: [\n                        ...(typeof constraintAccess === 'object'\n                          ? [constraintAccess]\n                          : constraintAccess === false\n                            ? [\n                                {\n                                  id: {\n                                    equals: null,\n                                  },\n                                },\n                              ]\n                            : []),\n                        {\n                          [`access.${operation}.constraint`]: {\n                            equals: constraint.value,\n                          },\n                        },\n                      ],\n                    }\n                  }),\n                )),\n              ],\n            },\n            ...(typeof collectionAccess === 'object' ? [collectionAccess] : []),\n          ],\n        }\n      }\n\n      return acc\n    },\n    {} as Record<Operation, Access>,\n  )\n"],"names":["defaultAccess","operations","defaultCollectionAccess","create","delete","read","unlock","update","getAccess","config","reduce","acc","operation","args","req","collectionAccess","queryPresets","access","and","or","user","in","id","equals","Promise","all","constraints","map","constraint","constraintAccess","undefined","value"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;;AAExD,MAAMC,aAA0B;IAAC;IAAU;IAAQ;IAAU;CAAS;AAEtE,MAAMC,0BAA0B;IAC9BC,QAAQH,2KAAAA;IACRI,QAAQJ,2KAAAA;IACRK,MAAML,2KAAAA;IACNM,QAAQN,2KAAAA;IACRO,QAAQP,2KAAAA;AACV;AAEO,MAAMQ,YAAY,CAACC,SACxBR,WAAWS,MAAM,CACf,CAACC,KAAKC;QACJD,GAAG,CAACC,UAAU,GAAG,OAAOC;YACtB,MAAM,EAAEC,GAAG,EAAE,GAAGD;YAEhB,MAAME,mBAAmBN,QAAQO,cAAcC,QAAQ,CAACL,UAAU,GAC9D,MAAMH,OAAOO,YAAY,CAACC,MAAM,CAACL,UAAU,CAACC,QAC5CX,yBAAyB,CAACU,UAAU,GAClCV,uBAAuB,CAACU,UAAU,CAACC,QACnC;YAEN,8FAA8F;YAC9F,IAAIE,qBAAqB,OAAO;gBAC9B,OAAO;YACT;YAEA,2EAA2E;YAC3E,IAAIH,cAAc,UAAU;gBAC1B,OAAOG;YACT;YAEA,OAAO;gBACLG,KAAK;oBACH;wBACEC,IAAI;4BACF,kFAAkF;+BAC9EL,KAAKM,OACL;gCACE;oCACEF,KAAK;wCACH;4CACE,CAAC,CAAC,OAAO,EAAEN,UAAU,MAAM,CAAC,CAAC,EAAE;gDAC7BS,IAAI;oDAACP,IAAIM,IAAI,CAACE,EAAE;iDAAC;4CACnB;wCACF;wCACA;4CACE,CAAC,CAAC,OAAO,EAAEV,UAAU,WAAW,CAAC,CAAC,EAAE;gDAClCS,IAAI;oDAAC;oDAAU;iDAAgB;4CACjC;wCACF;qCACD;gCACH;6BACD,GACD,EAAE;4BACN;gCACE,CAAC,CAAC,OAAO,EAAET,UAAU,WAAW,CAAC,CAAC,EAAE;oCAClCW,QAAQ;gCACV;4BACF;+BACI,MAAMC,QAAQC,GAAG,CAClBhB,CAAAA,QAAQO,cAAcU,aAAa,CAACd,UAAU,IAAI,EAAC,EAAGe,GAAG,CAAC,OAAOC;gCAChE,MAAMC,mBAAmBD,WAAWX,MAAM,GACtC,MAAMW,WAAWX,MAAM,CAACJ,QACxBiB;gCAEJ,OAAO;oCACLZ,KAAK;2CACC,OAAOW,qBAAqB,WAC5B;4CAACA;yCAAiB,GAClBA,qBAAqB,QACnB;4CACE;gDACEP,IAAI;oDACFC,QAAQ;gDACV;4CACF;yCACD,GACD,EAAE;wCACR;4CACE,CAAC,CAAC,OAAO,EAAEX,UAAU,WAAW,CAAC,CAAC,EAAE;gDAClCW,QAAQK,WAAWG,KAAK;4CAC1B;wCACF;qCACD;gCACH;4BACF;yBAEH;oBACH;uBACI,OAAOhB,qBAAqB,WAAW;wBAACA;qBAAiB,GAAG,EAAE;iBACnE;YACH;QACF;QAEA,OAAOJ;IACT,GACA,CAAC,GACF"}},
    {"offset": {"line": 7696, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/query-presets/preventLockout.ts"],"sourcesContent":["import type { Validate } from '../fields/config/types.js'\n\nimport { APIError } from '../errors/APIError.js'\nimport { createLocalReq } from '../utilities/createLocalReq.js'\nimport { initTransaction } from '../utilities/initTransaction.js'\nimport { killTransaction } from '../utilities/killTransaction.js'\nimport { queryPresetsCollectionSlug } from './config.js'\n\n/**\n * Prevents \"accidental lockouts\" where a user makes an update that removes their own access to the preset.\n * This is effectively an access control function proxied through a `validate` function.\n * How it works:\n *   1. Creates a temporary record with the incoming data\n *   2. Attempts to read and update that record with the incoming user\n *   3. If either of those fail, throws an error to the user\n *   4. Once finished, prevents the temp record from persisting to the database\n */\nexport const preventLockout: Validate = async (\n  value,\n  { data, overrideAccess, req: incomingReq },\n) => {\n  // Use context to ensure an infinite loop doesn't occur\n  if (!incomingReq.context._preventLockout && !overrideAccess) {\n    const req = await createLocalReq(\n      {\n        context: {\n          _preventLockout: true,\n        },\n        req: {\n          user: incomingReq.user,\n        },\n      },\n      incomingReq.payload,\n    )\n\n    // Might be `null` if no transactions are enabled\n    const transaction = await initTransaction(req)\n\n    // create a temp record to validate the constraints, using the req\n    const tempPreset = await req.payload.create({\n      collection: queryPresetsCollectionSlug,\n      data: {\n        ...data,\n        isTemp: true,\n      },\n      req,\n    })\n\n    let canUpdate = false\n    let canRead = false\n\n    try {\n      await req.payload.findByID({\n        id: tempPreset.id,\n        collection: queryPresetsCollectionSlug,\n        overrideAccess: false,\n        req,\n        user: req.user,\n      })\n\n      canRead = true\n\n      await req.payload.update({\n        id: tempPreset.id,\n        collection: queryPresetsCollectionSlug,\n        data: tempPreset,\n        overrideAccess: false,\n        req,\n        user: req.user,\n      })\n\n      canUpdate = true\n    } catch (_err) {\n      if (!canRead || !canUpdate) {\n        throw new APIError('This action will lock you out of this preset.', 403, {}, true)\n      }\n    } finally {\n      if (transaction) {\n        await killTransaction(req)\n      } else {\n        // delete the temp record\n        await req.payload.delete({\n          id: tempPreset.id,\n          collection: queryPresetsCollectionSlug,\n          req,\n        })\n      }\n    }\n  }\n\n  return true as unknown as true\n}\n"],"names":["APIError","createLocalReq","initTransaction","killTransaction","queryPresetsCollectionSlug","preventLockout","value","data","overrideAccess","req","incomingReq","context","_preventLockout","user","payload","transaction","tempPreset","create","collection","isTemp","canUpdate","canRead","findByID","id","update","_err","delete"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,cAAc,QAAQ,iCAAgC;AAC/D,SAASC,eAAe,QAAQ,kCAAiC;AACjE,SAASC,eAAe,QAAQ,kCAAiC;AACjE,SAASC,0BAA0B,QAAQ,cAAa;;;;;;AAWjD,MAAMC,iBAA2B,OACtCC,OACA,EAAEC,IAAI,EAAEC,cAAc,EAAEC,KAAKC,WAAW,EAAE;IAE1C,uDAAuD;IACvD,IAAI,CAACA,YAAYC,OAAO,CAACC,eAAe,IAAI,CAACJ,gBAAgB;QAC3D,MAAMC,MAAM,UAAMR,kLAAAA,EAChB;YACEU,SAAS;gBACPC,iBAAiB;YACnB;YACAH,KAAK;gBACHI,MAAMH,YAAYG,IAAI;YACxB;QACF,GACAH,YAAYI,OAAO;QAGrB,iDAAiD;QACjD,MAAMC,cAAc,UAAMb,oLAAAA,EAAgBO;QAE1C,kEAAkE;QAClE,MAAMO,aAAa,MAAMP,IAAIK,OAAO,CAACG,MAAM,CAAC;YAC1CC,YAAYd,6LAAAA;YACZG,MAAM;gBACJ,GAAGA,IAAI;gBACPY,QAAQ;YACV;YACAV;QACF;QAEA,IAAIW,YAAY;QAChB,IAAIC,UAAU;QAEd,IAAI;YACF,MAAMZ,IAAIK,OAAO,CAACQ,QAAQ,CAAC;gBACzBC,IAAIP,WAAWO,EAAE;gBACjBL,YAAYd,6LAAAA;gBACZI,gBAAgB;gBAChBC;gBACAI,MAAMJ,IAAII,IAAI;YAChB;YAEAQ,UAAU;YAEV,MAAMZ,IAAIK,OAAO,CAACU,MAAM,CAAC;gBACvBD,IAAIP,WAAWO,EAAE;gBACjBL,YAAYd,6LAAAA;gBACZG,MAAMS;gBACNR,gBAAgB;gBAChBC;gBACAI,MAAMJ,IAAII,IAAI;YAChB;YAEAO,YAAY;QACd,EAAE,OAAOK,MAAM;YACb,IAAI,CAACJ,WAAW,CAACD,WAAW;gBAC1B,MAAM,IAAIpB,mKAAAA,CAAS,iDAAiD,KAAK,CAAC,GAAG;YAC/E;QACF,SAAU;YACR,IAAIe,aAAa;gBACf,UAAMZ,oLAAAA,EAAgBM;YACxB,OAAO;gBACL,yBAAyB;gBACzB,MAAMA,IAAIK,OAAO,CAACY,MAAM,CAAC;oBACvBH,IAAIP,WAAWO,EAAE;oBACjBL,YAAYd,6LAAAA;oBACZK;gBACF;YACF;QACF;IACF;IAEA,OAAO;AACT,EAAC"}},
    {"offset": {"line": 7775, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/query-presets/types.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\nimport type { Access, CollectionSlug } from '../index.js'\nimport type { CollectionPreferences } from '../preferences/types.js'\nimport type { Where } from '../types/index.js'\n\n// Note: order matters here as it will change the rendered order in the UI\nexport const operations = ['read', 'update', 'delete'] as const\n\nexport type ConstraintOperation = (typeof operations)[number]\n\nexport type DefaultConstraint = 'everyone' | 'onlyMe' | 'specificUsers'\n\nexport type Constraint = DefaultConstraint | string // TODO: type `string` as the custom constraints provided by the config\n\nexport type QueryPreset = {\n  access: {\n    [operation in ConstraintOperation]: {\n      constraint: DefaultConstraint\n      users?: string[]\n    }\n  }\n  columns: CollectionPreferences['columns']\n  groupBy?: string\n  id: number | string\n  isShared: boolean\n  relatedCollection: CollectionSlug\n  title: string\n  where: Where\n}\n\nexport type QueryPresetConstraint = {\n  /**\n   * A function that determines the access control rules for this constraint.\n   */\n  access: Access<QueryPreset>\n  /**\n   * An array of fields to render when this constraint is selected.\n   */\n  fields?: Field[]\n  /**\n   * The label displayed in the dropdown\n   */\n  label: string\n  /**\n   * The value to store in the database when this constraint is selected.\n   */\n  value: string\n}\n\nexport type QueryPresetConstraints = QueryPresetConstraint[]\n"],"names":["operations"],"mappings":"AAKA,0EAA0E;;;;;AACnE,MAAMA,aAAa;IAAC;IAAQ;IAAU;CAAS,CAAS"}},
    {"offset": {"line": 7789, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/query-presets/constraints.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\n\nimport type { Config } from '../config/types.js'\nimport type { Field, Option } from '../fields/config/types.js'\nimport type { QueryPresetConstraint } from './types.js'\n\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { toWords } from '../utilities/formatLabels.js'\nimport { preventLockout } from './preventLockout.js'\nimport { operations } from './types.js'\n\nconst defaultConstraintOptions: Option[] = [\n  {\n    label: 'Everyone',\n    value: 'everyone',\n  },\n  {\n    label: 'Only Me',\n    value: 'onlyMe',\n  },\n  {\n    label: 'Specific Users',\n    value: 'specificUsers',\n  },\n]\n\nexport const getConstraints = (config: Config): Field => ({\n  name: 'access',\n  type: 'group',\n  admin: {\n    components: {\n      Cell: '@payloadcms/next/client#QueryPresetsAccessCell',\n    },\n    condition: (data) => Boolean(data?.isShared),\n  },\n  fields: operations.map((constraintOperation) => ({\n    type: 'collapsible',\n    fields: [\n      {\n        name: constraintOperation,\n        type: 'group',\n        admin: {\n          hideGutter: true,\n        },\n        fields: [\n          {\n            name: 'constraint',\n            type: 'select',\n            defaultValue: 'onlyMe',\n            filterOptions: (args) =>\n              typeof config?.queryPresets?.filterConstraints === 'function'\n                ? config.queryPresets.filterConstraints(args)\n                : args.options,\n            label: ({ i18n }) =>\n              `Specify who can ${constraintOperation} this ${getTranslation(config.queryPresets?.labels?.singular || 'Preset', i18n)}`,\n            options: [\n              ...defaultConstraintOptions,\n              ...(config?.queryPresets?.constraints?.[constraintOperation]?.map(\n                (option: QueryPresetConstraint) => ({\n                  label: option.label,\n                  value: option.value,\n                }),\n              ) || []),\n            ],\n          },\n          {\n            name: 'users',\n            type: 'relationship',\n            admin: {\n              condition: (data) =>\n                Boolean(data?.access?.[constraintOperation]?.constraint === 'specificUsers'),\n            },\n            hasMany: true,\n            hooks: {\n              beforeChange: [\n                ({ data, req }) => {\n                  if (data?.access?.[constraintOperation]?.constraint === 'onlyMe' && req.user) {\n                    return [req.user.id]\n                  }\n\n                  if (\n                    data?.access?.[constraintOperation]?.constraint === 'specificUsers' &&\n                    req.user\n                  ) {\n                    return [...(data?.access?.[constraintOperation]?.users || []), req.user.id]\n                  }\n                },\n              ],\n            },\n            relationTo: config.admin?.user ?? 'users', // TODO: remove this fallback when the args are properly typed as `SanitizedConfig`\n          },\n          ...(config?.queryPresets?.constraints?.[constraintOperation]?.reduce(\n            (acc: Field[], option: QueryPresetConstraint) => {\n              option.fields?.forEach((field, index) => {\n                acc.push({ ...field })\n\n                if (fieldAffectsData(field)) {\n                  acc[index]!.admin = {\n                    ...(acc[index]?.admin || {}),\n                    condition: (data) =>\n                      Boolean(data?.access?.[constraintOperation]?.constraint === option.value),\n                  }\n                }\n              })\n\n              return acc\n            },\n            [] as Field[],\n          ) || []),\n        ],\n        label: false,\n      },\n    ],\n    label: () => toWords(constraintOperation),\n  })),\n  label: 'Sharing settings',\n  validate: preventLockout,\n})\n"],"names":["getTranslation","fieldAffectsData","toWords","preventLockout","operations","defaultConstraintOptions","label","value","getConstraints","config","name","type","admin","components","Cell","condition","data","Boolean","isShared","fields","map","constraintOperation","hideGutter","defaultValue","filterOptions","args","queryPresets","filterConstraints","options","i18n","labels","singular","constraints","option","access","constraint","hasMany","hooks","beforeChange","req","user","id","users","relationTo","reduce","acc","forEach","field","index","push","validate"],"mappings":"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"}},
    {"offset": {"line": 7903, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/query-presets/config.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Config } from '../config/types.js'\nimport type { Option } from '../fields/config/types.js'\n\nimport { transformWhereQuery } from '../utilities/transformWhereQuery.js'\nimport { validateWhereQuery } from '../utilities/validateWhereQuery.js'\nimport { getAccess } from './access.js'\nimport { getConstraints } from './constraints.js'\nimport { operations, type QueryPreset } from './types.js'\n\nexport const queryPresetsCollectionSlug = 'payload-query-presets'\n\nexport const getQueryPresetsConfig = (config: Config): CollectionConfig => ({\n  slug: queryPresetsCollectionSlug,\n  access: getAccess(config),\n  admin: {\n    defaultColumns: ['title', 'isShared', 'access', 'where', 'columns', 'groupBy'],\n    hidden: true,\n    useAsTitle: 'title',\n  },\n  fields: [\n    {\n      name: 'title',\n      type: 'text',\n      required: true,\n    },\n    {\n      name: 'isShared',\n      type: 'checkbox',\n      defaultValue: false,\n      validate: (isShared, { data }) => {\n        const typedData = data as QueryPreset\n\n        // ensure the `isShared` is only true if all constraints are 'onlyMe'\n        if (typedData?.access) {\n          const someOperationsAreShared = Object.values(typedData.access).some(\n            (operation) => operation.constraint !== 'onlyMe',\n          )\n\n          if (!isShared && someOperationsAreShared) {\n            return 'If any constraint is not \"onlyMe\", the preset must be shared'\n          }\n        }\n\n        return true\n      },\n    },\n    getConstraints(config),\n    {\n      name: 'where',\n      type: 'json',\n      admin: {\n        components: {\n          Cell: '@payloadcms/next/client#QueryPresetsWhereCell',\n          Field: '@payloadcms/next/client#QueryPresetsWhereField',\n        },\n      },\n      hooks: {\n        beforeValidate: [\n          ({ data }) => {\n            // transform the \"where\" query here so that the client-side doesn't have to\n            if (data?.where) {\n              if (validateWhereQuery(data.where)) {\n                return data.where\n              } else {\n                return transformWhereQuery(data.where)\n              }\n            }\n\n            return data?.where\n          },\n        ],\n      },\n      label: 'Filters',\n    },\n    {\n      name: 'columns',\n      type: 'json',\n      admin: {\n        components: {\n          Cell: '@payloadcms/next/client#QueryPresetsColumnsCell',\n          Field: '@payloadcms/next/client#QueryPresetsColumnField',\n        },\n      },\n      validate: (value) => {\n        if (value) {\n          try {\n            JSON.parse(JSON.stringify(value))\n          } catch {\n            return 'Invalid JSON'\n          }\n        }\n\n        return true\n      },\n    },\n    {\n      name: 'groupBy',\n      type: 'text',\n      admin: {\n        components: {\n          Cell: '@payloadcms/next/client#QueryPresetsGroupByCell',\n          Field: '@payloadcms/next/client#QueryPresetsGroupByField',\n        },\n      },\n      label: 'Group By',\n    },\n    {\n      name: 'relatedCollection',\n      type: 'select',\n      admin: {\n        hidden: true,\n      },\n      options: config.collections\n        ? config.collections.reduce((acc, collection) => {\n            if (collection.enableQueryPresets) {\n              acc.push({\n                label: collection.labels?.plural || collection.slug,\n                value: collection.slug,\n              })\n            }\n            return acc\n          }, [] as Option[])\n        : [],\n      required: true,\n    },\n    {\n      name: 'isTemp',\n      type: 'checkbox',\n      admin: {\n        description:\n          \"This is a temporary field used to determine if updating the preset would remove the user's access to it. When `true`, this record will be deleted after running the preset's `validate` function.\",\n        disabled: true,\n        hidden: true,\n      },\n    },\n  ],\n  hooks: {\n    beforeValidate: [\n      ({ data, operation }) => {\n        // TODO: type this\n        const typedData = data as any\n\n        if (operation === 'create' || operation === 'update') {\n          // Ensure all operations have a constraint\n          operations.forEach((operation) => {\n            if (!typedData.access) {\n              typedData.access = {}\n            }\n\n            if (!typedData.access?.[operation]) {\n              typedData[operation] = {}\n            }\n\n            // Ensure all operations have a constraint\n            if (!typedData.access[operation]?.constraint) {\n              typedData.access[operation] = {\n                ...typedData.access[operation],\n                constraint: 'onlyMe',\n              }\n            }\n          })\n\n          // If at least one constraint is not `onlyMe` then `isShared` must be true\n          if (typedData?.access) {\n            const someOperationsAreShared = Object.values(typedData.access).some(\n              // TODO: remove the `any` here\n              (operation: any) => operation.constraint !== 'onlyMe',\n            )\n\n            typedData.isShared = someOperationsAreShared\n          }\n        }\n\n        return typedData\n      },\n    ],\n  },\n  labels: {\n    plural: 'Presets',\n    singular: 'Preset',\n    ...(config.queryPresets?.labels || {}),\n  },\n  lockDocuments: false,\n})\n"],"names":["transformWhereQuery","validateWhereQuery","getAccess","getConstraints","operations","queryPresetsCollectionSlug","getQueryPresetsConfig","config","slug","access","admin","defaultColumns","hidden","useAsTitle","fields","name","type","required","defaultValue","validate","isShared","data","typedData","someOperationsAreShared","Object","values","some","operation","constraint","components","Cell","Field","hooks","beforeValidate","where","label","value","JSON","parse","stringify","options","collections","reduce","acc","collection","enableQueryPresets","push","labels","plural","description","disabled","forEach","singular","queryPresets","lockDocuments"],"mappings":"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"}},
    {"offset": {"line": 8085, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/versions/schedule/job.ts"],"sourcesContent":["import type { Field } from '../../fields/config/types.js'\nimport type { TypedUser } from '../../index.js'\nimport type { TaskConfig } from '../../queues/config/types/taskTypes.js'\nimport type { SchedulePublishTaskInput } from './types.js'\n\ntype Args = {\n  adminUserSlug: string\n  collections: string[]\n  globals: string[]\n}\n\nexport const getSchedulePublishTask = ({\n  adminUserSlug,\n  collections,\n  globals,\n}: Args): TaskConfig<{ input: SchedulePublishTaskInput; output: object }> => {\n  return {\n    slug: 'schedulePublish',\n    handler: async ({ input, req }) => {\n      const _status = input?.type === 'publish' || !input?.type ? 'published' : 'draft'\n\n      const userID = input.user\n\n      let user: null | TypedUser = null\n\n      if (userID) {\n        user = (await req.payload.findByID({\n          id: userID,\n          collection: adminUserSlug,\n          depth: 0,\n        })) as TypedUser\n\n        user.collection = adminUserSlug\n      }\n\n      let publishSpecificLocale: string\n\n      if (input?.type === 'publish' && input.locale && req.payload.config.localization) {\n        const matchedLocale = req.payload.config.localization.locales.find(\n          ({ code }) => code === input.locale,\n        )\n\n        if (matchedLocale) {\n          publishSpecificLocale = input.locale\n        }\n      }\n\n      if (input.doc) {\n        await req.payload.update({\n          id: input.doc.value,\n          collection: input.doc.relationTo,\n          data: {\n            _status,\n          },\n          depth: 0,\n          overrideAccess: user === null,\n          publishSpecificLocale: publishSpecificLocale!,\n          user,\n        })\n      }\n\n      if (input.global) {\n        await req.payload.updateGlobal({\n          slug: input.global,\n          data: {\n            _status,\n          },\n          depth: 0,\n          overrideAccess: user === null,\n          publishSpecificLocale: publishSpecificLocale!,\n          user,\n        })\n      }\n\n      return {\n        output: {},\n      }\n    },\n    inputSchema: [\n      {\n        name: 'type',\n        type: 'radio',\n        defaultValue: 'publish',\n        options: ['publish', 'unpublish'],\n      },\n      {\n        name: 'locale',\n        type: 'text',\n      },\n      ...(collections.length > 0\n        ? [\n            {\n              name: 'doc',\n              type: 'relationship',\n              relationTo: collections,\n            } satisfies Field,\n          ]\n        : []),\n      {\n        name: 'global',\n        type: 'select',\n        options: globals,\n      },\n      {\n        name: 'user',\n        type: 'relationship',\n        relationTo: adminUserSlug,\n      },\n    ],\n  }\n}\n"],"names":["getSchedulePublishTask","adminUserSlug","collections","globals","slug","handler","input","req","_status","type","userID","user","payload","findByID","id","collection","depth","publishSpecificLocale","locale","config","localization","matchedLocale","locales","find","code","doc","update","value","relationTo","data","overrideAccess","global","updateGlobal","output","inputSchema","name","defaultValue","options","length"],"mappings":";;;;AAWO,MAAMA,yBAAyB,CAAC,EACrCC,aAAa,EACbC,WAAW,EACXC,OAAO,EACF;IACL,OAAO;QACLC,MAAM;QACNC,SAAS,OAAO,EAAEC,KAAK,EAAEC,GAAG,EAAE;YAC5B,MAAMC,UAAUF,OAAOG,SAAS,aAAa,CAACH,OAAOG,OAAO,cAAc;YAE1E,MAAMC,SAASJ,MAAMK,IAAI;YAEzB,IAAIA,OAAyB;YAE7B,IAAID,QAAQ;gBACVC,OAAQ,MAAMJ,IAAIK,OAAO,CAACC,QAAQ,CAAC;oBACjCC,IAAIJ;oBACJK,YAAYd;oBACZe,OAAO;gBACT;gBAEAL,KAAKI,UAAU,GAAGd;YACpB;YAEA,IAAIgB;YAEJ,IAAIX,OAAOG,SAAS,aAAaH,MAAMY,MAAM,IAAIX,IAAIK,OAAO,CAACO,MAAM,CAACC,YAAY,EAAE;gBAChF,MAAMC,gBAAgBd,IAAIK,OAAO,CAACO,MAAM,CAACC,YAAY,CAACE,OAAO,CAACC,IAAI,CAChE,CAAC,EAAEC,IAAI,EAAE,GAAKA,SAASlB,MAAMY,MAAM;gBAGrC,IAAIG,eAAe;oBACjBJ,wBAAwBX,MAAMY,MAAM;gBACtC;YACF;YAEA,IAAIZ,MAAMmB,GAAG,EAAE;gBACb,MAAMlB,IAAIK,OAAO,CAACc,MAAM,CAAC;oBACvBZ,IAAIR,MAAMmB,GAAG,CAACE,KAAK;oBACnBZ,YAAYT,MAAMmB,GAAG,CAACG,UAAU;oBAChCC,MAAM;wBACJrB;oBACF;oBACAQ,OAAO;oBACPc,gBAAgBnB,SAAS;oBACzBM,uBAAuBA;oBACvBN;gBACF;YACF;YAEA,IAAIL,MAAMyB,MAAM,EAAE;gBAChB,MAAMxB,IAAIK,OAAO,CAACoB,YAAY,CAAC;oBAC7B5B,MAAME,MAAMyB,MAAM;oBAClBF,MAAM;wBACJrB;oBACF;oBACAQ,OAAO;oBACPc,gBAAgBnB,SAAS;oBACzBM,uBAAuBA;oBACvBN;gBACF;YACF;YAEA,OAAO;gBACLsB,QAAQ,CAAC;YACX;QACF;QACAC,aAAa;YACX;gBACEC,MAAM;gBACN1B,MAAM;gBACN2B,cAAc;gBACdC,SAAS;oBAAC;oBAAW;iBAAY;YACnC;YACA;gBACEF,MAAM;gBACN1B,MAAM;YACR;eACIP,YAAYoC,MAAM,GAAG,IACrB;gBACE;oBACEH,MAAM;oBACN1B,MAAM;oBACNmB,YAAY1B;gBACd;aACD,GACD,EAAE;YACN;gBACEiC,MAAM;gBACN1B,MAAM;gBACN4B,SAASlC;YACX;YACA;gBACEgC,MAAM;gBACN1B,MAAM;gBACNmB,YAAY3B;YACd;SACD;IACH;AACF,EAAC"}},
    {"offset": {"line": 8178, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/folders/constants.ts"],"sourcesContent":["export const foldersSlug = 'payload-folders'\nexport const parentFolderFieldName = 'folder'\n"],"names":["foldersSlug","parentFolderFieldName"],"mappings":";;;;;;AAAO,MAAMA,cAAc,kBAAiB;AACrC,MAAMC,wBAAwB,SAAQ"}},
    {"offset": {"line": 8190, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/kv/adapters/DatabaseKVAdapter.ts"],"sourcesContent":["import type { CollectionConfig } from '../../index.js'\nimport type { Payload, PayloadRequest } from '../../types/index.js'\nimport type { KVAdapter, KVAdapterResult, KVStoreValue } from '../index.js'\n\n/** Mocked `req`, we don't need to use transactions, neither we want `createLocalReq` overhead. */\nconst req = {} as PayloadRequest\n\nexport class DatabaseKVAdapter implements KVAdapter {\n  constructor(\n    readonly payload: Payload,\n    readonly collectionSlug: string,\n  ) {}\n\n  async clear(): Promise<void> {\n    await this.payload.db.deleteMany({\n      collection: this.collectionSlug,\n      req,\n      where: {},\n    })\n  }\n\n  async delete(key: string): Promise<void> {\n    await this.payload.db.deleteOne({\n      collection: this.collectionSlug,\n      req,\n      where: { key: { equals: key } },\n    })\n  }\n\n  async get<T extends KVStoreValue>(key: string): Promise<null | T> {\n    const doc = await this.payload.db.findOne<{\n      data: T\n      id: number | string\n    }>({\n      collection: this.collectionSlug,\n      joins: false,\n      req,\n      select: {\n        data: true,\n        key: true,\n      },\n      where: { key: { equals: key } },\n    })\n\n    if (doc === null) {\n      return null\n    }\n\n    return doc.data\n  }\n\n  async has(key: string): Promise<boolean> {\n    const { totalDocs } = await this.payload.db.count({\n      collection: this.collectionSlug,\n      req,\n      where: { key: { equals: key } },\n    })\n\n    return totalDocs > 0\n  }\n\n  async keys(): Promise<string[]> {\n    const result = await this.payload.db.find<{ key: string }>({\n      collection: this.collectionSlug,\n      limit: 0,\n      pagination: false,\n      req,\n      select: {\n        key: true,\n      },\n    })\n\n    return result.docs.map((each) => each.key)\n  }\n\n  async set(key: string, data: KVStoreValue): Promise<void> {\n    await this.payload.db.upsert({\n      collection: this.collectionSlug,\n      data: {\n        data,\n        key,\n      },\n      joins: false,\n      req,\n      select: {},\n      where: { key: { equals: key } },\n    })\n  }\n}\n\nexport type DatabaseKVAdapterOptions = {\n  /** Override options for the generated collection */\n  kvCollectionOverrides?: Partial<CollectionConfig>\n}\n\nexport const databaseKVAdapter = (options: DatabaseKVAdapterOptions = {}): KVAdapterResult => {\n  const collectionSlug = options.kvCollectionOverrides?.slug ?? 'payload-kv'\n  return {\n    init: ({ payload }) => new DatabaseKVAdapter(payload, collectionSlug),\n    kvCollection: {\n      slug: collectionSlug,\n      access: {\n        create: () => false,\n        delete: () => false,\n        read: () => false,\n        update: () => false,\n      },\n      admin: {\n        hidden: true,\n      },\n      fields: [\n        {\n          name: 'key',\n          type: 'text',\n          index: true,\n          required: true,\n          unique: true,\n        },\n        {\n          name: 'data',\n          type: 'json',\n          required: true,\n        },\n      ],\n      lockDocuments: false,\n      timestamps: false,\n      ...options.kvCollectionOverrides,\n    },\n  }\n}\n"],"names":["req","DatabaseKVAdapter","payload","collectionSlug","clear","db","deleteMany","collection","where","delete","key","deleteOne","equals","get","doc","findOne","joins","select","data","has","totalDocs","count","keys","result","find","limit","pagination","docs","map","each","set","upsert","databaseKVAdapter","options","kvCollectionOverrides","slug","init","kvCollection","access","create","read","update","admin","hidden","fields","name","type","index","required","unique","lockDocuments","timestamps"],"mappings":";;;;;;AAIA,gGAAgG,GAChG,MAAMA,MAAM,CAAC;AAEN,MAAMC;;;IACX,YACWC,OAAgB,EAChBC,cAAsB,CAC/B;aAFSD,OAAAA,GAAAA;aACAC,cAAAA,GAAAA;IACR;IAEH,MAAMC,QAAuB;QAC3B,MAAM,IAAI,CAACF,OAAO,CAACG,EAAE,CAACC,UAAU,CAAC;YAC/BC,YAAY,IAAI,CAACJ,cAAc;YAC/BH;YACAQ,OAAO,CAAC;QACV;IACF;IAEA,MAAMC,OAAOC,GAAW,EAAiB;QACvC,MAAM,IAAI,CAACR,OAAO,CAACG,EAAE,CAACM,SAAS,CAAC;YAC9BJ,YAAY,IAAI,CAACJ,cAAc;YAC/BH;YACAQ,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;IACF;IAEA,MAAMG,IAA4BH,GAAW,EAAqB;QAChE,MAAMI,MAAM,MAAM,IAAI,CAACZ,OAAO,CAACG,EAAE,CAACU,OAAO,CAGtC;YACDR,YAAY,IAAI,CAACJ,cAAc;YAC/Ba,OAAO;YACPhB;YACAiB,QAAQ;gBACNC,MAAM;gBACNR,KAAK;YACP;YACAF,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;QAEA,IAAII,QAAQ,MAAM;YAChB,OAAO;QACT;QAEA,OAAOA,IAAII,IAAI;IACjB;IAEA,MAAMC,IAAIT,GAAW,EAAoB;QACvC,MAAM,EAAEU,SAAS,EAAE,GAAG,MAAM,IAAI,CAAClB,OAAO,CAACG,EAAE,CAACgB,KAAK,CAAC;YAChDd,YAAY,IAAI,CAACJ,cAAc;YAC/BH;YACAQ,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;QAEA,OAAOU,YAAY;IACrB;IAEA,MAAME,OAA0B;QAC9B,MAAMC,SAAS,MAAM,IAAI,CAACrB,OAAO,CAACG,EAAE,CAACmB,IAAI,CAAkB;YACzDjB,YAAY,IAAI,CAACJ,cAAc;YAC/BsB,OAAO;YACPC,YAAY;YACZ1B;YACAiB,QAAQ;gBACNP,KAAK;YACP;QACF;QAEA,OAAOa,OAAOI,IAAI,CAACC,GAAG,CAAC,CAACC,OAASA,KAAKnB,GAAG;IAC3C;IAEA,MAAMoB,IAAIpB,GAAW,EAAEQ,IAAkB,EAAiB;QACxD,MAAM,IAAI,CAAChB,OAAO,CAACG,EAAE,CAAC0B,MAAM,CAAC;YAC3BxB,YAAY,IAAI,CAACJ,cAAc;YAC/Be,MAAM;gBACJA;gBACAR;YACF;YACAM,OAAO;YACPhB;YACAiB,QAAQ,CAAC;YACTT,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;IACF;AACF;AAOO,MAAMsB,oBAAoB,CAACC,UAAoC,CAAC,CAAC;IACtE,MAAM9B,iBAAiB8B,QAAQC,qBAAqB,EAAEC,QAAQ;IAC9D,OAAO;QACLC,MAAM,CAAC,EAAElC,OAAO,EAAE,GAAK,IAAID,kBAAkBC,SAASC;QACtDkC,cAAc;YACZF,MAAMhC;YACNmC,QAAQ;gBACNC,QAAQ,IAAM;gBACd9B,QAAQ,IAAM;gBACd+B,MAAM,IAAM;gBACZC,QAAQ,IAAM;YAChB;YACAC,OAAO;gBACLC,QAAQ;YACV;YACAC,QAAQ;gBACN;oBACEC,MAAM;oBACNC,MAAM;oBACNC,OAAO;oBACPC,UAAU;oBACVC,QAAQ;gBACV;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNE,UAAU;gBACZ;aACD;YACDE,eAAe;YACfC,YAAY;YACZ,GAAGlB,QAAQC,qBAAqB;QAClC;IACF;AACF,EAAC"}},
    {"offset": {"line": 8323, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/defaults.ts"],"sourcesContent":["import type { JobsConfig } from '../queues/config/types/index.js'\nimport type { Config } from './types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\nimport { foldersSlug, parentFolderFieldName } from '../folders/constants.js'\nimport { databaseKVAdapter } from '../kv/adapters/DatabaseKVAdapter.js'\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const defaults: Omit<Config, 'db' | 'editor' | 'secret'> = {\n  admin: {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n    },\n    theme: 'all',\n  },\n  auth: {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n  },\n  bin: [],\n  collections: [],\n  cookiePrefix: 'payload',\n  cors: [],\n  csrf: [],\n  custom: {},\n  defaultDepth: 2,\n  defaultMaxTextLength: 40000,\n  endpoints: [],\n  globals: [],\n  graphQL: {\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n  },\n  hooks: {},\n  i18n: {},\n  jobs: {\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n    },\n    deleteJobOnComplete: true,\n    depth: 0,\n  } as JobsConfig,\n\n  localization: false,\n  maxDepth: 10,\n  routes: {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n  },\n  serverURL: '',\n  telemetry: true,\n  typescript: {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n  },\n  upload: {},\n}\n\nexport const addDefaultsToConfig = (config: Config): Config => {\n  config.admin = {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    theme: 'all',\n    ...(config.admin || {}),\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n      ...(config?.admin?.importMap || {}),\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n      ...(config?.admin?.meta || {}),\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n      ...(config?.admin?.routes || {}),\n    },\n  }\n\n  config.bin = config.bin ?? []\n  config.collections = config.collections ?? []\n  config.cookiePrefix = config.cookiePrefix ?? 'payload'\n  config.cors = config.cors ?? []\n  config.csrf = config.csrf ?? []\n  config.custom = config.custom ?? {}\n  config.defaultDepth = config.defaultDepth ?? 2\n  config.defaultMaxTextLength = config.defaultMaxTextLength ?? 40000\n  config.endpoints = config.endpoints ?? []\n  config.globals = config.globals ?? []\n  config.graphQL = {\n    disableIntrospectionInProduction: true,\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n    ...(config.graphQL || {}),\n  }\n  config.hooks = config.hooks ?? {}\n  config.i18n = config.i18n ?? {}\n  config.jobs = {\n    deleteJobOnComplete: true,\n    depth: 0,\n    ...(config.jobs || {}),\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n      ...(config.jobs?.access || {}),\n    },\n  } as JobsConfig\n  config.localization = config.localization ?? false\n  config.maxDepth = config.maxDepth ?? 10\n  config.routes = {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n    ...(config.routes || {}),\n  }\n  config.serverURL = config.serverURL ?? ''\n  config.telemetry = config.telemetry ?? true\n  config.typescript = {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n    ...(config.typescript || {}),\n  }\n  config.upload = config.upload ?? {}\n\n  config.auth = {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n    ...(config.auth || {}),\n  }\n\n  config.kv = config.kv ?? databaseKVAdapter()\n\n  if (config.kv?.kvCollection) {\n    config.collections.push(config.kv.kvCollection)\n  }\n\n  if (\n    config.folders !== false &&\n    config.collections.some((collection) => Boolean(collection.folders))\n  ) {\n    config.folders = {\n      slug: config.folders?.slug ?? foldersSlug,\n      browseByFolder: config.folders?.browseByFolder ?? true,\n      collectionOverrides: config.folders?.collectionOverrides || undefined,\n      collectionSpecific: config.folders?.collectionSpecific ?? true,\n      debug: config.folders?.debug ?? false,\n      fieldName: config.folders?.fieldName ?? parentFolderFieldName,\n    }\n  } else {\n    config.folders = false\n  }\n\n  return config\n}\n"],"names":["defaultAccess","foldersSlug","parentFolderFieldName","databaseKVAdapter","defaults","admin","avatar","components","custom","dateFormat","dependencies","importMap","baseDir","process","cwd","meta","defaultOGImageType","robots","titleSuffix","routes","account","browseByFolder","createFirstUser","forgot","inactivity","login","logout","reset","unauthorized","theme","auth","jwtOrder","bin","collections","cookiePrefix","cors","csrf","defaultDepth","defaultMaxTextLength","endpoints","globals","graphQL","disablePlaygroundInProduction","maxComplexity","schemaOutputFile","hooks","i18n","jobs","access","cancel","queue","run","deleteJobOnComplete","depth","localization","maxDepth","api","graphQLPlayground","serverURL","telemetry","typescript","autoGenerate","outputFile","upload","addDefaultsToConfig","config","disableIntrospectionInProduction","kv","kvCollection","push","folders","some","collection","Boolean","slug","collectionOverrides","undefined","collectionSpecific","debug","fieldName"],"mappings":"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"}},
    {"offset": {"line": 8521, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/orderable/fractional-indexing.js"],"sourcesContent":["// @ts-no-check\n\n/**\n * THIS FILE IS BASED ON:\n * https://github.com/rocicorp/fractional-indexing/blob/main/src/index.js\n *\n * MODIFIED FOR PAYLOAD CMS:\n * - Changed the integer part encoding to use only digits for \"small\" keys and\n *   only lowercase letters for \"large\" keys, ensuring consistent ordering\n *   across databases with different collations.\n *\n * - Original algorithm used A-Z (uppercase) for \"smaller\" integers and a-z (lowercase)\n *   for \"larger\" integers, relying on ASCII ordering where 'Z' < 'a'.\n *\n * - Some databases (e.g., PostgreSQL with default collation) use case-insensitive\n *   comparison, treating 'Z' as 'z', which breaks the ordering.\n *\n * - New encoding:\n *   - Uses digits '0'-'9' for \"small\" integers (10 values, lengths 11 down to 2)\n *   - Uses lowercase 'a'-'z' for \"large\" integers (26 values, lengths 2 up to 27)\n *   - Digits ALWAYS sort before letters in both ASCII and case-insensitive orderings.\n *\n * - Ordering: '0...' < '1...' < ... < '9..' < 'a.' < 'b..' < ... < 'z...'\n *\n * BACKWARD COMPATIBILITY:\n * - Existing keys starting with lowercase 'a'-'z' remain valid and work correctly.\n * - Keys starting with uppercase 'A'-'Z' (from the old algorithm) will still be\n *   parsed for backward compatibility, but they may sort incorrectly in\n *   case-insensitive databases. Consider running a migration to convert them.\n */\n\n// License: CC0 (no rights reserved).\n\n// This is based on https://observablehq.com/@dgreensp/implementing-fractional-indexing\n\nexport const BASE_36_DIGITS = '0123456789abcdefghijklmnopqrstuvwxyz'\n\n// `a` may be empty string, `b` is null or non-empty string.\n// `a < b` lexicographically if `b` is non-null.\n// no trailing zeros allowed.\n// digits is a string such as '0123456789' for base 10.  Digits must be in\n// ascending character code order!\n/**\n * @param {string} a\n * @param {string | null | undefined} b\n * @param {string} digits\n * @returns {string}\n */\nfunction midpoint(a, b, digits) {\n  const zero = digits[0]\n  if (b != null && a >= b) {\n    throw new Error(a + ' >= ' + b)\n  }\n  if (a.slice(-1) === zero || (b && b.slice(-1) === zero)) {\n    throw new Error('trailing zero')\n  }\n  if (b) {\n    // remove longest common prefix.  pad `a` with 0s as we\n    // go.  note that we don't need to pad `b`, because it can't\n    // end before `a` while traversing the common prefix.\n    let n = 0\n    while ((a[n] || zero) === b[n]) {\n      n++\n    }\n    if (n > 0) {\n      return b.slice(0, n) + midpoint(a.slice(n), b.slice(n), digits)\n    }\n  }\n  // first digits (or lack of digit) are different\n  const digitA = a ? digits.indexOf(a[0]) : 0\n  const digitB = b != null ? digits.indexOf(b[0]) : digits.length\n  if (digitB - digitA > 1) {\n    const midDigit = Math.round(0.5 * (digitA + digitB))\n    return digits[midDigit]\n  } else {\n    // first digits are consecutive\n    if (b && b.length > 1) {\n      return b.slice(0, 1)\n    } else {\n      // `b` is null or has length 1 (a single digit).\n      // the first digit of `a` is the previous digit to `b`,\n      // or 9 if `b` is null.\n      // given, for example, midpoint('49', '5'), return\n      // '4' + midpoint('9', null), which will become\n      // '4' + '9' + midpoint('', null), which is '495'\n      return digits[digitA] + midpoint(a.slice(1), null, digits)\n    }\n  }\n}\n\n/**\n * @param {string} int\n * @return {void}\n */\n\nfunction validateInteger(int) {\n  if (int.length !== getIntegerLength(int[0])) {\n    throw new Error('invalid integer part of order key: ' + int)\n  }\n}\n\n/**\n * Returns the length of the integer part based on the head character.\n *\n * New encoding (case-insensitive safe):\n * - SMALL range (digits): '0' = 11 chars, '1' = 10 chars, ..., '9' = 2 chars\n * - LARGE range (lowercase): 'a' = 2 chars, 'b' = 3 chars, ..., 'z' = 27 chars\n *\n * Legacy encoding (for backward compatibility with existing keys):\n * - 'A'-'Z' uppercase: 'A' = 27 chars, 'B' = 26 chars, ..., 'Z' = 2 chars\n *\n * @param {string} head\n * @return {number}\n */\nfunction getIntegerLength(head) {\n  if (head >= '0' && head <= '9') {\n    return 11 - (head.charCodeAt(0) - '0'.charCodeAt(0))\n  } else if (head >= 'a' && head <= 'z') {\n    return head.charCodeAt(0) - 'a'.charCodeAt(0) + 2\n  } else if (head >= 'A' && head <= 'Z') {\n    // Legacy encoding\n    return 'Z'.charCodeAt(0) - head.charCodeAt(0) + 2\n  } else {\n    throw new Error('invalid order key head: ' + head)\n  }\n}\n\n/**\n * @param {string} key\n * @return {string}\n */\n\nfunction getIntegerPart(key) {\n  const integerPartLength = getIntegerLength(key[0])\n  if (integerPartLength > key.length) {\n    throw new Error('invalid order key: ' + key)\n  }\n  return key.slice(0, integerPartLength)\n}\n\n/**\n * Smallest possible key (for validation)\n * '0' + 10 zeros = smallest valid key in new format\n */\nconst SMALLEST_KEY = '0' + BASE_36_DIGITS[0].repeat(10)\n\n/**\n * @param {string} key\n * @param {string} digits\n * @return {void}\n */\n\nfunction validateOrderKey(key, digits) {\n  if (key === SMALLEST_KEY) {\n    throw new Error('invalid order key: ' + key)\n  }\n  // Legacy check for old format\n  if (key === 'A' + digits[0].repeat(26)) {\n    throw new Error('invalid order key: ' + key)\n  }\n  // getIntegerPart will throw if the first character is bad,\n  // or the key is too short.  we'd call it to check these things\n  // even if we didn't need the result\n  const i = getIntegerPart(key)\n  const f = key.slice(i.length)\n  if (f.slice(-1) === digits[0]) {\n    throw new Error('invalid order key: ' + key)\n  }\n}\n\n// note that this may return null, as there is a largest integer\n/**\n * @param {string} x\n * @param {string} digits\n * @return {string | null}\n */\nfunction incrementInteger(x, digits) {\n  validateInteger(x)\n  const [head, ...digs] = x.split('')\n  let carry = true\n  for (let i = digs.length - 1; carry && i >= 0; i--) {\n    const d = digits.indexOf(digs[i]) + 1\n    if (d === digits.length) {\n      digs[i] = digits[0]\n    } else {\n      digs[i] = digits[d]\n      carry = false\n    }\n  }\n  if (carry) {\n    if (head === '9') {\n      return 'a' + digits[0]\n    }\n    // Handle legacy uppercase transition\n    if (head === 'Z') {\n      return 'a' + digits[0]\n    }\n    if (head === 'z') {\n      return null\n    }\n\n    let h\n    if (head >= '0' && head <= '8') {\n      h = String.fromCharCode(head.charCodeAt(0) + 1)\n      digs.pop()\n    } else if (head >= 'a' && head <= 'y') {\n      h = String.fromCharCode(head.charCodeAt(0) + 1)\n      digs.push(digits[0])\n    } else if (head >= 'A' && head <= 'Y') {\n      // Legacy uppercase\n      h = String.fromCharCode(head.charCodeAt(0) + 1)\n      digs.pop()\n    } else {\n      throw new Error('invalid head: ' + head)\n    }\n    return h + digs.join('')\n  } else {\n    return head + digs.join('')\n  }\n}\n\n// note that this may return null, as there is a smallest integer\n/**\n * @param {string} x\n * @param {string} digits\n * @return {string | null}\n */\n\nfunction decrementInteger(x, digits) {\n  validateInteger(x)\n  const [head, ...digs] = x.split('')\n  let borrow = true\n  for (let i = digs.length - 1; borrow && i >= 0; i--) {\n    const d = digits.indexOf(digs[i]) - 1\n    if (d === -1) {\n      digs[i] = digits.slice(-1)\n    } else {\n      digs[i] = digits[d]\n      borrow = false\n    }\n  }\n  if (borrow) {\n    if (head === 'a') {\n      return '9' + digits.slice(-1)\n    }\n    if (head === '0') {\n      return null\n    }\n\n    let h\n    if (head >= '1' && head <= '9') {\n      h = String.fromCharCode(head.charCodeAt(0) - 1)\n      digs.push(digits.slice(-1))\n    } else if (head >= 'b' && head <= 'z') {\n      h = String.fromCharCode(head.charCodeAt(0) - 1)\n      digs.pop()\n    } else if (head >= 'B' && head <= 'Z') {\n      // Legacy uppercase\n      h = String.fromCharCode(head.charCodeAt(0) - 1)\n      digs.push(digits.slice(-1))\n    } else if (head === 'A') {\n      // Legacy uppercase\n      return null\n    } else {\n      throw new Error('invalid head: ' + head)\n    }\n    return h + digs.join('')\n  } else {\n    return head + digs.join('')\n  }\n}\n\n// `a` is an order key or null (START).\n// `b` is an order key or null (END).\n// `a < b` lexicographically if both are non-null.\n// digits is a string such as '0123456789' for base 10.  Digits must be in\n// ascending character code order!\n/**\n * @param {string | null | undefined} a\n * @param {string | null | undefined} b\n * @param {string=} digits\n * @return {string}\n */\nexport function generateKeyBetween(a, b, digits = BASE_36_DIGITS) {\n  if (a != null) {\n    validateOrderKey(a, digits)\n  }\n  if (b != null) {\n    validateOrderKey(b, digits)\n  }\n  if (a != null && b != null && a >= b) {\n    throw new Error(a + ' >= ' + b)\n  }\n  if (a == null) {\n    if (b == null) {\n      return 'a' + digits[0]\n    }\n\n    const ib = getIntegerPart(b)\n    const fb = b.slice(ib.length)\n    if (ib === SMALLEST_KEY) {\n      return ib + midpoint('', fb, digits)\n    }\n    // Legacy check\n    if (ib === 'A' + digits[0].repeat(26)) {\n      return ib + midpoint('', fb, digits)\n    }\n    if (ib < b) {\n      return ib\n    }\n    const res = decrementInteger(ib, digits)\n    if (res == null) {\n      throw new Error('cannot decrement any more')\n    }\n    return res\n  }\n\n  if (b == null) {\n    const ia = getIntegerPart(a)\n    const fa = a.slice(ia.length)\n    const i = incrementInteger(ia, digits)\n    return i == null ? ia + midpoint(fa, null, digits) : i\n  }\n\n  const ia = getIntegerPart(a)\n  const fa = a.slice(ia.length)\n  const ib = getIntegerPart(b)\n  const fb = b.slice(ib.length)\n  if (ia === ib) {\n    return ia + midpoint(fa, fb, digits)\n  }\n  const i = incrementInteger(ia, digits)\n  if (i == null) {\n    throw new Error('cannot increment any more')\n  }\n  if (i < b) {\n    return i\n  }\n  return ia + midpoint(fa, null, digits)\n}\n\n/**\n * same preconditions as generateKeysBetween.\n * n >= 0.\n * Returns an array of n distinct keys in sorted order.\n * If a and b are both null, returns [a0, a1, ...]\n * If one or the other is null, returns consecutive \"integer\"\n * keys.  Otherwise, returns relatively short keys between\n * a and b.\n * @param {string | null | undefined} a\n * @param {string | null | undefined} b\n * @param {number} n\n * @param {string} digits\n * @return {string[]}\n */\nexport function generateNKeysBetween(a, b, n, digits = BASE_36_DIGITS) {\n  if (n === 0) {\n    return []\n  }\n  if (n === 1) {\n    return [generateKeyBetween(a, b, digits)]\n  }\n  if (b == null) {\n    let c = generateKeyBetween(a, b, digits)\n    const result = [c]\n    for (let i = 0; i < n - 1; i++) {\n      c = generateKeyBetween(c, b, digits)\n      result.push(c)\n    }\n    return result\n  }\n  if (a == null) {\n    let c = generateKeyBetween(a, b, digits)\n    const result = [c]\n    for (let i = 0; i < n - 1; i++) {\n      c = generateKeyBetween(a, c, digits)\n      result.push(c)\n    }\n    result.reverse()\n    return result\n  }\n  const mid = Math.floor(n / 2)\n  const c = generateKeyBetween(a, b, digits)\n  return [\n    ...generateNKeysBetween(a, c, mid, digits),\n    c,\n    ...generateNKeysBetween(c, b, n - mid - 1, digits),\n  ]\n}\n"],"names":["BASE_36_DIGITS","midpoint","a","b","digits","zero","Error","slice","n","digitA","indexOf","digitB","length","midDigit","Math","round","validateInteger","int","getIntegerLength","head","charCodeAt","getIntegerPart","key","integerPartLength","SMALLEST_KEY","repeat","validateOrderKey","i","f","incrementInteger","x","digs","split","carry","d","h","String","fromCharCode","pop","push","join","decrementInteger","borrow","generateKeyBetween","ib","fb","res","ia","fa","generateNKeysBetween","c","result","reverse","mid","floor"],"mappings":"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"}},
    {"offset": {"line": 8871, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/orderable/index.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { BeforeChangeHook, CollectionConfig } from '../../collections/config/types.js'\nimport type { Field } from '../../fields/config/types.js'\nimport type { Endpoint, PayloadHandler, SanitizedConfig } from '../types.js'\n\nimport { executeAccess } from '../../auth/executeAccess.js'\nimport { APIError } from '../../errors/index.js'\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { traverseFields } from '../../utilities/traverseFields.js'\nimport { generateKeyBetween, generateNKeysBetween } from './fractional-indexing.js'\n\n/**\n * This function creates:\n * - N fields per collection, named `_order` or `_<collection>_<joinField>_order`\n * - 1 hook per collection\n * - 1 endpoint per app\n *\n * Also, if collection.defaultSort or joinField.defaultSort is not set, it will be set to the orderable field.\n */\nexport const setupOrderable = (config: SanitizedConfig) => {\n  const fieldsToAdd = new Map<CollectionConfig, string[]>()\n\n  config.collections.forEach((collection) => {\n    if (collection.orderable) {\n      const currentFields = fieldsToAdd.get(collection) || []\n      fieldsToAdd.set(collection, [...currentFields, '_order'])\n      collection.defaultSort = collection.defaultSort ?? '_order'\n    }\n\n    traverseFields({\n      callback: ({ field, parentRef, ref }) => {\n        if (field.type === 'array' || field.type === 'blocks') {\n          return false\n        }\n        if (field.type === 'group' || field.type === 'tab') {\n          // @ts-expect-error ref is untyped\n          const parentPrefix = parentRef?.prefix ? `${parentRef.prefix}_` : ''\n          // @ts-expect-error ref is untyped\n          ref.prefix = `${parentPrefix}${field.name}`\n        }\n        if (field.type === 'join' && field.orderable === true) {\n          if (Array.isArray(field.collection)) {\n            throw new APIError(\n              'Orderable joins must target a single collection',\n              httpStatus.BAD_REQUEST,\n              {},\n              true,\n            )\n          }\n          const relationshipCollection = config.collections.find((c) => c.slug === field.collection)\n          if (!relationshipCollection) {\n            return false\n          }\n          field.defaultSort = field.defaultSort ?? `_${field.collection}_${field.name}_order`\n          const currentFields = fieldsToAdd.get(relationshipCollection) || []\n          // @ts-expect-error ref is untyped\n          const prefix = parentRef?.prefix ? `${parentRef.prefix}_` : ''\n          fieldsToAdd.set(relationshipCollection, [\n            ...currentFields,\n            `_${field.collection}_${prefix}${field.name}_order`,\n          ])\n        }\n      },\n      fields: collection.fields,\n    })\n  })\n\n  Array.from(fieldsToAdd.entries()).forEach(([collection, orderableFields]) => {\n    addOrderableFieldsAndHook(collection, orderableFields)\n  })\n\n  if (fieldsToAdd.size > 0) {\n    addOrderableEndpoint(config)\n  }\n}\n\nexport const addOrderableFieldsAndHook = (\n  collection: CollectionConfig,\n  orderableFieldNames: string[],\n) => {\n  // 1. Add field\n  orderableFieldNames.forEach((orderableFieldName) => {\n    const orderField: Field = {\n      name: orderableFieldName,\n      type: 'text',\n      admin: {\n        disableBulkEdit: true,\n        disabled: true,\n        disableGroupBy: true,\n        disableListColumn: true,\n        disableListFilter: true,\n        hidden: true,\n        readOnly: true,\n      },\n      hooks: {\n        beforeDuplicate: [\n          ({ siblingData }) => {\n            delete siblingData[orderableFieldName]\n          },\n        ],\n      },\n      index: true,\n    }\n\n    collection.fields.unshift(orderField)\n  })\n\n  // 2. Add hook\n  if (!collection.hooks) {\n    collection.hooks = {}\n  }\n  if (!collection.hooks.beforeChange) {\n    collection.hooks.beforeChange = []\n  }\n\n  const orderBeforeChangeHook: BeforeChangeHook = async ({ data, originalDoc, req }) => {\n    for (const orderableFieldName of orderableFieldNames) {\n      if (!data[orderableFieldName] && !originalDoc?.[orderableFieldName]) {\n        const lastDoc = await req.payload.find({\n          collection: collection.slug,\n          depth: 0,\n          limit: 1,\n          pagination: false,\n          req,\n          select: { [orderableFieldName]: true },\n          sort: `-${orderableFieldName}`,\n          where: {\n            [orderableFieldName]: {\n              exists: true,\n            },\n          },\n        })\n\n        const lastOrderValue = lastDoc.docs[0]?.[orderableFieldName] || null\n        data[orderableFieldName] = generateKeyBetween(lastOrderValue, null)\n      }\n    }\n\n    return data\n  }\n\n  collection.hooks.beforeChange.push(orderBeforeChangeHook)\n}\n\n/**\n * The body of the reorder endpoint.\n * @internal\n */\nexport type OrderableEndpointBody = {\n  collectionSlug: string\n  docsToMove: string[]\n  newKeyWillBe: 'greater' | 'less'\n  orderableFieldName: string\n  target: {\n    id: string\n    key: string\n  }\n}\n\nexport const addOrderableEndpoint = (config: SanitizedConfig) => {\n  // 3. Add endpoint\n  const reorderHandler: PayloadHandler = async (req) => {\n    const body = (await req.json?.()) as OrderableEndpointBody\n\n    const { collectionSlug, docsToMove, newKeyWillBe, orderableFieldName, target } = body\n\n    if (!Array.isArray(docsToMove) || docsToMove.length === 0) {\n      return new Response(JSON.stringify({ error: 'docsToMove must be a non-empty array' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    if (newKeyWillBe !== 'greater' && newKeyWillBe !== 'less') {\n      return new Response(JSON.stringify({ error: 'newKeyWillBe must be \"greater\" or \"less\"' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    const collection = config.collections.find((c) => c.slug === collectionSlug)\n    if (!collection) {\n      return new Response(JSON.stringify({ error: `Collection ${collectionSlug} not found` }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    if (typeof orderableFieldName !== 'string') {\n      return new Response(JSON.stringify({ error: 'orderableFieldName must be a string' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n\n    // Prevent reordering if user doesn't have editing permissions\n    if (collection.access?.update) {\n      await executeAccess(\n        {\n          // Currently only one doc can be moved at a time. We should review this if we want to allow\n          // multiple docs to be moved at once in the future.\n          id: docsToMove[0],\n          data: {},\n          req,\n        },\n        collection.access.update,\n      )\n    }\n    /**\n     * If there is no target.key, we can assume the user enabled `orderable`\n     * on a collection with existing documents, and that this is the first\n     * time they tried to reorder them. Therefore, we perform a one-time\n     * migration by setting the key value for all documents. We do this\n     * instead of enforcing `required` and `unique` at the database schema\n     * level, so that users don't have to run a migration when they enable\n     * `orderable` on a collection with existing documents.\n     */\n    if (!target.key) {\n      const { docs } = await req.payload.find({\n        collection: collection.slug,\n        depth: 0,\n        limit: 0,\n        req,\n        select: { [orderableFieldName]: true },\n        where: {\n          [orderableFieldName]: {\n            exists: false,\n          },\n        },\n      })\n      await initTransaction(req)\n      // We cannot update all documents in a single operation with `payload.update`,\n      // because they would all end up with the same order key (`a0`).\n      try {\n        for (const doc of docs) {\n          await req.payload.update({\n            id: doc.id,\n            collection: collection.slug,\n            data: {\n              // no data needed since the order hooks will handle this\n            },\n            depth: 0,\n            req,\n          })\n          await commitTransaction(req)\n        }\n      } catch (e) {\n        await killTransaction(req)\n        if (e instanceof Error) {\n          throw new APIError(e.message, httpStatus.INTERNAL_SERVER_ERROR)\n        }\n      }\n\n      return new Response(JSON.stringify({ message: 'initial migration', success: true }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 200,\n      })\n    }\n\n    if (\n      typeof target !== 'object' ||\n      typeof target.id === 'undefined' ||\n      typeof target.key !== 'string'\n    ) {\n      return new Response(JSON.stringify({ error: 'target must be an object with id' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n\n    const targetId = target.id\n    let targetKey = target.key\n\n    // If targetKey = pending, we need to find its current key.\n    // This can only happen if the user reorders rows quickly with a slow connection.\n    if (targetKey === 'pending') {\n      const beforeDoc = await req.payload.findByID({\n        id: targetId,\n        collection: collection.slug,\n        depth: 0,\n        select: { [orderableFieldName]: true },\n      })\n      targetKey = beforeDoc?.[orderableFieldName] || null\n    }\n\n    // The reason the endpoint does not receive this docId as an argument is that there\n    // are situations where the user may not see or know what the next or previous one is. For\n    // example, access control restrictions, if docBefore is the last one on the page, etc.\n    const adjacentDoc = await req.payload.find({\n      collection: collection.slug,\n      depth: 0,\n      limit: 1,\n      pagination: false,\n      select: { [orderableFieldName]: true },\n      sort: newKeyWillBe === 'greater' ? orderableFieldName : `-${orderableFieldName}`,\n      where: {\n        [orderableFieldName]: {\n          [newKeyWillBe === 'greater' ? 'greater_than' : 'less_than']: targetKey,\n        },\n      },\n    })\n    const adjacentDocKey = adjacentDoc.docs?.[0]?.[orderableFieldName] || null\n\n    // Currently N (= docsToMove.length) is always 1. Maybe in the future we will\n    // allow dragging and reordering multiple documents at once via the UI.\n    const orderValues =\n      newKeyWillBe === 'greater'\n        ? generateNKeysBetween(targetKey, adjacentDocKey, docsToMove.length)\n        : generateNKeysBetween(adjacentDocKey, targetKey, docsToMove.length)\n\n    // Update each document with its new order value\n    for (const [index, id] of docsToMove.entries()) {\n      await req.payload.update({\n        id,\n        collection: collection.slug,\n        data: {\n          [orderableFieldName]: orderValues[index],\n        },\n        depth: 0,\n        req,\n      })\n    }\n\n    return new Response(JSON.stringify({ orderValues, success: true }), {\n      headers: { 'Content-Type': 'application/json' },\n      status: 200,\n    })\n  }\n\n  const reorderEndpoint: Endpoint = {\n    handler: reorderHandler,\n    method: 'post',\n    path: '/reorder',\n  }\n\n  if (!config.endpoints) {\n    config.endpoints = []\n  }\n\n  config.endpoints.push(reorderEndpoint)\n}\n"],"names":["status","httpStatus","executeAccess","APIError","commitTransaction","initTransaction","killTransaction","traverseFields","generateKeyBetween","generateNKeysBetween","setupOrderable","config","fieldsToAdd","Map","collections","forEach","collection","orderable","currentFields","get","set","defaultSort","callback","field","parentRef","ref","type","parentPrefix","prefix","name","Array","isArray","BAD_REQUEST","relationshipCollection","find","c","slug","fields","from","entries","orderableFields","addOrderableFieldsAndHook","size","addOrderableEndpoint","orderableFieldNames","orderableFieldName","orderField","admin","disableBulkEdit","disabled","disableGroupBy","disableListColumn","disableListFilter","hidden","readOnly","hooks","beforeDuplicate","siblingData","index","unshift","beforeChange","orderBeforeChangeHook","data","originalDoc","req","lastDoc","payload","depth","limit","pagination","select","sort","where","exists","lastOrderValue","docs","push","reorderHandler","body","json","collectionSlug","docsToMove","newKeyWillBe","target","length","Response","JSON","stringify","error","headers","access","update","id","key","doc","e","Error","message","INTERNAL_SERVER_ERROR","success","targetId","targetKey","beforeDoc","findByID","adjacentDoc","adjacentDocKey","orderValues","reorderEndpoint","handler","method","path","endpoints"],"mappings":"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"}},
    {"offset": {"line": 9198, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/sanitize.ts"],"sourcesContent":["import type { AcceptedLanguages } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { deepMergeSimple } from '@payloadcms/translations/utilities'\n\nimport type { CollectionSlug, GlobalSlug, SanitizedCollectionConfig } from '../index.js'\nimport type { SanitizedJobsConfig } from '../queues/config/types/index.js'\nimport type {\n  Config,\n  LocalizationConfigWithLabels,\n  LocalizationConfigWithNoLabels,\n  SanitizedConfig,\n  Timezone,\n  WidgetInstance,\n} from './types.js'\n\nimport { defaultUserCollection } from '../auth/defaultUser.js'\nimport { authRootEndpoints } from '../auth/endpoints/index.js'\nimport { sanitizeCollection } from '../collections/config/sanitize.js'\nimport { migrationsCollection } from '../database/migrations/migrationsCollection.js'\nimport { DuplicateCollection, InvalidConfiguration } from '../errors/index.js'\nimport { defaultTimezones } from '../fields/baseFields/timezone/defaultTimezones.js'\nimport { addFolderCollection } from '../folders/addFolderCollection.js'\nimport { addFolderFieldToCollection } from '../folders/addFolderFieldToCollection.js'\nimport { sanitizeGlobal } from '../globals/config/sanitize.js'\nimport { baseBlockFields, formatLabels, sanitizeFields } from '../index.js'\nimport {\n  getLockedDocumentsCollection,\n  lockedDocumentsCollectionSlug,\n} from '../locked-documents/config.js'\nimport { getPreferencesCollection, preferencesCollectionSlug } from '../preferences/config.js'\nimport { getQueryPresetsConfig, queryPresetsCollectionSlug } from '../query-presets/config.js'\nimport { getDefaultJobsCollection, jobsCollectionSlug } from '../queues/config/collection.js'\nimport { getJobStatsGlobal } from '../queues/config/global.js'\nimport { flattenBlock } from '../utilities/flattenAllFields.js'\nimport { hasScheduledPublishEnabled } from '../utilities/getVersionsConfig.js'\nimport { validateTimezones } from '../utilities/validateTimezones.js'\nimport { getSchedulePublishTask } from '../versions/schedule/job.js'\nimport { addDefaultsToConfig } from './defaults.js'\nimport { setupOrderable } from './orderable/index.js'\n\nconst sanitizeAdminConfig = (configToSanitize: Config): Partial<SanitizedConfig> => {\n  const sanitizedConfig = { ...configToSanitize }\n\n  if (configToSanitize?.compatibility?.allowLocalizedWithinLocalized) {\n    process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized = 'true'\n  }\n\n  // default logging level will be 'error' if not provided\n  sanitizedConfig.loggingLevels = {\n    Forbidden: 'info',\n    Locked: 'info',\n    MissingFile: 'info',\n    NotFound: 'info',\n    ValidationError: 'info',\n    ...(sanitizedConfig.loggingLevels || {}),\n  }\n  ;(sanitizedConfig.admin!.dashboard ??= { widgets: [] }).widgets.push({\n    slug: 'collections',\n    ComponentPath: '@payloadcms/next/rsc#CollectionCards',\n    minWidth: 'full',\n  })\n  sanitizedConfig.admin!.dashboard.defaultLayout ??= [\n    {\n      widgetSlug: 'collections',\n      width: 'full',\n    } satisfies WidgetInstance,\n  ]\n\n  // add default user collection if none provided\n  if (!sanitizedConfig?.admin?.user) {\n    const firstCollectionWithAuth = sanitizedConfig.collections!.find(({ auth }) => Boolean(auth))\n\n    if (firstCollectionWithAuth) {\n      sanitizedConfig.admin!.user = firstCollectionWithAuth.slug\n    } else {\n      sanitizedConfig.admin!.user = defaultUserCollection.slug\n      sanitizedConfig.collections!.push(defaultUserCollection)\n    }\n  }\n\n  const userCollection = sanitizedConfig.collections!.find(\n    ({ slug }) => slug === sanitizedConfig.admin!.user,\n  )\n\n  if (!userCollection || !userCollection.auth) {\n    throw new InvalidConfiguration(\n      `${sanitizedConfig.admin!.user} is not a valid admin user collection`,\n    )\n  }\n\n  if (sanitizedConfig?.admin?.timezones) {\n    if (typeof configToSanitize?.admin?.timezones?.supportedTimezones === 'function') {\n      sanitizedConfig.admin.timezones.supportedTimezones =\n        configToSanitize.admin.timezones.supportedTimezones({ defaultTimezones })\n    }\n\n    if (!sanitizedConfig?.admin?.timezones?.supportedTimezones) {\n      sanitizedConfig.admin.timezones.supportedTimezones = defaultTimezones\n    }\n  } else {\n    sanitizedConfig.admin!.timezones = {\n      supportedTimezones: defaultTimezones,\n    }\n  }\n\n  validateTimezones({\n    source: 'admin.timezones.supportedTimezones',\n    timezones: sanitizedConfig.admin!.timezones.supportedTimezones as Timezone[],\n  })\n\n  return sanitizedConfig as unknown as Partial<SanitizedConfig>\n}\n\nexport const sanitizeConfig = async (incomingConfig: Config): Promise<SanitizedConfig> => {\n  const configWithDefaults = addDefaultsToConfig(incomingConfig)\n\n  const config: Partial<SanitizedConfig> = sanitizeAdminConfig(configWithDefaults)\n\n  // Add orderable fields\n  setupOrderable(config as SanitizedConfig)\n\n  if (!config.endpoints) {\n    config.endpoints = []\n  }\n\n  for (const endpoint of authRootEndpoints) {\n    config.endpoints.push(endpoint)\n  }\n\n  if (config.localization && config.localization.locales?.length > 0) {\n    // clone localization config so to not break everything\n    const firstLocale = config.localization.locales[0]\n    if (typeof firstLocale === 'string') {\n      config.localization.localeCodes = [\n        ...(config.localization as unknown as LocalizationConfigWithNoLabels).locales,\n      ]\n\n      // is string[], so convert to Locale[]\n      config.localization.locales = (\n        config.localization as unknown as LocalizationConfigWithNoLabels\n      ).locales.map((locale) => ({\n        code: locale,\n        label: locale,\n        rtl: false,\n        toString: () => locale,\n      }))\n    } else {\n      // is Locale[], so convert to string[] for localeCodes\n      config.localization.localeCodes = config.localization.locales.map((locale) => locale.code)\n\n      config.localization.locales = (\n        config.localization as LocalizationConfigWithLabels\n      ).locales.map((locale) => ({\n        ...locale,\n        toString: () => locale.code,\n      }))\n    }\n\n    // Default fallback to true if not provided\n    config.localization.fallback = config.localization?.fallback ?? true\n  }\n\n  const i18nConfig: SanitizedConfig['i18n'] = {\n    fallbackLanguage: 'en',\n    supportedLanguages: {\n      en,\n    },\n    translations: {},\n  }\n\n  if (incomingConfig?.i18n) {\n    i18nConfig.supportedLanguages =\n      incomingConfig.i18n?.supportedLanguages || i18nConfig.supportedLanguages\n\n    const supportedLangKeys = <AcceptedLanguages[]>Object.keys(i18nConfig.supportedLanguages)\n    const fallbackLang = incomingConfig.i18n?.fallbackLanguage || i18nConfig.fallbackLanguage\n\n    i18nConfig.fallbackLanguage = supportedLangKeys.includes(fallbackLang)\n      ? fallbackLang\n      : supportedLangKeys[0]!\n    i18nConfig.translations =\n      (incomingConfig.i18n?.translations as SanitizedConfig['i18n']['translations']) ||\n      i18nConfig.translations\n  }\n\n  config.i18n = i18nConfig\n\n  const richTextSanitizationPromises: Array<(config: SanitizedConfig) => Promise<void>> = []\n\n  const schedulePublishCollections: CollectionSlug[] = []\n\n  const queryPresetsCollections: CollectionSlug[] = []\n\n  const schedulePublishGlobals: GlobalSlug[] = []\n\n  const collectionSlugs = new Set<CollectionSlug>()\n\n  const validRelationships = [\n    ...(config.collections?.map((c) => c.slug) ?? []),\n    jobsCollectionSlug,\n    lockedDocumentsCollectionSlug,\n    preferencesCollectionSlug,\n  ]\n\n  if (config.folders !== false) {\n    validRelationships.push(config.folders!.slug)\n  }\n\n  /**\n   * Blocks sanitization needs to happen before collections, as collection/global join field sanitization needs config.blocks\n   * to be populated with the sanitized blocks\n   */\n  config.blocks = []\n\n  if (incomingConfig.blocks?.length) {\n    for (const block of incomingConfig.blocks) {\n      const sanitizedBlock = block\n\n      if (sanitizedBlock._sanitized === true) {\n        continue\n      }\n      sanitizedBlock._sanitized = true\n\n      sanitizedBlock.fields = sanitizedBlock.fields.concat(baseBlockFields)\n\n      sanitizedBlock.labels = !sanitizedBlock.labels\n        ? formatLabels(sanitizedBlock.slug)\n        : sanitizedBlock.labels\n\n      sanitizedBlock.fields = await sanitizeFields({\n        config: config as unknown as Config,\n        existingFieldNames: new Set(),\n        fields: sanitizedBlock.fields,\n        parentIsLocalized: false,\n        richTextSanitizationPromises,\n        validRelationships,\n      })\n\n      const flattenedSanitizedBlock = flattenBlock({ block })\n\n      config.blocks.push(flattenedSanitizedBlock)\n    }\n  }\n\n  const folderEnabledCollections: SanitizedCollectionConfig[] = []\n\n  for (let i = 0; i < config.collections!.length; i++) {\n    if (collectionSlugs.has(config.collections![i]!.slug)) {\n      throw new DuplicateCollection('slug', config.collections![i]!.slug)\n    }\n\n    collectionSlugs.add(config.collections![i]!.slug)\n\n    const draftsConfig = config.collections![i]?.versions?.drafts\n\n    if (typeof draftsConfig === 'object' && draftsConfig.schedulePublish) {\n      schedulePublishCollections.push(config.collections![i]!.slug)\n    }\n\n    if (config.collections![i]!.enableQueryPresets) {\n      queryPresetsCollections.push(config.collections![i]!.slug)\n\n      if (!validRelationships.includes(queryPresetsCollectionSlug)) {\n        validRelationships.push(queryPresetsCollectionSlug)\n      }\n    }\n\n    if (config.folders !== false && config.collections![i]!.folders) {\n      addFolderFieldToCollection({\n        collection: config.collections![i]!,\n        collectionSpecific: config.folders!.collectionSpecific,\n        folderFieldName: config.folders!.fieldName,\n        folderSlug: config.folders!.slug,\n      })\n    }\n\n    config.collections![i] = await sanitizeCollection(\n      config as unknown as Config,\n      config.collections![i]!,\n      richTextSanitizationPromises,\n      validRelationships,\n    )\n\n    if (config.folders !== false && config.collections![i]!.folders) {\n      folderEnabledCollections.push(config.collections![i]!)\n    }\n  }\n\n  if (config.globals!.length > 0) {\n    for (let i = 0; i < config.globals!.length; i++) {\n      if (hasScheduledPublishEnabled(config.globals![i]!)) {\n        schedulePublishGlobals.push(config.globals![i]!.slug)\n      }\n\n      config.globals![i] = await sanitizeGlobal(\n        config as unknown as Config,\n        config.globals![i]!,\n        richTextSanitizationPromises,\n        validRelationships,\n      )\n    }\n  }\n\n  if (schedulePublishCollections.length || schedulePublishGlobals.length) {\n    ;((config.jobs ??= {} as SanitizedJobsConfig).tasks ??= []).push(\n      getSchedulePublishTask({\n        adminUserSlug: config.admin!.user,\n        collections: schedulePublishCollections,\n        globals: schedulePublishGlobals,\n      }),\n    )\n  }\n\n  ;(config.jobs ??= {} as SanitizedJobsConfig).enabled = Boolean(\n    (Array.isArray(configWithDefaults.jobs?.tasks) && configWithDefaults.jobs?.tasks?.length) ||\n      (Array.isArray(configWithDefaults.jobs?.workflows) &&\n        configWithDefaults.jobs?.workflows?.length),\n  )\n\n  // Need to add default jobs collection before locked documents collections\n  if (config.jobs.enabled) {\n    // Check for schedule property in both tasks and workflows\n    const hasScheduleProperty =\n      (config?.jobs?.tasks?.length && config.jobs.tasks.some((task) => task.schedule)) ||\n      (config?.jobs?.workflows?.length &&\n        config.jobs.workflows.some((workflow) => workflow.schedule))\n\n    if (hasScheduleProperty) {\n      config.jobs.scheduling = true\n      // Add payload-jobs-stats global for tracking when a job of a specific slug was last run\n      ;(config.globals ??= []).push(\n        await sanitizeGlobal(\n          config as unknown as Config,\n          getJobStatsGlobal(config as unknown as Config),\n          richTextSanitizationPromises,\n          validRelationships,\n        ),\n      )\n\n      config.jobs.stats = true\n    }\n\n    let defaultJobsCollection = getDefaultJobsCollection(config.jobs)\n\n    if (typeof config.jobs.jobsCollectionOverrides === 'function') {\n      defaultJobsCollection = config.jobs.jobsCollectionOverrides({\n        defaultJobsCollection,\n      })\n\n      const hooks = defaultJobsCollection?.hooks\n      // @todo - delete this check in 4.0\n      if (hooks && config?.jobs?.runHooks !== true) {\n        for (const [hookKey, hook] of Object.entries(hooks)) {\n          const defaultAmount = hookKey === 'afterRead' || hookKey === 'beforeChange' ? 1 : 0\n          if (hook.length > defaultAmount) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `The jobsCollectionOverrides function is returning a collection with an additional ${hookKey} hook defined. These hooks will not run unless the jobs.runHooks option is set to true. Setting this option to true will negatively impact performance.`,\n            )\n            break\n          }\n        }\n      }\n    }\n    const sanitizedJobsCollection = await sanitizeCollection(\n      config as unknown as Config,\n      defaultJobsCollection,\n      richTextSanitizationPromises,\n      validRelationships,\n    )\n\n    ;(config.collections ??= []).push(sanitizedJobsCollection)\n  }\n\n  if (config.folders !== false && folderEnabledCollections.length) {\n    await addFolderCollection({\n      collectionSpecific: config.folders!.collectionSpecific,\n      config: config as unknown as Config,\n      folderEnabledCollections,\n      richTextSanitizationPromises,\n      validRelationships,\n    })\n  }\n\n  const lockedDocumentsCollection = getLockedDocumentsCollection(config as unknown as Config)\n\n  if (lockedDocumentsCollection) {\n    configWithDefaults.collections!.push(\n      await sanitizeCollection(\n        config as unknown as Config,\n        lockedDocumentsCollection,\n        richTextSanitizationPromises,\n        validRelationships,\n      ),\n    )\n  }\n\n  configWithDefaults.collections!.push(\n    await sanitizeCollection(\n      config as unknown as Config,\n      getPreferencesCollection(config as unknown as Config),\n      richTextSanitizationPromises,\n      validRelationships,\n    ),\n  )\n\n  const migrations = await sanitizeCollection(\n    config as unknown as Config,\n    migrationsCollection,\n    richTextSanitizationPromises,\n    validRelationships,\n  )\n\n  // @ts-expect-error indexSortableFields is only valid for @payloadcms/db-mongodb\n  if (config?.db?.indexSortableFields) {\n    migrations.indexes = [\n      {\n        fields: ['batch', 'name'],\n        unique: false,\n      },\n    ]\n  }\n  configWithDefaults.collections!.push(migrations)\n\n  if (queryPresetsCollections.length > 0) {\n    configWithDefaults.collections!.push(\n      await sanitizeCollection(\n        config as unknown as Config,\n        getQueryPresetsConfig(config as unknown as Config),\n        richTextSanitizationPromises,\n        validRelationships,\n      ),\n    )\n  }\n\n  if (config.serverURL !== '') {\n    config.csrf!.push(config.serverURL!)\n  }\n\n  const uploadAdapters = new Set<string>()\n  // interact with all collections\n  for (const collection of config.collections!) {\n    // deduped upload adapters\n    if (collection.upload?.adapter) {\n      uploadAdapters.add(collection.upload.adapter)\n    }\n  }\n\n  if (!config.upload) {\n    config.upload = { adapters: [] }\n  }\n\n  config.upload.adapters = Array.from(\n    new Set(config.collections!.map((c) => c.upload?.adapter).filter(Boolean) as string[]),\n  )\n\n  // Pass through the email config as is so adapters don't break\n  if (incomingConfig.email) {\n    config.email = incomingConfig.email\n  }\n\n  /*\n    Execute richText sanitization\n   */\n  if (typeof incomingConfig.editor === 'function') {\n    config.editor = await incomingConfig.editor({\n      config: config as SanitizedConfig,\n      isRoot: true,\n      parentIsLocalized: false,\n    })\n    if (config.editor.i18n && Object.keys(config.editor.i18n).length >= 0) {\n      config.i18n.translations = deepMergeSimple(config.i18n.translations, config.editor.i18n)\n    }\n  }\n\n  const promises: Promise<void>[] = []\n\n  for (const sanitizeFunction of richTextSanitizationPromises) {\n    promises.push(sanitizeFunction(config as SanitizedConfig))\n  }\n\n  await Promise.all(promises)\n\n  return config as SanitizedConfig\n}\n"],"names":["en","deepMergeSimple","defaultUserCollection","authRootEndpoints","sanitizeCollection","migrationsCollection","DuplicateCollection","InvalidConfiguration","defaultTimezones","addFolderCollection","addFolderFieldToCollection","sanitizeGlobal","baseBlockFields","formatLabels","sanitizeFields","getLockedDocumentsCollection","lockedDocumentsCollectionSlug","getPreferencesCollection","preferencesCollectionSlug","getQueryPresetsConfig","queryPresetsCollectionSlug","getDefaultJobsCollection","jobsCollectionSlug","getJobStatsGlobal","flattenBlock","hasScheduledPublishEnabled","validateTimezones","getSchedulePublishTask","addDefaultsToConfig","setupOrderable","sanitizeAdminConfig","configToSanitize","sanitizedConfig","compatibility","allowLocalizedWithinLocalized","process","env","NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized","loggingLevels","Forbidden","Locked","MissingFile","NotFound","ValidationError","admin","dashboard","widgets","push","slug","ComponentPath","minWidth","defaultLayout","widgetSlug","width","user","firstCollectionWithAuth","collections","find","auth","Boolean","userCollection","timezones","supportedTimezones","source","sanitizeConfig","incomingConfig","configWithDefaults","config","endpoints","endpoint","localization","locales","length","firstLocale","localeCodes","map","locale","code","label","rtl","toString","fallback","i18nConfig","fallbackLanguage","supportedLanguages","translations","i18n","supportedLangKeys","Object","keys","fallbackLang","includes","richTextSanitizationPromises","schedulePublishCollections","queryPresetsCollections","schedulePublishGlobals","collectionSlugs","Set","validRelationships","c","folders","blocks","block","sanitizedBlock","_sanitized","fields","concat","labels","existingFieldNames","parentIsLocalized","flattenedSanitizedBlock","folderEnabledCollections","i","has","add","draftsConfig","versions","drafts","schedulePublish","enableQueryPresets","collection","collectionSpecific","folderFieldName","fieldName","folderSlug","globals","jobs","tasks","adminUserSlug","enabled","Array","isArray","workflows","hasScheduleProperty","some","task","schedule","workflow","scheduling","stats","defaultJobsCollection","jobsCollectionOverrides","hooks","runHooks","hookKey","hook","entries","defaultAmount","console","warn","sanitizedJobsCollection","lockedDocumentsCollection","migrations","db","indexSortableFields","indexes","unique","serverURL","csrf","uploadAdapters","upload","adapter","adapters","from","filter","email","editor","isRoot","promises","sanitizeFunction","Promise","all"],"mappings":"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"}},
    {"offset": {"line": 9558, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/build.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from './types.js'\n\nimport { sanitizeConfig } from './sanitize.js'\n\n/**\n * @description Builds and validates Payload configuration\n * @param config Payload Config\n * @returns Built and sanitized Payload Config\n */\nexport async function buildConfig(config: Config): Promise<SanitizedConfig> {\n  if (Array.isArray(config.plugins)) {\n    let configAfterPlugins = config\n    for (const plugin of config.plugins) {\n      configAfterPlugins = await plugin(configAfterPlugins)\n    }\n    return await sanitizeConfig(configAfterPlugins)\n  }\n\n  return await sanitizeConfig(config)\n}\n"],"names":["sanitizeConfig","buildConfig","config","Array","isArray","plugins","configAfterPlugins","plugin"],"mappings":";;;;AAEA,SAASA,cAAc,QAAQ,gBAAe;;AAOvC,eAAeC,YAAYC,MAAc;IAC9C,IAAIC,MAAMC,OAAO,CAACF,OAAOG,OAAO,GAAG;QACjC,IAAIC,qBAAqBJ;QACzB,KAAK,MAAMK,UAAUL,OAAOG,OAAO,CAAE;YACnCC,qBAAqB,MAAMC,OAAOD;QACpC;QACA,OAAO,UAAMN,yKAAAA,EAAeM;IAC9B;IAEA,OAAO,UAAMN,yKAAAA,EAAeE;AAC9B"}},
    {"offset": {"line": 9578, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/getPredefinedMigration.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\nimport type { Payload } from '../../index.js'\nimport type { MigrationTemplateArgs } from '../types.js'\n\nimport { dynamicImport } from '../../utilities/dynamicImport.js'\n\n/**\n * Get predefined migration 'up', 'down' and 'imports'.\n *\n * Supports two import methods:\n * 1. @payloadcms/db-* packages: Loads from adapter's predefinedMigrations folder directly (no package.json export needed)\n *    Example: `--file @payloadcms/db-mongodb/relationships-v2-v3`\n * 2. Any other package/path: Uses dynamic import via package.json exports or absolute file paths\n *    Example: `--file @payloadcms/plugin-seo/someMigration` or `--file /absolute/path/to/migration.ts`\n */\nexport const getPredefinedMigration = async ({\n  dirname,\n  file,\n  migrationName: migrationNameArg,\n  payload,\n}: {\n  dirname: string\n  file?: string\n  migrationName?: string\n  payload: Payload\n}): Promise<MigrationTemplateArgs> => {\n  const importPath = file ?? migrationNameArg\n\n  // Path 1: @payloadcms/db-* adapters - load directly from predefinedMigrations folder\n  // These don't need package.json exports; files are resolved relative to adapter's dirname\n  if (importPath?.startsWith('@payloadcms/db-')) {\n    const migrationName = importPath.split('/').slice(2).join('/')\n    let cleanPath = path.join(dirname, `./predefinedMigrations/${migrationName}`)\n    if (fs.existsSync(`${cleanPath}.mjs`)) {\n      cleanPath = `${cleanPath}.mjs`\n    } else if (fs.existsSync(`${cleanPath}.js`)) {\n      cleanPath = `${cleanPath}.js`\n    } else if (fs.existsSync(`${cleanPath}.ts`)) {\n      // Support .ts in development when running from source\n      cleanPath = `${cleanPath}.ts`\n    } else {\n      payload.logger.error({\n        msg: `Canned migration ${migrationName} not found.`,\n      })\n      process.exit(1)\n    }\n    cleanPath = cleanPath.replaceAll('\\\\', '/')\n    try {\n      const { downSQL, dynamic, imports, upSQL } =\n        await dynamicImport<MigrationTemplateArgs>(cleanPath)\n      return {\n        downSQL,\n        dynamic,\n        imports,\n        upSQL,\n      }\n    } catch (err) {\n      payload.logger.error({\n        err,\n        msg: `Error loading predefined migration ${migrationName}`,\n      })\n      process.exit(1)\n    }\n  } else if (importPath) {\n    // Path 2: Any other package or file path - use dynamic import\n    // Supports: package.json exports (e.g. @payloadcms/plugin-seo/migration) or absolute file paths\n    try {\n      const { downSQL, dynamic, imports, upSQL } =\n        await dynamicImport<MigrationTemplateArgs>(importPath)\n      return {\n        downSQL,\n        dynamic,\n        imports,\n        upSQL,\n      }\n    } catch (_err) {\n      if (importPath?.includes('/')) {\n        // We can assume that the intent was to import a file, thus we throw an error.\n        throw new Error(`Error importing migration file from ${importPath}`)\n      }\n      // Silently fail. If the migration cannot be imported, it will be created as a blank migration and the import path will be used as the migration name.\n      return {}\n    }\n  }\n  return {}\n}\n"],"names":["fs","path","dynamicImport","getPredefinedMigration","dirname","file","migrationName","migrationNameArg","payload","importPath","startsWith","split","slice","join","cleanPath","existsSync","logger","error","msg","process","exit","replaceAll","downSQL","dynamic","imports","upSQL","err","_err","includes","Error"],"mappings":";;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;AAKvB,SAASC,aAAa,QAAQ,mCAAkC;;;;AAWzD,MAAMC,yBAAyB,OAAO,EAC3CC,OAAO,EACPC,IAAI,EACJC,eAAeC,gBAAgB,EAC/BC,OAAO,EAMR;IACC,MAAMC,aAAaJ,QAAQE;IAE3B,qFAAqF;IACrF,0FAA0F;IAC1F,IAAIE,YAAYC,WAAW,oBAAoB;QAC7C,MAAMJ,gBAAgBG,WAAWE,KAAK,CAAC,KAAKC,KAAK,CAAC,GAAGC,IAAI,CAAC;QAC1D,IAAIC,YAAYb,4GAAAA,CAAKY,IAAI,CAACT,SAAS,CAAC,uBAAuB,EAAEE,eAAe;QAC5E,IAAIN,wGAAAA,CAAGe,UAAU,CAAC,GAAGD,UAAU,IAAI,CAAC,GAAG;YACrCA,YAAY,GAAGA,UAAU,IAAI,CAAC;QAChC,OAAO,IAAId,wGAAAA,CAAGe,UAAU,CAAC,GAAGD,UAAU,GAAG,CAAC,GAAG;YAC3CA,YAAY,GAAGA,UAAU,GAAG,CAAC;QAC/B,OAAO,IAAId,wGAAAA,CAAGe,UAAU,CAAC,GAAGD,UAAU,GAAG,CAAC,GAAG;YAC3C,sDAAsD;YACtDA,YAAY,GAAGA,UAAU,GAAG,CAAC;QAC/B,OAAO;YACLN,QAAQQ,MAAM,CAACC,KAAK,CAAC;gBACnBC,KAAK,CAAC,iBAAiB,EAAEZ,cAAc,WAAW,CAAC;YACrD;YACAa,QAAQC,IAAI,CAAC;QACf;QACAN,YAAYA,UAAUO,UAAU,CAAC,MAAM;QACvC,IAAI;YACF,MAAM,EAAEC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAE,GACxC,UAAMvB,gLAAAA,EAAqCY;YAC7C,OAAO;gBACLQ;gBACAC;gBACAC;gBACAC;YACF;QACF,EAAE,OAAOC,KAAK;YACZlB,QAAQQ,MAAM,CAACC,KAAK,CAAC;gBACnBS;gBACAR,KAAK,CAAC,mCAAmC,EAAEZ,eAAe;YAC5D;YACAa,QAAQC,IAAI,CAAC;QACf;IACF,OAAO,IAAIX,YAAY;QACrB,8DAA8D;QAC9D,gGAAgG;QAChG,IAAI;YACF,MAAM,EAAEa,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAE,GACxC,UAAMvB,gLAAAA,EAAqCO;YAC7C,OAAO;gBACLa;gBACAC;gBACAC;gBACAC;YACF;QACF,EAAE,OAAOE,MAAM;YACb,IAAIlB,YAAYmB,SAAS,MAAM;gBAC7B,8EAA8E;gBAC9E,MAAM,IAAIC,MAAM,CAAC,oCAAoC,EAAEpB,YAAY;YACrE;YACA,sJAAsJ;YACtJ,OAAO,CAAC;QACV;IACF;IACA,OAAO,CAAC;AACV,EAAC"}},
    {"offset": {"line": 9650, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/writeMigrationIndex.ts"],"sourcesContent":["import fs from 'fs'\nimport { getTsconfig } from 'get-tsconfig'\nimport path from 'path'\n\n// Function to get all migration files (TS or JS) excluding 'index'\nconst getMigrationFiles = (dir: string) => {\n  return fs\n    .readdirSync(dir)\n    .filter(\n      (file) =>\n        (file.endsWith('.ts') || file.endsWith('.js')) &&\n        file !== 'index.ts' &&\n        file !== 'index.js',\n    )\n    .sort()\n}\n\n// Function to generate the index.ts content\nconst generateIndexContent = (files: string[]) => {\n  const tsconfig = getTsconfig()\n  const importExt = tsconfig?.config?.compilerOptions?.moduleResolution === 'NodeNext' ? '.js' : ''\n\n  let imports = ''\n  let exportsArray = 'export const migrations = [\\n'\n\n  files.forEach((file, index) => {\n    const fileNameWithoutExt = file.replace(/\\.[^/.]+$/, '')\n    imports += `import * as migration_${fileNameWithoutExt} from './${fileNameWithoutExt}${importExt}';\\n`\n    exportsArray += `  {\n    up: migration_${fileNameWithoutExt}.up,\n    down: migration_${fileNameWithoutExt}.down,\n    name: '${fileNameWithoutExt}'${index !== files.length - 1 ? ',' : ''}\\n  },\\n`\n  })\n\n  exportsArray += '];\\n'\n  return imports + '\\n' + exportsArray\n}\n\n// Main function to create the index.ts file\nexport const writeMigrationIndex = (args: { migrationsDir: string }) => {\n  const migrationFiles = getMigrationFiles(args.migrationsDir)\n  const indexContent = generateIndexContent(migrationFiles)\n\n  fs.writeFileSync(path.join(args.migrationsDir, 'index.ts'), indexContent)\n}\n"],"names":["fs","getTsconfig","path","getMigrationFiles","dir","readdirSync","filter","file","endsWith","sort","generateIndexContent","files","tsconfig","importExt","config","compilerOptions","moduleResolution","imports","exportsArray","forEach","index","fileNameWithoutExt","replace","length","writeMigrationIndex","args","migrationFiles","migrationsDir","indexContent","writeFileSync","join"],"mappings":";;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,SAASC,WAAW,QAAQ,eAAc;AAC1C,OAAOC,UAAU,OAAM;;;;AAEvB,mEAAmE;AACnE,MAAMC,oBAAoB,CAACC;IACzB,OAAOJ,wGAAAA,CACJK,WAAW,CAACD,KACZE,MAAM,CACL,CAACC,OACEA,CAAAA,KAAKC,QAAQ,CAAC,UAAUD,KAAKC,QAAQ,CAAC,MAAK,KAC5CD,SAAS,cACTA,SAAS,YAEZE,IAAI;AACT;AAEA,4CAA4C;AAC5C,MAAMC,uBAAuB,CAACC;IAC5B,MAAMC,eAAWX,6LAAAA;IACjB,MAAMY,YAAYD,UAAUE,QAAQC,iBAAiBC,qBAAqB,aAAa,QAAQ;IAE/F,IAAIC,UAAU;IACd,IAAIC,eAAe;IAEnBP,MAAMQ,OAAO,CAAC,CAACZ,MAAMa;QACnB,MAAMC,qBAAqBd,KAAKe,OAAO,CAAC,aAAa;QACrDL,WAAW,CAAC,sBAAsB,EAAEI,mBAAmB,SAAS,EAAEA,qBAAqBR,UAAU,IAAI,CAAC;QACtGK,gBAAgB,CAAC;kBACH,EAAEG,mBAAmB;oBACnB,EAAEA,mBAAmB;WAC9B,EAAEA,mBAAmB,CAAC,EAAED,UAAUT,MAAMY,MAAM,GAAG,IAAI,MAAM,GAAG,QAAQ,CAAC;IAChF;IAEAL,gBAAgB;IAChB,OAAOD,UAAU,OAAOC;AAC1B;AAGO,MAAMM,sBAAsB,CAACC;IAClC,MAAMC,iBAAiBvB,kBAAkBsB,KAAKE,aAAa;IAC3D,MAAMC,eAAelB,qBAAqBgB;IAE1C1B,wGAAAA,CAAG6B,aAAa,CAAC3B,4GAAAA,CAAK4B,IAAI,CAACL,KAAKE,aAAa,EAAE,aAAaC;AAC9D,EAAC"}},
    {"offset": {"line": 9690, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/utilities/createArrayFromCommaDelineated.ts"],"sourcesContent":["export function createArrayFromCommaDelineated(input: string): string[] {\n  if (Array.isArray(input)) {\n    return input\n  }\n\n  return input.split(',')\n}\n"],"names":["createArrayFromCommaDelineated","input","Array","isArray","split"],"mappings":";;;;AAAO,SAASA,+BAA+BC,KAAa;IAC1D,IAAIC,MAAMC,OAAO,CAACF,QAAQ;QACxB,OAAOA;IACT;IAEA,OAAOA,MAAMG,KAAK,CAAC;AACrB"}},
    {"offset": {"line": 9704, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/config/find.ts"],"sourcesContent":["import { getTsconfig } from 'get-tsconfig'\nimport path from 'path'\n\nimport { findUpSync } from '../utilities/findUp.js'\n\n/**\n * List of all filenames to detect as a Payload configuration file.\n */\nexport const payloadConfigFileNames = ['payload.config.js', 'payload.config.ts']\n\n/**\n * Returns the source and output paths from the nearest tsconfig.json file.\n * If no tsconfig.json file is found, returns the current working directory.\n * @returns An object containing the source and output paths.\n */\nconst getTSConfigPaths = (): {\n  configPath?: string\n  outPath?: string\n  rootPath?: string\n  srcPath?: string\n  tsConfigPath?: string\n} => {\n  const tsConfigResult = getTsconfig()!\n  const tsConfig = tsConfigResult.config\n  const tsConfigDir = path.dirname(tsConfigResult.path)\n\n  try {\n    const rootConfigDir = path.resolve(tsConfigDir, tsConfig.compilerOptions!.baseUrl || '')\n    const srcPath = tsConfig.compilerOptions?.rootDir || path.resolve(process.cwd(), 'src')\n    const outPath = tsConfig.compilerOptions?.outDir || path.resolve(process.cwd(), 'dist')\n    let configPath = tsConfig.compilerOptions?.paths?.['@payload-config']?.[0]\n\n    if (configPath) {\n      configPath = path.resolve(rootConfigDir, configPath)\n    }\n    return {\n      configPath,\n      outPath,\n      rootPath: rootConfigDir,\n      srcPath,\n      tsConfigPath: tsConfigResult.path,\n    }\n  } catch (error) {\n    console.error(`Error parsing tsconfig.json: ${error}`) // Do not throw the error, as we can still continue with the other config path finding methods\n    return {\n      rootPath: process.cwd(),\n    }\n  }\n}\n\n/**\n * Searches for a Payload configuration file.\n * @returns The absolute path to the Payload configuration file.\n * @throws An error if no configuration file is found.\n */\nexport const findConfig = (): string => {\n  // If the developer has specified a config path,\n  // format it if relative and use it directly if absolute\n  if (process.env.PAYLOAD_CONFIG_PATH) {\n    if (path.isAbsolute(process.env.PAYLOAD_CONFIG_PATH)) {\n      return process.env.PAYLOAD_CONFIG_PATH\n    }\n\n    return path.resolve(process.cwd(), process.env.PAYLOAD_CONFIG_PATH)\n  }\n\n  const { configPath, outPath, rootPath, srcPath } = getTSConfigPaths()\n\n  // if configPath is absolute file, not folder, return it\n  if (configPath && (path.extname(configPath) === '.js' || path.extname(configPath) === '.ts')) {\n    return configPath\n  }\n\n  const searchPaths =\n    process.env.NODE_ENV === 'production'\n      ? [configPath, outPath, srcPath, rootPath]\n      : [configPath, srcPath, rootPath]\n\n  for (const searchPath of searchPaths) {\n    if (!searchPath) {\n      continue\n    }\n\n    const configPath = findUpSync({\n      dir: searchPath,\n      fileNames: payloadConfigFileNames,\n    })\n\n    if (configPath) {\n      return configPath\n    }\n  }\n\n  // If no config file is found in the directories defined by tsconfig.json,\n  // try searching in the 'src' and 'dist' directory as a last resort, as they are most commonly used\n  if (process.env.NODE_ENV === 'production') {\n    const distConfigPath = findUpSync({\n      dir: path.resolve(process.cwd(), 'dist'),\n      fileNames: ['payload.config.js'],\n    })\n\n    if (distConfigPath) {\n      return distConfigPath\n    }\n  } else {\n    const srcConfigPath = findUpSync({\n      dir: path.resolve(process.cwd(), 'src'),\n      fileNames: payloadConfigFileNames,\n    })\n\n    if (srcConfigPath) {\n      return srcConfigPath\n    }\n  }\n\n  throw new Error(\n    'Error: cannot find Payload config. Please create a configuration file located at the root of your current working directory called \"payload.config.js\" or \"payload.config.ts\".',\n  )\n}\n"],"names":["getTsconfig","path","findUpSync","payloadConfigFileNames","getTSConfigPaths","tsConfigResult","tsConfig","config","tsConfigDir","dirname","rootConfigDir","resolve","compilerOptions","baseUrl","srcPath","rootDir","process","cwd","outPath","outDir","configPath","paths","rootPath","tsConfigPath","error","console","findConfig","env","PAYLOAD_CONFIG_PATH","isAbsolute","extname","searchPaths","NODE_ENV","searchPath","dir","fileNames","distConfigPath","srcConfigPath","Error"],"mappings":";;;;;;AAAA,SAASA,WAAW,QAAQ,eAAc;AAC1C,OAAOC,UAAU,OAAM;AAEvB,SAASC,UAAU,QAAQ,yBAAwB;;;;AAK5C,MAAMC,yBAAyB;IAAC;IAAqB;CAAoB,CAAA;AAEhF;;;;CAIC,GACD,MAAMC,mBAAmB;IAOvB,MAAMC,qBAAiBL,6LAAAA;IACvB,MAAMM,WAAWD,eAAeE,MAAM;IACtC,MAAMC,cAAcP,4GAAAA,CAAKQ,OAAO,CAACJ,eAAeJ,IAAI;IAEpD,IAAI;QACF,MAAMS,gBAAgBT,4GAAAA,CAAKU,OAAO,CAACH,aAAaF,SAASM,eAAe,CAAEC,OAAO,IAAI;QACrF,MAAMC,UAAUR,SAASM,eAAe,EAAEG,WAAWd,4GAAAA,CAAKU,OAAO,CAACK,QAAQC,GAAG,IAAI;QACjF,MAAMC,UAAUZ,SAASM,eAAe,EAAEO,UAAUlB,4GAAAA,CAAKU,OAAO,CAACK,QAAQC,GAAG,IAAI;QAChF,IAAIG,aAAad,SAASM,eAAe,EAAES,OAAO,CAAC,kBAAkB,EAAE,CAAC,EAAE;QAE1E,IAAID,YAAY;YACdA,aAAanB,4GAAAA,CAAKU,OAAO,CAACD,eAAeU;QAC3C;QACA,OAAO;YACLA;YACAF;YACAI,UAAUZ;YACVI;YACAS,cAAclB,eAAeJ,IAAI;QACnC;IACF,EAAE,OAAOuB,OAAO;QACdC,QAAQD,KAAK,CAAC,CAAC,6BAA6B,EAAEA,OAAO,GAAE,8FAA8F;QACrJ,OAAO;YACLF,UAAUN,QAAQC,GAAG;QACvB;IACF;AACF;AAOO,MAAMS,aAAa;IACxB,gDAAgD;IAChD,wDAAwD;IACxD,IAAIV,QAAQW,GAAG,CAACC,mBAAmB,EAAE;QACnC,IAAI3B,4GAAAA,CAAK4B,UAAU,CAACb,QAAQW,GAAG,CAACC,mBAAmB,GAAG;YACpD,OAAOZ,QAAQW,GAAG,CAACC,mBAAmB;QACxC;QAEA,OAAO3B,4GAAAA,CAAKU,OAAO,CAACK,QAAQC,GAAG,IAAID,QAAQW,GAAG,CAACC,mBAAmB;IACpE;IAEA,MAAM,EAAER,UAAU,EAAEF,OAAO,EAAEI,QAAQ,EAAER,OAAO,EAAE,GAAGV;IAEnD,wDAAwD;IACxD,IAAIgB,cAAenB,CAAAA,4GAAAA,CAAK6B,OAAO,CAACV,gBAAgB,SAASnB,4GAAAA,CAAK6B,OAAO,CAACV,gBAAgB,KAAI,GAAI;QAC5F,OAAOA;IACT;IAEA,MAAMW,cACJf,QAAQW,GAAG,CAACK,QAAQ,KAAK,aACrB,0BACA;QAACZ;QAAYN;QAASQ;KAAS;IAErC,KAAK,MAAMW,cAAcF,YAAa;QACpC,IAAI,CAACE,YAAY;YACf;QACF;QAEA,MAAMb,iBAAalB,sKAAAA,EAAW;YAC5BgC,KAAKD;YACLE,WAAWhC;QACb;QAEA,IAAIiB,YAAY;YACd,OAAOA;QACT;IACF;IAEA,0EAA0E;IAC1E,mGAAmG;IACnG,IAAIJ,QAAQW,GAAG,CAACK,QAAQ,KAAK,cAAc;;SASpC;QACL,MAAMK,oBAAgBnC,sKAAAA,EAAW;YAC/BgC,KAAKjC,4GAAAA,CAAKU,OAAO,CAACK,QAAQC,GAAG,IAAI;YACjCkB,WAAWhC;QACb;QAEA,IAAIkC,eAAe;YACjB,OAAOA;QACT;IACF;IAEA,MAAM,IAAIC,MACR;AAEJ,EAAC"}},
    {"offset": {"line": 9800, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/readMigrationFiles.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\nimport type { Payload } from '../../index.js'\nimport type { Migration } from '../types.js'\n\nimport { dynamicImport } from '../../utilities/dynamicImport.js'\n\n/**\n * Read the migration files from disk\n */\nexport const readMigrationFiles = async ({\n  payload,\n}: {\n  payload: Payload\n}): Promise<Migration[]> => {\n  if (!fs.existsSync(payload.db.migrationDir)) {\n    payload.logger.error({\n      msg: `No migration directory found at ${payload.db.migrationDir}`,\n    })\n    return []\n  }\n\n  payload.logger.info({\n    msg: `Reading migration files from ${payload.db.migrationDir}`,\n  })\n\n  const files = fs\n    .readdirSync(payload.db.migrationDir)\n    .sort()\n    .filter((f) => {\n      return (f.endsWith('.ts') || f.endsWith('.js')) && f !== 'index.js' && f !== 'index.ts'\n    })\n    .map((file) => {\n      return path.resolve(payload.db.migrationDir, file)\n    })\n\n  return Promise.all(\n    files.map(async (filePath) => {\n      const migrationModule = await dynamicImport<\n        | {\n            default: Migration\n          }\n        | Migration\n      >(filePath)\n      const migration = 'default' in migrationModule ? migrationModule.default : migrationModule\n\n      const result: Migration = {\n        name: path.basename(filePath).split('.')[0]!,\n        down: migration.down,\n        up: migration.up,\n      }\n\n      return result\n    }),\n  )\n}\n"],"names":["fs","path","dynamicImport","readMigrationFiles","payload","existsSync","db","migrationDir","logger","error","msg","info","files","readdirSync","sort","filter","f","endsWith","map","file","resolve","Promise","all","filePath","migrationModule","migration","default","result","name","basename","split","down","up"],"mappings":";;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;AAKvB,SAASC,aAAa,QAAQ,mCAAkC;;;;AAKzD,MAAMC,qBAAqB,OAAO,EACvCC,OAAO,EAGR;IACC,IAAI,CAACJ,wGAAAA,CAAGK,UAAU,CAACD,QAAQE,EAAE,CAACC,YAAY,GAAG;QAC3CH,QAAQI,MAAM,CAACC,KAAK,CAAC;YACnBC,KAAK,CAAC,gCAAgC,EAAEN,QAAQE,EAAE,CAACC,YAAY,EAAE;QACnE;QACA,OAAO,EAAE;IACX;IAEAH,QAAQI,MAAM,CAACG,IAAI,CAAC;QAClBD,KAAK,CAAC,6BAA6B,EAAEN,QAAQE,EAAE,CAACC,YAAY,EAAE;IAChE;IAEA,MAAMK,QAAQZ,wGAAAA,CACXa,WAAW,CAACT,QAAQE,EAAE,CAACC,YAAY,EACnCO,IAAI,GACJC,MAAM,CAAC,CAACC;QACP,OAAQA,CAAAA,EAAEC,QAAQ,CAAC,UAAUD,EAAEC,QAAQ,CAAC,MAAK,KAAMD,MAAM,cAAcA,MAAM;IAC/E,GACCE,GAAG,CAAC,CAACC;QACJ,OAAOlB,4GAAAA,CAAKmB,OAAO,CAAChB,QAAQE,EAAE,CAACC,YAAY,EAAEY;IAC/C;IAEF,OAAOE,QAAQC,GAAG,CAChBV,MAAMM,GAAG,CAAC,OAAOK;QACf,MAAMC,kBAAkB,UAAMtB,gLAAAA,EAK5BqB;QACF,MAAME,YAAY,aAAaD,kBAAkBA,gBAAgBE,OAAO,GAAGF;QAE3E,MAAMG,SAAoB;YACxBC,MAAM3B,4GAAAA,CAAK4B,QAAQ,CAACN,UAAUO,KAAK,CAAC,IAAI,CAAC,EAAE;YAC3CC,MAAMN,UAAUM,IAAI;YACpBC,IAAIP,UAAUO,EAAE;QAClB;QAEA,OAAOL;IACT;AAEJ,EAAC"}},
    {"offset": {"line": 9840, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/getMigrations.ts"],"sourcesContent":["import type { Payload } from '../../index.js'\nimport type { MigrationData } from '../types.js'\n\n/**\n * Gets all existing migrations from the database, excluding the dev migration\n */\nexport async function getMigrations({\n  payload,\n}: {\n  payload: Payload\n}): Promise<{ existingMigrations: MigrationData[]; latestBatch: number }> {\n  const migrationQuery = await payload.find({\n    collection: 'payload-migrations',\n    limit: 0,\n    sort: ['-batch', '-name'],\n    where: {\n      batch: {\n        not_equals: -1,\n      },\n    },\n  })\n\n  const existingMigrations = migrationQuery.docs as unknown as MigrationData[]\n\n  // Get the highest batch number from existing migrations\n  const latestBatch = Number(existingMigrations?.[0]?.batch) || 0\n\n  return {\n    existingMigrations,\n    latestBatch,\n  }\n}\n"],"names":["getMigrations","payload","migrationQuery","find","collection","limit","sort","where","batch","not_equals","existingMigrations","docs","latestBatch","Number"],"mappings":"AAGA;;CAEC,GACD;;;;AAAO,eAAeA,cAAc,EAClCC,OAAO,EAGR;IACC,MAAMC,iBAAiB,MAAMD,QAAQE,IAAI,CAAC;QACxCC,YAAY;QACZC,OAAO;QACPC,MAAM;YAAC;YAAU;SAAQ;QACzBC,OAAO;YACLC,OAAO;gBACLC,YAAY,CAAC;YACf;QACF;IACF;IAEA,MAAMC,qBAAqBR,eAAeS,IAAI;IAE9C,wDAAwD;IACxD,MAAMC,cAAcC,OAAOH,oBAAoB,CAAC,EAAE,EAAEF,UAAU;IAE9D,OAAO;QACLE;QACAE;IACF;AACF"}},
    {"offset": {"line": 9872, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/versions/buildVersionCompoundIndexes.ts"],"sourcesContent":["import type { SanitizedCompoundIndex } from '../collections/config/types.js'\n\nexport const buildVersionCompoundIndexes = ({\n  indexes,\n}: {\n  indexes: SanitizedCompoundIndex[]\n}): SanitizedCompoundIndex[] => {\n  return indexes.map((each) => ({\n    fields: each.fields.map(({ field, localizedPath, path, pathHasLocalized }) => ({\n      field,\n      localizedPath: `version.${localizedPath}`,\n      path: `version.${path}`,\n      pathHasLocalized,\n    })),\n    unique: false,\n  }))\n}\n"],"names":["buildVersionCompoundIndexes","indexes","map","each","fields","field","localizedPath","path","pathHasLocalized","unique"],"mappings":";;;;AAEO,MAAMA,8BAA8B,CAAC,EAC1CC,OAAO,EAGR;IACC,OAAOA,QAAQC,GAAG,CAAC,CAACC,OAAU,CAAA;YAC5BC,QAAQD,KAAKC,MAAM,CAACF,GAAG,CAAC,CAAC,EAAEG,KAAK,EAAEC,aAAa,EAAEC,IAAI,EAAEC,gBAAgB,EAAE,GAAM,CAAA;oBAC7EH;oBACAC,eAAe,CAAC,QAAQ,EAAEA,eAAe;oBACzCC,MAAM,CAAC,QAAQ,EAAEA,MAAM;oBACvBC;gBACF,CAAA;YACAC,QAAQ;QACV,CAAA;AACF,EAAC"}},
    {"offset": {"line": 9891, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/defaultUpdateJobs.ts"],"sourcesContent":["import type { DatabaseAdapter, Job } from '../index.js'\nimport type { UpdateJobs } from './types.js'\n\nimport { jobsCollectionSlug } from '../queues/config/collection.js'\n\nexport const defaultUpdateJobs: UpdateJobs = async function updateMany(\n  this: DatabaseAdapter,\n  { id, data, limit, req, returning, where },\n) {\n  const updatedJobs: Job[] | null = []\n\n  const jobsToUpdate: Job[] = (\n    id\n      ? [\n          await this.findOne({\n            collection: jobsCollectionSlug,\n            req,\n            where: { id: { equals: id } },\n          }),\n        ]\n      : (\n          await this.find({\n            collection: jobsCollectionSlug,\n            limit,\n            pagination: false,\n            req,\n            where,\n          })\n        ).docs\n  ).filter(Boolean) as Job[]\n\n  if (!jobsToUpdate) {\n    return null\n  }\n\n  for (const job of jobsToUpdate) {\n    const updateData = {\n      ...job,\n      ...data,\n    }\n    const updatedJob = await this.updateOne({\n      id: job.id,\n      collection: jobsCollectionSlug,\n      data: updateData,\n      req,\n      returning,\n    })\n    updatedJobs.push(updatedJob)\n  }\n\n  return updatedJobs\n}\n"],"names":["jobsCollectionSlug","defaultUpdateJobs","updateMany","id","data","limit","req","returning","where","updatedJobs","jobsToUpdate","findOne","collection","equals","find","pagination","docs","filter","Boolean","job","updateData","updatedJob","updateOne","push"],"mappings":";;;;AAGA,SAASA,kBAAkB,QAAQ,iCAAgC;;AAE5D,MAAMC,oBAAgC,eAAeC,WAE1D,EAAEC,EAAE,EAAEC,IAAI,EAAEC,KAAK,EAAEC,GAAG,EAAEC,SAAS,EAAEC,KAAK,EAAE;IAE1C,MAAMC,cAA4B,EAAE;IAEpC,MAAMC,eACJP,CAAAA,KACI;QACE,MAAM,IAAI,CAACQ,OAAO,CAAC;YACjBC,YAAYZ,yLAAAA;YACZM;YACAE,OAAO;gBAAEL,IAAI;oBAAEU,QAAQV;gBAAG;YAAE;QAC9B;KACD,GAEC,CAAA,MAAM,IAAI,CAACW,IAAI,CAAC;QACdF,YAAYZ,yLAAAA;QACZK;QACAU,YAAY;QACZT;QACAE;IACF,EAAC,EACDQ,IAAG,EACTC,MAAM,CAACC;IAET,IAAI,CAACR,cAAc;QACjB,OAAO;IACT;IAEA,KAAK,MAAMS,OAAOT,aAAc;QAC9B,MAAMU,aAAa;YACjB,GAAGD,GAAG;YACN,GAAGf,IAAI;QACT;QACA,MAAMiB,aAAa,MAAM,IAAI,CAACC,SAAS,CAAC;YACtCnB,IAAIgB,IAAIhB,EAAE;YACVS,YAAYZ,yLAAAA;YACZI,MAAMgB;YACNd;YACAC;QACF;QACAE,YAAYc,IAAI,CAACF;IACnB;IAEA,OAAOZ;AACT,EAAC"}},
    {"offset": {"line": 9939, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrationTemplate.ts"],"sourcesContent":["export const migrationTemplate = `\nimport {\n  MigrateUpArgs,\n  MigrateDownArgs,\n} from \"@payloadcms/db-mongodb\";\n\nexport async function up({ payload, req }: MigrateUpArgs): Promise<void> {\n  // Migration code\n};\n\nexport async function down({ payload, req }: MigrateDownArgs): Promise<void> {\n  // Migration code\n};\n`\n"],"names":["migrationTemplate"],"mappings":";;;;AAAO,MAAMA,oBAAoB,CAAC;;;;;;;;;;;;;AAalC,CAAC,CAAA"}},
    {"offset": {"line": 9961, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/createMigration.ts"],"sourcesContent":["import fs from 'fs'\n\nimport type { CreateMigration } from '../types.js'\n\nimport { writeMigrationIndex } from '../../index.js'\nimport { migrationTemplate } from './migrationTemplate.js'\n\nexport const createMigration: CreateMigration = function createMigration({\n  migrationName,\n  payload,\n}) {\n  const dir = payload.db.migrationDir\n  if (!fs.existsSync(dir)) {\n    fs.mkdirSync(dir)\n  }\n\n  const [yyymmdd, hhmmss] = new Date().toISOString().split('T')\n  const formattedDate = yyymmdd!.replace(/\\D/g, '')\n  const formattedTime = hhmmss!.split('.')[0]!.replace(/\\D/g, '')\n\n  const timestamp = `${formattedDate}_${formattedTime}`\n\n  const formattedName = migrationName!.replace(/\\W/g, '_')\n  const fileName = `${timestamp}_${formattedName}.ts`\n  const filePath = `${dir}/${fileName}`\n  fs.writeFileSync(filePath, migrationTemplate)\n\n  writeMigrationIndex({ migrationsDir: payload.db.migrationDir })\n\n  payload.logger.info({ msg: `Migration created at ${filePath}` })\n}\n"],"names":["fs","writeMigrationIndex","migrationTemplate","createMigration","migrationName","payload","dir","db","migrationDir","existsSync","mkdirSync","yyymmdd","hhmmss","Date","toISOString","split","formattedDate","replace","formattedTime","timestamp","formattedName","fileName","filePath","writeFileSync","migrationsDir","logger","info","msg"],"mappings":";;;;AAAA,OAAOA,QAAQ,KAAI;AAInB,SAASC,mBAAmB,QAAQ,iBAAgB;AACpD,SAASC,iBAAiB,QAAQ,yBAAwB;;;;AAEnD,MAAMC,kBAAmC,SAASA,gBAAgB,EACvEC,aAAa,EACbC,OAAO,EACR;IACC,MAAMC,MAAMD,QAAQE,EAAE,CAACC,YAAY;IACnC,IAAI,CAACR,wGAAAA,CAAGS,UAAU,CAACH,MAAM;QACvBN,wGAAAA,CAAGU,SAAS,CAACJ;IACf;IAEA,MAAM,CAACK,SAASC,OAAO,GAAG,IAAIC,OAAOC,WAAW,GAAGC,KAAK,CAAC;IACzD,MAAMC,gBAAgBL,QAASM,OAAO,CAAC,OAAO;IAC9C,MAAMC,gBAAgBN,OAAQG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAEE,OAAO,CAAC,OAAO;IAE5D,MAAME,YAAY,GAAGH,cAAc,CAAC,EAAEE,eAAe;IAErD,MAAME,gBAAgBhB,cAAea,OAAO,CAAC,OAAO;IACpD,MAAMI,WAAW,GAAGF,UAAU,CAAC,EAAEC,cAAc,GAAG,CAAC;IACnD,MAAME,WAAW,GAAGhB,IAAI,CAAC,EAAEe,UAAU;IACrCrB,wGAAAA,CAAGuB,aAAa,CAACD,UAAUpB,qMAAAA;QAE3BD,yMAAAA,EAAoB;QAAEuB,eAAenB,QAAQE,EAAE,CAACC,YAAY;IAAC;IAE7DH,QAAQoB,MAAM,CAACC,IAAI,CAAC;QAAEC,KAAK,CAAC,qBAAqB,EAAEL,UAAU;IAAC;AAChE,EAAC"}},
    {"offset": {"line": 9995, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrate.ts"],"sourcesContent":["import type { BaseDatabaseAdapter } from '../types.js'\n\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { createLocalReq } from '../../utilities/createLocalReq.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { getMigrations } from './getMigrations.js'\nimport { readMigrationFiles } from './readMigrationFiles.js'\n\nexport const migrate: BaseDatabaseAdapter['migrate'] = async function migrate(\n  this: BaseDatabaseAdapter,\n  args,\n): Promise<void> {\n  const { payload } = this\n  const migrationFiles = args?.migrations || (await readMigrationFiles({ payload }))\n  const { existingMigrations, latestBatch } = await getMigrations({ payload })\n\n  const newBatch = latestBatch + 1\n\n  // Execute 'up' function for each migration sequentially\n  for (const migration of migrationFiles) {\n    const existingMigration = existingMigrations.find(\n      (existing) => existing.name === migration.name,\n    )\n\n    // Run migration if not found in database\n    if (existingMigration) {\n      continue\n    }\n\n    const start = Date.now()\n    const req = await createLocalReq({}, payload)\n\n    payload.logger.info({ msg: `Migrating: ${migration.name}` })\n\n    try {\n      await initTransaction(req)\n      const session = payload.db.sessions?.[await req.transactionID!]\n      await migration.up({ payload, req, session })\n      payload.logger.info({ msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)` })\n      await payload.create({\n        collection: 'payload-migrations',\n        data: {\n          name: migration.name,\n          batch: newBatch,\n        },\n        req,\n      })\n      await commitTransaction(req)\n    } catch (err: unknown) {\n      await killTransaction(req)\n      payload.logger.error({ err, msg: `Error running migration ${migration.name}` })\n      throw err\n    }\n  }\n}\n"],"names":["commitTransaction","createLocalReq","initTransaction","killTransaction","getMigrations","readMigrationFiles","migrate","args","payload","migrationFiles","migrations","existingMigrations","latestBatch","newBatch","migration","existingMigration","find","existing","name","start","Date","now","req","logger","info","msg","session","db","sessions","transactionID","up","create","collection","data","batch","err","error"],"mappings":";;;;AAEA,SAASA,iBAAiB,QAAQ,uCAAsC;AACxE,SAASC,cAAc,QAAQ,oCAAmC;AAClE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,aAAa,QAAQ,qBAAoB;AAClD,SAASC,kBAAkB,QAAQ,0BAAyB;;;;;;;AAErD,MAAMC,UAA0C,eAAeA,QAEpEC,IAAI;IAEJ,MAAM,EAAEC,OAAO,EAAE,GAAG,IAAI;IACxB,MAAMC,iBAAiBF,MAAMG,cAAe,UAAML,uMAAAA,EAAmB;QAAEG;IAAQ;IAC/E,MAAM,EAAEG,kBAAkB,EAAEC,WAAW,EAAE,GAAG,UAAMR,6LAAAA,EAAc;QAAEI;IAAQ;IAE1E,MAAMK,WAAWD,cAAc;IAE/B,wDAAwD;IACxD,KAAK,MAAME,aAAaL,eAAgB;QACtC,MAAMM,oBAAoBJ,mBAAmBK,IAAI,CAC/C,CAACC,WAAaA,SAASC,IAAI,KAAKJ,UAAUI,IAAI;QAGhD,yCAAyC;QACzC,IAAIH,mBAAmB;YACrB;QACF;QAEA,MAAMI,QAAQC,KAAKC,GAAG;QACtB,MAAMC,MAAM,UAAMrB,kLAAAA,EAAe,CAAC,GAAGO;QAErCA,QAAQe,MAAM,CAACC,IAAI,CAAC;YAAEC,KAAK,CAAC,WAAW,EAAEX,UAAUI,IAAI,EAAE;QAAC;QAE1D,IAAI;YACF,UAAMhB,oLAAAA,EAAgBoB;YACtB,MAAMI,UAAUlB,QAAQmB,EAAE,CAACC,QAAQ,EAAE,CAAC,MAAMN,IAAIO,aAAa,CAAE;YAC/D,MAAMf,UAAUgB,EAAE,CAAC;gBAAEtB;gBAASc;gBAAKI;YAAQ;YAC3ClB,QAAQe,MAAM,CAACC,IAAI,CAAC;gBAAEC,KAAK,CAAC,WAAW,EAAEX,UAAUI,IAAI,CAAC,EAAE,EAAEE,KAAKC,GAAG,KAAKF,MAAM,GAAG,CAAC;YAAC;YACpF,MAAMX,QAAQuB,MAAM,CAAC;gBACnBC,YAAY;gBACZC,MAAM;oBACJf,MAAMJ,UAAUI,IAAI;oBACpBgB,OAAOrB;gBACT;gBACAS;YACF;YACA,UAAMtB,wLAAAA,EAAkBsB;QAC1B,EAAE,OAAOa,KAAc;YACrB,UAAMhC,oLAAAA,EAAgBmB;YACtBd,QAAQe,MAAM,CAACa,KAAK,CAAC;gBAAED;gBAAKV,KAAK,CAAC,wBAAwB,EAAEX,UAAUI,IAAI,EAAE;YAAC;YAC7E,MAAMiB;QACR;IACF;AACF,EAAC"}},
    {"offset": {"line": 10066, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrateDown.ts"],"sourcesContent":["import type { BaseDatabaseAdapter } from '../types.js'\n\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { createLocalReq } from '../../utilities/createLocalReq.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { getMigrations } from './getMigrations.js'\nimport { readMigrationFiles } from './readMigrationFiles.js'\n\nexport async function migrateDown(this: BaseDatabaseAdapter): Promise<void> {\n  const { payload } = this\n  const migrationFiles = await readMigrationFiles({ payload })\n\n  const { existingMigrations, latestBatch } = await getMigrations({\n    payload,\n  })\n\n  if (!existingMigrations?.length) {\n    payload.logger.info({ msg: 'No migrations to rollback.' })\n    return\n  }\n\n  payload.logger.info({\n    msg: `Rolling back batch ${latestBatch} consisting of ${existingMigrations.length} migration(s).`,\n  })\n\n  const latestBatchMigrations = existingMigrations.filter(({ batch }) => batch === latestBatch)\n\n  for (const migration of latestBatchMigrations) {\n    const migrationFile = migrationFiles.find((m) => m.name === migration.name)\n    if (!migrationFile) {\n      throw new Error(`Migration ${migration.name} not found locally.`)\n    }\n\n    const start = Date.now()\n    const req = await createLocalReq({}, payload)\n\n    try {\n      payload.logger.info({ msg: `Migrating down: ${migrationFile.name}` })\n      await initTransaction(req)\n      const session = payload.db.sessions?.[await req.transactionID!]\n      await migrationFile.down({ payload, req, session })\n      payload.logger.info({\n        msg: `Migrated down:  ${migrationFile.name} (${Date.now() - start}ms)`,\n      })\n      // Waiting for implementation here\n      await payload.delete({\n        id: migration.id!,\n        collection: 'payload-migrations',\n        req,\n      })\n\n      await commitTransaction(req)\n    } catch (err: unknown) {\n      await killTransaction(req)\n      payload.logger.error({\n        err,\n        msg: `Error running migration ${migrationFile.name}`,\n      })\n      process.exit(1)\n    }\n  }\n}\n"],"names":["commitTransaction","createLocalReq","initTransaction","killTransaction","getMigrations","readMigrationFiles","migrateDown","payload","migrationFiles","existingMigrations","latestBatch","length","logger","info","msg","latestBatchMigrations","filter","batch","migration","migrationFile","find","m","name","Error","start","Date","now","req","session","db","sessions","transactionID","down","delete","id","collection","err","error","process","exit"],"mappings":";;;;AAEA,SAASA,iBAAiB,QAAQ,uCAAsC;AACxE,SAASC,cAAc,QAAQ,oCAAmC;AAClE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,aAAa,QAAQ,qBAAoB;AAClD,SAASC,kBAAkB,QAAQ,0BAAyB;;;;;;;AAErD,eAAeC;IACpB,MAAM,EAAEC,OAAO,EAAE,GAAG,IAAI;IACxB,MAAMC,iBAAiB,UAAMH,uMAAAA,EAAmB;QAAEE;IAAQ;IAE1D,MAAM,EAAEE,kBAAkB,EAAEC,WAAW,EAAE,GAAG,UAAMN,6LAAAA,EAAc;QAC9DG;IACF;IAEA,IAAI,CAACE,oBAAoBE,QAAQ;QAC/BJ,QAAQK,MAAM,CAACC,IAAI,CAAC;YAAEC,KAAK;QAA6B;QACxD;IACF;IAEAP,QAAQK,MAAM,CAACC,IAAI,CAAC;QAClBC,KAAK,CAAC,mBAAmB,EAAEJ,YAAY,eAAe,EAAED,mBAAmBE,MAAM,CAAC,cAAc,CAAC;IACnG;IAEA,MAAMI,wBAAwBN,mBAAmBO,MAAM,CAAC,CAAC,EAAEC,KAAK,EAAE,GAAKA,UAAUP;IAEjF,KAAK,MAAMQ,aAAaH,sBAAuB;QAC7C,MAAMI,gBAAgBX,eAAeY,IAAI,CAAC,CAACC,IAAMA,EAAEC,IAAI,KAAKJ,UAAUI,IAAI;QAC1E,IAAI,CAACH,eAAe;YAClB,MAAM,IAAII,MAAM,CAAC,UAAU,EAAEL,UAAUI,IAAI,CAAC,mBAAmB,CAAC;QAClE;QAEA,MAAME,QAAQC,KAAKC,GAAG;QACtB,MAAMC,MAAM,UAAM1B,kLAAAA,EAAe,CAAC,GAAGM;QAErC,IAAI;YACFA,QAAQK,MAAM,CAACC,IAAI,CAAC;gBAAEC,KAAK,CAAC,gBAAgB,EAAEK,cAAcG,IAAI,EAAE;YAAC;YACnE,UAAMpB,oLAAAA,EAAgByB;YACtB,MAAMC,UAAUrB,QAAQsB,EAAE,CAACC,QAAQ,EAAE,CAAC,MAAMH,IAAII,aAAa,CAAE;YAC/D,MAAMZ,cAAca,IAAI,CAAC;gBAAEzB;gBAASoB;gBAAKC;YAAQ;YACjDrB,QAAQK,MAAM,CAACC,IAAI,CAAC;gBAClBC,KAAK,CAAC,gBAAgB,EAAEK,cAAcG,IAAI,CAAC,EAAE,EAAEG,KAAKC,GAAG,KAAKF,MAAM,GAAG,CAAC;YACxE;YACA,kCAAkC;YAClC,MAAMjB,QAAQ0B,MAAM,CAAC;gBACnBC,IAAIhB,UAAUgB,EAAE;gBAChBC,YAAY;gBACZR;YACF;YAEA,UAAM3B,wLAAAA,EAAkB2B;QAC1B,EAAE,OAAOS,KAAc;YACrB,UAAMjC,oLAAAA,EAAgBwB;YACtBpB,QAAQK,MAAM,CAACyB,KAAK,CAAC;gBACnBD;gBACAtB,KAAK,CAAC,wBAAwB,EAAEK,cAAcG,IAAI,EAAE;YACtD;YACAgB,QAAQC,IAAI,CAAC;QACf;IACF;AACF"}},
    {"offset": {"line": 10142, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrateRefresh.ts"],"sourcesContent":["import type { BaseDatabaseAdapter } from '../types.js'\n\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { createLocalReq } from '../../utilities/createLocalReq.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { getMigrations } from './getMigrations.js'\nimport { readMigrationFiles } from './readMigrationFiles.js'\n\n/**\n * Run all migration down functions before running up\n */\nexport async function migrateRefresh(this: BaseDatabaseAdapter) {\n  const { payload } = this\n  const migrationFiles = await readMigrationFiles({ payload })\n\n  const { existingMigrations } = await getMigrations({\n    payload,\n  })\n\n  const req = await createLocalReq({}, payload)\n\n  if (existingMigrations?.length) {\n    payload.logger.info({\n      msg: `Rolling back all ${existingMigrations.length} migration(s).`,\n    })\n    // Reverse order of migrations to rollback\n    existingMigrations.reverse()\n\n    for (const migration of existingMigrations) {\n      try {\n        const migrationFile = migrationFiles.find((m) => m.name === migration.name)\n        if (!migrationFile) {\n          throw new Error(`Migration ${migration.name} not found locally.`)\n        }\n\n        payload.logger.info({ msg: `Migrating down: ${migration.name}` })\n        const start = Date.now()\n        await initTransaction(req)\n        const session = payload.db.sessions?.[await req.transactionID!]\n        await migrationFile.down({ payload, req, session })\n        payload.logger.info({\n          msg: `Migrated down:  ${migration.name} (${Date.now() - start}ms)`,\n        })\n        await payload.delete({\n          collection: 'payload-migrations',\n          req,\n          where: {\n            name: {\n              equals: migration.name,\n            },\n          },\n        })\n      } catch (err: unknown) {\n        await killTransaction(req)\n        let msg = `Error running migration ${migration.name}. Rolling back.`\n        if (err instanceof Error) {\n          msg += ` ${err.message}`\n        }\n        payload.logger.error({\n          err,\n          msg,\n        })\n        process.exit(1)\n      }\n    }\n  } else {\n    payload.logger.info({ msg: 'No migrations to rollback.' })\n  }\n\n  // Run all migrate up\n  for (const migration of migrationFiles) {\n    payload.logger.info({ msg: `Migrating: ${migration.name}` })\n    try {\n      const start = Date.now()\n      await initTransaction(req)\n      await migration.up({ payload, req })\n      await payload.create({\n        collection: 'payload-migrations',\n        data: {\n          name: migration.name,\n          executed: true,\n        },\n        req,\n      })\n      await commitTransaction(req)\n\n      payload.logger.info({ msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)` })\n    } catch (err: unknown) {\n      await killTransaction(req)\n      let msg = `Error running migration ${migration.name}. Rolling back.`\n      if (err instanceof Error) {\n        msg += ` ${err.message}`\n      }\n      payload.logger.error({\n        err,\n        msg,\n      })\n      process.exit(1)\n    }\n  }\n}\n"],"names":["commitTransaction","createLocalReq","initTransaction","killTransaction","getMigrations","readMigrationFiles","migrateRefresh","payload","migrationFiles","existingMigrations","req","length","logger","info","msg","reverse","migration","migrationFile","find","m","name","Error","start","Date","now","session","db","sessions","transactionID","down","delete","collection","where","equals","err","message","error","process","exit","up","create","data","executed"],"mappings":"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"}},
    {"offset": {"line": 10262, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrateReset.ts"],"sourcesContent":["import type { BaseDatabaseAdapter } from '../types.js'\n\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { createLocalReq } from '../../utilities/createLocalReq.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { getMigrations } from './getMigrations.js'\nimport { readMigrationFiles } from './readMigrationFiles.js'\n\nexport async function migrateReset(this: BaseDatabaseAdapter): Promise<void> {\n  const { payload } = this\n  const migrationFiles = await readMigrationFiles({ payload })\n\n  const { existingMigrations } = await getMigrations({ payload })\n\n  if (!existingMigrations?.length) {\n    payload.logger.info({ msg: 'No migrations to reset.' })\n    return\n  }\n\n  const req = await createLocalReq({}, payload)\n\n  migrationFiles.reverse()\n\n  // Rollback all migrations in order\n  for (const migration of migrationFiles) {\n    // Create or update migration in database\n    const existingMigration = existingMigrations.find(\n      (existing) => existing.name === migration.name,\n    )\n    if (existingMigration) {\n      payload.logger.info({ msg: `Migrating down: ${migration.name}` })\n      try {\n        const start = Date.now()\n        await initTransaction(req)\n        const session = payload.db.sessions?.[await req.transactionID!]\n        await migration.down({ payload, req, session })\n        await payload.delete({\n          collection: 'payload-migrations',\n          req,\n          where: {\n            id: {\n              equals: existingMigration.id,\n            },\n          },\n        })\n        await commitTransaction(req)\n        payload.logger.info({ msg: `Migrated down:  ${migration.name} (${Date.now() - start}ms)` })\n      } catch (err: unknown) {\n        await killTransaction(req)\n        payload.logger.error({ err, msg: `Error running migration ${migration.name}` })\n        throw err\n      }\n    }\n  }\n\n  // Delete dev migration\n  try {\n    await payload.delete({\n      collection: 'payload-migrations',\n      where: {\n        batch: {\n          equals: -1,\n        },\n      },\n    })\n  } catch (err: unknown) {\n    payload.logger.error({ err, msg: 'Error deleting dev migration' })\n  }\n}\n"],"names":["commitTransaction","createLocalReq","initTransaction","killTransaction","getMigrations","readMigrationFiles","migrateReset","payload","migrationFiles","existingMigrations","length","logger","info","msg","req","reverse","migration","existingMigration","find","existing","name","start","Date","now","session","db","sessions","transactionID","down","delete","collection","where","id","equals","err","error","batch"],"mappings":";;;;AAEA,SAASA,iBAAiB,QAAQ,uCAAsC;AACxE,SAASC,cAAc,QAAQ,oCAAmC;AAClE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,aAAa,QAAQ,qBAAoB;AAClD,SAASC,kBAAkB,QAAQ,0BAAyB;;;;;;;AAErD,eAAeC;IACpB,MAAM,EAAEC,OAAO,EAAE,GAAG,IAAI;IACxB,MAAMC,iBAAiB,UAAMH,uMAAAA,EAAmB;QAAEE;IAAQ;IAE1D,MAAM,EAAEE,kBAAkB,EAAE,GAAG,UAAML,6LAAAA,EAAc;QAAEG;IAAQ;IAE7D,IAAI,CAACE,oBAAoBC,QAAQ;QAC/BH,QAAQI,MAAM,CAACC,IAAI,CAAC;YAAEC,KAAK;QAA0B;QACrD;IACF;IAEA,MAAMC,MAAM,UAAMb,kLAAAA,EAAe,CAAC,GAAGM;IAErCC,eAAeO,OAAO;IAEtB,mCAAmC;IACnC,KAAK,MAAMC,aAAaR,eAAgB;QACtC,yCAAyC;QACzC,MAAMS,oBAAoBR,mBAAmBS,IAAI,CAC/C,CAACC,WAAaA,SAASC,IAAI,KAAKJ,UAAUI,IAAI;QAEhD,IAAIH,mBAAmB;YACrBV,QAAQI,MAAM,CAACC,IAAI,CAAC;gBAAEC,KAAK,CAAC,gBAAgB,EAAEG,UAAUI,IAAI,EAAE;YAAC;YAC/D,IAAI;gBACF,MAAMC,QAAQC,KAAKC,GAAG;gBACtB,UAAMrB,oLAAAA,EAAgBY;gBACtB,MAAMU,UAAUjB,QAAQkB,EAAE,CAACC,QAAQ,EAAE,CAAC,MAAMZ,IAAIa,aAAa,CAAE;gBAC/D,MAAMX,UAAUY,IAAI,CAAC;oBAAErB;oBAASO;oBAAKU;gBAAQ;gBAC7C,MAAMjB,QAAQsB,MAAM,CAAC;oBACnBC,YAAY;oBACZhB;oBACAiB,OAAO;wBACLC,IAAI;4BACFC,QAAQhB,kBAAkBe,EAAE;wBAC9B;oBACF;gBACF;gBACA,UAAMhC,wLAAAA,EAAkBc;gBACxBP,QAAQI,MAAM,CAACC,IAAI,CAAC;oBAAEC,KAAK,CAAC,gBAAgB,EAAEG,UAAUI,IAAI,CAAC,EAAE,EAAEE,KAAKC,GAAG,KAAKF,MAAM,GAAG,CAAC;gBAAC;YAC3F,EAAE,OAAOa,KAAc;gBACrB,UAAM/B,oLAAAA,EAAgBW;gBACtBP,QAAQI,MAAM,CAACwB,KAAK,CAAC;oBAAED;oBAAKrB,KAAK,CAAC,wBAAwB,EAAEG,UAAUI,IAAI,EAAE;gBAAC;gBAC7E,MAAMc;YACR;QACF;IACF;IAEA,uBAAuB;IACvB,IAAI;QACF,MAAM3B,QAAQsB,MAAM,CAAC;YACnBC,YAAY;YACZC,OAAO;gBACLK,OAAO;oBACLH,QAAQ,CAAC;gBACX;YACF;QACF;IACF,EAAE,OAAOC,KAAc;QACrB3B,QAAQI,MAAM,CAACwB,KAAK,CAAC;YAAED;YAAKrB,KAAK;QAA+B;IAClE;AACF"}},
    {"offset": {"line": 10355, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/migrateStatus.ts"],"sourcesContent":["import { Table } from 'console-table-printer'\n\nimport type { BaseDatabaseAdapter } from '../types.js'\n\nimport { getMigrations } from './getMigrations.js'\nimport { readMigrationFiles } from './readMigrationFiles.js'\n\nexport async function migrateStatus(this: BaseDatabaseAdapter): Promise<void> {\n  const { payload } = this\n  const migrationFiles = await readMigrationFiles({ payload })\n\n  payload.logger.debug({\n    msg: `Found ${migrationFiles.length} migration files.`,\n  })\n\n  const { existingMigrations } = await getMigrations({ payload })\n\n  if (!migrationFiles.length) {\n    payload.logger.info({ msg: 'No migrations found.' })\n    return\n  }\n\n  // Compare migration files to existing migrations\n  const statuses = migrationFiles.map((migration) => {\n    const existingMigration = existingMigrations.find((m) => m.name === migration.name)\n    return {\n      Name: migration.name,\n\n      Batch: existingMigration?.batch,\n      Ran: existingMigration ? 'Yes' : 'No',\n    }\n  })\n\n  const p = new Table()\n\n  statuses.forEach((s) => {\n    p.addRow(s, {\n      color: s.Ran === 'Yes' ? 'green' : 'red',\n    })\n  })\n  p.printTable()\n}\n"],"names":["Table","getMigrations","readMigrationFiles","migrateStatus","payload","migrationFiles","logger","debug","msg","length","existingMigrations","info","statuses","map","migration","existingMigration","find","m","name","Name","Batch","batch","Ran","p","forEach","s","addRow","color","printTable"],"mappings":";;;;AAAA,SAASA,KAAK,QAAQ,wBAAuB;AAI7C,SAASC,aAAa,QAAQ,qBAAoB;AAClD,SAASC,kBAAkB,QAAQ,0BAAyB;;;;AAErD,eAAeC;IACpB,MAAM,EAAEC,OAAO,EAAE,GAAG,IAAI;IACxB,MAAMC,iBAAiB,UAAMH,uMAAAA,EAAmB;QAAEE;IAAQ;IAE1DA,QAAQE,MAAM,CAACC,KAAK,CAAC;QACnBC,KAAK,CAAC,MAAM,EAAEH,eAAeI,MAAM,CAAC,iBAAiB,CAAC;IACxD;IAEA,MAAM,EAAEC,kBAAkB,EAAE,GAAG,UAAMT,6LAAAA,EAAc;QAAEG;IAAQ;IAE7D,IAAI,CAACC,eAAeI,MAAM,EAAE;QAC1BL,QAAQE,MAAM,CAACK,IAAI,CAAC;YAAEH,KAAK;QAAuB;QAClD;IACF;IAEA,iDAAiD;IACjD,MAAMI,WAAWP,eAAeQ,GAAG,CAAC,CAACC;QACnC,MAAMC,oBAAoBL,mBAAmBM,IAAI,CAAC,CAACC,IAAMA,EAAEC,IAAI,KAAKJ,UAAUI,IAAI;QAClF,OAAO;YACLC,MAAML,UAAUI,IAAI;YAEpBE,OAAOL,mBAAmBM;YAC1BC,KAAKP,oBAAoB,QAAQ;QACnC;IACF;IAEA,MAAMQ,IAAI,IAAIvB,uKAAAA;IAEdY,SAASY,OAAO,CAAC,CAACC;QAChBF,EAAEG,MAAM,CAACD,GAAG;YACVE,OAAOF,EAAEH,GAAG,KAAK,QAAQ,UAAU;QACrC;IACF;IACAC,EAAEK,UAAU;AACd"}},
    {"offset": {"line": 10403, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/createDatabaseAdapter.ts"],"sourcesContent":["import type { MarkOptional } from 'ts-essentials'\n\nimport type {\n  BaseDatabaseAdapter,\n  BeginTransaction,\n  CommitTransaction,\n  RollbackTransaction,\n} from './types.js'\n\nimport { defaultUpdateJobs } from './defaultUpdateJobs.js'\nimport { createMigration } from './migrations/createMigration.js'\nimport { migrate } from './migrations/migrate.js'\nimport { migrateDown } from './migrations/migrateDown.js'\nimport { migrateRefresh } from './migrations/migrateRefresh.js'\nimport { migrateReset } from './migrations/migrateReset.js'\nimport { migrateStatus } from './migrations/migrateStatus.js'\n\nconst beginTransaction: BeginTransaction = () => Promise.resolve(null)\n// @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\nconst rollbackTransaction: RollbackTransaction = () => Promise.resolve(null)\n// @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\nconst commitTransaction: CommitTransaction = () => Promise.resolve(null)\n\nexport function createDatabaseAdapter<T extends BaseDatabaseAdapter>(\n  args: MarkOptional<\n    T,\n    | 'allowIDOnCreate'\n    | 'bulkOperationsSingleTransaction'\n    | 'createMigration'\n    | 'migrate'\n    | 'migrateDown'\n    | 'migrateFresh'\n    | 'migrateRefresh'\n    | 'migrateReset'\n    | 'migrateStatus'\n    | 'migrationDir'\n    | 'updateJobs'\n  >,\n): T {\n  return {\n    // Default 'null' transaction functions\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    beginTransaction,\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    commitTransaction,\n    createMigration,\n    migrate,\n    migrateDown,\n    migrateFresh: () => Promise.resolve(null),\n    migrateRefresh,\n    migrateReset,\n    migrateStatus,\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    rollbackTransaction,\n    updateJobs: defaultUpdateJobs,\n\n    ...args,\n    // Ensure migrationDir is set\n    migrationDir: args.migrationDir || 'migrations',\n    // Set default for bulkOperationsSingleTransaction if not provided\n    bulkOperationsSingleTransaction: args.bulkOperationsSingleTransaction ?? false,\n  } as T\n}\n"],"names":["defaultUpdateJobs","createMigration","migrate","migrateDown","migrateRefresh","migrateReset","migrateStatus","beginTransaction","Promise","resolve","rollbackTransaction","commitTransaction","createDatabaseAdapter","args","migrateFresh","updateJobs","migrationDir","bulkOperationsSingleTransaction"],"mappings":";;;;AASA,SAASA,iBAAiB,QAAQ,yBAAwB;AAC1D,SAASC,eAAe,QAAQ,kCAAiC;AACjE,SAASC,OAAO,QAAQ,0BAAyB;AACjD,SAASC,WAAW,QAAQ,8BAA6B;AACzD,SAASC,cAAc,QAAQ,iCAAgC;AAC/D,SAASC,YAAY,QAAQ,+BAA8B;AAC3D,SAASC,aAAa,QAAQ,gCAA+B;;;;;;;;AAE7D,MAAMC,mBAAqC,IAAMC,QAAQC,OAAO,CAAC;AACjE,oFAAoF;AACpF,MAAMC,sBAA2C,IAAMF,QAAQC,OAAO,CAAC;AACvE,oFAAoF;AACpF,MAAME,oBAAuC,IAAMH,QAAQC,OAAO,CAAC;AAE5D,SAASG,sBACdC,IAaC;IAED,OAAO;QACL,uCAAuC;QACvC,oFAAoF;QACpFN;QACA,oFAAoF;QACpFI;yBACAV,iMAAAA;iBACAC,iLAAAA;qBACAC,yLAAAA;QACAW,cAAc,IAAMN,QAAQC,OAAO,CAAC;wBACpCL,+LAAAA;sBACAC,2LAAAA;uBACAC,6LAAAA;QACA,oFAAoF;QACpFI;QACAK,YAAYf,uLAAAA;QAEZ,GAAGa,IAAI;QACP,6BAA6B;QAC7BG,cAAcH,KAAKG,YAAY,IAAI;QACnC,kEAAkE;QAClEC,iCAAiCJ,KAAKI,+BAA+B,IAAI;IAC3E;AACF"}},
    {"offset": {"line": 10454, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/defaultBeginTransaction.ts"],"sourcesContent":["import type { BeginTransaction } from './types.js'\n\n/**\n * Default implementation of `beginTransaction` that returns a resolved promise of null\n */\nexport function defaultBeginTransaction(): BeginTransaction {\n  const promiseSingleton: Promise<null> = Promise.resolve(null)\n  return () => promiseSingleton\n}\n"],"names":["defaultBeginTransaction","promiseSingleton","Promise","resolve"],"mappings":"AAEA;;CAEC,GACD;;;;AAAO,SAASA;IACd,MAAMC,mBAAkCC,QAAQC,OAAO,CAAC;IACxD,OAAO,IAAMF;AACf"}},
    {"offset": {"line": 10468, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/node_modules/payload/src/database/migrations/findMigrationDir.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\n\n/**\n * Attempt to find migrations directory.\n *\n * Checks for the following directories in order:\n * - `migrationDir` argument from Payload config\n * - `src/migrations`\n * - `dist/migrations`\n * - `migrations`\n *\n * @param migrationDir\n * @default src/migrations`, if the src folder does not exists - migrations.\n * @returns\n */\nexport const findMigrationDir = (migrationDir?: string): string => {\n  const cwd = process.cwd()\n\n  const srcMigrationsDir = path.resolve(cwd, 'src/migrations')\n  const distMigrationsDir = path.resolve(cwd, 'dist/migrations')\n  const relativeMigrations = path.resolve(cwd, 'migrations')\n\n  // Use arg if provided\n  if (migrationDir) {\n    return migrationDir\n  }\n\n  // Check other common locations\n  if (fs.existsSync(srcMigrationsDir)) {\n    return srcMigrationsDir\n  }\n\n  if (fs.existsSync(distMigrationsDir)) {\n    return distMigrationsDir\n  }\n\n  if (fs.existsSync(relativeMigrations)) {\n    return relativeMigrations\n  }\n\n  if (fs.existsSync(path.resolve(cwd, 'src'))) {\n    return srcMigrationsDir\n  }\n\n  return relativeMigrations\n}\n"],"names":["fs","path","findMigrationDir","migrationDir","cwd","process","srcMigrationsDir","resolve","distMigrationsDir","relativeMigrations","existsSync"],"mappings":";;;;AAAA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;;;AAehB,MAAMC,mBAAmB,CAACC;IAC/B,MAAMC,MAAMC,QAAQD,GAAG;IAEvB,MAAME,mBAAmBL,4GAAAA,CAAKM,OAAO,CAACH,KAAK;IAC3C,MAAMI,oBAAoBP,4GAAAA,CAAKM,OAAO,CAACH,KAAK;IAC5C,MAAMK,qBAAqBR,4GAAAA,CAAKM,OAAO,CAACH,KAAK;IAE7C,sBAAsB;IACtB,IAAID,cAAc;QAChB,OAAOA;IACT;IAEA,+BAA+B;IAC/B,IAAIH,wGAAAA,CAAGU,UAAU,CAACJ,mBAAmB;QACnC,OAAOA;IACT;IAEA,IAAIN,wGAAAA,CAAGU,UAAU,CAACF,oBAAoB;QACpC,OAAOA;IACT;IAEA,IAAIR,wGAAAA,CAAGU,UAAU,CAACD,qBAAqB;QACrC,OAAOA;IACT;IAEA,IAAIT,wGAAAA,CAAGU,UAAU,CAACT,4GAAAA,CAAKM,OAAO,CAACH,KAAK,SAAS;QAC3C,OAAOE;IACT;IAEA,OAAOG;AACT,EAAC"}}]
}