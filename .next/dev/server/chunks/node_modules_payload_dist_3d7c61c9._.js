module.exports = [
"[project]/node_modules/payload/dist/auth/defaultUser.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "defaultUserCollection",
    ()=>defaultUserCollection
]);
const defaultUserCollection = {
    slug: 'users',
    admin: {
        useAsTitle: 'email'
    },
    auth: {
        tokenExpiration: 7200
    },
    fields: [],
    labels: {
        plural: ({ t })=>t('general:users'),
        singular: ({ t })=>t('general:user')
    }
}; //# sourceMappingURL=defaultUser.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/isEligibleRequest.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "isEligibleRequest",
    ()=>isEligibleRequest
]);
// eslint-disable-next-line regexp/no-super-linear-backtracking, regexp/no-obscure-range
const ACCEPTABLE_CONTENT_TYPE = /multipart\/['"()+-_]+(?:; ?['"()+-_]*)+$/i;
const UNACCEPTABLE_METHODS = new Set([
    'CONNECT',
    'DELETE',
    'GET',
    'HEAD',
    'OPTIONS',
    'TRACE'
]);
const hasBody = (req)=>{
    return Boolean(req.headers.get('transfer-encoding') || req.headers.get('content-length') && req.headers.get('content-length') !== '0');
};
const hasAcceptableMethod = (req)=>!UNACCEPTABLE_METHODS.has(req.method);
const hasAcceptableContentType = (req)=>{
    const contType = req.headers.get('content-type');
    return contType.includes('boundary=') && ACCEPTABLE_CONTENT_TYPE.test(contType);
};
const isEligibleRequest = (req)=>{
    try {
        return hasBody(req) && hasAcceptableMethod(req) && hasAcceptableContentType(req);
    } catch (ignore) {
        return false;
    }
}; //# sourceMappingURL=isEligibleRequest.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "buildFields",
    ()=>buildFields,
    "checkAndMakeDir",
    ()=>checkAndMakeDir,
    "debugLog",
    ()=>debugLog,
    "deleteFile",
    ()=>deleteFile,
    "getTempFilename",
    ()=>getTempFilename,
    "isFunc",
    ()=>isFunc,
    "isSafeFromPollution",
    ()=>isSafeFromPollution,
    "moveFile",
    ()=>moveFile,
    "parseFileName",
    ()=>parseFileName,
    "parseFileNameExtension",
    ()=>parseFileNameExtension,
    "promiseCallback",
    ()=>promiseCallback,
    "saveBufferToFile",
    ()=>saveBufferToFile
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$stream__$5b$external$5d$__$28$stream$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/stream [external] (stream, cjs)");
;
;
;
// Parameters for safe file name parsing.
const SAFE_FILE_NAME_REGEX = /[^\w-]/g;
const MAX_EXTENSION_LENGTH = 3;
// Parameters to generate unique temporary file names:
const TEMP_COUNTER_MAX = 65536;
const TEMP_PREFIX = 'tmp';
let tempCounter = 0;
const debugLog = (options, msg)=>{
    const opts = options || {};
    if (!opts.debug) {
        return false;
    }
    console.log(`Next-file-upload: ${msg}`); // eslint-disable-line
    return true;
};
const getTempFilename = (prefix = TEMP_PREFIX)=>{
    tempCounter = tempCounter >= TEMP_COUNTER_MAX ? 1 : tempCounter + 1;
    return `${prefix}-${tempCounter}-${Date.now()}`;
};
const isFunc = (value)=>{
    return typeof value === 'function';
};
const errorFunc = (resolve, reject)=>isFunc(reject) ? reject : resolve;
const promiseCallback = (resolve, reject)=>{
    let hasFired = false;
    return (err)=>{
        if (hasFired) {
            return;
        }
        hasFired = true;
        return err ? errorFunc(resolve, reject)(err) : resolve();
    };
};
// The default prototypes for both objects and arrays.
// Used by isSafeFromPollution
const OBJECT_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Object.prototype);
const ARRAY_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Array.prototype);
const isSafeFromPollution = (base, key)=>{
    // We perform an instanceof check instead of Array.isArray as the former is more
    // permissive for cases in which the object as an Array prototype but was not constructed
    // via an Array constructor or literal.
    const TOUCHES_ARRAY_PROTOTYPE = base instanceof Array && ARRAY_PROTOTYPE_KEYS.includes(key);
    const TOUCHES_OBJECT_PROTOTYPE = OBJECT_PROTOTYPE_KEYS.includes(key);
    return !TOUCHES_ARRAY_PROTOTYPE && !TOUCHES_OBJECT_PROTOTYPE;
};
const buildFields = (instance, field, value)=>{
    // Do nothing if value is not set.
    if (value === null || value === undefined) {
        return instance;
    }
    instance = instance || Object.create(null);
    if (!isSafeFromPollution(instance, field)) {
        return instance;
    }
    // Non-array fields
    if (!instance[field]) {
        instance[field] = value;
        return instance;
    }
    // Array fields
    if (instance[field] instanceof Array) {
        instance[field].push(value);
    } else {
        instance[field] = [
            instance[field],
            value
        ];
    }
    return instance;
};
const checkAndMakeDir = (fileUploadOptions, filePath)=>{
    if (!fileUploadOptions.createParentPath) {
        return false;
    }
    // Check whether folder for the file exists.
    const parentPath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].dirname(filePath);
    // Create folder if it doesn't exist.
    if (!__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(parentPath)) {
        __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].mkdirSync(parentPath, {
            recursive: true
        });
    }
    // Checks folder again and return a results.
    return __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(parentPath);
};
const deleteFile = (filePath, callback)=>__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].unlink(filePath, callback);
const copyFile = (src, dst, callback)=>{
    // cbCalled flag and runCb helps to run cb only once.
    let cbCalled = false;
    const runCb = (err)=>{
        if (cbCalled) {
            return;
        }
        cbCalled = true;
        callback(err);
    };
    // Create read stream
    const readable = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].createReadStream(src);
    readable.on('error', runCb);
    // Create write stream
    const writable = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].createWriteStream(dst);
    writable.on('error', (err)=>{
        readable.destroy();
        runCb(err);
    });
    writable.on('close', ()=>runCb());
    // Copy file via piping streams.
    readable.pipe(writable);
};
const moveFile = (src, dst, callback)=>__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].rename(src, dst, (err)=>{
        if (err) {
            // Try to copy file if rename didn't work.
            copyFile(src, dst, (cpErr)=>cpErr ? callback(cpErr) : deleteFile(src, callback));
            return;
        }
        // File was renamed successfully: Add true to the callback to indicate that.
        callback(null, true);
    });
const saveBufferToFile = (buffer, filePath, callback)=>{
    if (!Buffer.isBuffer(buffer)) {
        return callback(new Error('buffer variable should be type of Buffer!'));
    }
    // Setup readable stream from buffer.
    let streamData = buffer;
    const readStream = new __TURBOPACK__imported__module__$5b$externals$5d2f$stream__$5b$external$5d$__$28$stream$2c$__cjs$29$__["Readable"]();
    readStream._read = ()=>{
        readStream.push(streamData);
        streamData = null;
    };
    // Setup file system writable stream.
    const fstream = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].createWriteStream(filePath);
    // console.log("Calling saveBuffer");
    fstream.on('error', (err)=>{
        // console.log("err cb")
        callback(err);
    });
    fstream.on('close', ()=>{
        // console.log("close cb");
        callback();
    });
    // Copy file via piping streams.
    readStream.pipe(fstream);
};
/**
 * Decodes uriEncoded file names.
 * @param {Object} opts - middleware options.
 * @param fileName {String} - file name to decode.
 * @returns {String}
 */ const uriDecodeFileName = (opts, fileName)=>{
    if (!opts || !opts.uriDecodeFileNames) {
        return fileName;
    }
    // Decode file name from URI with checking URI malformed errors.
    // See Issue https://github.com/richardgirges/express-fileupload/issues/342.
    try {
        return decodeURIComponent(fileName);
    } catch (ignore) {
        const matcher = /(%[a-f\d]{2})/gi;
        return fileName.split(matcher).map((str)=>{
            try {
                return decodeURIComponent(str);
            } catch (ignore) {
                return '';
            }
        }).join('');
    }
};
const parseFileNameExtension = (preserveExtension, fileName)=>{
    const defaultResult = {
        name: fileName,
        extension: ''
    };
    if (!preserveExtension) {
        return defaultResult;
    }
    // Define maximum extension length
    const maxExtLength = typeof preserveExtension === 'boolean' ? MAX_EXTENSION_LENGTH : preserveExtension;
    const nameParts = fileName.split('.');
    if (nameParts.length < 2) {
        return defaultResult;
    }
    let extension = nameParts.pop();
    if (extension.length > maxExtLength && maxExtLength > 0) {
        nameParts[nameParts.length - 1] += '.' + extension.substr(0, extension.length - maxExtLength);
        extension = extension.substr(-maxExtLength);
    }
    return {
        name: nameParts.join('.'),
        extension: maxExtLength ? extension : ''
    };
};
const parseFileName = (opts, fileName)=>{
    // Check fileName argument
    if (!fileName || typeof fileName !== 'string') {
        return getTempFilename();
    }
    // Cut off file name if it's length more then 255.
    let parsedName = fileName.length <= 255 ? fileName : fileName.substr(0, 255);
    // Decode file name if uriDecodeFileNames option set true.
    parsedName = uriDecodeFileName(opts, parsedName);
    // Stop parsing file name if safeFileNames options hasn't been set.
    if (!opts.safeFileNames) {
        return parsedName;
    }
    // Set regular expression for the file name.
    const nameRegex = typeof opts.safeFileNames === 'object' && opts.safeFileNames instanceof RegExp ? opts.safeFileNames : SAFE_FILE_NAME_REGEX;
    // Parse file name extension.
    const parsedFileName = parseFileNameExtension(opts.preserveExtension, parsedName);
    if (parsedFileName.extension.length) {
        parsedFileName.extension = '.' + parsedFileName.extension.replace(nameRegex, '');
    }
    return parsedFileName.name.replace(nameRegex, '').concat(parsedFileName.extension);
}; //# sourceMappingURL=utilities.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/fileFactory.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fileFactory",
    ()=>fileFactory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)");
;
/**
 * Returns Local function that moves the file to a different location on the filesystem
 * which takes two function arguments to make it compatible w/ Promise or Callback APIs
 */ const moveFromTemp = (filePath, options, fileUploadOptions)=>(resolve, reject)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(fileUploadOptions, `Moving temporary file ${options.tempFilePath} to ${filePath}`);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["moveFile"])(options.tempFilePath, filePath, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["promiseCallback"])(resolve, reject));
    };
/**
 * Returns Local function that moves the file from buffer to a different location on the filesystem
 * which takes two function arguments to make it compatible w/ Promise or Callback APIs
 */ const moveFromBuffer = (filePath, options, fileUploadOptions)=>(resolve, reject)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(fileUploadOptions, `Moving uploaded buffer to ${filePath}`);
        // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["saveBufferToFile"])(options.buffer, filePath, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["promiseCallback"])(resolve, reject));
    };
const fileFactory = (options, fileUploadOptions)=>{
    // see: https://github.com/richardgirges/express-fileupload/issues/14
    // firefox uploads empty file in case of cache miss when f5ing page.
    // resulting in unexpected behavior. if there is no file data, the file is invalid.
    // if (!fileUploadOptions.useTempFiles && !options.buffer.length) return;
    // Create and return file object.
    return {
        name: options.name,
        data: options.buffer,
        encoding: options.encoding,
        md5: options.hash,
        mimetype: options.mimetype,
        mv: (filePath, callback)=>{
            // Define a proper move function.
            const moveFunc = fileUploadOptions.useTempFiles ? moveFromTemp(filePath, options, fileUploadOptions) : moveFromBuffer(filePath, options, fileUploadOptions);
            // Create a folder for a file.
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["checkAndMakeDir"])(fileUploadOptions, filePath);
            // If callback is passed in, use the callback API, otherwise return a promise.
            const defaultReject = ()=>undefined;
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isFunc"])(callback) ? moveFunc(callback, defaultReject) : new Promise(moveFunc);
        },
        size: options.size,
        tempFilePath: options.tempFilePath,
        truncated: options.truncated
    };
}; //# sourceMappingURL=fileFactory.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/handlers.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "memHandler",
    ()=>memHandler,
    "tempFileHandler",
    ()=>tempFileHandler
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/crypto [external] (crypto, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)");
;
;
;
;
const tempFileHandler = (options, fieldname, filename)=>{
    const dir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].normalize(options.tempFileDir);
    const tempFilePath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(process.cwd(), dir, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTempFilename"])());
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["checkAndMakeDir"])({
        createParentPath: true
    }, tempFilePath);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Temporary file path is ${tempFilePath}`);
    const hash = __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__["default"].createHash('md5');
    let fileSize = 0;
    let completed = false;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Opening write stream for ${fieldname}->${filename}...`);
    const writeStream = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].createWriteStream(tempFilePath);
    const writePromise = new Promise((resolve, reject)=>{
        writeStream.on('finish', ()=>resolve(true));
        writeStream.on('error', (err)=>{
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Error write temp file: ${err}`);
            reject(err);
        });
    });
    return {
        cleanup: ()=>{
            completed = true;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Cleaning up temporary file ${tempFilePath}...`);
            writeStream.end();
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteFile"])(tempFilePath, (err)=>err ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Cleaning up temporary file ${tempFilePath} failed: ${err}`) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Cleaning up temporary file ${tempFilePath} done.`));
        },
        complete: ()=>{
            completed = true;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`);
            if (writeStream instanceof __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["WriteStream"]) {
                writeStream.end();
            }
            // Return empty buff since data was uploaded into a temp file.
            return Buffer.concat([]);
        },
        dataHandler: (data)=>{
            if (completed === true) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`);
                return;
            }
            writeStream.write(data);
            hash.update(data);
            fileSize += data.length;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`);
        },
        getFilePath: ()=>tempFilePath,
        getFileSize: ()=>fileSize,
        getHash: ()=>hash.digest('hex'),
        getWritePromise: ()=>writePromise
    };
};
const memHandler = (options, fieldname, filename)=>{
    const buffers = [];
    const hash = __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__["default"].createHash('md5');
    let fileSize = 0;
    let completed = false;
    const getBuffer = ()=>Buffer.concat(buffers, fileSize);
    return {
        cleanup: ()=>{
            completed = true;
        },
        complete: ()=>{
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`);
            completed = true;
            return getBuffer();
        },
        dataHandler: (data)=>{
            if (completed === true) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`);
                return;
            }
            buffers.push(data);
            hash.update(data);
            fileSize += data.length;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`);
        },
        getFilePath: ()=>'',
        getFileSize: ()=>fileSize,
        getHash: ()=>hash.digest('hex'),
        getWritePromise: ()=>Promise.resolve(true)
    };
}; //# sourceMappingURL=handlers.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/processNested.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "processNested",
    ()=>processNested
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)");
;
const processNested = function(data) {
    if (!data || data.length < 1) {
        return Object.create(null);
    }
    const d = Object.create(null), keys = Object.keys(data);
    for(let i = 0; i < keys.length; i++){
        const key = keys[i], keyParts = key?.replace(new RegExp(/\[/g), '.').replace(new RegExp(/\]/g), '').split('.'), value = data[key];
        let current = d;
        for(let index = 0; index < keyParts.length; index++){
            const k = keyParts[index];
            // Ensure we don't allow prototype pollution
            if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSafeFromPollution"])(current, k)) {
                continue;
            }
            if (index >= keyParts.length - 1) {
                current[k] = value;
            } else {
                if (!current[k]) {
                    current[k] = !keyParts[index + 1] ? [] : Object.create(null);
                }
                current = current[k];
            }
        }
    }
    return d;
}; //# sourceMappingURL=processNested.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/uploadTimer.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createUploadTimer",
    ()=>createUploadTimer
]);
const createUploadTimer = (timeout = 0, callback = ()=>{})=>{
    let timer = null;
    const clear = ()=>{
        clearTimeout(timer);
    };
    const set = ()=>{
        // Do not start a timer if zero timeout or it hasn't been set.
        if (!timeout) {
            return false;
        }
        clear();
        timer = setTimeout(callback, timeout);
        return true;
    };
    return {
        clear,
        set
    };
}; //# sourceMappingURL=uploadTimer.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/processMultipart.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "processMultipart",
    ()=>processMultipart
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$busboy$2f$lib$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/busboy/lib/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$fileFactory$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/fileFactory.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$handlers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/handlers.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$processNested$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/processNested.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$uploadTimer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/uploadTimer.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const waitFlushProperty = Symbol('wait flush property symbol');
const processMultipart = async ({ options, request })=>{
    let parsingRequest = true;
    let shouldAbortProccessing = false;
    let fileCount = 0;
    let filesCompleted = 0;
    let allFilesHaveResolved;
    let failedResolvingFiles;
    const allFilesComplete = new Promise((res, rej)=>{
        allFilesHaveResolved = res;
        failedResolvingFiles = rej;
    });
    const result = {
        fields: undefined,
        files: undefined
    };
    const headersObject = {};
    request.headers.forEach((value, name)=>{
        headersObject[name] = value;
    });
    const reader = request.body?.getReader();
    const busboy = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$busboy$2f$lib$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
        ...options,
        headers: headersObject
    });
    function abortAndDestroyFile(file, err) {
        file.destroy();
        shouldAbortProccessing = true;
        failedResolvingFiles(err);
    }
    // Build multipart req.body fields
    busboy.on('field', (field, val)=>{
        result.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildFields"])(result.fields, field, val);
    });
    // Build req.files fields
    busboy.on('file', (field, file, info)=>{
        fileCount += 1;
        // Parse file name(cutting huge names, decoding, etc..).
        const { encoding, filename: name, mimeType: mime } = info;
        const filename = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseFileName"])(options, name);
        const inferredMimeType = filename && filename.endsWith('.glb') && 'model/gltf-binary' || filename && filename.endsWith('.gltf') && 'model/gltf+json' || mime;
        // Define methods and handlers for upload process.
        const { cleanup, complete, dataHandler, getFilePath, getFileSize, getHash, getWritePromise } = options.useTempFiles ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$handlers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tempFileHandler"])(options, field, filename) // Upload into temporary file.
         : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$handlers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["memHandler"])(options, field, filename) // Upload into RAM.
        ;
        const writePromise = options.useTempFiles ? getWritePromise().catch(()=>{
            busboy.end();
            cleanup();
        }) : getWritePromise();
        const uploadTimer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$uploadTimer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createUploadTimer"])(options.uploadTimeout, ()=>{
            return abortAndDestroyFile(file, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`Upload timeout for ${field}->${filename}, bytes:${getFileSize()}`));
        });
        file.on('limit', ()=>{
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Size limit reached for ${field}->${filename}, bytes:${getFileSize()}`);
            uploadTimer.clear();
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isFunc"])(options.limitHandler)) {
                options.limitHandler({
                    request,
                    size: getFileSize()
                });
            }
            // Return error and cleanup files if abortOnLimit set.
            if (options.abortOnLimit) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Upload file size limit reached ${field}->${filename}.`);
                cleanup();
                abortAndDestroyFile(file, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](options.responseOnLimit, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].REQUEST_ENTITY_TOO_LARGE, {
                    size: getFileSize()
                }));
            }
        });
        file.on('data', (data)=>{
            uploadTimer.set();
            dataHandler(data);
        });
        file.on('end', ()=>{
            const size = getFileSize();
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Upload finished ${field}->${filename}, bytes:${size}`);
            uploadTimer.clear();
            if (!name && size === 0) {
                fileCount -= 1;
                if (options.useTempFiles) {
                    cleanup();
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Removing the empty file ${field}->${filename}`);
                }
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Don't add file instance if original name and size are empty`);
            }
            filesCompleted += 1;
            result.files = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildFields"])(result.files, field, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$fileFactory$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fileFactory"])({
                name: filename,
                buffer: complete(),
                encoding,
                hash: getHash(),
                mimetype: inferredMimeType,
                size,
                tempFilePath: getFilePath(),
                truncated: Boolean('truncated' in file && file.truncated) || false
            }, options));
            if (!request[waitFlushProperty]) {
                request[waitFlushProperty] = [];
            }
            request[waitFlushProperty].push(writePromise);
            if (filesCompleted === fileCount) {
                allFilesHaveResolved();
            }
        });
        file.on('error', (err)=>{
            uploadTimer.clear();
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `File Error: ${err.message}`);
            cleanup();
            failedResolvingFiles(err);
        });
        // Start upload process.
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `New upload started ${field}->${filename}, bytes:${getFileSize()}`);
        uploadTimer.set();
    });
    busboy.on('finish', async ()=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Busboy finished parsing request.`);
        if (options.parseNested) {
            result.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$processNested$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["processNested"])(result.fields);
            result.files = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$processNested$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["processNested"])(result.files);
        }
        if (request[waitFlushProperty]) {
            try {
                await Promise.all(request[waitFlushProperty]).then(()=>{
                    delete request[waitFlushProperty];
                });
            } catch (err) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Error waiting for file write promises: ${err}`);
            }
        }
        return result;
    });
    busboy.on('error', (err = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Busboy error parsing multipart request', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST))=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, `Busboy error`);
        throw err;
    });
    while(parsingRequest){
        const { done, value } = await reader.read();
        if (done) {
            parsingRequest = false;
        }
        if (value && !shouldAbortProccessing) {
            busboy.write(value);
        }
    }
    if (fileCount !== 0) {
        await allFilesComplete.catch((e)=>{
            throw e;
        });
    }
    return result;
}; //# sourceMappingURL=processMultipart.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "processMultipartFormdata",
    ()=>processMultipartFormdata
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$isEligibleRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/isEligibleRequest.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$processMultipart$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/processMultipart.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/utilities.js [app-route] (ecmascript)");
;
;
;
;
;
const DEFAULT_UPLOAD_OPTIONS = {
    abortOnLimit: false,
    createParentPath: false,
    debug: false,
    defParamCharset: 'utf8',
    limitHandler: false,
    parseNested: false,
    preserveExtension: false,
    responseOnLimit: 'File size limit has been reached',
    safeFileNames: false,
    tempFileDir: __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(process.cwd(), 'tmp'),
    uploadTimeout: 60000,
    uriDecodeFileNames: false,
    useTempFiles: false
};
const processMultipartFormdata = async ({ options: incomingOptions, request })=>{
    const options = {
        ...DEFAULT_UPLOAD_OPTIONS,
        ...incomingOptions
    };
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$isEligibleRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isEligibleRequest"])(request)) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["debugLog"])(options, 'Request is not eligible for file upload!');
        return {
            error: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Request is not eligible for file upload', 500),
            fields: undefined,
            files: undefined
        };
    } else {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$processMultipart$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["processMultipart"])({
            options,
            request
        });
    }
}; //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/utilities/addDataAndFileToRequest.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addDataAndFileToRequest",
    ()=>addDataAndFileToRequest
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-multipart/index.js [app-route] (ecmascript)");
;
;
const addDataAndFileToRequest = async (req)=>{
    const { body, headers, method, payload } = req;
    if (method && [
        'PATCH',
        'POST',
        'PUT'
    ].includes(method.toUpperCase()) && body) {
        const [contentType] = (headers.get('Content-Type') || '').split(';', 1);
        const bodyByteSize = parseInt(req.headers.get('Content-Length') || '0', 10);
        if (contentType === 'application/json') {
            let data = {};
            try {
                const text = await req.text?.();
                data = text ? JSON.parse(text) : {};
            } catch (error) {
                req.payload.logger.error(error);
            } finally{
                req.data = data;
                // @ts-expect-error attach json method to request
                req.json = ()=>Promise.resolve(data);
            }
        } else if (bodyByteSize && contentType?.includes('multipart/')) {
            const { error, fields, files } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$multipart$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["processMultipartFormdata"])({
                options: {
                    ...payload.config.bodyParser || {},
                    ...payload.config.upload || {}
                },
                request: req
            });
            if (error) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](error.message);
            }
            if (files?.file) {
                req.file = files.file;
            }
            if (fields?._payload && typeof fields._payload === 'string') {
                req.data = JSON.parse(fields._payload);
            }
            if (!req.file && fields?.file && typeof fields?.file === 'string') {
                const { clientUploadContext, collectionSlug, filename, mimeType, size } = JSON.parse(fields.file);
                const uploadConfig = req.payload.collections[collectionSlug].config.upload;
                if (!uploadConfig.handlers) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('uploadConfig.handlers is not present for ' + collectionSlug);
                }
                let response = null;
                let error;
                for (const handler of uploadConfig.handlers){
                    try {
                        const result = await handler(req, {
                            doc: null,
                            params: {
                                clientUploadContext,
                                collection: collectionSlug,
                                filename
                            }
                        });
                        if (result) {
                            response = result;
                        }
                    // If we couldn't get the file from that handler, save the error and try other.
                    } catch (err) {
                        error = err;
                    }
                }
                if (!response) {
                    if (error) {
                        payload.logger.error(error);
                    }
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Expected response from the upload handler.');
                }
                req.file = {
                    name: filename,
                    clientUploadContext,
                    data: Buffer.from(await response.arrayBuffer()),
                    mimetype: response.headers.get('Content-Type') || mimeType,
                    size
                };
            }
        }
    }
}; //# sourceMappingURL=addDataAndFileToRequest.js.map
}),
"[project]/node_modules/payload/dist/utilities/addLocalesToRequest.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addLocalesToRequestFromData",
    ()=>addLocalesToRequestFromData,
    "sanitizeLocales",
    ()=>sanitizeLocales
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeFallbackLocale$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeFallbackLocale.js [app-route] (ecmascript)");
;
function addLocalesToRequestFromData(req) {
    const { data, payload: { config } } = req;
    if (data) {
        const localeOnReq = req.locale;
        const fallbackLocaleOnReq = req.fallbackLocale;
        let localeFromData;
        let fallbackLocaleFromData;
        if (!localeOnReq && data?.locale && typeof data.locale === 'string') {
            localeFromData = data.locale;
        }
        if (!fallbackLocaleOnReq) {
            if (data?.['fallback-locale'] && typeof data?.['fallback-locale'] === 'string') {
                fallbackLocaleFromData = data['fallback-locale'];
            }
            if (data?.['fallbackLocale'] && typeof data?.['fallbackLocale'] === 'string') {
                fallbackLocaleFromData = data['fallbackLocale'];
            }
        }
        if (!localeOnReq || !fallbackLocaleOnReq) {
            const { fallbackLocale, locale } = sanitizeLocales({
                fallbackLocale: fallbackLocaleFromData,
                locale: localeFromData,
                localization: config.localization
            });
            if (localeFromData) {
                req.locale = locale;
            }
            if (fallbackLocaleFromData) {
                req.fallbackLocale = fallbackLocale;
            }
        }
    }
}
const sanitizeLocales = ({ fallbackLocale, locale, localization })=>{
    // Check if localization has fallback enabled or if a fallback locale is provided
    if (localization) {
        fallbackLocale = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeFallbackLocale$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeFallbackLocale"])({
            fallbackLocale,
            locale,
            localization
        });
    }
    if ([
        '*',
        'all'
    ].includes(locale)) {
        locale = 'all';
    } else if (localization && !localization.localeCodes.includes(locale) && localization.fallback) {
        locale = localization.defaultLocale;
    }
    return {
        fallbackLocale,
        locale
    };
}; //# sourceMappingURL=addLocalesToRequest.js.map
}),
"[project]/node_modules/payload/dist/utilities/wrapInternalEndpoints.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "wrapInternalEndpoints",
    ()=>wrapInternalEndpoints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$addDataAndFileToRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/addDataAndFileToRequest.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$addLocalesToRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/addLocalesToRequest.js [app-route] (ecmascript)");
;
;
const wrapInternalEndpoints = (endpoints)=>{
    return endpoints.map((endpoint)=>{
        const handler = endpoint.handler;
        if ([
            'patch',
            'post'
        ].includes(endpoint.method)) {
            endpoint.handler = async (req)=>{
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$addDataAndFileToRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDataAndFileToRequest"])(req);
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$addLocalesToRequest$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addLocalesToRequestFromData"])(req);
                return handler(req);
            };
        }
        return endpoint;
    });
}; //# sourceMappingURL=wrapInternalEndpoints.js.map
}),
"[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "headersWithCors",
    ()=>headersWithCors
]);
const headersWithCors = ({ headers, req })=>{
    const cors = req?.payload?.config.cors;
    const requestOrigin = req?.headers?.get('Origin');
    if (cors) {
        const defaultAllowedHeaders = [
            'Origin',
            'X-Requested-With',
            'Content-Type',
            'Accept',
            'Authorization',
            'Content-Encoding',
            'x-apollo-tracing',
            'X-Payload-HTTP-Method-Override'
        ];
        // Only set default CORS headers if they haven't been set by custom handler
        if (!headers.has('Access-Control-Allow-Methods')) {
            headers.set('Access-Control-Allow-Methods', 'PUT, PATCH, POST, GET, DELETE, OPTIONS');
        }
        if (!headers.has('Access-Control-Allow-Headers')) {
            if (typeof cors === 'object' && 'headers' in cors) {
                headers.set('Access-Control-Allow-Headers', [
                    ...defaultAllowedHeaders,
                    ...cors.headers
                ].filter(Boolean).join(', '));
            } else {
                headers.set('Access-Control-Allow-Headers', defaultAllowedHeaders.join(', '));
            }
        }
        if (!headers.has('Access-Control-Allow-Origin')) {
            if (cors === '*' || typeof cors === 'object' && 'origins' in cors && cors.origins === '*') {
                headers.set('Access-Control-Allow-Origin', '*');
            } else if (Array.isArray(cors) && cors.indexOf(requestOrigin) > -1 || !Array.isArray(cors) && typeof cors === 'object' && 'origins' in cors && cors.origins.indexOf(requestOrigin) > -1) {
                headers.set('Access-Control-Allow-Credentials', 'true');
                headers.set('Access-Control-Allow-Origin', requestOrigin);
            }
        }
    }
    return headers;
}; //# sourceMappingURL=headersWithCors.js.map
}),
"[project]/node_modules/payload/dist/utilities/telemetry/events/adminInit.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "adminInit",
    ()=>adminInit
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/telemetry/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$oneWayHash$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/telemetry/oneWayHash.js [app-route] (ecmascript)");
;
;
const adminInit = ({ headers, payload, user })=>{
    const host = headers.get('host');
    let domainID;
    let userID;
    if (host) {
        domainID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$oneWayHash$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["oneWayHash"])(host, payload.secret);
    }
    if (user?.id) {
        userID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$oneWayHash$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["oneWayHash"])(String(user.id), payload.secret);
    }
    // eslint-disable-next-line @typescript-eslint/no-floating-promises
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sendEvent"])({
        event: {
            type: 'admin-init',
            domainID: domainID,
            userID: userID
        },
        payload
    });
}; //# sourceMappingURL=adminInit.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/access.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "accessOperation",
    ()=>accessOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$events$2f$adminInit$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/telemetry/events/adminInit.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getAccessResults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/getAccessResults.js [app-route] (ecmascript)");
;
;
;
const accessOperation = async (args)=>{
    const { req } = args;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$telemetry$2f$events$2f$adminInit$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["adminInit"])(req);
    try {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getAccessResults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getAccessResults"])({
            req
        });
    } catch (e) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
        throw e;
    }
}; //# sourceMappingURL=access.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/access.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "accessHandler",
    ()=>accessHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/access.js [app-route] (ecmascript)");
;
;
;
const accessHandler = async (req)=>{
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    try {
        const results = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["accessOperation"])({
            req
        });
        return Response.json(results, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
        });
    } catch (e) {
        return Response.json({
            error: e
        }, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].INTERNAL_SERVER_ERROR
        });
    }
}; //# sourceMappingURL=access.js.map
}),
"[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getRequestCollection",
    ()=>getRequestCollection,
    "getRequestCollectionWithID",
    ()=>getRequestCollectionWithID,
    "getRequestGlobal",
    ()=>getRequestGlobal
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
const getRequestCollection = (req)=>{
    const collectionSlug = req.routeParams?.collection;
    if (typeof collectionSlug !== 'string') {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`No collection was specified`, 400);
    }
    const collection = req.payload.collections[collectionSlug];
    if (!collection) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`Collection with the slug ${collectionSlug} was not found`, 404);
    }
    return collection;
};
const getRequestCollectionWithID = (req, { disableSanitize, optionalID } = {})=>{
    const collection = getRequestCollection(req);
    const id = req.routeParams?.id;
    if (typeof id !== 'string') {
        if (optionalID) {
            return {
                id: undefined,
                collection
            };
        }
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`ID was not specified`, 400);
    }
    if (disableSanitize === true) {
        return {
            id,
            collection
        };
    }
    let sanitizedID = id;
    // If default db ID type is a number, we should sanitize
    let shouldSanitize = Boolean(req.payload.db.defaultIDType === 'number');
    // UNLESS the customIDType for this collection is text.... then we leave it
    if (shouldSanitize && collection.customIDType === 'text') {
        shouldSanitize = false;
    }
    // If we still should sanitize, parse float
    if (shouldSanitize) {
        sanitizedID = parseFloat(sanitizedID);
    }
    return {
        // @ts-expect-error generic return
        id: sanitizedID,
        collection
    };
};
const getRequestGlobal = (req)=>{
    const globalSlug = req.routeParams?.global;
    if (typeof globalSlug !== 'string') {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`No global was specified`, 400);
    }
    const globalConfig = req.payload.globals.config.find((each)=>each.slug === globalSlug);
    if (!globalConfig) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`Global with the slug ${globalSlug} was not found`, 404);
    }
    return globalConfig;
}; //# sourceMappingURL=getRequestEntity.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/forgotPassword.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "forgotPasswordHandler",
    ()=>forgotPasswordHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$forgotPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/forgotPassword.js [app-route] (ecmascript)");
;
;
;
;
const forgotPasswordHandler = async (req)=>{
    const { t } = req;
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const authData = collection.config.auth?.loginWithUsername ? {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        username: typeof req.data?.username === 'string' ? req.data.username : ''
    } : {
        email: typeof req.data?.email === 'string' ? req.data.email : ''
    };
    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$forgotPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["forgotPasswordOperation"])({
        collection,
        data: authData,
        disableEmail: Boolean(req.data?.disableEmail),
        expiration: typeof req.data?.expiration === 'number' ? req.data.expiration : undefined,
        req
    });
    return Response.json({
        message: t('general:success')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=forgotPassword.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/init.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "initOperation",
    ()=>initOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/appendNonTrashedFilter.js [app-route] (ecmascript)");
;
const initOperation = async (args)=>{
    const { collection: slug, req } = args;
    const collectionConfig = req.payload.config.collections?.find((c)=>c.slug === slug);
    // Exclude trashed documents unless `trash: true`
    const where = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["appendNonTrashedFilter"])({
        enableTrash: Boolean(collectionConfig?.trash),
        trash: false,
        where: {}
    });
    const doc = await req.payload.db.findOne({
        collection: slug,
        req,
        where
    });
    return !!doc;
}; //# sourceMappingURL=init.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/init.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "initHandler",
    ()=>initHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$init$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/init.js [app-route] (ecmascript)");
;
;
;
const initHandler = async (req)=>{
    const initialized = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$init$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initOperation"])({
        collection: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req).config.slug,
        req
    });
    return Response.json({
        initialized
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        })
    });
}; //# sourceMappingURL=init.js.map
}),
"[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "generateCookie",
    ()=>generateCookie,
    "generateExpiredPayloadCookie",
    ()=>generateExpiredPayloadCookie,
    "generatePayloadCookie",
    ()=>generatePayloadCookie,
    "getCookieExpiration",
    ()=>getCookieExpiration,
    "parseCookies",
    ()=>parseCookies
]);
const generateCookie = (args)=>{
    const { name, domain, expires, httpOnly, maxAge, path, returnCookieAsObject, sameSite, secure: secureArg, value } = args;
    let cookieString = `${name}=${value || ''}`;
    const cookieObject = {
        name,
        value
    };
    const secure = secureArg || sameSite === 'None';
    if (expires) {
        if (returnCookieAsObject) {
            cookieObject.expires = expires.toUTCString();
        } else {
            cookieString += `; Expires=${expires.toUTCString()}`;
        }
    }
    if (maxAge) {
        if (returnCookieAsObject) {
            cookieObject.maxAge = maxAge;
        } else {
            cookieString += `; Max-Age=${maxAge.toString()}`;
        }
    }
    if (domain) {
        if (returnCookieAsObject) {
            cookieObject.domain = domain;
        } else {
            cookieString += `; Domain=${domain}`;
        }
    }
    if (path) {
        if (returnCookieAsObject) {
            cookieObject.path = path;
        } else {
            cookieString += `; Path=${path}`;
        }
    }
    if (secure) {
        if (returnCookieAsObject) {
            cookieObject.secure = secure;
        } else {
            cookieString += `; Secure=${secure}`;
        }
    }
    if (httpOnly) {
        if (returnCookieAsObject) {
            cookieObject.httpOnly = httpOnly;
        } else {
            cookieString += `; HttpOnly=${httpOnly}`;
        }
    }
    if (sameSite) {
        if (returnCookieAsObject) {
            cookieObject.sameSite = sameSite;
        } else {
            cookieString += `; SameSite=${sameSite}`;
        }
    }
    return returnCookieAsObject ? cookieObject : cookieString;
};
const getCookieExpiration = ({ seconds = 7200 })=>{
    const currentTime = new Date();
    currentTime.setSeconds(currentTime.getSeconds() + seconds);
    return currentTime;
};
const generatePayloadCookie = ({ collectionAuthConfig, cookiePrefix, returnCookieAsObject = false, token })=>{
    const sameSite = typeof collectionAuthConfig.cookies.sameSite === 'string' ? collectionAuthConfig.cookies.sameSite : collectionAuthConfig.cookies.sameSite ? 'Strict' : undefined;
    return generateCookie({
        name: `${cookiePrefix}-token`,
        domain: collectionAuthConfig.cookies.domain ?? undefined,
        expires: getCookieExpiration({
            seconds: collectionAuthConfig.tokenExpiration
        }),
        httpOnly: true,
        path: '/',
        returnCookieAsObject,
        sameSite,
        secure: collectionAuthConfig.cookies.secure,
        value: token
    });
};
const generateExpiredPayloadCookie = ({ collectionAuthConfig, cookiePrefix, returnCookieAsObject = false })=>{
    const sameSite = typeof collectionAuthConfig.cookies.sameSite === 'string' ? collectionAuthConfig.cookies.sameSite : collectionAuthConfig.cookies.sameSite ? 'Strict' : undefined;
    const expires = new Date(Date.now() - 1000);
    return generateCookie({
        name: `${cookiePrefix}-token`,
        domain: collectionAuthConfig.cookies.domain ?? undefined,
        expires,
        httpOnly: true,
        path: '/',
        returnCookieAsObject,
        sameSite,
        secure: collectionAuthConfig.cookies.secure
    });
};
function parseCookies(headers) {
    // Taken from https://github.com/vercel/edge-runtime/blob/main/packages/cookies/src/serialize.ts
    /*
  The MIT License (MIT)

  Copyright (c) 2024 Vercel, Inc.

  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  */ const map = new Map();
    const cookie = headers.get('Cookie');
    if (!cookie) {
        return map;
    }
    for (const pair of cookie.split(/; */)){
        if (!pair) {
            continue;
        }
        const splitAt = pair.indexOf('=');
        // If the attribute doesn't have a value, set it to 'true'.
        if (splitAt === -1) {
            map.set(pair, 'true');
            continue;
        }
        // Otherwise split it into key and value and trim the whitespace on the
        // value.
        const [key, value] = [
            pair.slice(0, splitAt),
            pair.slice(splitAt + 1)
        ];
        try {
            map.set(key, decodeURIComponent(value ?? 'true'));
        } catch  {
        // ignore invalid encoded values
        }
    }
    return map;
} //# sourceMappingURL=cookies.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/login.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "loginHandler",
    ()=>loginHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$login$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/login.js [app-route] (ecmascript)");
;
;
;
;
;
;
const loginHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { searchParams, t } = req;
    const depth = searchParams.get('depth');
    const authData = collection.config.auth?.loginWithUsername !== false ? {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        password: typeof req.data?.password === 'string' ? req.data.password : '',
        username: typeof req.data?.username === 'string' ? req.data.username : ''
    } : {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        password: typeof req.data?.password === 'string' ? req.data.password : ''
    };
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$login$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["loginOperation"])({
        collection,
        data: authData,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        req
    });
    const cookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generatePayloadCookie"])({
        collectionAuthConfig: collection.config.auth,
        cookiePrefix: req.payload.config.cookiePrefix,
        token: result.token
    });
    if (collection.config.auth.removeTokenFromResponses) {
        delete result.token;
    }
    return Response.json({
        message: t('authentication:passed'),
        ...result
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers({
                'Set-Cookie': cookie
            }),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=login.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/logout.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "logoutOperation",
    ()=>logoutOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/appendNonTrashedFilter.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
;
;
;
;
;
;
const logoutOperation = async (incomingArgs)=>{
    let args = incomingArgs;
    const { allSessions, collection: { config: collectionConfig }, req: { user }, req } = incomingArgs;
    if (!user) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('No User', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST);
    }
    if (user.collection !== collectionConfig.slug) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Incorrect collection', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].FORBIDDEN);
    }
    const shouldCommit = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
    try {
        if (collectionConfig.hooks?.afterLogout?.length) {
            for (const hook of collectionConfig.hooks.afterLogout){
                args = await hook({
                    collection: args.collection?.config,
                    context: req.context,
                    req
                }) || args;
            }
        }
        if (collectionConfig.auth.disableLocalStrategy !== true && collectionConfig.auth.useSessions) {
            const where = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["appendNonTrashedFilter"])({
                enableTrash: Boolean(collectionConfig.trash),
                trash: false,
                where: {
                    id: {
                        equals: user.id
                    }
                }
            });
            const userWithSessions = await req.payload.db.findOne({
                collection: collectionConfig.slug,
                req,
                where
            });
            if (!userWithSessions) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('No User', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST);
            }
            if (allSessions) {
                userWithSessions.sessions = [];
            } else {
                const sessionsAfterLogout = (userWithSessions?.sessions || []).filter((s)=>s.id !== req?.user?._sid);
                userWithSessions.sessions = sessionsAfterLogout;
            }
            // Prevent updatedAt from being updated when only removing a session
            ;
            userWithSessions.updatedAt = null;
            await req.payload.db.updateOne({
                id: user.id,
                collection: collectionConfig.slug,
                data: userWithSessions,
                req,
                returning: false
            });
        }
        if (shouldCommit) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
        }
        return true;
    } catch (error) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
        throw error;
    }
}; //# sourceMappingURL=logout.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/logout.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "logoutHandler",
    ()=>logoutHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$logout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/logout.js [app-route] (ecmascript)");
;
;
;
;
;
const logoutHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { searchParams, t } = req;
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$logout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logoutOperation"])({
        allSessions: searchParams.get('allSessions') === 'true',
        collection,
        req
    });
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    if (!result) {
        return Response.json({
            message: t('error:logoutFailed')
        }, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST
        });
    }
    const expiredCookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateExpiredPayloadCookie"])({
        collectionAuthConfig: collection.config.auth,
        config: req.payload.config,
        cookiePrefix: req.payload.config.cookiePrefix
    });
    headers.set('Set-Cookie', expiredCookie);
    return Response.json({
        message: t('authentication:logoutSuccessful')
    }, {
        headers,
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=logout.js.map
}),
"[project]/node_modules/payload/dist/utilities/sanitizeJoinParams.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeJoinParams",
    ()=>sanitizeJoinParams
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
;
const sanitizeJoinParams = (_joins = {})=>{
    const joinQuery = {};
    const joins = _joins;
    Object.keys(joins).forEach((schemaPath)=>{
        if (joins[schemaPath] === 'false' || joins[schemaPath] === false) {
            joinQuery[schemaPath] = false;
        } else {
            joinQuery[schemaPath] = {
                count: joins[schemaPath].count === 'true',
                limit: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(joins[schemaPath]?.limit) ? Number(joins[schemaPath].limit) : undefined,
                page: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(joins[schemaPath]?.page) ? Number(joins[schemaPath].page) : undefined,
                sort: joins[schemaPath]?.sort ? joins[schemaPath].sort : undefined,
                where: joins[schemaPath]?.where ? joins[schemaPath].where : undefined
            };
        }
    });
    return joinQuery;
}; //# sourceMappingURL=sanitizeJoinParams.js.map
}),
"[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Sanitizes REST select query to SelectType
 */ __turbopack_context__.s([
    "sanitizeSelectParam",
    ()=>sanitizeSelectParam
]);
const sanitizeSelectParam = (unsanitizedSelect)=>{
    if (unsanitizedSelect && typeof unsanitizedSelect === 'object') {
        for(const _k in unsanitizedSelect){
            const k = _k;
            if (unsanitizedSelect[k] === 'true') {
                ;
                unsanitizedSelect[k] = true;
            } else if (unsanitizedSelect[k] === 'false') {
                ;
                unsanitizedSelect[k] = false;
            } else if (typeof unsanitizedSelect[k] === 'object') {
                sanitizeSelectParam(unsanitizedSelect[k]);
            }
        }
    }
    return unsanitizedSelect;
}; //# sourceMappingURL=sanitizeSelectParam.js.map
}),
"[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizePopulateParam",
    ()=>sanitizePopulateParam
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
;
const sanitizePopulateParam = (unsanitizedPopulate)=>{
    if (!unsanitizedPopulate || typeof unsanitizedPopulate !== 'object') {
        return;
    }
    for(const k in unsanitizedPopulate){
        ;
        unsanitizedPopulate[k] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(unsanitizedPopulate[k]);
    }
    return unsanitizedPopulate;
}; //# sourceMappingURL=sanitizePopulateParam.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/me.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "meOperation",
    ()=>meOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$util$2f$decode_jwt$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/node/esm/util/decode_jwt.js [app-route] (ecmascript)");
;
const meOperation = async (args)=>{
    const { collection, currentToken, depth, draft, joins, populate, req, select } = args;
    let result = {
        user: null
    };
    if (req.user) {
        const { pathname } = req;
        const isGraphQL = pathname === `/api${req.payload.config.routes.graphQL}`;
        const user = await req.payload.findByID({
            id: req.user.id,
            collection: collection.config.slug,
            depth: isGraphQL ? 0 : depth ?? collection.config.auth.depth,
            draft,
            joins,
            overrideAccess: false,
            populate,
            req,
            select,
            showHiddenFields: false
        });
        if (user) {
            user.collection = collection.config.slug;
            user._strategy = req.user._strategy;
        }
        if (req.user.collection !== collection.config.slug) {
            return {
                user: null
            };
        }
        // /////////////////////////////////////
        // me hook - Collection
        // /////////////////////////////////////
        for (const meHook of collection.config.hooks.me){
            const hookResult = await meHook({
                args,
                user
            });
            if (hookResult) {
                result.user = hookResult.user;
                result.exp = hookResult.exp;
                break;
            }
        }
        result.collection = req.user.collection;
        /** @deprecated
     * use:
     * ```ts
     * user._strategy
     * ```
     */ result.strategy = req.user._strategy;
        if (!result.user) {
            result.user = user;
            if (currentToken) {
                const decoded = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$util$2f$decode_jwt$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeJwt"])(currentToken);
                if (decoded) {
                    result.exp = decoded.exp;
                }
                if (!collection.config.auth.removeTokenFromResponses) {
                    result.token = currentToken;
                }
            }
        }
    }
    // /////////////////////////////////////
    // After Me - Collection
    // /////////////////////////////////////
    if (collection.config.hooks?.afterMe?.length) {
        for (const hook of collection.config.hooks.afterMe){
            result = await hook({
                collection: collection?.config,
                context: req.context,
                req,
                response: result
            }) || result;
        }
    }
    return result;
}; //# sourceMappingURL=me.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/me.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "meHandler",
    ()=>meHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeJoinParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeJoinParams.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$extractJWT$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/extractJWT.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$me$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/me.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
const meHandler = async (req)=>{
    const { searchParams } = req;
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const currentToken = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$extractJWT$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractJWT"])(req);
    const depthFromSearchParams = searchParams.get('depth');
    const draftFromSearchParams = searchParams.get('depth');
    const { depth: depthFromQuery, draft: draftFromQuery, joins, populate, select } = req.query;
    const depth = depthFromQuery || depthFromSearchParams;
    const draft = draftFromQuery || draftFromSearchParams;
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$me$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["meOperation"])({
        collection,
        currentToken: currentToken,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        draft: draft === 'true',
        joins: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeJoinParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeJoinParams"])(joins),
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(populate),
        req,
        select: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(select)
    });
    if (collection.config.auth.removeTokenFromResponses) {
        delete result.token;
    }
    return Response.json({
        ...result,
        message: req.t('authentication:account')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=me.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/refresh.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "refreshOperation",
    ()=>refreshOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$utilities$2f$buildAfterOperation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/utilities/buildAfterOperation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$utilities$2f$buildBeforeOperation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/utilities/buildBeforeOperation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/Forbidden.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getFieldsToSign$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/getFieldsToSign.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$jwt$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/jwt.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$sessions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/sessions.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
const refreshOperation = async (incomingArgs)=>{
    let args = incomingArgs;
    try {
        const shouldCommit = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(args.req);
        // /////////////////////////////////////
        // beforeOperation - Collection
        // /////////////////////////////////////
        args = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$utilities$2f$buildBeforeOperation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildBeforeOperation"])({
            args,
            collection: args.collection.config,
            operation: 'refresh',
            overrideAccess: false
        });
        // /////////////////////////////////////
        // Refresh
        // /////////////////////////////////////
        const { collection: { config: collectionConfig }, req, req: { payload: { config, secret } } } = args;
        if (!args.req.user) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](args.req.t);
        }
        const pathname = new URL(args.req.url).pathname;
        const isGraphQL = pathname === config.routes.graphQL;
        let user = await req.payload.db.findOne({
            collection: collectionConfig.slug,
            req,
            where: {
                id: {
                    equals: args.req.user.id
                }
            }
        });
        const sid = args.req.user._sid;
        if (collectionConfig.auth.useSessions && !collectionConfig.auth.disableLocalStrategy) {
            if (!Array.isArray(user.sessions) || !sid) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](args.req.t);
            }
            const existingSession = user.sessions.find(({ id })=>id === sid);
            const now = new Date();
            const tokenExpInMs = collectionConfig.auth.tokenExpiration * 1000;
            existingSession.expiresAt = new Date(now.getTime() + tokenExpInMs);
            // Prevent updatedAt from being updated when only refreshing a session
            user.updatedAt = null;
            await req.payload.db.updateOne({
                id: user.id,
                collection: collectionConfig.slug,
                data: {
                    ...user,
                    sessions: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$sessions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["removeExpiredSessions"])(user.sessions)
                },
                req,
                returning: false
            });
        }
        user = await req.payload.findByID({
            id: user.id,
            collection: collectionConfig.slug,
            depth: isGraphQL ? 0 : args.collection.config.auth.depth,
            req: args.req
        });
        if (user) {
            user.collection = args.req.user.collection;
            user._strategy = args.req.user._strategy;
        }
        let result;
        // /////////////////////////////////////
        // refresh hook - Collection
        // /////////////////////////////////////
        for (const refreshHook of args.collection.config.hooks.refresh){
            const hookResult = await refreshHook({
                args,
                user
            });
            if (hookResult) {
                result = hookResult;
                break;
            }
        }
        if (!result) {
            const fieldsToSign = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getFieldsToSign$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFieldsToSign"])({
                collectionConfig,
                email: user?.email,
                sid,
                user: args?.req?.user
            });
            const { exp, token: refreshedToken } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$jwt$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jwtSign"])({
                fieldsToSign,
                secret,
                tokenExpiration: collectionConfig.auth.tokenExpiration
            });
            result = {
                exp,
                refreshedToken,
                setCookie: true,
                /** @deprecated
         * use:
         * ```ts
         * user._strategy
         * ```
         */ strategy: args.req.user._strategy,
                user
            };
        }
        // /////////////////////////////////////
        // After Refresh - Collection
        // /////////////////////////////////////
        if (collectionConfig.hooks?.afterRefresh?.length) {
            for (const hook of collectionConfig.hooks.afterRefresh){
                result = await hook({
                    collection: args.collection?.config,
                    context: args.req.context,
                    exp: result.exp,
                    req: args.req,
                    token: result.refreshedToken
                }) || result;
            }
        }
        // /////////////////////////////////////
        // afterOperation - Collection
        // /////////////////////////////////////
        result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$utilities$2f$buildAfterOperation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildAfterOperation"])({
            args,
            collection: args.collection?.config,
            operation: 'refresh',
            overrideAccess: false,
            result
        });
        // /////////////////////////////////////
        // Return results
        // /////////////////////////////////////
        if (shouldCommit) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
        }
        return result;
    } catch (error) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(args.req);
        throw error;
    }
}; //# sourceMappingURL=refresh.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/refresh.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "refreshHandler",
    ()=>refreshHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$refresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/refresh.js [app-route] (ecmascript)");
;
;
;
;
;
const refreshHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { t } = req;
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$refresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["refreshOperation"])({
        collection,
        req
    });
    if (result.setCookie) {
        const cookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generatePayloadCookie"])({
            collectionAuthConfig: collection.config.auth,
            cookiePrefix: req.payload.config.cookiePrefix,
            token: result.refreshedToken
        });
        if (collection.config.auth.removeTokenFromResponses) {
            // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
            delete result.refreshedToken;
        }
        headers.set('Set-Cookie', cookie);
    }
    return Response.json({
        message: t('authentication:tokenRefreshSuccessful'),
        ...result
    }, {
        headers,
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=refresh.js.map
}),
"[project]/node_modules/payload/dist/auth/operations/registerFirstUser.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "registerFirstUserOperation",
    ()=>registerFirstUserOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/Forbidden.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/appendNonTrashedFilter.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$ensureUsernameOrEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/ensureUsernameOrEmail.js [app-route] (ecmascript)");
;
;
;
;
;
;
const registerFirstUserOperation = async (args)=>{
    const { collection: { config, config: { slug, auth: { verify } } }, data, req, req: { payload } } = args;
    if (config.auth.disableLocalStrategy) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
    }
    try {
        const shouldCommit = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$ensureUsernameOrEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ensureUsernameOrEmail"])({
            authOptions: config.auth,
            collectionSlug: slug,
            data,
            operation: 'create',
            req
        });
        const where = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$appendNonTrashedFilter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["appendNonTrashedFilter"])({
            enableTrash: Boolean(config.trash),
            trash: false,
            where: {}
        });
        const doc = await payload.db.findOne({
            collection: config.slug,
            req,
            where
        });
        if (doc) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
        }
        // /////////////////////////////////////
        // Register first user
        // /////////////////////////////////////
        const result = await payload.create({
            collection: slug,
            data,
            overrideAccess: true,
            req
        });
        // auto-verify (if applicable)
        if (verify) {
            await payload.update({
                id: result.id,
                collection: slug,
                data: {
                    _verified: true
                },
                req
            });
        }
        // /////////////////////////////////////
        // Log in new user
        // /////////////////////////////////////
        const { exp, token } = await payload.login({
            ...args,
            collection: slug,
            req
        });
        result.collection = slug;
        result._strategy = 'local-jwt';
        if (shouldCommit) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
        }
        return {
            exp,
            token,
            user: result
        };
    } catch (error) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
        throw error;
    }
}; //# sourceMappingURL=registerFirstUser.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/registerFirstUser.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "registerFirstUserHandler",
    ()=>registerFirstUserHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$registerFirstUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/registerFirstUser.js [app-route] (ecmascript)");
;
;
;
;
;
const registerFirstUserHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { data, t } = req;
    const authData = collection.config.auth?.loginWithUsername ? {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        password: typeof req.data?.password === 'string' ? req.data.password : '',
        username: typeof req.data?.username === 'string' ? req.data.username : ''
    } : {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        password: typeof req.data?.password === 'string' ? req.data.password : ''
    };
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$registerFirstUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["registerFirstUserOperation"])({
        collection,
        data: {
            ...data,
            ...authData
        },
        req
    });
    const cookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generatePayloadCookie"])({
        collectionAuthConfig: collection.config.auth,
        cookiePrefix: req.payload.config.cookiePrefix,
        token: result.token
    });
    return Response.json({
        exp: result.exp,
        message: t('authentication:successfullyRegisteredFirstUser'),
        token: result.token,
        user: result.user
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers({
                'Set-Cookie': cookie
            }),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=registerFirstUser.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/resetPassword.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "resetPasswordHandler",
    ()=>resetPasswordHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$resetPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/resetPassword.js [app-route] (ecmascript)");
;
;
;
;
;
const resetPasswordHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { searchParams, t } = req;
    const depth = searchParams.get('depth');
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$resetPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["resetPasswordOperation"])({
        collection,
        data: {
            password: typeof req.data?.password === 'string' ? req.data.password : '',
            token: typeof req.data?.token === 'string' ? req.data.token : ''
        },
        depth: depth ? Number(depth) : undefined,
        req
    });
    const cookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generatePayloadCookie"])({
        collectionAuthConfig: collection.config.auth,
        cookiePrefix: req.payload.config.cookiePrefix,
        token: result.token
    });
    if (collection.config.auth.removeTokenFromResponses) {
        delete result.token;
    }
    return Response.json({
        message: t('authentication:passwordResetSuccessfully'),
        ...result
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers({
                'Set-Cookie': cookie
            }),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=resetPassword.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/unlock.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "unlockHandler",
    ()=>unlockHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$unlock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/unlock.js [app-route] (ecmascript)");
;
;
;
;
const unlockHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { t } = req;
    const authData = collection.config.auth?.loginWithUsername !== false ? {
        email: typeof req.data?.email === 'string' ? req.data.email : '',
        username: typeof req.data?.username === 'string' ? req.data.username : ''
    } : {
        email: typeof req.data?.email === 'string' ? req.data.email : ''
    };
    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$unlock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unlockOperation"])({
        collection,
        data: authData,
        req
    });
    return Response.json({
        message: t('general:success')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=unlock.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/verifyEmail.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "verifyEmailHandler",
    ()=>verifyEmailHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$verifyEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/operations/verifyEmail.js [app-route] (ecmascript)");
;
;
;
;
const verifyEmailHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req, {
        disableSanitize: true
    });
    const { t } = req;
    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$operations$2f$verifyEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyEmailOperation"])({
        collection,
        req,
        token: id
    });
    return Response.json({
        message: t('authentication:accountVerified')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=verifyEmail.js.map
}),
"[project]/node_modules/payload/dist/auth/endpoints/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "authCollectionEndpoints",
    ()=>authCollectionEndpoints,
    "authRootEndpoints",
    ()=>authRootEndpoints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/wrapInternalEndpoints.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/access.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$forgotPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/forgotPassword.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$init$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/init.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$login$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/login.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$logout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/logout.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$me$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/me.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$refresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/refresh.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$registerFirstUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/registerFirstUser.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$resetPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/resetPassword.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$unlock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/unlock.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$verifyEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/verifyEmail.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
const authRootEndpoints = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["wrapInternalEndpoints"])([
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["accessHandler"],
        method: 'get',
        path: '/access'
    }
]);
const authCollectionEndpoints = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["wrapInternalEndpoints"])([
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$forgotPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["forgotPasswordHandler"],
        method: 'post',
        path: '/forgot-password'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$init$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initHandler"],
        method: 'get',
        path: '/init'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$login$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["loginHandler"],
        method: 'post',
        path: '/login'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$logout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logoutHandler"],
        method: 'post',
        path: '/logout'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$me$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["meHandler"],
        method: 'get',
        path: '/me'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$refresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["refreshHandler"],
        method: 'post',
        path: '/refresh-token'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$registerFirstUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["registerFirstUserHandler"],
        method: 'post',
        path: '/first-register'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$resetPassword$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["resetPasswordHandler"],
        method: 'post',
        path: '/reset-password'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$unlock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unlockHandler"],
        method: 'post',
        path: '/unlock'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$verifyEmail$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyEmailHandler"],
        method: 'post',
        path: '/verify/:id'
    }
]); //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/accountLock.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "accountLockFields",
    ()=>accountLockFields
]);
const accountLockFields = [
    {
        name: 'loginAttempts',
        type: 'number',
        defaultValue: 0,
        hidden: true
    },
    {
        name: 'lockUntil',
        type: 'date',
        hidden: true
    }
]; //# sourceMappingURL=accountLock.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/apiKey.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "apiKeyFields",
    ()=>apiKeyFields
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/crypto [external] (crypto, cjs)");
;
const encryptKey = ({ req, value })=>value ? req.payload.encrypt(value) : null;
const decryptKey = ({ req, value })=>value ? req.payload.decrypt(value) : undefined;
const apiKeyFields = [
    {
        name: 'enableAPIKey',
        type: 'checkbox',
        admin: {
            components: {
                Field: false
            }
        },
        label: ({ t })=>t('authentication:enableAPIKey')
    },
    {
        name: 'apiKey',
        type: 'text',
        admin: {
            components: {
                Field: false
            }
        },
        hooks: {
            afterRead: [
                decryptKey
            ],
            beforeChange: [
                encryptKey
            ]
        },
        label: ({ t })=>t('authentication:apiKey')
    },
    {
        name: 'apiKeyIndex',
        type: 'text',
        admin: {
            disabled: true
        },
        hidden: true,
        hooks: {
            beforeValidate: [
                ({ data, req, value })=>{
                    if (data?.apiKey === false || data?.apiKey === null) {
                        return null;
                    }
                    if (data?.enableAPIKey === false || data?.enableAPIKey === null) {
                        return null;
                    }
                    if (data?.apiKey) {
                        return __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__["default"].createHmac('sha256', req.payload.secret).update(data.apiKey).digest('hex');
                    }
                    return value;
                }
            ]
        }
    }
]; //# sourceMappingURL=apiKey.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/auth.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "baseAuthFields",
    ()=>baseAuthFields
]);
const baseAuthFields = [
    {
        name: 'resetPasswordToken',
        type: 'text',
        hidden: true
    },
    {
        name: 'resetPasswordExpiration',
        type: 'date',
        hidden: true
    },
    {
        name: 'salt',
        type: 'text',
        hidden: true
    },
    {
        name: 'hash',
        type: 'text',
        hidden: true
    }
]; //# sourceMappingURL=auth.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/email.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "emailFieldConfig",
    ()=>emailFieldConfig
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/validations.js [app-route] (ecmascript)");
;
const emailFieldConfig = {
    name: 'email',
    type: 'email',
    admin: {
        components: {
            Field: false
        }
    },
    hooks: {
        beforeChange: [
            ({ value })=>{
                if (value) {
                    return value.toLowerCase().trim();
                }
            }
        ]
    },
    label: ({ t })=>t('general:email'),
    required: true,
    unique: true,
    validate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["email"]
}; //# sourceMappingURL=email.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/sessions.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sessionsFieldConfig",
    ()=>sessionsFieldConfig
]);
const sessionsFieldConfig = {
    name: 'sessions',
    type: 'array',
    access: {
        read: ({ doc, req: { user } })=>{
            return user?.id === doc?.id;
        },
        update: ()=>false
    },
    admin: {
        disabled: true
    },
    fields: [
        {
            name: 'id',
            type: 'text',
            required: true
        },
        {
            name: 'createdAt',
            type: 'date',
            defaultValue: ()=>new Date()
        },
        {
            name: 'expiresAt',
            type: 'date',
            required: true
        }
    ]
}; //# sourceMappingURL=sessions.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/username.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "usernameFieldConfig",
    ()=>usernameFieldConfig
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/validations.js [app-route] (ecmascript)");
;
const usernameFieldConfig = {
    name: 'username',
    type: 'text',
    admin: {
        components: {
            Field: false
        }
    },
    hooks: {
        beforeChange: [
            ({ value })=>{
                if (value) {
                    return value.toLowerCase().trim();
                }
            }
        ]
    },
    label: ({ t })=>t('authentication:username'),
    required: true,
    unique: true,
    validate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["username"]
}; //# sourceMappingURL=username.js.map
}),
"[project]/node_modules/payload/dist/auth/baseFields/verification.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "verificationFields",
    ()=>verificationFields
]);
const autoRemoveVerificationToken = ({ data, operation, originalDoc, value })=>{
    // If a user manually sets `_verified` to true,
    // and it was `false`, set _verificationToken to `null`.
    // This is useful because the admin panel
    // allows users to set `_verified` to true manually
    if (operation === 'update') {
        if (data?._verified === true && originalDoc?._verified === false) {
            return null;
        }
    }
    return value;
};
const verificationFields = [
    {
        name: '_verified',
        type: 'checkbox',
        access: {
            create: ({ req: { user } })=>Boolean(user),
            read: ({ req: { user } })=>Boolean(user),
            update: ({ req: { user } })=>Boolean(user)
        },
        admin: {
            components: {
                Field: false
            }
        },
        label: ({ t })=>t('authentication:verified')
    },
    {
        name: '_verificationToken',
        type: 'text',
        hidden: true,
        hooks: {
            beforeChange: [
                autoRemoveVerificationToken
            ]
        }
    }
]; //# sourceMappingURL=verification.js.map
}),
"[project]/node_modules/payload/dist/auth/getAuthFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getBaseAuthFields",
    ()=>getBaseAuthFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$accountLock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/accountLock.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$apiKey$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/apiKey.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$auth$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/auth.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$email$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/email.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$sessions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/sessions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$username$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/username.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$verification$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/baseFields/verification.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const getBaseAuthFields = (authConfig)=>{
    const authFields = [];
    if (authConfig.useAPIKey) {
        authFields.push(...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$apiKey$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["apiKeyFields"]);
    }
    if (!authConfig.disableLocalStrategy || typeof authConfig.disableLocalStrategy === 'object' && authConfig.disableLocalStrategy.enableFields) {
        const emailField = {
            ...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$email$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["emailFieldConfig"]
        };
        let usernameField;
        if (authConfig.loginWithUsername) {
            usernameField = {
                ...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$username$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["usernameFieldConfig"]
            };
            if (typeof authConfig.loginWithUsername === 'object') {
                if (authConfig.loginWithUsername.requireEmail === false) {
                    emailField.required = false;
                }
                if (authConfig.loginWithUsername.requireUsername === false) {
                    usernameField.required = false;
                }
                if (authConfig.loginWithUsername.allowEmailLogin === false) {
                    emailField.unique = false;
                }
            }
        }
        authFields.push(emailField);
        if (usernameField) {
            authFields.push(usernameField);
        }
        authFields.push(...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$auth$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseAuthFields"]);
        if (authConfig.verify) {
            authFields.push(...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$verification$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verificationFields"]);
        }
        if (authConfig?.maxLoginAttempts && authConfig.maxLoginAttempts > 0) {
            authFields.push(...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$accountLock$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["accountLockFields"]);
        }
        if (authConfig.useSessions) {
            authFields.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$baseFields$2f$sessions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sessionsFieldConfig"]);
        }
    }
    return authFields;
}; //# sourceMappingURL=getAuthFields.js.map
}),
"[project]/node_modules/payload/dist/errors/TimestampsRequired.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "TimestampsRequired",
    ()=>TimestampsRequired
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class TimestampsRequired extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(collection){
        super(`Timestamps are required in the collection ${collection.slug} because you have opted in to Versions.`);
    }
} //# sourceMappingURL=TimestampsRequired.js.map
}),
"[project]/node_modules/payload/dist/errors/DuplicateFieldName.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DuplicateFieldName",
    ()=>DuplicateFieldName
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class DuplicateFieldName extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(fieldName){
        super(`A field with the name '${fieldName}' was found multiple times on the same level. Field names must be unique.`);
    }
} //# sourceMappingURL=DuplicateFieldName.js.map
}),
"[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "InvalidConfiguration",
    ()=>InvalidConfiguration
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
;
class InvalidConfiguration extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(message){
        super(message, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].INTERNAL_SERVER_ERROR);
    }
} //# sourceMappingURL=InvalidConfiguration.js.map
}),
"[project]/node_modules/payload/dist/errors/InvalidFieldName.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "InvalidFieldName",
    ()=>InvalidFieldName
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class InvalidFieldName extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(field, fieldName){
        super(`Field ${field.label} has invalid name '${fieldName}'. Field names can not include periods (.) and must be alphanumeric.`);
    }
} //# sourceMappingURL=InvalidFieldName.js.map
}),
"[project]/node_modules/payload/dist/errors/InvalidFieldRelationship.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "InvalidFieldRelationship",
    ()=>InvalidFieldRelationship
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class InvalidFieldRelationship extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(field, relationship){
        super(`Field ${field.label} has invalid relationship '${relationship}'.`);
    }
} //# sourceMappingURL=InvalidFieldRelationship.js.map
}),
"[project]/node_modules/payload/dist/errors/MissingFieldType.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "MissingFieldType",
    ()=>MissingFieldType
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
;
class MissingFieldType extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(field){
        super(`Field${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field) ? ` "${field.name}"` : ''} is either missing a field type or it does not match an available field type`);
    }
} //# sourceMappingURL=MissingFieldType.js.map
}),
"[project]/node_modules/payload/dist/errors/ReservedFieldName.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ReservedFieldName",
    ()=>ReservedFieldName
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class ReservedFieldName extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(field, fieldName){
        super(`Field ${field.label} has reserved name '${fieldName}'.`);
    }
} //# sourceMappingURL=ReservedFieldName.js.map
}),
"[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "flattenAllFields",
    ()=>flattenAllFields,
    "flattenBlock",
    ()=>flattenBlock
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
;
const flattenBlock = ({ block })=>{
    return {
        ...block,
        flattenedFields: flattenAllFields({
            fields: block.fields
        })
    };
};
const flattenedFieldsCache = new Map();
const flattenAllFields = ({ cache, fields })=>{
    if (cache) {
        const maybeFields = flattenedFieldsCache.get(fields);
        if (maybeFields) {
            return maybeFields;
        }
    }
    const result = [];
    for (const field of fields){
        switch(field.type){
            case 'array':
            case 'group':
                {
                    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field)) {
                        result.push({
                            ...field,
                            flattenedFields: flattenAllFields({
                                fields: field.fields
                            })
                        });
                    } else {
                        for (const nestedField of flattenAllFields({
                            fields: field.fields
                        })){
                            result.push(nestedField);
                        }
                    }
                    break;
                }
            case 'blocks':
                {
                    const blocks = [];
                    let blockReferences = undefined;
                    if (field.blockReferences) {
                        blockReferences = [];
                        for (const block of field.blockReferences){
                            if (typeof block === 'string') {
                                blockReferences.push(block);
                                continue;
                            }
                            blockReferences.push(flattenBlock({
                                block
                            }));
                        }
                    } else {
                        for (const block of field.blocks){
                            if (typeof block === 'string') {
                                blocks.push(block);
                                continue;
                            }
                            blocks.push(flattenBlock({
                                block
                            }));
                        }
                    }
                    const resultField = {
                        ...field,
                        blockReferences,
                        blocks
                    };
                    result.push(resultField);
                    break;
                }
            case 'collapsible':
            case 'row':
                {
                    for (const nestedField of flattenAllFields({
                        fields: field.fields
                    })){
                        result.push(nestedField);
                    }
                    break;
                }
            case 'join':
                {
                    result.push(field);
                    break;
                }
            case 'tabs':
                {
                    for (const tab of field.tabs){
                        if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tabHasName"])(tab)) {
                            for (const nestedField of flattenAllFields({
                                fields: tab.fields
                            })){
                                result.push(nestedField);
                            }
                        } else {
                            result.push({
                                ...tab,
                                type: 'tab',
                                flattenedFields: flattenAllFields({
                                    fields: tab.fields
                                })
                            });
                        }
                    }
                    break;
                }
            default:
                {
                    if (field.type !== 'ui') {
                        result.push(field);
                    }
                }
        }
    }
    flattenedFieldsCache.set(fields, result);
    return result;
}; //# sourceMappingURL=flattenAllFields.js.map
}),
"[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "formatLabels",
    ()=>formatLabels,
    "formatNames",
    ()=>formatNames,
    "toWords",
    ()=>toWords
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$pluralize$2f$pluralize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/pluralize/pluralize.js [app-route] (ecmascript)");
;
const { isPlural, singular } = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$pluralize$2f$pluralize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"];
const capitalizeFirstLetter = (string)=>string.charAt(0).toUpperCase() + string.slice(1);
const toWords = (inputString, joinWords = false)=>{
    const notNullString = inputString || '';
    const trimmedString = notNullString.trim();
    const arrayOfStrings = trimmedString.split(/[\s-]/);
    const splitStringsArray = [];
    arrayOfStrings.forEach((tempString)=>{
        if (tempString !== '') {
            const splitWords = tempString.split(/(?=[A-Z])/).join(' ');
            splitStringsArray.push(capitalizeFirstLetter(splitWords));
        }
    });
    return joinWords ? splitStringsArray.join('').replace(/\s/g, '') : splitStringsArray.join(' ');
};
const formatLabels = (slug)=>{
    const words = toWords(slug);
    return isPlural(slug) ? {
        plural: words,
        singular: singular(words)
    } : {
        plural: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$pluralize$2f$pluralize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])(words),
        singular: words
    };
};
const formatNames = (slug)=>{
    const words = toWords(slug, true);
    return isPlural(slug) ? {
        plural: words,
        singular: singular(words)
    } : {
        plural: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$pluralize$2f$pluralize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])(words),
        singular: words
    };
};
;
 //# sourceMappingURL=formatLabels.js.map
}),
"[project]/node_modules/payload/dist/utilities/validateTimezones.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "validateTimezones",
    ()=>validateTimezones
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)");
;
/**
 * Validates a UTC offset string.
 * Only supports the HH:mm format (e.g., +05:30, -08:00).
 *
 * Valid ranges: hours -12 to +14, minutes 0-59
 *
 * @returns true if the offset is valid
 */ const isValidUtcOffset = (value)=>{
    // Strict format check: only HH:mm
    const match = value.match(/^([+-])(\d{2}):(\d{2})$/);
    if (!match) {
        return false;
    }
    const sign = match[1] === '+' ? 1 : -1;
    const hours = parseInt(match[2], 10);
    const minutes = parseInt(match[3], 10);
    // Minutes must be 0-59
    if (minutes > 59) {
        return false;
    }
    // Valid range: -12:00 (-720 min) to +14:00 (+840 min)
    const totalMinutes = sign * (hours * 60 + minutes);
    return totalMinutes >= -720 && totalMinutes <= 840;
};
/**
 * Checks if a timezone is supported by the current runtime.
 * Supports both IANA timezone names and UTC offset formats.
 *
 * For IANA names: Uses Intl.DateTimeFormat and Intl.supportedValuesOf
 * For UTC offsets: Uses native Date API to validate (HH:mm format only)
 */ const isTimezoneSupported = (timezoneValue)=>{
    // UTC is always supported
    if (timezoneValue === 'UTC') {
        return true;
    }
    // Check if it's a UTC offset format (starts with + or -)
    if (timezoneValue.startsWith('+') || timezoneValue.startsWith('-')) {
        return isValidUtcOffset(timezoneValue);
    }
    // For IANA timezone names, use Intl.DateTimeFormat as primary check
    try {
        new Intl.DateTimeFormat('en-US', {
            timeZone: timezoneValue
        });
        return true;
    } catch  {
    // DateTimeFormat failed, timezone is not supported
    }
    // Secondary check: verify against supportedValuesOf if available
    if (typeof Intl.supportedValuesOf === 'function') {
        const supportedTimezones = Intl.supportedValuesOf('timeZone');
        if (supportedTimezones.includes(timezoneValue)) {
            return true;
        }
    }
    return false;
};
const validateTimezones = ({ source, timezones })=>{
    if (!timezones?.length) {
        return;
    }
    for (const timezone of timezones){
        if (!isTimezoneSupported(timezone.value)) {
            const sourceText = source ? ` in ${source}` : '';
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`Timezone ${timezone.value}${sourceText} is not supported by the current runtime via the Intl API.`);
        }
    }
}; //# sourceMappingURL=validateTimezones.js.map
}),
"[project]/node_modules/payload/dist/fields/baseFields/baseIDField.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "baseIDField",
    ()=>baseIDField
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bson$2d$objectid$2f$objectid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bson-objectid/objectid.js [app-route] (ecmascript)");
;
const ObjectId = 'default' in __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bson$2d$objectid$2f$objectid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"] ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bson$2d$objectid$2f$objectid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].default : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bson$2d$objectid$2f$objectid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"];
const baseIDField = {
    name: 'id',
    type: 'text',
    admin: {
        hidden: true
    },
    defaultValue: ()=>new ObjectId().toHexString(),
    hooks: {
        beforeChange: [
            ({ value })=>value || new ObjectId().toHexString()
        ],
        // ID field values for arrays and blocks need to be unique when duplicating, as on postgres they are stored on the same table as primary keys.
        beforeDuplicate: [
            ()=>new ObjectId().toHexString()
        ]
    },
    label: 'ID'
}; //# sourceMappingURL=baseIDField.js.map
}),
"[project]/node_modules/payload/dist/fields/baseFields/baseBlockFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "baseBlockFields",
    ()=>baseBlockFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseIDField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/baseIDField.js [app-route] (ecmascript)");
;
const baseBlockFields = [
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseIDField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseIDField"],
    {
        name: 'blockName',
        type: 'text',
        admin: {
            disabled: true
        },
        label: 'Block Name',
        required: false
    }
]; //# sourceMappingURL=baseBlockFields.js.map
}),
"[project]/node_modules/payload/dist/fields/baseFields/timezone/baseField.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "baseTimezoneField",
    ()=>baseTimezoneField
]);
const baseTimezoneField = ({ name, defaultValue, label, options, required })=>{
    return {
        name: name,
        type: 'select',
        admin: {
            hidden: true
        },
        defaultValue,
        label,
        options: options,
        required
    };
}; //# sourceMappingURL=baseField.js.map
}),
"[project]/node_modules/payload/dist/fields/baseFields/timezone/defaultTimezones.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * List of supported timezones
 *
 * label: UTC offset and location
 * value: IANA timezone name
 *
 * @example
 * { label: '(UTC-12:00) International Date Line West', value: 'Dateline Standard Time' }
 */ __turbopack_context__.s([
    "defaultTimezones",
    ()=>defaultTimezones
]);
const defaultTimezones = [
    {
        label: '(UTC-11:00) Midway Island, Samoa',
        value: 'Pacific/Midway'
    },
    {
        label: '(UTC-11:00) Niue',
        value: 'Pacific/Niue'
    },
    {
        label: '(UTC-10:00) Hawaii',
        value: 'Pacific/Honolulu'
    },
    {
        label: '(UTC-10:00) Cook Islands',
        value: 'Pacific/Rarotonga'
    },
    {
        label: '(UTC-09:00) Alaska',
        value: 'America/Anchorage'
    },
    {
        label: '(UTC-09:00) Gambier Islands',
        value: 'Pacific/Gambier'
    },
    {
        label: '(UTC-08:00) Pacific Time (US & Canada)',
        value: 'America/Los_Angeles'
    },
    {
        label: '(UTC-08:00) Tijuana, Baja California',
        value: 'America/Tijuana'
    },
    {
        label: '(UTC-07:00) Mountain Time (US & Canada)',
        value: 'America/Denver'
    },
    {
        label: '(UTC-07:00) Arizona (No DST)',
        value: 'America/Phoenix'
    },
    {
        label: '(UTC-06:00) Central Time (US & Canada)',
        value: 'America/Chicago'
    },
    {
        label: '(UTC-06:00) Central America',
        value: 'America/Guatemala'
    },
    {
        label: '(UTC-05:00) Eastern Time (US & Canada)',
        value: 'America/New_York'
    },
    {
        label: '(UTC-05:00) Bogota, Lima, Quito',
        value: 'America/Bogota'
    },
    {
        label: '(UTC-04:00) Caracas',
        value: 'America/Caracas'
    },
    {
        label: '(UTC-04:00) Santiago',
        value: 'America/Santiago'
    },
    {
        label: '(UTC-03:00) Buenos Aires',
        value: 'America/Buenos_Aires'
    },
    {
        label: '(UTC-03:00) Brasilia',
        value: 'America/Sao_Paulo'
    },
    {
        label: '(UTC-02:00) South Georgia',
        value: 'Atlantic/South_Georgia'
    },
    {
        label: '(UTC-01:00) Azores',
        value: 'Atlantic/Azores'
    },
    {
        label: '(UTC-01:00) Cape Verde',
        value: 'Atlantic/Cape_Verde'
    },
    {
        label: '(UTC+00:00) London (GMT)',
        value: 'Europe/London'
    },
    {
        label: '(UTC+01:00) Berlin, Paris',
        value: 'Europe/Berlin'
    },
    {
        label: '(UTC+01:00) Lagos',
        value: 'Africa/Lagos'
    },
    {
        label: '(UTC+02:00) Athens, Bucharest',
        value: 'Europe/Athens'
    },
    {
        label: '(UTC+02:00) Cairo',
        value: 'Africa/Cairo'
    },
    {
        label: '(UTC+03:00) Moscow, St. Petersburg',
        value: 'Europe/Moscow'
    },
    {
        label: '(UTC+03:00) Riyadh',
        value: 'Asia/Riyadh'
    },
    {
        label: '(UTC+04:00) Dubai',
        value: 'Asia/Dubai'
    },
    {
        label: '(UTC+04:00) Baku',
        value: 'Asia/Baku'
    },
    {
        label: '(UTC+05:00) Islamabad, Karachi',
        value: 'Asia/Karachi'
    },
    {
        label: '(UTC+05:00) Tashkent',
        value: 'Asia/Tashkent'
    },
    {
        label: '(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi',
        value: 'Asia/Calcutta'
    },
    {
        label: '(UTC+06:00) Dhaka',
        value: 'Asia/Dhaka'
    },
    {
        label: '(UTC+06:00) Almaty',
        value: 'Asia/Almaty'
    },
    {
        label: '(UTC+07:00) Jakarta',
        value: 'Asia/Jakarta'
    },
    {
        label: '(UTC+07:00) Bangkok',
        value: 'Asia/Bangkok'
    },
    {
        label: '(UTC+08:00) Beijing, Shanghai',
        value: 'Asia/Shanghai'
    },
    {
        label: '(UTC+08:00) Singapore',
        value: 'Asia/Singapore'
    },
    {
        label: '(UTC+09:00) Tokyo, Osaka, Sapporo',
        value: 'Asia/Tokyo'
    },
    {
        label: '(UTC+09:00) Seoul',
        value: 'Asia/Seoul'
    },
    {
        label: '(UTC+10:00) Brisbane',
        value: 'Australia/Brisbane'
    },
    {
        label: '(UTC+10:00) Sydney, Melbourne',
        value: 'Australia/Sydney'
    },
    {
        label: '(UTC+10:00) Guam, Port Moresby',
        value: 'Pacific/Guam'
    },
    {
        label: '(UTC+11:00) New Caledonia',
        value: 'Pacific/Noumea'
    },
    {
        label: '(UTC+12:00) Auckland, Wellington',
        value: 'Pacific/Auckland'
    },
    {
        label: '(UTC+12:00) Fiji',
        value: 'Pacific/Fiji'
    }
]; //# sourceMappingURL=defaultTimezones.js.map
}),
"[project]/node_modules/payload/dist/fields/setDefaultBeforeDuplicate.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "setDefaultBeforeDuplicate",
    ()=>setDefaultBeforeDuplicate
]);
// @ts-strict-ignore
// default beforeDuplicate hook for required and unique fields
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
;
const isStringValue = (value)=>typeof value === 'string' && value.trim() !== '';
const unique = ({ value })=>isStringValue(value) ? `${value} - Copy` : undefined;
const localizedUnique = ({ req, value })=>isStringValue(value) ? `${value} - ${req?.t('general:copy') ?? 'Copy'}` : undefined;
const setDefaultBeforeDuplicate = (field, parentIsLocalized)=>{
    if (('required' in field && field.required || field.unique) && 'hooks' in field && (!field.hooks?.beforeDuplicate || Array.isArray(field.hooks.beforeDuplicate) && field.hooks.beforeDuplicate.length === 0)) {
        if (field.unique) {
            if ([
                'email',
                'number',
                'point',
                'relationship',
                'select',
                'upload'
            ].includes(field.type)) {
                field.hooks.beforeDuplicate = [
                    ()=>undefined
                ];
            } else if ([
                'code',
                'json',
                'text',
                'textarea'
            ].includes(field.type)) {
                field.hooks.beforeDuplicate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldShouldBeLocalized"])({
                    field,
                    parentIsLocalized
                }) ? [
                    localizedUnique
                ] : [
                    unique
                ];
            }
        }
    }
}; //# sourceMappingURL=setDefaultBeforeDuplicate.js.map
}),
"[project]/node_modules/payload/dist/fields/config/reservedFieldNames.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Reserved field names for collections with auth config enabled
 */ __turbopack_context__.s([
    "reservedAPIKeyFieldNames",
    ()=>reservedAPIKeyFieldNames,
    "reservedBaseAuthFieldNames",
    ()=>reservedBaseAuthFieldNames,
    "reservedBaseUploadFieldNames",
    ()=>reservedBaseUploadFieldNames,
    "reservedVerifyFieldNames",
    ()=>reservedVerifyFieldNames,
    "reservedVersionsFieldNames",
    ()=>reservedVersionsFieldNames
]);
const reservedBaseAuthFieldNames = [
    /* 'email',
    'resetPasswordToken',
    'resetPasswordExpiration', */ 'salt',
    'hash'
];
const reservedVerifyFieldNames = [];
const reservedAPIKeyFieldNames = [];
const reservedBaseUploadFieldNames = [
    'file'
];
const reservedVersionsFieldNames = []; //# sourceMappingURL=reservedFieldNames.js.map
}),
"[project]/node_modules/payload/dist/errors/InvalidFieldJoin.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "InvalidFieldJoin",
    ()=>InvalidFieldJoin
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class InvalidFieldJoin extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(field){
        super(`Invalid join field ${field.name}. The config does not have a field '${field.on}' in collection '${field.collection}'.`);
    }
} //# sourceMappingURL=InvalidFieldJoin.js.map
}),
"[project]/node_modules/payload/dist/fields/config/sanitizeJoinField.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeJoinField",
    ()=>sanitizeJoinField
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldJoin$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidFieldJoin.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getFieldByPath$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getFieldByPath.js [app-route] (ecmascript)");
;
;
;
;
const sanitizeJoinField = ({ config, field, joinPath, joins, parentIsLocalized, polymorphicJoins, validateOnly })=>{
    // the `joins` arg is not passed for globals or when recursing on fields that do not allow a join field
    if (typeof joins === 'undefined') {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Join fields cannot be added to arrays, blocks or globals.');
    }
    if (typeof field.maxDepth === 'undefined') {
        field.maxDepth = 1;
    }
    const join = {
        field,
        joinPath: `${joinPath ? joinPath + '.' : ''}${field.name}`,
        parentIsLocalized,
        // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
        targetField: undefined
    };
    if (Array.isArray(field.collection)) {
        for (const collection of field.collection){
            const sanitizedField = {
                ...field,
                collection
            };
            sanitizeJoinField({
                config,
                field: sanitizedField,
                joinPath,
                joins,
                parentIsLocalized,
                polymorphicJoins,
                validateOnly: true
            });
        }
        if (Array.isArray(polymorphicJoins)) {
            polymorphicJoins.push(join);
        }
        return;
    }
    const joinCollection = config.collections?.find((collection)=>collection.slug === field.collection);
    if (!joinCollection) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldJoin$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidFieldJoin"](field);
    }
    const relationshipField = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getFieldByPath$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFieldByPath"])({
        fields: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenAllFields"])({
            cache: true,
            fields: joinCollection.fields
        }),
        path: field.on
    });
    if (!relationshipField || relationshipField.field.type !== 'relationship' && relationshipField.field.type !== 'upload') {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldJoin$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidFieldJoin"](join.field);
    }
    if (relationshipField.pathHasLocalized) {
        join.getForeignPath = ({ locale })=>{
            return relationshipField.localizedPath.replace('<locale>', locale);
        };
    }
    if (!relationshipField.field.index && !relationshipField.field.unique) {
        relationshipField.field.index = true;
    }
    if (validateOnly) {
        return;
    }
    join.targetField = relationshipField.field;
    // override the join field localized property to use whatever the relationship field has
    // or if it's nested to a localized array / blocks / tabs / group
    field.localized = relationshipField.field.localized;
    // override the join field hasMany property to use whatever the relationship field has
    field.hasMany = relationshipField.field.hasMany;
    // @ts-expect-error converting JoinField to FlattenedJoinField to track targetField
    field.targetField = join.targetField;
    if (!joins[field.collection]) {
        joins[field.collection] = [
            join
        ];
    } else {
        joins[field.collection]?.push(join);
    }
}; //# sourceMappingURL=sanitizeJoinField.js.map
}),
"[project]/node_modules/payload/dist/fields/config/sanitize.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeFields",
    ()=>sanitizeFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$deepMergeSimple$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/deepMergeSimple.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$DuplicateFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/DuplicateFieldName.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidFieldName.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldRelationship$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidFieldRelationship.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$MissingEditorProp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/MissingEditorProp.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$MissingFieldType$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/MissingFieldType.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ReservedFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/ReservedFieldName.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/validateTimezones.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseBlockFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/baseBlockFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseIDField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/baseIDField.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$baseField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/timezone/baseField.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/timezone/defaultTimezones.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$getFieldPaths$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/getFieldPaths.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$setDefaultBeforeDuplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/setDefaultBeforeDuplicate.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/validations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$reservedFieldNames$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/reservedFieldNames.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitizeJoinField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/sanitizeJoinField.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const sanitizeFields = async ({ collectionConfig, config, existingFieldNames = new Set(), fields, globalConfig, isTopLevelField = true, joinPath = '', joins, parentIndexPath = '', parentIsLocalized, parentSchemaPath = '', polymorphicJoins, requireFieldLevelRichTextEditor = false, richTextSanitizationPromises, validRelationships })=>{
    if (!fields) {
        return [];
    }
    for(let i = 0; i < fields.length; i++){
        const field = fields[i];
        if ('_sanitized' in field && field._sanitized === true) {
            continue;
        }
        if ('_sanitized' in field) {
            field._sanitized = true;
        }
        if (!field.type) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$MissingFieldType$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingFieldType"](field);
        }
        const fieldAffectsData = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field);
        const { indexPath, schemaPath } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$getFieldPaths$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFieldPaths"])({
            field,
            index: i,
            parentIndexPath,
            parentSchemaPath
        });
        if (isTopLevelField && fieldAffectsData && field.name) {
            if (collectionConfig && collectionConfig.upload) {
                if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$reservedFieldNames$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservedBaseUploadFieldNames"].includes(field.name)) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ReservedFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ReservedFieldName"](field, field.name);
                }
            }
            if (collectionConfig && collectionConfig.auth && typeof collectionConfig.auth === 'object' && !collectionConfig.auth.disableLocalStrategy) {
                if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$reservedFieldNames$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservedBaseAuthFieldNames"].includes(field.name)) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ReservedFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ReservedFieldName"](field, field.name);
                }
                if (collectionConfig.auth.verify) {
                    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
                    if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$reservedFieldNames$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservedAPIKeyFieldNames"].includes(field.name)) {
                        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ReservedFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ReservedFieldName"](field, field.name);
                    }
                    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
                    if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$reservedFieldNames$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservedVerifyFieldNames"].includes(field.name)) {
                        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ReservedFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ReservedFieldName"](field, field.name);
                    }
                }
            }
        }
        // assert that field names do not contain forbidden characters
        if (fieldAffectsData && field.name.includes('.')) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidFieldName"](field, field.name);
        }
        // Auto-label
        if ('name' in field && field.name && typeof field.label !== 'object' && typeof field.label !== 'string' && typeof field.label !== 'function' && field.label !== false) {
            field.label = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toWords"])(field.name);
        }
        if (field.type === 'checkbox' && typeof field.defaultValue === 'undefined' && field.required === true) {
            field.defaultValue = false;
        }
        if (field.type === 'join') {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitizeJoinField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeJoinField"])({
                config,
                field,
                joinPath,
                joins,
                parentIsLocalized,
                polymorphicJoins
            });
        }
        if (field.type === 'relationship' || field.type === 'upload') {
            // Validate that relationTo is not empty
            if (Array.isArray(field.relationTo) && field.relationTo.length === 0) {
                throw new Error(`Field "${field.name}" of type "${field.type}" has an empty relationTo array. At least one collection must be specified.`);
            }
            if (validRelationships) {
                const relationships = Array.isArray(field.relationTo) ? field.relationTo : [
                    field.relationTo
                ];
                relationships.forEach((relationship)=>{
                    if (!validRelationships.includes(relationship)) {
                        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidFieldRelationship$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidFieldRelationship"](field, relationship);
                    }
                });
            }
            if (field.min && !field.minRows) {
                console.warn(`(payload): The "min" property is deprecated for the Relationship field "${field.name}" and will be removed in a future version. Please use "minRows" instead.`);
                field.minRows = field.min;
            }
            if (field.max && !field.maxRows) {
                console.warn(`(payload): The "max" property is deprecated for the Relationship field "${field.name}" and will be removed in a future version. Please use "maxRows" instead.`);
                field.maxRows = field.max;
            }
        }
        if (field.type === 'upload') {
            if (!field.admin || !('isSortable' in field.admin)) {
                field.admin = {
                    isSortable: true,
                    ...field.admin
                };
            }
        }
        if (field.type === 'array' && field.fields) {
            const hasCustomID = field.fields.some((f)=>'name' in f && f.name === 'id');
            if (!hasCustomID) {
                field.fields.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseIDField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseIDField"]);
            }
        }
        if ((field.type === 'blocks' || field.type === 'array') && field.label) {
            field.labels = field.labels || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["formatLabels"])(field.name);
        }
        if (fieldAffectsData) {
            if (existingFieldNames.has(field.name)) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$DuplicateFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DuplicateFieldName"](field.name);
            } else if (![
                'blockName',
                'id'
            ].includes(field.name)) {
                existingFieldNames.add(field.name);
            }
            if (typeof field.localized !== 'undefined') {
                let shouldDisableLocalized = !config.localization;
                if (process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized !== 'true' && parentIsLocalized && // @todo PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY=true will be the default in 4.0
                process.env.PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY !== 'true') {
                    shouldDisableLocalized = true;
                }
                if (shouldDisableLocalized) {
                    delete field.localized;
                }
            }
            if (typeof field.validate === 'undefined') {
                const defaultValidate = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$validations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validations"][field.type];
                if (defaultValidate) {
                    field.validate = (val, options)=>defaultValidate(val, {
                            ...field,
                            ...options
                        });
                } else {
                    field.validate = ()=>true;
                }
            }
            if (!field.hooks) {
                field.hooks = {};
            }
            if (!field.access) {
                field.access = {};
            }
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$setDefaultBeforeDuplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setDefaultBeforeDuplicate"])(field, parentIsLocalized);
        }
        if (!field.admin) {
            field.admin = {};
        }
        // Make sure that the richText field has an editor
        if (field.type === 'richText') {
            const sanitizeRichText = async (_config)=>{
                if (!field.editor) {
                    if (_config.editor && !requireFieldLevelRichTextEditor) {
                        // config.editor should be sanitized at this point
                        field.editor = _config.editor;
                    } else {
                        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$MissingEditorProp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingEditorProp"](field) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor
                        ;
                    }
                }
                if (typeof field.editor === 'function') {
                    field.editor = await field.editor({
                        config: _config,
                        isRoot: requireFieldLevelRichTextEditor,
                        parentIsLocalized: parentIsLocalized || field.localized
                    });
                }
                if (field.editor.i18n && Object.keys(field.editor.i18n).length >= 0) {
                    config.i18n.translations = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$deepMergeSimple$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deepMergeSimple"])(config.i18n.translations, field.editor.i18n);
                }
            };
            if (richTextSanitizationPromises) {
                richTextSanitizationPromises.push(sanitizeRichText);
            } else {
                await sanitizeRichText(config);
            }
        }
        if (field.type === 'blocks' && field.blocks) {
            if (field.blockReferences && field.blocks?.length) {
                throw new Error('You cannot have both blockReferences and blocks in the same blocks field');
            }
            const blockSlugs = [];
            for (const block of field.blockReferences ?? field.blocks){
                const blockSlug = typeof block === 'string' ? block : block.slug;
                if (blockSlugs.includes(blockSlug)) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$DuplicateFieldName$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DuplicateFieldName"](blockSlug);
                }
                blockSlugs.push(blockSlug);
                if (typeof block === 'string') {
                    continue;
                }
                if (block._sanitized === true) {
                    continue;
                }
                block._sanitized = true;
                block.fields = block.fields.concat(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseBlockFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseBlockFields"]);
                block.labels = !block.labels ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["formatLabels"])(block.slug) : block.labels;
                block.fields = await sanitizeFields({
                    collectionConfig,
                    config,
                    existingFieldNames: new Set(),
                    fields: block.fields,
                    isTopLevelField: false,
                    parentIndexPath: '',
                    parentIsLocalized: parentIsLocalized || field.localized,
                    parentSchemaPath: schemaPath + '.' + block.slug,
                    requireFieldLevelRichTextEditor,
                    richTextSanitizationPromises,
                    validRelationships
                });
            }
        }
        if ('fields' in field && field.fields) {
            field.fields = await sanitizeFields({
                collectionConfig,
                config,
                existingFieldNames: fieldAffectsData ? new Set() : existingFieldNames,
                fields: field.fields,
                isTopLevelField: isTopLevelField && !fieldAffectsData,
                joinPath: fieldAffectsData ? `${joinPath ? joinPath + '.' : ''}${field.name}` : joinPath,
                joins,
                parentIndexPath: fieldAffectsData ? '' : indexPath,
                parentIsLocalized: parentIsLocalized || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldIsLocalized"])(field),
                parentSchemaPath: schemaPath,
                polymorphicJoins,
                requireFieldLevelRichTextEditor,
                richTextSanitizationPromises,
                validRelationships
            });
        }
        if (field.type === 'tabs') {
            for(let j = 0; j < field.tabs.length; j++){
                const tab = field.tabs[j];
                const isNamedTab = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tabHasName"])(tab);
                if (isNamedTab && typeof tab.label === 'undefined') {
                    tab.label = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toWords"])(tab.name);
                }
                const { indexPath: tabIndexPath, schemaPath: tabSchemaPath } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$getFieldPaths$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFieldPaths"])({
                    field: tab,
                    index: j,
                    parentIndexPath: indexPath,
                    parentSchemaPath: schemaPath
                });
                if ('admin' in tab && tab.admin?.condition && typeof tab.admin.condition === 'function' && !tab.id) {
                    tab.id = tabSchemaPath;
                }
                tab.fields = await sanitizeFields({
                    collectionConfig,
                    config,
                    existingFieldNames: isNamedTab ? new Set() : existingFieldNames,
                    fields: tab.fields,
                    isTopLevelField: isTopLevelField && !isNamedTab,
                    joinPath: isNamedTab ? `${joinPath ? joinPath + '.' : ''}${tab.name}` : joinPath,
                    joins,
                    parentIndexPath: isNamedTab ? '' : tabIndexPath,
                    parentIsLocalized: parentIsLocalized || isNamedTab && tab.localized,
                    parentSchemaPath: tabSchemaPath,
                    polymorphicJoins,
                    requireFieldLevelRichTextEditor,
                    richTextSanitizationPromises,
                    validRelationships
                });
                field.tabs[j] = tab;
            }
        }
        if (field.type === 'ui' && typeof field.admin.disableBulkEdit === 'undefined') {
            field.admin.disableBulkEdit = true;
        }
        fields[i] = field;
        // Insert our field after assignment
        if (field.type === 'date' && field.timezone) {
            const name = field.name + '_tz';
            let defaultTimezone = field.timezone && typeof field.timezone === 'object' ? field.timezone.defaultTimezone : config.admin?.timezones?.defaultTimezone;
            const required = field.required || field.timezone && typeof field.timezone === 'object' && field.timezone.required;
            const supportedTimezones = field.timezone && typeof field.timezone === 'object' && field.timezone.supportedTimezones ? field.timezone.supportedTimezones : config.admin?.timezones?.supportedTimezones;
            const options = typeof supportedTimezones === 'function' ? supportedTimezones({
                defaultTimezones: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultTimezones"]
            }) : supportedTimezones;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateTimezones"])({
                source: `field "${field.name}" timezone.supportedTimezones`,
                timezones: options
            });
            if (options && options.length === 1 && options[0]?.value) {
                defaultTimezone = options[0].value;
            }
            // Generate label for timezone field
            // Use parent field's label + ' Tz' if it's a simple string, otherwise fallback to name
            const timezoneLabel = typeof field.label === 'string' ? `${field.label} Tz` : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toWords"])(name);
            // Need to set the options here manually so that any database enums are generated correctly
            // The UI component will import the options from the config
            const baseField = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$baseField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseTimezoneField"])({
                name,
                defaultValue: defaultTimezone,
                label: timezoneLabel,
                options,
                required
            });
            // Apply override if provided
            const timezoneField = typeof field.timezone === 'object' && typeof field.timezone.override === 'function' ? field.timezone.override({
                baseField
            }) : baseField;
            fields.splice(++i, 0, timezoneField);
        }
        if ('virtual' in field && typeof field.virtual === 'string') {
            const virtualField = field;
            const fields = (collectionConfig || globalConfig)?.fields;
            if (fields) {
                let flattenFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenAllFields"])({
                    fields
                });
                const paths = field.virtual.split('.');
                let isHasMany = false;
                for (const [i, segment] of paths.entries()){
                    const field = flattenFields.find((e)=>e.name === segment);
                    if (!field) {
                        break;
                    }
                    if (field.type === 'group' || field.type === 'tab' || field.type === 'array') {
                        flattenFields = field.flattenedFields;
                    } else if ((field.type === 'relationship' || field.type === 'upload') && i !== paths.length - 1 && typeof field.relationTo === 'string') {
                        if (field.hasMany && (virtualField.type === 'text' || virtualField.type === 'number' || virtualField.type === 'select')) {
                            if (isHasMany) {
                                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`Virtual field ${virtualField.name} in ${globalConfig ? `global ${globalConfig.slug}` : `collection ${collectionConfig?.slug}`} references 2 or more hasMany relationships on the path ${virtualField.virtual} which is not allowed.`);
                            }
                            isHasMany = true;
                            virtualField.hasMany = true;
                        }
                        const relatedCollection = config.collections?.find((e)=>e.slug === field.relationTo);
                        if (relatedCollection) {
                            flattenFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenAllFields"])({
                                fields: relatedCollection.fields
                            });
                        }
                    }
                }
            }
        }
    }
    return fields;
}; //# sourceMappingURL=sanitize.js.map
}),
"[project]/node_modules/payload/dist/fields/mergeBaseFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "mergeBaseFields",
    ()=>mergeBaseFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$deepMerge$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/deepMerge.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
;
;
const mergeBaseFields = (fields, baseFields)=>{
    const mergedFields = [
        ...fields || []
    ];
    baseFields.forEach((baseField)=>{
        let matchedIndex = null;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(baseField)) {
            const match = mergedFields.find((field, i)=>{
                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field) && field.name === baseField.name) {
                    matchedIndex = i;
                    return true;
                }
                return false;
            });
            if (match) {
                const matchCopy = {
                    ...match
                };
                mergedFields.splice(matchedIndex, 1);
                const mergedField = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$deepMerge$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["deepMergeWithReactComponents"])(baseField, matchCopy);
                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldHasSubFields"])(baseField) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldHasSubFields"])(matchCopy)) {
                    ;
                    mergedField.fields = mergeBaseFields(matchCopy.fields, baseField.fields);
                }
                mergedFields.push(mergedField);
            } else {
                mergedFields.push(baseField);
            }
        }
    });
    return mergedFields;
}; //# sourceMappingURL=mergeBaseFields.js.map
}),
"[project]/node_modules/payload/dist/uploads/checkFileAccess.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "checkFileAccess",
    ()=>checkFileAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/executeAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/Forbidden.js [app-route] (ecmascript)");
;
;
const checkFileAccess = async ({ collection, filename, req })=>{
    if (filename.includes('../') || filename.includes('..\\')) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
    }
    const { config } = collection;
    const accessResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["executeAccess"])({
        data: {
            filename
        },
        isReadingStaticFile: true,
        req
    }, config.access.read);
    if (typeof accessResult === 'object') {
        const queryToBuild = {
            and: [
                {
                    or: [
                        {
                            filename: {
                                equals: filename
                            }
                        }
                    ]
                },
                accessResult
            ]
        };
        if (config.upload.imageSizes) {
            config.upload.imageSizes.forEach(({ name })=>{
                queryToBuild.and?.[0]?.or?.push({
                    [`sizes.${name}.filename`]: {
                        equals: filename
                    }
                });
            });
        }
        const doc = await req.payload.db.findOne({
            collection: config.slug,
            req,
            where: queryToBuild
        });
        if (!doc) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
        }
        return doc;
    }
}; //# sourceMappingURL=checkFileAccess.js.map
}),
"[project]/node_modules/payload/dist/uploads/fetchAPI-stream-file/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "iteratorToStream",
    ()=>iteratorToStream,
    "nodeStreamToIterator",
    ()=>nodeStreamToIterator,
    "streamFile",
    ()=>streamFile
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
;
function iteratorToStream(iterator) {
    return new ReadableStream({
        async pull (controller) {
            const { done, value } = await iterator.next();
            if (done) {
                controller.close();
            } else {
                controller.enqueue(value);
            }
        }
    });
}
async function* nodeStreamToIterator(stream) {
    for await (const chunk of stream){
        yield new Uint8Array(chunk);
    }
}
function streamFile({ filePath, options }) {
    const nodeStream = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].createReadStream(filePath, options);
    const data = iteratorToStream(nodeStreamToIterator(nodeStream));
    return data;
} //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/uploads/parseRangeHeader.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "parseRangeHeader",
    ()=>parseRangeHeader
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$range$2d$parser$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/range-parser/index.js [app-route] (ecmascript)");
;
function parseRangeHeader({ fileSize, rangeHeader }) {
    // No Range header - serve full file
    if (!rangeHeader) {
        return {
            type: 'full',
            range: null
        };
    }
    const result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$range$2d$parser$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])(fileSize, rangeHeader);
    // Invalid range syntax or unsatisfiable range
    if (result === -1 || result === -2) {
        return {
            type: 'invalid',
            range: null
        };
    }
    // Must be bytes range type
    if (result.type !== 'bytes' || result.length === 0) {
        return {
            type: 'invalid',
            range: null
        };
    }
    // Multi-range requests: use first range only (standard simplification)
    const range = result[0];
    if (!range) {
        return {
            type: 'invalid',
            range: null
        };
    }
    return {
        type: 'partial',
        range: {
            end: range.end,
            start: range.start
        }
    };
} //# sourceMappingURL=parseRangeHeader.js.map
}),
"[project]/node_modules/payload/dist/uploads/endpoints/getFile.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getFileHandler",
    ()=>getFileHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$file$2d$type$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/file-type/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs$2f$promises__$5b$external$5d$__$28$fs$2f$promises$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs/promises [external] (fs/promises, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$checkFileAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/checkFileAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$stream$2d$file$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/fetchAPI-stream-file/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$getFileTypeFallback$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/getFileTypeFallback.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$parseRangeHeader$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/parseRangeHeader.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
const getFileHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const filename = req.routeParams?.filename;
    if (!collection.config.upload) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`This collection is not an upload collection: ${collection.config.slug}`, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST);
    }
    const accessResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$checkFileAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["checkFileAccess"])({
        collection,
        filename,
        req
    });
    if (accessResult instanceof Response) {
        return accessResult;
    }
    if (collection.config.upload.handlers?.length) {
        let customResponse = null;
        const headers = new Headers();
        for (const handler of collection.config.upload.handlers){
            customResponse = await handler(req, {
                doc: accessResult,
                headers,
                params: {
                    collection: collection.config.slug,
                    filename
                }
            });
            if (customResponse && customResponse instanceof Response) {
                break;
            }
        }
        if (customResponse instanceof Response) {
            return customResponse;
        }
    }
    const fileDir = collection.config.upload?.staticDir || collection.config.slug;
    const filePath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(`${fileDir}/${filename}`);
    let stats;
    try {
        stats = await __TURBOPACK__imported__module__$5b$externals$5d2f$fs$2f$promises__$5b$external$5d$__$28$fs$2f$promises$2c$__cjs$29$__["default"].stat(filePath);
    } catch (err) {
        if (err.code === 'ENOENT') {
            req.payload.logger.error(`File ${filename} for collection ${collection.config.slug} is missing on the disk. Expected path: ${filePath}`);
            // Omit going to the routeError handler by returning response instead of
            // throwing an error to cut down log noise. The response still matches what you get with APIError to not leak details to the user.
            return Response.json({
                errors: [
                    {
                        message: 'Something went wrong.'
                    }
                ]
            }, {
                headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
                    headers: new Headers(),
                    req
                }),
                status: 500
            });
        }
        throw err;
    }
    const fileTypeResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$file$2d$type$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fileTypeFromFile"])(filePath) || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$getFileTypeFallback$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileTypeFallback"])(filePath);
    let mimeType = fileTypeResult.mime;
    if (filePath.endsWith('.svg') && fileTypeResult.mime === 'application/xml') {
        mimeType = 'image/svg+xml';
    }
    // Parse Range header for byte range requests
    const rangeHeader = req.headers.get('range');
    const rangeResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$parseRangeHeader$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseRangeHeader"])({
        fileSize: stats.size,
        rangeHeader
    });
    if (rangeResult.type === 'invalid') {
        let headers = new Headers();
        headers.set('Content-Range', `bytes */${stats.size}`);
        headers = collection.config.upload?.modifyResponseHeaders ? collection.config.upload.modifyResponseHeaders({
            headers
        }) || headers : headers;
        return new Response(null, {
            headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
                headers,
                req
            }),
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].REQUESTED_RANGE_NOT_SATISFIABLE
        });
    }
    let headers = new Headers();
    headers.set('Content-Type', mimeType);
    headers.set('Accept-Ranges', 'bytes');
    let data;
    let status;
    const isPartial = rangeResult.type === 'partial';
    const range = rangeResult.range;
    if (isPartial && range) {
        const contentLength = range.end - range.start + 1;
        headers.set('Content-Length', String(contentLength));
        headers.set('Content-Range', `bytes ${range.start}-${range.end}/${stats.size}`);
        data = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$stream$2d$file$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["streamFile"])({
            filePath,
            options: {
                end: range.end,
                start: range.start
            }
        });
        status = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].PARTIAL_CONTENT;
    } else {
        headers.set('Content-Length', String(stats.size));
        data = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$fetchAPI$2d$stream$2d$file$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["streamFile"])({
            filePath
        });
        status = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK;
    }
    headers = collection.config.upload?.modifyResponseHeaders ? collection.config.upload.modifyResponseHeaders({
        headers
    }) || headers : headers;
    return new Response(data, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers,
            req
        }),
        status
    });
}; //# sourceMappingURL=getFile.js.map
}),
"[project]/node_modules/payload/dist/uploads/endpoints/getFileFromURL.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getFileFromURLHandler",
    ()=>getFileFromURLHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/executeAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/Forbidden.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isURLAllowed$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isURLAllowed.js [app-route] (ecmascript)");
;
;
;
;
;
const getFileFromURLHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req, {
        optionalID: true
    });
    if (!req.user) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
    }
    const config = collection?.config;
    if (id) {
        // updating doc
        const accessResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["executeAccess"])({
            req
        }, config.access.update);
        if (!accessResult) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
        }
    } else {
        // creating doc
        const accessResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["executeAccess"])({
            req
        }, config.access?.create);
        if (!accessResult) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$Forbidden$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Forbidden"](req.t);
        }
    }
    try {
        if (!req.url) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Request URL is missing.', 400);
        }
        const { searchParams } = new URL(req.url);
        const src = searchParams.get('src');
        if (!src || typeof src !== 'string') {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('A valid URL string is required.', 400);
        }
        const validatedUrl = new URL(src);
        if (typeof config.upload?.pasteURL === 'object' && !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isURLAllowed$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isURLAllowed"])(validatedUrl.href, config.upload.pasteURL.allowList)) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`The provided URL (${validatedUrl.href}) is not allowed.`, 400);
        }
        // Fetch the file with no compression
        const response = await fetch(validatedUrl.href, {
            headers: {
                'Accept-Encoding': 'identity'
            }
        });
        if (!response.ok) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`Failed to fetch file from ${validatedUrl.href}`, response.status);
        }
        const decodedFileName = decodeURIComponent(validatedUrl.pathname.split('/').pop() || '');
        return new Response(response.body, {
            headers: {
                'Content-Disposition': `attachment; filename="${decodedFileName}"`,
                'Content-Length': response.headers.get('content-length') || '',
                'Content-Type': response.headers.get('content-type') || 'application/octet-stream'
            }
        });
    } catch (err) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`Error fetching file: ${err instanceof Error ? err.message : 'Unknown error'}`, 500);
    }
}; //# sourceMappingURL=getFileFromURL.js.map
}),
"[project]/node_modules/payload/dist/uploads/endpoints/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "uploadCollectionEndpoints",
    ()=>uploadCollectionEndpoints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/wrapInternalEndpoints.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$getFile$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/endpoints/getFile.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$getFileFromURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/endpoints/getFileFromURL.js [app-route] (ecmascript)");
;
;
;
const uploadCollectionEndpoints = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["wrapInternalEndpoints"])([
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$getFileFromURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileFromURLHandler"],
        method: 'get',
        path: '/paste-url/:id?'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$getFile$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileHandler"],
        method: 'get',
        path: '/file/:filename'
    }
]); //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/uploads/generateFilePathOrURL.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "generateFilePathOrURL",
    ()=>generateFilePathOrURL
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatAdminURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatAdminURL.js [app-route] (ecmascript)");
;
function generateFilePathOrURL({ collectionSlug, config, filename, relative, serverURL, urlOrPath }) {
    if (urlOrPath) {
        if (!urlOrPath.startsWith('/') && !urlOrPath.startsWith(serverURL || '')) {
            // external url
            return urlOrPath;
        }
    }
    if (filename) {
        // local file url
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatAdminURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["formatAdminURL"])({
            apiRoute: config.routes?.api || '',
            path: `/${collectionSlug}/file/${encodeURIComponent(filename)}`,
            relative,
            serverURL: config.serverURL
        });
    }
    return null;
} //# sourceMappingURL=generateFilePathOrURL.js.map
}),
"[project]/node_modules/payload/dist/uploads/mimeTypeValidator.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "mimeTypeValidator",
    ()=>mimeTypeValidator
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateMimeType$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/validateMimeType.js [app-route] (ecmascript)");
;
const mimeTypeValidator = (mimeTypes)=>(val, { siblingData })=>{
        if (!siblingData.filename) {
            return true;
        }
        if (!val) {
            return 'Invalid file type';
        }
        const isValidMimeType = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateMimeType$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateMimeType"])(val, mimeTypes);
        return isValidMimeType ? true : `Invalid file type: '${val}'`;
    }; //# sourceMappingURL=mimeTypeValidator.js.map
}),
"[project]/node_modules/payload/dist/uploads/getBaseFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getBaseUploadFields",
    ()=>getBaseUploadFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/generateFilePathOrURL.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$mimeTypeValidator$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/mimeTypeValidator.js [app-route] (ecmascript)");
;
;
const getBaseUploadFields = ({ collection, config })=>{
    const uploadOptions = typeof collection.upload === 'object' ? collection.upload : {};
    const mimeType = {
        name: 'mimeType',
        type: 'text',
        admin: {
            hidden: true,
            readOnly: true
        },
        label: 'MIME Type'
    };
    const thumbnailURL = {
        name: 'thumbnailURL',
        type: 'text',
        admin: {
            hidden: true,
            readOnly: true
        },
        hooks: {
            afterRead: [
                ({ originalDoc, req })=>{
                    const adminThumbnail = typeof collection.upload !== 'boolean' ? collection.upload?.adminThumbnail : undefined;
                    if (typeof adminThumbnail === 'function') {
                        return adminThumbnail({
                            doc: originalDoc
                        });
                    }
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFilePathOrURL"])({
                        collectionSlug: collection.slug,
                        config,
                        filename: typeof adminThumbnail === 'string' ? originalDoc.sizes?.[adminThumbnail].filename : undefined,
                        relative: false,
                        serverURL: req.payload.config.serverURL,
                        urlOrPath: typeof adminThumbnail === 'string' ? originalDoc.sizes?.[adminThumbnail].url : undefined
                    });
                }
            ]
        },
        label: 'Thumbnail URL'
    };
    const width = {
        name: 'width',
        type: 'number',
        admin: {
            hidden: true,
            readOnly: true
        },
        label: ({ t })=>t('upload:width')
    };
    const height = {
        name: 'height',
        type: 'number',
        admin: {
            hidden: true,
            readOnly: true
        },
        label: ({ t })=>t('upload:height')
    };
    const filesize = {
        name: 'filesize',
        type: 'number',
        admin: {
            hidden: true,
            readOnly: true
        },
        label: ({ t })=>t('upload:fileSize')
    };
    const filename = {
        name: 'filename',
        type: 'text',
        admin: {
            disableBulkEdit: true,
            hidden: true,
            readOnly: true
        },
        index: true,
        label: ({ t })=>t('upload:fileName')
    };
    // Only set unique: true if the collection does not have a compound index
    if (collection.upload === true || typeof collection.upload === 'object' && !collection.upload.filenameCompoundIndex) {
        filename.unique = true;
    }
    const url = {
        name: 'url',
        type: 'text',
        admin: {
            hidden: true,
            readOnly: true
        },
        label: 'URL'
    };
    let uploadFields = [
        {
            ...url,
            hooks: {
                afterRead: [
                    ({ data, originalDoc, req, value })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFilePathOrURL"])({
                            collectionSlug: collection.slug,
                            config,
                            filename: data?.filename || originalDoc?.filename,
                            relative: false,
                            serverURL: req.payload.config.serverURL,
                            urlOrPath: value
                        })
                ],
                beforeChange: [
                    ({ collection, data, originalDoc, req, value })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFilePathOrURL"])({
                            collectionSlug: collection?.slug,
                            config,
                            filename: data?.filename || originalDoc?.filename,
                            relative: true,
                            serverURL: req.payload.config.serverURL,
                            urlOrPath: value
                        })
                ]
            }
        },
        thumbnailURL,
        filename,
        mimeType,
        filesize,
        width,
        height
    ];
    // Add focal point fields if not disabled
    if (uploadOptions.focalPoint !== false || uploadOptions.imageSizes || uploadOptions.resizeOptions) {
        uploadFields = uploadFields.concat([
            'focalX',
            'focalY'
        ].map((name)=>{
            return {
                name,
                type: 'number',
                admin: {
                    disableGroupBy: true,
                    disableListColumn: true,
                    disableListFilter: true,
                    hidden: true
                }
            };
        }));
    }
    if (uploadOptions.mimeTypes) {
        mimeType.validate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$mimeTypeValidator$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mimeTypeValidator"])(uploadOptions.mimeTypes);
    }
    // In Payload v4, image size subfields (`url`, `width`, `height`, etc.) should
    // default to `disableGroupBy: true`, `disableListColumn: true` and `disableListFilter: true`
    // to avoid cluttering the collection list view and filters by default.
    if (uploadOptions.imageSizes) {
        uploadFields = uploadFields.concat([
            {
                name: 'sizes',
                type: 'group',
                admin: {
                    hidden: true
                },
                fields: uploadOptions.imageSizes.map((size)=>({
                        name: size.name,
                        type: 'group',
                        admin: {
                            hidden: true,
                            ...size.admin?.disableGroupBy && {
                                disableGroupBy: true
                            },
                            ...size.admin?.disableListColumn && {
                                disableListColumn: true
                            },
                            ...size.admin?.disableListFilter && {
                                disableListFilter: true
                            }
                        },
                        fields: [
                            {
                                ...url,
                                admin: {
                                    ...url.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                },
                                hooks: {
                                    afterRead: [
                                        ({ collection, data, originalDoc, req, value })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFilePathOrURL"])({
                                                collectionSlug: collection?.slug,
                                                config,
                                                filename: data?.sizes?.[size.name]?.filename || originalDoc?.sizes?.[size.name]?.filename,
                                                relative: false,
                                                serverURL: req.payload.config.serverURL,
                                                urlOrPath: value
                                            })
                                    ],
                                    beforeChange: [
                                        ({ collection, data, originalDoc, req, value })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$generateFilePathOrURL$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFilePathOrURL"])({
                                                collectionSlug: collection?.slug,
                                                config,
                                                filename: data?.sizes?.[size.name]?.filename || originalDoc?.sizes?.[size.name]?.filename || data?.filename || originalDoc?.filename,
                                                relative: true,
                                                serverURL: req.payload.config.serverURL,
                                                urlOrPath: value
                                            })
                                    ]
                                }
                            },
                            {
                                ...width,
                                admin: {
                                    ...width.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                }
                            },
                            {
                                ...height,
                                admin: {
                                    ...height.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                }
                            },
                            {
                                ...mimeType,
                                admin: {
                                    ...mimeType.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                }
                            },
                            {
                                ...filesize,
                                admin: {
                                    ...filesize.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                }
                            },
                            {
                                ...filename,
                                admin: {
                                    ...filename.admin,
                                    ...size.admin?.disableGroupBy && {
                                        disableGroupBy: true
                                    },
                                    ...size.admin?.disableListColumn && {
                                        disableListColumn: true
                                    },
                                    ...size.admin?.disableListFilter && {
                                        disableListFilter: true
                                    }
                                },
                                unique: false
                            }
                        ],
                        label: size.name
                    })),
                label: ({ t })=>t('upload:sizes')
            }
        ]);
    }
    return uploadFields;
}; //# sourceMappingURL=getBaseFields.js.map
}),
"[project]/node_modules/payload/dist/utilities/miniChalk.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "miniChalk",
    ()=>miniChalk
]);
const codes = {
    blue: '\x1b[34m',
    bold: '\x1b[1m',
    cyan: '\x1b[36m',
    dim: '\x1b[2m',
    green: '\x1b[32m',
    magenta: '\x1b[35m',
    red: '\x1b[31m',
    reset: '\x1b[0m',
    underline: '\x1b[4m',
    white: '\x1b[37m',
    yellow: '\x1b[33m'
};
function colorize(str, ...styles) {
    const start = styles.map((s)=>codes[s] || '').join('');
    return `${start}${str}${codes.reset}`;
}
const miniChalk = {
    blue: (str)=>colorize(str, 'blue'),
    bold: (str)=>colorize(str, 'bold'),
    cyan: (str)=>colorize(str, 'cyan'),
    dim: (str)=>colorize(str, 'dim'),
    green: (str)=>colorize(str, 'green'),
    magenta: (str)=>colorize(str, 'magenta'),
    red: (str)=>colorize(str, 'red'),
    underline: (str)=>colorize(str, 'underline'),
    white: (str)=>colorize(str, 'white'),
    yellow: (str)=>colorize(str, 'yellow'),
    // combos
    redBold: (str)=>colorize(str, 'red', 'bold'),
    yellowBold: (str)=>colorize(str, 'yellow', 'bold')
}; //# sourceMappingURL=miniChalk.js.map
}),
"[project]/node_modules/payload/dist/utilities/traverseForLocalizedFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "traverseForLocalizedFields",
    ()=>traverseForLocalizedFields
]);
const traverseForLocalizedFields = (fields)=>{
    for (const field of fields){
        if ('localized' in field && field.localized) {
            return true;
        }
        switch(field.type){
            case 'array':
            case 'collapsible':
            case 'group':
            case 'row':
                if (field.fields && traverseForLocalizedFields(field.fields)) {
                    return true;
                }
                break;
            case 'blocks':
                if (field.blocks) {
                    for (const block of field.blocks){
                        if (block.fields && traverseForLocalizedFields(block.fields)) {
                            return true;
                        }
                    }
                }
                break;
            case 'tabs':
                if (field.tabs) {
                    for (const tab of field.tabs){
                        if ('localized' in tab && tab.localized) {
                            return true;
                        }
                        if ('fields' in tab && tab.fields && traverseForLocalizedFields(tab.fields)) {
                            return true;
                        }
                    }
                }
                break;
        }
    }
    return false;
}; //# sourceMappingURL=traverseForLocalizedFields.js.map
}),
"[project]/node_modules/payload/dist/utilities/parseBooleanString.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Useful when parsing query parameters where booleans are represented as strings.
 * Falls back to `undefined` to allow default handling elsewhere.
 */ __turbopack_context__.s([
    "parseBooleanString",
    ()=>parseBooleanString
]);
const parseBooleanString = (value)=>{
    if (typeof value === 'boolean') {
        return value;
    }
    if (value === 'true') {
        return true;
    }
    if (value === 'false') {
        return false;
    }
    return undefined;
}; //# sourceMappingURL=parseBooleanString.js.map
}),
"[project]/node_modules/payload/dist/utilities/sanitizeSortParams.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeSortParams",
    ()=>sanitizeSortParams
]);
const sanitizeSortParams = (sort)=>{
    if (typeof sort === 'string') {
        return sort.split(',');
    }
    if (Array.isArray(sort) && sort.every((value)=>typeof value === 'string')) {
        return sort;
    }
    return undefined;
}; //# sourceMappingURL=sanitizeSortParams.js.map
}),
"[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "booleanParams",
    ()=>booleanParams,
    "numberParams",
    ()=>numberParams,
    "parseParams",
    ()=>parseParams
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseBooleanString$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseBooleanString.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeJoinParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeJoinParams.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSortParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSortParams.js [app-route] (ecmascript)");
;
;
;
;
;
;
const booleanParams = [
    'autosave',
    'draft',
    'trash',
    'overrideLock',
    'pagination',
    'flattenLocales'
];
const numberParams = [
    'depth',
    'limit',
    'page'
];
const parseParams = (params)=>{
    const parsedParams = params || {};
    // iterate through known params to make this very fast
    for (const key of booleanParams){
        if (key in params) {
            parsedParams[key] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseBooleanString$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseBooleanString"])(params[key]);
        }
    }
    for (const key of numberParams){
        if (key in params) {
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(params[key])) {
                parsedParams[key] = Number(params[key]);
            }
        }
    }
    if ('populate' in params) {
        parsedParams.populate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(params.populate);
    }
    if ('select' in params) {
        parsedParams.select = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(params.select);
    }
    if ('joins' in params) {
        parsedParams.joins = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeJoinParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeJoinParams"])(params.joins);
    }
    if ('sort' in params) {
        parsedParams.sort = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSortParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSortParams"])(params.sort);
    }
    if ('data' in params && typeof params.data === 'string' && params.data.length > 0) {
        parsedParams.data = JSON.parse(params.data);
    }
    return parsedParams;
}; //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/count.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "countHandler",
    ()=>countHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$count$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/count.js [app-route] (ecmascript)");
;
;
;
;
const countHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { trash, where } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$count$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["countOperation"])({
        collection,
        req,
        trash,
        where
    });
    return Response.json(result, {
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=count.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/create.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createHandler",
    ()=>createHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$create$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/create.js [app-route] (ecmascript)");
;
;
;
;
;
;
const createHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { autosave, depth, draft, populate, publishAllLocales, select } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const publishSpecificLocale = req.query.publishSpecificLocale;
    const doc = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$create$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createOperation"])({
        autosave,
        collection,
        data: req.data,
        depth,
        draft,
        populate,
        publishAllLocales,
        publishSpecificLocale,
        req,
        select
    });
    return Response.json({
        doc,
        message: req.t('general:successfullyCreated', {
            label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels.singular, req.i18n)
        })
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].CREATED
    });
}; //# sourceMappingURL=create.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/delete.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteHandler",
    ()=>deleteHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$delete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/delete.js [app-route] (ecmascript)");
;
;
;
;
;
;
const deleteHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { depth, overrideLock, populate, select, trash, where } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$delete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteOperation"])({
        collection,
        depth,
        overrideLock: overrideLock ?? false,
        populate,
        req,
        select,
        trash,
        where: where
    });
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    if (result.errors.length === 0) {
        const message = req.t('general:deletedCountSuccessfully', {
            count: result.docs.length,
            label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels[result.docs.length === 1 ? 'singular' : 'plural'], req.i18n)
        });
        return Response.json({
            ...result,
            message
        }, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
        });
    }
    result.errors = result.errors.map((error)=>error.isPublic ? error : {
            ...error,
            message: 'Something went wrong.'
        });
    const total = result.docs.length + result.errors.length;
    const message = req.t('error:unableToDeleteCount', {
        count: result.errors.length,
        label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels[total === 1 ? 'singular' : 'plural'], req.i18n),
        total
    });
    return Response.json({
        ...result,
        message
    }, {
        headers,
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST
    });
}; //# sourceMappingURL=delete.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/deleteByID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteByIDHandler",
    ()=>deleteByIDHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$deleteByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/deleteByID.js [app-route] (ecmascript)");
;
;
;
;
;
const deleteByIDHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const { depth, overrideLock, populate, select, trash } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const doc = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$deleteByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteByIDOperation"])({
        id,
        collection,
        depth,
        overrideLock: overrideLock ?? false,
        populate,
        req,
        select,
        trash
    });
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    if (!doc) {
        return Response.json({
            message: req.t('general:notFound')
        }, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].NOT_FOUND
        });
    }
    return Response.json({
        doc,
        message: req.t('general:deletedSuccessfully')
    }, {
        headers,
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=deleteByID.js.map
}),
"[project]/node_modules/payload/dist/collections/operations/docAccess.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "docAccessOperation",
    ()=>docAccessOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getEntityPermissions$2f$getEntityPermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getEntityPermissions/getEntityPermissions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePermissions.js [app-route] (ecmascript)");
;
;
;
const allOperations = [
    'create',
    'read',
    'update',
    'delete'
];
async function docAccessOperation(args) {
    const { id, collection: { config }, data, req } = args;
    const collectionOperations = [
        ...allOperations
    ];
    if (config.auth && typeof config.auth.maxLoginAttempts !== 'undefined' && config.auth.maxLoginAttempts !== 0) {
        collectionOperations.push('unlock');
    }
    if (config.versions) {
        collectionOperations.push('readVersions');
    }
    try {
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getEntityPermissions$2f$getEntityPermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getEntityPermissions"])({
            id: id,
            blockReferencesPermissions: {},
            data,
            entity: config,
            entityType: 'collection',
            fetchData: id ? true : false,
            operations: collectionOperations,
            req
        });
        const sanitizedPermissions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePermissions"])({
            collections: {
                [config.slug]: result
            }
        });
        const collectionPermissions = sanitizedPermissions?.collections?.[config.slug];
        return collectionPermissions ?? {
            fields: {}
        };
    } catch (e) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
        throw e;
    }
} //# sourceMappingURL=docAccess.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/docAccess.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "docAccessHandler",
    ()=>docAccessHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/docAccess.js [app-route] (ecmascript)");
;
;
;
;
const docAccessHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req, {
        optionalID: true
    });
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["docAccessOperation"])({
        id,
        collection,
        data: req.data,
        req
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=docAccess.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/duplicate.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "duplicateHandler",
    ()=>duplicateHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$duplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/duplicate.js [app-route] (ecmascript)");
;
;
;
;
;
;
const duplicateHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const { depth, draft, populate, select, selectedLocales } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const doc = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$duplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["duplicateOperation"])({
        id,
        collection,
        data: req.data,
        depth,
        draft,
        populate,
        req,
        select,
        selectedLocales
    });
    const message = req.t('general:successfullyDuplicated', {
        label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels.singular, req.i18n)
    });
    return Response.json({
        doc,
        message
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=duplicate.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/find.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findHandler",
    ()=>findHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$find$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/find.js [app-route] (ecmascript)");
;
;
;
;
;
const findHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { depth, draft, joins, limit, page, pagination, populate, select, sort, trash, where } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$find$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findOperation"])({
        collection,
        depth,
        draft,
        joins,
        limit,
        page,
        pagination,
        populate,
        req,
        select,
        sort,
        trash,
        where
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=find.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/findByID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findByIDHandler",
    ()=>findByIDHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/findByID.js [app-route] (ecmascript)");
;
;
;
;
;
const findByIDHandler = async (req)=>{
    const { data: dataArg } = req;
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const { data, depth, draft, flattenLocales, joins, populate, select, trash } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])({
        ...req.query,
        ...dataArg
    });
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findByIDOperation"])({
        id,
        collection,
        data,
        depth,
        draft,
        flattenLocales,
        joins,
        populate,
        req,
        select,
        trash
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findByID.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/findVersionByID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findVersionByIDHandler",
    ()=>findVersionByIDHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/findVersionByID.js [app-route] (ecmascript)");
;
;
;
;
;
const findVersionByIDHandler = async (req)=>{
    const { depth, populate, select, trash } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionByIDOperation"])({
        id,
        collection,
        depth,
        populate,
        req,
        select,
        trash
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findVersionByID.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/findVersions.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findVersionsHandler",
    ()=>findVersionsHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/findVersions.js [app-route] (ecmascript)");
;
;
;
;
;
const findVersionsHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { depth, limit, page, pagination, populate, select, sort, trash, where } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionsOperation"])({
        collection,
        depth,
        limit,
        page,
        pagination,
        populate,
        req,
        select,
        sort,
        trash,
        where
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findVersions.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/restoreVersion.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "restoreVersionHandler",
    ()=>restoreVersionHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/restoreVersion.js [app-route] (ecmascript)");
;
;
;
;
;
const restoreVersionHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const { depth, draft, populate } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restoreVersionOperation"])({
        id,
        collection,
        depth,
        draft,
        populate,
        req
    });
    return Response.json({
        ...result,
        message: req.t('version:restoredSuccessfully')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=restoreVersion.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/update.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateHandler",
    ()=>updateHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/update.js [app-route] (ecmascript)");
;
;
;
;
;
;
const updateHandler = async (req)=>{
    const collection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollection"])(req);
    const { depth, draft, limit, overrideLock, populate, publishAllLocales, select, sort, trash, unpublishAllLocales, where } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateOperation"])({
        collection,
        data: req.data,
        depth,
        draft,
        limit,
        overrideLock: overrideLock ?? false,
        populate,
        publishAllLocales,
        req,
        select,
        sort,
        trash,
        unpublishAllLocales,
        where: where
    });
    const headers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
        headers: new Headers(),
        req
    });
    if (result.errors.length === 0) {
        const message = req.t('general:updatedCountSuccessfully', {
            count: result.docs.length,
            label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels[result.docs.length === 1 ? 'singular' : 'plural'], req.i18n)
        });
        return Response.json({
            ...result,
            message
        }, {
            headers,
            status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
        });
    }
    result.errors = result.errors.map((error)=>error.isPublic ? error : {
            ...error,
            message: 'Something went wrong.'
        });
    const total = result.docs.length + result.errors.length;
    const message = req.t('error:unableToUpdateCount', {
        count: result.errors.length,
        label: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(collection.config.labels[total === 1 ? 'singular' : 'plural'], req.i18n),
        total
    });
    return Response.json({
        ...result,
        message
    }, {
        headers,
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST
    });
}; //# sourceMappingURL=update.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/updateByID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateByIDHandler",
    ()=>updateByIDHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/parseParams/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$updateByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/operations/updateByID.js [app-route] (ecmascript)");
;
;
;
;
;
const updateByIDHandler = async (req)=>{
    const { id, collection } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestCollectionWithID"])(req);
    const { autosave, depth, draft, overrideLock, populate, publishAllLocales, publishSpecificLocale, select, trash, unpublishAllLocales } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$parseParams$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseParams"])(req.query);
    const doc = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$operations$2f$updateByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateByIDOperation"])({
        id,
        autosave,
        collection,
        data: req.data,
        depth,
        draft,
        overrideLock: overrideLock ?? false,
        populate,
        publishAllLocales,
        publishSpecificLocale,
        req,
        select,
        trash,
        unpublishAllLocales
    });
    let message = req.t('general:updatedSuccessfully');
    if (draft) {
        message = req.t('version:draftSavedSuccessfully');
    }
    if (autosave) {
        message = req.t('version:autosavedSuccessfully');
    }
    return Response.json({
        doc,
        message
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=updateByID.js.map
}),
"[project]/node_modules/payload/dist/collections/endpoints/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "defaultCollectionEndpoints",
    ()=>defaultCollectionEndpoints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/wrapInternalEndpoints.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$count$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/count.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$create$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/create.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$delete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/delete.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$deleteByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/deleteByID.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/docAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$duplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/duplicate.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$find$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/find.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/findByID.js [app-route] (ecmascript)");
// import { findDistinctHandler } from './findDistinct.js'
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/findVersionByID.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/findVersions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/restoreVersion.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/update.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$updateByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/updateByID.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const defaultCollectionEndpoints = [
    ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["wrapInternalEndpoints"])([
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$count$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["countHandler"],
            method: 'get',
            path: '/count'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$create$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createHandler"],
            method: 'post',
            path: '/'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$delete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteHandler"],
            method: 'delete',
            path: '/'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$deleteByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteByIDHandler"],
            method: 'delete',
            path: '/:id'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["docAccessHandler"],
            method: 'post',
            path: '/access/:id?'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionsHandler"],
            method: 'get',
            path: '/versions'
        },
        // Might be uncommented in the future
        // {
        //   handler: findDistinctHandler,
        //   method: 'get',
        //   path: '/distinct',
        // },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$duplicate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["duplicateHandler"],
            method: 'post',
            path: '/:id/duplicate'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$find$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findHandler"],
            method: 'get',
            path: '/'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findByIDHandler"],
            method: 'get',
            path: '/:id'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionByIDHandler"],
            method: 'get',
            path: '/versions/:id'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restoreVersionHandler"],
            method: 'post',
            path: '/versions/:id'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateHandler"],
            method: 'patch',
            path: '/'
        },
        {
            handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$updateByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateByIDHandler"],
            method: 'patch',
            path: '/:id'
        }
    ])
]; //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/collections/config/defaults.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addDefaultsToAuthConfig",
    ()=>addDefaultsToAuthConfig,
    "addDefaultsToCollectionConfig",
    ()=>addDefaultsToCollectionConfig,
    "addDefaultsToLoginWithUsernameConfig",
    ()=>addDefaultsToLoginWithUsernameConfig,
    "authDefaults",
    ()=>authDefaults,
    "defaults",
    ()=>defaults,
    "loginWithUsernameDefaults",
    ()=>loginWithUsernameDefaults
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultAccess.js [app-route] (ecmascript)");
;
const defaults = {
    access: {
        create: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        delete: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        read: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        unlock: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        update: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"]
    },
    admin: {
        components: {},
        custom: {},
        enableRichTextLink: true,
        enableRichTextRelationship: true,
        pagination: {
            defaultLimit: 10,
            limits: [
                5,
                10,
                25,
                50,
                100
            ]
        },
        useAsTitle: 'id'
    },
    auth: false,
    custom: {},
    endpoints: [],
    fields: [],
    hooks: {
        afterChange: [],
        afterDelete: [],
        afterForgotPassword: [],
        afterLogin: [],
        afterLogout: [],
        afterMe: [],
        afterOperation: [],
        afterRead: [],
        afterRefresh: [],
        beforeChange: [],
        beforeDelete: [],
        beforeLogin: [],
        beforeOperation: [],
        beforeRead: [],
        beforeValidate: [],
        me: [],
        refresh: []
    },
    indexes: [],
    timestamps: true,
    upload: false,
    versions: false
};
const addDefaultsToCollectionConfig = (collection)=>{
    collection.access = {
        create: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        delete: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        read: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        unlock: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        update: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
        ...collection.access || {}
    };
    collection.admin = {
        components: {},
        custom: {},
        enableRichTextLink: true,
        enableRichTextRelationship: true,
        useAsTitle: 'id',
        ...collection.admin || {},
        pagination: {
            defaultLimit: 10,
            limits: [
                5,
                10,
                25,
                50,
                100
            ],
            ...collection.admin?.pagination || {}
        }
    };
    collection.auth = collection.auth ?? false;
    collection.custom = collection.custom ?? {};
    collection.endpoints = collection.endpoints ?? [];
    collection.fields = collection.fields ?? [];
    collection.folders = collection.folders ?? false;
    collection.hooks = {
        afterChange: [],
        afterDelete: [],
        afterForgotPassword: [],
        afterLogin: [],
        afterLogout: [],
        afterMe: [],
        afterOperation: [],
        afterRead: [],
        afterRefresh: [],
        beforeChange: [],
        beforeDelete: [],
        beforeLogin: [],
        beforeOperation: [],
        beforeRead: [],
        beforeValidate: [],
        me: [],
        refresh: [],
        ...collection.hooks || {}
    };
    collection.timestamps = collection.timestamps ?? true;
    collection.upload = collection.upload ?? false;
    collection.versions = collection.versions ?? false;
    collection.indexes = collection.indexes ?? [];
    return collection;
};
const authDefaults = {
    cookies: {
        sameSite: 'Lax',
        secure: false
    },
    forgotPassword: {},
    lockTime: 600000,
    loginWithUsername: false,
    maxLoginAttempts: 5,
    tokenExpiration: 7200,
    useSessions: true,
    verify: false
};
const addDefaultsToAuthConfig = (auth)=>{
    auth.cookies = {
        sameSite: 'Lax',
        secure: false,
        ...auth.cookies || {}
    };
    auth.forgotPassword = auth.forgotPassword ?? {};
    auth.lockTime = auth.lockTime ?? 600000; // 10 minutes
    auth.loginWithUsername = auth.loginWithUsername ?? false;
    auth.maxLoginAttempts = auth.maxLoginAttempts ?? 5;
    auth.tokenExpiration = auth.tokenExpiration ?? 7200;
    auth.useSessions = auth.useSessions ?? true;
    auth.verify = auth.verify ?? false;
    auth.strategies = auth.strategies ?? [];
    if (!auth.disableLocalStrategy && auth.verify === true) {
        auth.verify = {};
    }
    return auth;
};
const loginWithUsernameDefaults = {
    allowEmailLogin: false,
    requireEmail: false,
    requireUsername: true
};
const addDefaultsToLoginWithUsernameConfig = (loginWithUsername)=>({
        allowEmailLogin: false,
        requireEmail: false,
        requireUsername: true,
        ...loginWithUsername || {}
    }); //# sourceMappingURL=defaults.js.map
}),
"[project]/node_modules/payload/dist/collections/config/sanitizeCompoundIndexes.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeCompoundIndexes",
    ()=>sanitizeCompoundIndexes
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getFieldByPath$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getFieldByPath.js [app-route] (ecmascript)");
;
;
const sanitizeCompoundIndexes = ({ fields, indexes })=>{
    const sanitizedCompoundIndexes = [];
    for (const index of indexes){
        const sanitized = {
            fields: [],
            unique: index.unique ?? false
        };
        for (const path of index.fields){
            const result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getFieldByPath$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFieldByPath"])({
                fields,
                path
            });
            if (!result) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`Field ${path} was not found`);
            }
            const { field, localizedPath, pathHasLocalized } = result;
            if ([
                'array',
                'blocks',
                'group',
                'tab'
            ].includes(field.type)) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`Compound index on ${field.type} cannot be set. Path: ${localizedPath}`);
            }
            sanitized.fields.push({
                field,
                localizedPath,
                path,
                pathHasLocalized
            });
        }
        sanitizedCompoundIndexes.push(sanitized);
    }
    return sanitizedCompoundIndexes;
}; //# sourceMappingURL=sanitizeCompoundIndexes.js.map
}),
"[project]/node_modules/payload/dist/utilities/flattenTopLevelFields.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "flattenTopLevelFields",
    ()=>flattenTopLevelFields
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
;
;
function flattenTopLevelFields(fields = [], options) {
    const normalizedOptions = typeof options === 'boolean' ? {
        keepPresentationalFields: options
    } : options ?? {};
    const { i18n, keepPresentationalFields, labelPrefix, moveSubFieldsToTop = false, pathPrefix } = normalizedOptions;
    return fields.reduce((acc, field)=>{
        // If a group field has subfields and has a name, otherwise we catch it below along with collapsible and row fields
        if (field.type === 'group' && 'fields' in field) {
            if (moveSubFieldsToTop) {
                const isNamedGroup = 'name' in field && typeof field.name === 'string' && !!field.name;
                const groupName = 'name' in field ? field.name : undefined;
                const translatedLabel = 'label' in field && field.label && i18n ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(field.label, i18n) : undefined;
                const labelWithPrefix = labelPrefix ? `${labelPrefix} > ${translatedLabel ?? groupName}` : translatedLabel ?? groupName;
                const nameWithPrefix = 'name' in field && field.name ? pathPrefix ? `${pathPrefix}.${field.name}` : field.name : pathPrefix;
                acc.push(// so that `buildColumnState` can detect and render a column if the group
                // has a custom admin Cell component defined in its configuration.
                // See: packages/ui/src/providers/TableColumns/buildColumnState/index.tsx
                field, ...flattenTopLevelFields(field.fields, {
                    i18n,
                    keepPresentationalFields,
                    labelPrefix: isNamedGroup ? labelWithPrefix : labelPrefix,
                    moveSubFieldsToTop,
                    pathPrefix: isNamedGroup ? nameWithPrefix : pathPrefix
                }));
            } else {
                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field)) {
                    // Hoisting diabled - keep as top level field
                    acc.push(field);
                } else {
                    acc.push(...flattenTopLevelFields(field.fields, options));
                }
            }
        } else if (field.type === 'tabs' && 'tabs' in field) {
            return [
                ...acc,
                ...field.tabs.reduce((tabFields, tab)=>{
                    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tabHasName"])(tab)) {
                        if (moveSubFieldsToTop) {
                            const translatedLabel = 'label' in tab && tab.label && i18n ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(tab.label, i18n) : undefined;
                            const labelWithPrefixForTab = labelPrefix ? `${labelPrefix} > ${translatedLabel ?? tab.name}` : translatedLabel ?? tab.name;
                            const pathPrefixForTab = tab.name ? pathPrefix ? `${pathPrefix}.${tab.name}` : tab.name : pathPrefix;
                            return [
                                ...tabFields,
                                ...flattenTopLevelFields(tab.fields, {
                                    i18n,
                                    keepPresentationalFields,
                                    labelPrefix: labelWithPrefixForTab,
                                    moveSubFieldsToTop,
                                    pathPrefix: pathPrefixForTab
                                })
                            ];
                        } else {
                            // Named tab, hoisting disabled: keep as top-level field
                            return [
                                ...tabFields,
                                {
                                    ...tab,
                                    type: 'tab'
                                }
                            ];
                        }
                    } else {
                        // Unnamed tab: always hoist its fields
                        return [
                            ...tabFields,
                            ...flattenTopLevelFields(tab.fields, options)
                        ];
                    }
                }, [])
            ];
        } else if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldHasSubFields"])(field) && [
            'collapsible',
            'row'
        ].includes(field.type)) {
            // Recurse into row and collapsible
            acc.push(...flattenTopLevelFields(field.fields, options));
        } else if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field) || keepPresentationalFields && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldIsPresentationalOnly"])(field)) {
            // Ignore nested `id` fields when inside nested structure
            if (field.name === 'id' && labelPrefix !== undefined) {
                return acc;
            }
            const translatedLabel = 'label' in field && field.label && i18n ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(field.label, i18n) : undefined;
            const name = 'name' in field ? field.name : undefined;
            const isHoistingFromGroup = pathPrefix !== undefined || labelPrefix !== undefined;
            acc.push({
                ...field,
                ...moveSubFieldsToTop && isHoistingFromGroup && {
                    accessor: pathPrefix && name ? `${pathPrefix}.${name}` : name ?? '',
                    labelWithPrefix: labelPrefix ? `${labelPrefix} > ${translatedLabel ?? name}` : translatedLabel ?? name
                }
            });
        }
        return acc;
    }, []);
} //# sourceMappingURL=flattenTopLevelFields.js.map
}),
"[project]/node_modules/payload/dist/collections/config/useAsTitle.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "validateUseAsTitle",
    ()=>validateUseAsTitle
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenTopLevelFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenTopLevelFields.js [app-route] (ecmascript)");
;
;
;
const validateUseAsTitle = (config)=>{
    if (config.admin?.useAsTitle?.includes('.')) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`"useAsTitle" cannot be a nested field. Please specify a top-level field in the collection "${config.slug}"`);
    }
    if (config?.admin && config.admin?.useAsTitle && config.admin.useAsTitle !== 'id') {
        const fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenTopLevelFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenTopLevelFields"])(config.fields);
        const useAsTitleField = fields.find((field)=>{
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field) && config.admin) {
                return field.name === config.admin.useAsTitle;
            }
            return false;
        });
        // If auth is enabled then we don't need to
        if (config.auth) {
            if (config.admin.useAsTitle !== 'email') {
                if (!useAsTitleField) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`The field "${config.admin.useAsTitle}" specified in "admin.useAsTitle" does not exist in the collection "${config.slug}"`);
                }
            }
        } else {
            if (useAsTitleField && 'virtual' in useAsTitleField && useAsTitleField.virtual === true) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`The field "${config.admin.useAsTitle}" specified in "admin.useAsTitle" in the collection "${config.slug}" is virtual. A virtual field can be used as the title only when linked to a relationship field.`);
            }
            if (!useAsTitleField) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`The field "${config.admin.useAsTitle}" specified in "admin.useAsTitle" does not exist in the collection "${config.slug}"`);
            }
        }
    }
}; //# sourceMappingURL=useAsTitle.js.map
}),
"[project]/node_modules/payload/dist/collections/config/sanitize.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeCollection",
    ()=>sanitizeCollection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getAuthFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/getAuthFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$TimestampsRequired$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/TimestampsRequired.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/mergeBaseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/endpoints/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$getBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/uploads/getBaseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$miniChalk$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/miniChalk.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseForLocalizedFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/traverseForLocalizedFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$baseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/versions/baseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/versions/defaults.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/endpoints/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/config/defaults.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitizeCompoundIndexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/config/sanitizeCompoundIndexes.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$useAsTitle$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/config/useAsTitle.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const sanitizeCollection = async (config, collection, /**
   * If this property is set, RichText fields won't be sanitized immediately. Instead, they will be added to this array as promises
   * so that you can sanitize them together, after the config has been sanitized.
   */ richTextSanitizationPromises, _validRelationships)=>{
    if (collection._sanitized) {
        return collection;
    }
    collection._sanitized = true;
    // /////////////////////////////////
    // Make copy of collection config
    // /////////////////////////////////
    const sanitized = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDefaultsToCollectionConfig"])(collection);
    // /////////////////////////////////
    // Sanitize fields
    // /////////////////////////////////
    const validRelationships = _validRelationships ?? config.collections.map((c)=>c.slug) ?? [];
    const joins = {};
    const polymorphicJoins = [];
    sanitized.fields = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeFields"])({
        collectionConfig: sanitized,
        config,
        fields: sanitized.fields,
        joinPath: '',
        joins,
        parentIsLocalized: false,
        polymorphicJoins,
        richTextSanitizationPromises,
        validRelationships
    });
    if (sanitized.endpoints !== false) {
        if (!sanitized.endpoints) {
            sanitized.endpoints = [];
        }
        if (sanitized.auth) {
            for (const endpoint of __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["authCollectionEndpoints"]){
                sanitized.endpoints.push(endpoint);
            }
        }
        if (sanitized.upload) {
            for (const endpoint of __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["uploadCollectionEndpoints"]){
                sanitized.endpoints.push(endpoint);
            }
        }
        for (const endpoint of __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultCollectionEndpoints"]){
            sanitized.endpoints.push(endpoint);
        }
    }
    if (sanitized.timestamps !== false) {
        // add default timestamps fields only as needed
        let hasUpdatedAt = null;
        let hasCreatedAt = null;
        let hasDeletedAt = null;
        sanitized.fields.some((field)=>{
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field)) {
                if (field.name === 'updatedAt') {
                    hasUpdatedAt = true;
                }
                if (field.name === 'createdAt') {
                    hasCreatedAt = true;
                }
                if (field.name === 'deletedAt') {
                    hasDeletedAt = true;
                }
            }
            return hasCreatedAt && hasUpdatedAt && (!sanitized.trash || hasDeletedAt);
        });
        if (!hasUpdatedAt) {
            sanitized.fields.push({
                name: 'updatedAt',
                type: 'date',
                admin: {
                    disableBulkEdit: true,
                    hidden: true
                },
                index: true,
                label: ({ t })=>t('general:updatedAt')
            });
        }
        if (!hasCreatedAt) {
            sanitized.fields.push({
                name: 'createdAt',
                admin: {
                    disableBulkEdit: true,
                    hidden: true
                },
                // The default sort for list view is createdAt. Thus, enabling indexing by default, is a major performance improvement, especially for large or a large amount of collections.
                type: 'date',
                index: true,
                label: ({ t })=>t('general:createdAt')
            });
        }
        if (sanitized.trash && !hasDeletedAt) {
            sanitized.fields.push({
                name: 'deletedAt',
                type: 'date',
                admin: {
                    disableBulkEdit: true,
                    hidden: true
                },
                index: true,
                label: ({ t })=>t('general:deletedAt')
            });
        }
    }
    const defaultLabels = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["formatLabels"])(sanitized.slug);
    sanitized.labels = {
        plural: sanitized.labels?.plural || defaultLabels.plural,
        singular: sanitized.labels?.singular || defaultLabels.singular
    };
    if (sanitized.versions) {
        if (sanitized.timestamps === false) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$TimestampsRequired$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TimestampsRequired"](collection);
        }
        if (sanitized.versions === true) {
            sanitized.versions = {
                drafts: false,
                maxPerDoc: 100
            };
        }
        sanitized.versions.maxPerDoc = typeof sanitized.versions.maxPerDoc === 'number' ? sanitized.versions.maxPerDoc : 100;
        if (sanitized.versions.drafts) {
            if (sanitized.versions.drafts === true) {
                sanitized.versions.drafts = {
                    autosave: false,
                    validate: false
                };
            }
            const hasLocalizedFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseForLocalizedFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["traverseForLocalizedFields"])(sanitized.fields);
            if (config.localization) {
                if (hasLocalizedFields && sanitized.versions.drafts.localizeStatus === undefined) {
                    sanitized.versions.drafts.localizeStatus = false;
                }
            }
            // TODO v4: remove this sanitization check, should not need to enable the experimental flag
            if (sanitized.versions.drafts.localizeStatus && !config.experimental?.localizeStatus) {
                sanitized.versions.drafts.localizeStatus = false;
                console.log(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$miniChalk$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["miniChalk"].yellowBold(`Warning: "localizeStatus" for drafts is an experimental feature. To enable, set "experimental.localizeStatus" to true in your Payload config.`));
            }
            if (sanitized.versions.drafts.autosave === true) {
                sanitized.versions.drafts.autosave = {
                    interval: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["versionDefaults"].autosaveInterval
                };
            }
            if (sanitized.versions.drafts.validate === undefined) {
                sanitized.versions.drafts.validate = false;
            }
            sanitized.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mergeBaseFields"])(sanitized.fields, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$baseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseVersionFields"])({
                localized: sanitized.versions.drafts.localizeStatus ?? false
            }));
        }
    } else {
        delete sanitized.versions;
    }
    if (sanitized.folders === true) {
        sanitized.folders = {
            browseByFolder: true
        };
    } else if (sanitized.folders) {
        sanitized.folders.browseByFolder = sanitized.folders.browseByFolder ?? true;
    }
    if (sanitized.upload) {
        if (sanitized.upload === true) {
            sanitized.upload = {};
        }
        sanitized.upload.cacheTags = sanitized.upload?.cacheTags ?? true;
        sanitized.upload.bulkUpload = sanitized.upload?.bulkUpload ?? true;
        sanitized.upload.staticDir = sanitized.upload.staticDir || sanitized.slug;
        sanitized.admin.useAsTitle = sanitized.admin?.useAsTitle && sanitized.admin.useAsTitle !== 'id' ? sanitized.admin.useAsTitle : 'filename';
        const uploadFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$uploads$2f$getBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getBaseUploadFields"])({
            collection: sanitized,
            config
        });
        sanitized.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mergeBaseFields"])(sanitized.fields, uploadFields);
    }
    if (sanitized.auth) {
        sanitized.auth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDefaultsToAuthConfig"])(typeof sanitized.auth === 'boolean' ? {} : sanitized.auth);
        // disable duplicate for auth enabled collections by default
        sanitized.disableDuplicate = sanitized.disableDuplicate ?? true;
        if (sanitized.auth.loginWithUsername) {
            if (sanitized.auth.loginWithUsername === true) {
                sanitized.auth.loginWithUsername = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDefaultsToLoginWithUsernameConfig"])({});
            } else {
                const loginWithUsernameWithDefaults = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDefaultsToLoginWithUsernameConfig"])(sanitized.auth.loginWithUsername);
                // if allowEmailLogin is false, requireUsername must be true
                if (loginWithUsernameWithDefaults.allowEmailLogin === false) {
                    loginWithUsernameWithDefaults.requireUsername = true;
                }
                sanitized.auth.loginWithUsername = loginWithUsernameWithDefaults;
            }
        } else {
            sanitized.auth.loginWithUsername = false;
        }
        if (!collection?.admin?.useAsTitle) {
            sanitized.admin.useAsTitle = sanitized.auth.loginWithUsername ? 'username' : 'email';
        }
        sanitized.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mergeBaseFields"])(sanitized.fields, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$getAuthFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getBaseAuthFields"])(sanitized.auth));
    }
    if (collection?.admin?.pagination?.limits?.length) {
        sanitized.admin.pagination.limits = collection.admin.pagination.limits;
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$useAsTitle$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateUseAsTitle"])(sanitized);
    const sanitizedConfig = sanitized;
    sanitizedConfig.joins = joins;
    sanitizedConfig.polymorphicJoins = polymorphicJoins;
    sanitizedConfig.flattenedFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenAllFields"])({
        fields: sanitizedConfig.fields
    });
    sanitizedConfig.sanitizedIndexes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitizeCompoundIndexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCompoundIndexes"])({
        fields: sanitizedConfig.flattenedFields,
        indexes: sanitizedConfig.indexes
    });
    return sanitizedConfig;
}; //# sourceMappingURL=sanitize.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrationsCollection.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrationsCollection",
    ()=>migrationsCollection
]);
const migrationsCollection = {
    slug: 'payload-migrations',
    admin: {
        hidden: true
    },
    endpoints: false,
    fields: [
        {
            name: 'name',
            type: 'text'
        },
        {
            name: 'batch',
            type: 'number'
        }
    ],
    graphQL: false,
    lockDocuments: false
}; //# sourceMappingURL=migrationsCollection.js.map
}),
"[project]/node_modules/payload/dist/errors/DuplicateCollection.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DuplicateCollection",
    ()=>DuplicateCollection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
;
class DuplicateCollection extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"] {
    constructor(propertyName, duplicate){
        super(`Collection ${propertyName} already in use: "${duplicate}"`);
    }
} //# sourceMappingURL=DuplicateCollection.js.map
}),
"[project]/node_modules/payload/dist/utilities/extractID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "extractID",
    ()=>extractID
]);
const extractID = (objectOrID)=>{
    if (typeof objectOrID === 'string' || typeof objectOrID === 'number') {
        return objectOrID;
    }
    return objectOrID.id;
}; //# sourceMappingURL=extractID.js.map
}),
"[project]/node_modules/payload/dist/folders/buildFolderField.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "buildFolderField",
    ()=>buildFolderField
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/extractID.js [app-route] (ecmascript)");
;
const buildFolderField = ({ collectionSpecific, folderFieldName, folderSlug, overrides = {} })=>{
    const field = {
        name: folderFieldName,
        type: 'relationship',
        admin: {},
        hasMany: false,
        index: true,
        label: 'Folder',
        relationTo: folderSlug,
        validate: async (value, { collectionSlug, data, overrideAccess, previousValue, req })=>{
            if (!collectionSpecific) {
                // if collection scoping is not enabled, no validation required since folders can contain any type of document
                return true;
            }
            if (!value) {
                // no folder, no validation required
                return true;
            }
            const newID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(value);
            if (previousValue && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(previousValue) === newID) {
                // value did not change, no validation required
                return true;
            } else {
                // need to validat the folder value allows this collection type
                let parentFolder = null;
                if (typeof value === 'string' || typeof value === 'number') {
                    // need to populate the value with the document
                    parentFolder = await req.payload.findByID({
                        id: newID,
                        collection: folderSlug,
                        depth: 0,
                        overrideAccess,
                        req,
                        select: {
                            folderType: true
                        },
                        user: req.user
                    });
                }
                if (parentFolder && collectionSlug) {
                    const parentFolderTypes = parentFolder.folderType || [];
                    // if the parent folder has no folder types, it accepts all collections
                    if (parentFolderTypes.length === 0) {
                        return true;
                    }
                    // validation for a folder document
                    if (collectionSlug === folderSlug) {
                        // ensure the parent accepts ALL folder types
                        const folderTypes = 'folderType' in data ? data.folderType : [];
                        const invalidSlugs = folderTypes.filter((validCollectionSlug)=>{
                            return !parentFolderTypes.includes(validCollectionSlug);
                        });
                        if (invalidSlugs.length === 0) {
                            return true;
                        } else {
                            return `Folder with ID ${newID} does not allow documents of type ${invalidSlugs.join(', ')}`;
                        }
                    }
                    // validation for a non-folder document
                    if (parentFolderTypes.includes(collectionSlug)) {
                        return true;
                    } else {
                        return `Folder with ID ${newID} does not allow documents of type ${collectionSlug}`;
                    }
                } else {
                    return `Folder with ID ${newID} not found in collection ${folderSlug}`;
                }
            }
        }
    };
    if (overrides?.admin) {
        field.admin = {
            ...field.admin,
            ...overrides.admin || {}
        };
        if (overrides.admin.components) {
            field.admin.components = {
                ...field.admin.components,
                ...overrides.admin.components || {}
            };
        }
    }
    return field;
}; //# sourceMappingURL=buildFolderField.js.map
}),
"[project]/node_modules/payload/dist/folders/hooks/deleteSubfoldersAfterDelete.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteSubfoldersBeforeDelete",
    ()=>deleteSubfoldersBeforeDelete
]);
const deleteSubfoldersBeforeDelete = ({ folderFieldName, folderSlug })=>{
    return async ({ id, req })=>{
        await req.payload.delete({
            collection: folderSlug,
            req,
            where: {
                [folderFieldName]: {
                    equals: id
                }
            }
        });
    };
}; //# sourceMappingURL=deleteSubfoldersAfterDelete.js.map
}),
"[project]/node_modules/payload/dist/folders/hooks/dissasociateAfterDelete.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "dissasociateAfterDelete",
    ()=>dissasociateAfterDelete
]);
const dissasociateAfterDelete = ({ collectionSlugs, folderFieldName })=>{
    return async ({ id, req })=>{
        for (const collectionSlug of collectionSlugs){
            await req.payload.update({
                collection: collectionSlug,
                data: {
                    [folderFieldName]: null
                },
                req,
                where: {
                    [folderFieldName]: {
                        equals: id
                    }
                }
            });
        }
    };
}; //# sourceMappingURL=dissasociateAfterDelete.js.map
}),
"[project]/node_modules/payload/dist/folders/hooks/ensureSafeCollectionsChange.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ensureSafeCollectionsChange",
    ()=>ensureSafeCollectionsChange
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/extractID.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getTranslatedLabel$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getTranslatedLabel.js [app-route] (ecmascript)");
;
;
;
const ensureSafeCollectionsChange = ({ foldersSlug })=>async ({ data, originalDoc, req })=>{
        const currentFolderID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(originalDoc || {});
        const parentFolderID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(data?.folder || originalDoc?.folder || {});
        if (Array.isArray(data?.folderType) && data.folderType.length > 0) {
            const folderType = data.folderType;
            const currentlyAssignedCollections = Array.isArray(originalDoc?.folderType) && originalDoc.folderType.length > 0 ? originalDoc.folderType : undefined;
            /**
       * Check if the assigned collections have changed.
       * example:
       * - originalAssignedCollections: ['posts', 'pages']
       * - folderType: ['posts']
       *
       * The user is narrowing the types of documents that can be associated with this folder.
       * If the user is only expanding the types of documents that can be associated with this folder,
       * we do not need to do anything.
       */ const newCollections = currentlyAssignedCollections ? currentlyAssignedCollections.filter((c)=>!folderType.includes(c)) : folderType;
            if (newCollections && newCollections.length > 0) {
                let hasDependentDocuments = false;
                if (typeof currentFolderID === 'string' || typeof currentFolderID === 'number') {
                    const childDocumentsResult = await req.payload.findByID({
                        id: currentFolderID,
                        collection: foldersSlug,
                        joins: {
                            documentsAndFolders: {
                                limit: 100_000_000,
                                where: {
                                    or: [
                                        {
                                            relationTo: {
                                                in: newCollections
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        overrideAccess: true,
                        req
                    });
                    hasDependentDocuments = childDocumentsResult.documentsAndFolders.docs.length > 0;
                }
                // matches folders that are directly related to the removed collections
                let hasDependentFolders = false;
                if (!hasDependentDocuments && (typeof currentFolderID === 'string' || typeof currentFolderID === 'number')) {
                    const childFoldersResult = await req.payload.find({
                        collection: foldersSlug,
                        limit: 1,
                        req,
                        where: {
                            and: [
                                {
                                    folderType: {
                                        in: newCollections
                                    }
                                },
                                {
                                    folder: {
                                        equals: currentFolderID
                                    }
                                }
                            ]
                        }
                    });
                    hasDependentFolders = childFoldersResult.totalDocs > 0;
                }
                if (hasDependentDocuments || hasDependentFolders) {
                    const translatedLabels = newCollections.map((collectionSlug)=>{
                        if (req.payload.collections[collectionSlug]?.config.labels.singular) {
                            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getTranslatedLabel$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslatedLabel"])(req.payload.collections[collectionSlug]?.config.labels.plural, req.i18n);
                        }
                        return collectionSlug;
                    });
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`The folder "${data.name || originalDoc.name}" contains ${hasDependentDocuments ? 'documents' : 'folders'} that still belong to the following collections: ${translatedLabels.join(', ')}`, 400);
                }
                return data;
            }
        } else if ((data?.folderType === null || Array.isArray(data?.folderType) && data?.folderType.length === 0) && parentFolderID) {
            // attempting to set the folderType to catch-all, so we need to ensure that the parent allows this
            let parentFolder;
            if (typeof parentFolderID === 'string' || typeof parentFolderID === 'number') {
                try {
                    parentFolder = await req.payload.findByID({
                        id: parentFolderID,
                        collection: foldersSlug,
                        overrideAccess: true,
                        req,
                        select: {
                            name: true,
                            folderType: true
                        },
                        user: req.user
                    });
                } catch (_) {
                // parent folder does not exist
                }
            }
            if (parentFolder && parentFolder?.folderType && Array.isArray(parentFolder.folderType) && parentFolder.folderType.length > 0) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](`The folder "${data?.name || originalDoc.name}" must have folder-type set since its parent folder ${parentFolder?.name ? `"${parentFolder?.name}" ` : ''}has a folder-type set.`, 400);
            }
        }
        return data;
    }; //# sourceMappingURL=ensureSafeCollectionsChange.js.map
}),
"[project]/node_modules/payload/dist/folders/hooks/reparentChildFolder.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "reparentChildFolder",
    ()=>reparentChildFolder
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/extractID.js [app-route] (ecmascript)");
;
/**
 * Determines if a child folder belongs to a parent folder by
 * recursively checking upwards through the folder hierarchy.
 */ async function isChildOfFolder({ folderCollectionSlug, folderFieldName, folderID, parentIDToFind, payload }) {
    const parentFolder = await payload.findByID({
        id: folderID,
        collection: folderCollectionSlug
    });
    const parentFolderID = parentFolder[folderFieldName] ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(parentFolder[folderFieldName]) : undefined;
    if (!parentFolderID) {
        // made it to the root
        return false;
    }
    if (parentFolderID === parentIDToFind) {
        // found match, would be cyclic
        return true;
    }
    return isChildOfFolder({
        folderCollectionSlug,
        folderFieldName,
        folderID: parentFolderID,
        parentIDToFind,
        payload
    });
}
const reparentChildFolder = ({ folderFieldName })=>{
    return async ({ doc, previousDoc, req })=>{
        if (previousDoc[folderFieldName] !== doc[folderFieldName] && doc[folderFieldName] && req.payload.config.folders) {
            const newParentFolderID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(doc[folderFieldName]);
            const isMovingToChild = newParentFolderID ? await isChildOfFolder({
                folderCollectionSlug: req.payload.config.folders.slug,
                folderFieldName,
                folderID: newParentFolderID,
                parentIDToFind: doc.id,
                payload: req.payload
            }) : false;
            if (isMovingToChild) {
                // if the folder was moved into a child folder, the child folder needs
                // to be re-parented with the parent of the folder that was moved
                await req.payload.update({
                    id: newParentFolderID,
                    collection: req.payload.config.folders.slug,
                    data: {
                        [folderFieldName]: previousDoc[folderFieldName] ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$extractID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(previousDoc[folderFieldName]) : null
                    },
                    req
                });
            }
        }
    };
}; //# sourceMappingURL=reparentChildFolder.js.map
}),
"[project]/node_modules/payload/dist/folders/createFolderCollection.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createFolderCollection",
    ()=>createFolderCollection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$buildFolderField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/buildFolderField.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$deleteSubfoldersAfterDelete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/hooks/deleteSubfoldersAfterDelete.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$dissasociateAfterDelete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/hooks/dissasociateAfterDelete.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$ensureSafeCollectionsChange$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/hooks/ensureSafeCollectionsChange.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$reparentChildFolder$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/hooks/reparentChildFolder.js [app-route] (ecmascript)");
;
;
;
;
;
;
const createFolderCollection = ({ slug, collectionSpecific, debug, folderEnabledCollections, folderFieldName })=>{
    const { collectionOptions, collectionSlugs } = folderEnabledCollections.reduce((acc, collection)=>{
        acc.collectionSlugs.push(collection.slug);
        acc.collectionOptions.push({
            label: collection.labels?.plural || collection.slug,
            value: collection.slug
        });
        return acc;
    }, {
        collectionOptions: [],
        collectionSlugs: []
    });
    return {
        slug,
        access: {
            create: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            delete: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            read: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            readVersions: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            update: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"]
        },
        admin: {
            hidden: !debug,
            useAsTitle: 'name'
        },
        fields: [
            {
                name: 'name',
                type: 'text',
                index: true,
                required: true
            },
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$buildFolderField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildFolderField"])({
                collectionSpecific,
                folderFieldName,
                folderSlug: slug,
                overrides: {
                    admin: {
                        hidden: !debug
                    }
                }
            }),
            {
                name: 'documentsAndFolders',
                type: 'join',
                admin: {
                    hidden: !debug
                },
                collection: [
                    slug,
                    ...collectionSlugs
                ],
                hasMany: true,
                on: folderFieldName
            },
            ...collectionSpecific ? [
                {
                    name: 'folderType',
                    type: 'select',
                    admin: {
                        components: {
                            Field: {
                                path: '@payloadcms/next/client#FolderTypeField'
                            }
                        },
                        position: 'sidebar'
                    },
                    hasMany: true,
                    options: collectionOptions
                }
            ] : []
        ],
        hooks: {
            afterChange: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$reparentChildFolder$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reparentChildFolder"])({
                    folderFieldName
                })
            ],
            afterDelete: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$dissasociateAfterDelete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["dissasociateAfterDelete"])({
                    collectionSlugs,
                    folderFieldName
                })
            ],
            beforeDelete: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$deleteSubfoldersAfterDelete$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteSubfoldersBeforeDelete"])({
                    folderFieldName,
                    folderSlug: slug
                })
            ],
            beforeValidate: [
                ...collectionSpecific ? [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$hooks$2f$ensureSafeCollectionsChange$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ensureSafeCollectionsChange"])({
                        foldersSlug: slug
                    })
                ] : []
            ]
        },
        labels: {
            plural: 'Folders',
            singular: 'Folder'
        },
        typescript: {
            interface: 'FolderInterface'
        }
    };
}; //# sourceMappingURL=createFolderCollection.js.map
}),
"[project]/node_modules/payload/dist/folders/addFolderCollection.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addFolderCollection",
    ()=>addFolderCollection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$createFolderCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/createFolderCollection.js [app-route] (ecmascript)");
;
;
async function addFolderCollection({ collectionSpecific, config, folderEnabledCollections, richTextSanitizationPromises = [], validRelationships = [] }) {
    if (config.folders === false) {
        return;
    }
    let folderCollectionConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$createFolderCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createFolderCollection"])({
        slug: config.folders.slug,
        collectionSpecific,
        debug: config.folders.debug,
        folderEnabledCollections,
        folderFieldName: config.folders.fieldName
    });
    const collectionIndex = config.collections.push(folderCollectionConfig);
    if (Array.isArray(config.folders?.collectionOverrides) && config?.folders.collectionOverrides.length) {
        for (const override of config.folders.collectionOverrides){
            folderCollectionConfig = await override({
                collection: folderCollectionConfig
            });
        }
    }
    const sanitizedCollectionWithOverrides = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, folderCollectionConfig, richTextSanitizationPromises, validRelationships);
    config.collections[collectionIndex - 1] = sanitizedCollectionWithOverrides;
} //# sourceMappingURL=addFolderCollection.js.map
}),
"[project]/node_modules/payload/dist/folders/addFolderFieldToCollection.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addFolderFieldToCollection",
    ()=>addFolderFieldToCollection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$buildFolderField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/buildFolderField.js [app-route] (ecmascript)");
;
const addFolderFieldToCollection = ({ collection, collectionSpecific, folderFieldName, folderSlug })=>{
    collection.fields.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$buildFolderField$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildFolderField"])({
        collectionSpecific,
        folderFieldName,
        folderSlug,
        overrides: {
            admin: {
                allowCreate: false,
                allowEdit: false,
                components: {
                    Cell: '@payloadcms/next/rsc#FolderTableCell',
                    Field: '@payloadcms/next/rsc#FolderField'
                }
            }
        }
    }));
}; //# sourceMappingURL=addFolderFieldToCollection.js.map
}),
"[project]/node_modules/payload/dist/globals/operations/docAccess.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "docAccessOperation",
    ()=>docAccessOperation
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getEntityPermissions$2f$getEntityPermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getEntityPermissions/getEntityPermissions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePermissions.js [app-route] (ecmascript)");
;
;
;
const docAccessOperation = async (args)=>{
    const { data, globalConfig, req } = args;
    const globalOperations = [
        'read',
        'update'
    ];
    if (globalConfig.versions) {
        globalOperations.push('readVersions');
    }
    try {
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getEntityPermissions$2f$getEntityPermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getEntityPermissions"])({
            id: undefined,
            blockReferencesPermissions: {},
            data,
            entity: globalConfig,
            entityType: 'global',
            fetchData: true,
            operations: globalOperations,
            req
        });
        const sanitizedPermissions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePermissions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePermissions"])({
            globals: {
                [globalConfig.slug]: result
            }
        });
        const globalPermissions = sanitizedPermissions?.globals?.[globalConfig.slug];
        return globalPermissions ?? {
            fields: {}
        };
    } catch (e) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
        throw e;
    }
}; //# sourceMappingURL=docAccess.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/docAccess.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "docAccessHandler",
    ()=>docAccessHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/docAccess.js [app-route] (ecmascript)");
;
;
;
;
const docAccessHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["docAccessOperation"])({
        data: req.data,
        globalConfig,
        req
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=docAccess.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/findOne.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findOneHandler",
    ()=>findOneHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findOne$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/findOne.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const findOneHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const { data, searchParams } = req;
    const depth = data ? data.depth : searchParams.get('depth');
    const flattenLocales = data ? data.flattenLocales : searchParams.has('flattenLocales') ? searchParams.get('flattenLocales') === 'true' : undefined;
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findOne$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findOneOperation"])({
        slug: globalConfig.slug,
        data: data ? data?.data : searchParams.get('data') ? JSON.parse(searchParams.get('data')) : undefined,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        draft: data ? data.draft : searchParams.get('draft') === 'true',
        flattenLocales,
        globalConfig,
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(req.query.populate),
        req,
        select: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(req.query.select)
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findOne.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/findVersionByID.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findVersionByIDHandler",
    ()=>findVersionByIDHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/findVersionByID.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const findVersionByIDHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const { searchParams } = req;
    const depth = searchParams.get('depth');
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionByIDOperation"])({
        id: req.routeParams.id,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        globalConfig,
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(req.query.populate),
        req,
        select: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(req.query.select)
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findVersionByID.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/findVersions.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findVersionsHandler",
    ()=>findVersionsHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSortParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSortParams.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/findVersions.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const findVersionsHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const { depth, limit, page, pagination, populate, select, sort, where } = req.query;
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionsOperation"])({
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        globalConfig,
        limit: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(limit) ? Number(limit) : undefined,
        page: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(page) ? Number(page) : undefined,
        pagination: pagination === 'false' ? false : undefined,
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(populate),
        req,
        select: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(select),
        sort: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSortParams$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSortParams"])(sort),
        where
    });
    return Response.json(result, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=findVersions.js.map
}),
"[project]/node_modules/payload/dist/globals/operations/restoreVersion.js [app-route] (ecmascript) <export restoreVersionOperation as restoreVersionOperationGlobal>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "restoreVersionOperationGlobal",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restoreVersionOperation"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/restoreVersion.js [app-route] (ecmascript)");
}),
"[project]/node_modules/payload/dist/globals/endpoints/restoreVersion.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "restoreVersionHandler",
    ()=>restoreVersionHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__restoreVersionOperation__as__restoreVersionOperationGlobal$3e$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/restoreVersion.js [app-route] (ecmascript) <export restoreVersionOperation as restoreVersionOperationGlobal>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
;
;
;
;
;
const restoreVersionHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const { searchParams } = req;
    const depth = searchParams.get('depth');
    const draft = searchParams.get('draft');
    const doc = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__restoreVersionOperation__as__restoreVersionOperationGlobal$3e$__["restoreVersionOperationGlobal"])({
        id: req.routeParams.id,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        draft: draft === 'true' ? true : undefined,
        globalConfig,
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(req.query.populate),
        req
    });
    return Response.json({
        doc,
        message: req.t('version:restoredSuccessfully')
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=restoreVersion.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/update.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateHandler",
    ()=>updateHandler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getRequestEntity.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/headersWithCors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/isNumber.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizePopulateParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/sanitizeSelectParam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/operations/update.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const updateHandler = async (req)=>{
    const globalConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getRequestEntity$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getRequestGlobal"])(req);
    const { searchParams } = req;
    const depth = searchParams.get('depth');
    const draft = searchParams.get('draft') === 'true';
    const autosave = searchParams.get('autosave') === 'true';
    const publishSpecificLocale = req.query.publishSpecificLocale;
    const publishAllLocales = searchParams.get('publishAllLocales') === 'true';
    const unpublishAllLocales = searchParams.get('unpublishAllLocales') === 'true';
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$operations$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateOperation"])({
        slug: globalConfig.slug,
        autosave,
        data: req.data,
        depth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$isNumber$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isNumber"])(depth) ? Number(depth) : undefined,
        draft,
        globalConfig,
        populate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizePopulateParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizePopulateParam"])(req.query.populate),
        publishAllLocales,
        publishSpecificLocale,
        req,
        select: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$sanitizeSelectParam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeSelectParam"])(req.query.select),
        unpublishAllLocales
    });
    let message = req.t('general:updatedSuccessfully');
    if (draft) {
        message = req.t('version:draftSavedSuccessfully');
    }
    if (autosave) {
        message = req.t('version:autosavedSuccessfully');
    }
    return Response.json({
        message,
        result
    }, {
        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$headersWithCors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["headersWithCors"])({
            headers: new Headers(),
            req
        }),
        status: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].OK
    });
}; //# sourceMappingURL=update.js.map
}),
"[project]/node_modules/payload/dist/globals/endpoints/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "defaultGlobalEndpoints",
    ()=>defaultGlobalEndpoints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/wrapInternalEndpoints.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/docAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findOne$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/findOne.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/findVersionByID.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/findVersions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/restoreVersion.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/update.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const defaultGlobalEndpoints = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$wrapInternalEndpoints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["wrapInternalEndpoints"])([
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$docAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["docAccessHandler"],
        method: 'post',
        path: '/access'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findOne$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findOneHandler"],
        method: 'get',
        path: '/'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findVersionByID$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionByIDHandler"],
        method: 'get',
        path: '/versions/:id'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$findVersions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findVersionsHandler"],
        method: 'get',
        path: '/versions'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$restoreVersion$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restoreVersionHandler"],
        method: 'post',
        path: '/versions/:id'
    },
    {
        handler: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$update$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateHandler"],
        method: 'post',
        path: '/'
    }
]); //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/globals/config/sanitize.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeGlobal",
    ()=>sanitizeGlobal
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/mergeBaseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseForLocalizedFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/traverseForLocalizedFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$baseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/versions/baseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/versions/defaults.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/endpoints/index.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
const sanitizeGlobal = async (config, global, /**
   * If this property is set, RichText fields won't be sanitized immediately. Instead, they will be added to this array as promises
   * so that you can sanitize them together, after the config has been sanitized.
   */ richTextSanitizationPromises, _validRelationships)=>{
    if (global._sanitized) {
        return global;
    }
    global._sanitized = true;
    global.label = global.label || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toWords"])(global.slug);
    // /////////////////////////////////
    // Ensure that collection has required object structure
    // /////////////////////////////////
    global.endpoints = global.endpoints ?? [];
    if (!global.hooks) {
        global.hooks = {};
    }
    if (!global.access) {
        global.access = {};
    }
    if (!global.admin) {
        global.admin = {};
    }
    if (!global.access.read) {
        global.access.read = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"];
    }
    if (!global.access.update) {
        global.access.update = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"];
    }
    if (!global.hooks.beforeValidate) {
        global.hooks.beforeValidate = [];
    }
    if (!global.hooks.beforeChange) {
        global.hooks.beforeChange = [];
    }
    if (!global.hooks.afterChange) {
        global.hooks.afterChange = [];
    }
    if (!global.hooks.beforeRead) {
        global.hooks.beforeRead = [];
    }
    if (!global.hooks.afterRead) {
        global.hooks.afterRead = [];
    }
    // Sanitize fields
    const validRelationships = _validRelationships ?? config.collections?.map((c)=>c.slug) ?? [];
    global.fields = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeFields"])({
        config,
        fields: global.fields,
        globalConfig: global,
        parentIsLocalized: false,
        richTextSanitizationPromises,
        validRelationships
    });
    if (global.endpoints !== false) {
        if (!global.endpoints) {
            global.endpoints = [];
        }
        for (const endpoint of __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultGlobalEndpoints"]){
            global.endpoints.push(endpoint);
        }
    }
    if (global.versions) {
        if (global.versions === true) {
            global.versions = {
                drafts: false,
                max: 100
            };
        }
        global.versions.max = typeof global.versions.max === 'number' ? global.versions.max : 100;
        if (global.versions.drafts) {
            if (global.versions.drafts === true) {
                global.versions.drafts = {
                    autosave: false,
                    validate: false
                };
            }
            const hasLocalizedFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseForLocalizedFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["traverseForLocalizedFields"])(global.fields);
            if (config.localization && hasLocalizedFields) {
                if (global.versions.drafts.localizeStatus === undefined) {
                    global.versions.drafts.localizeStatus = false;
                }
            }
            global.versions.drafts.localizeStatus = config.experimental?.localizeStatus ? global.versions.drafts.localizeStatus : false;
            if (global.versions.drafts.autosave === true) {
                global.versions.drafts.autosave = {
                    interval: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["versionDefaults"].autosaveInterval
                };
            }
            if (global.versions.drafts.validate === undefined) {
                global.versions.drafts.validate = false;
            }
            global.fields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$mergeBaseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mergeBaseFields"])(global.fields, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$baseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseVersionFields"])({
                localized: global.versions.drafts.localizeStatus ?? false
            }));
        }
    }
    if (!global.custom) {
        global.custom = {};
    }
    // /////////////////////////////////
    // Sanitize fields
    // /////////////////////////////////
    let hasUpdatedAt = null;
    let hasCreatedAt = null;
    global.fields.some((field)=>{
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field)) {
            if (field.name === 'updatedAt') {
                hasUpdatedAt = true;
            }
            if (field.name === 'createdAt') {
                hasCreatedAt = true;
            }
        }
        return hasCreatedAt && hasUpdatedAt;
    });
    if (!hasUpdatedAt) {
        global.fields.push({
            name: 'updatedAt',
            type: 'date',
            admin: {
                disableBulkEdit: true,
                hidden: true
            },
            label: ({ t })=>t('general:updatedAt')
        });
    }
    if (!hasCreatedAt) {
        global.fields.push({
            name: 'createdAt',
            type: 'date',
            admin: {
                disableBulkEdit: true,
                hidden: true
            },
            label: ({ t })=>t('general:createdAt')
        });
    }
    ;
    global.flattenedFields = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenAllFields"])({
        fields: global.fields
    });
    return global;
}; //# sourceMappingURL=sanitize.js.map
}),
"[project]/node_modules/payload/dist/utilities/transformWhereQuery.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Transforms a basic "where" query into a format in which the "where builder" can understand.
 * Even though basic queries are valid, we need to hoist them into the "and" / "or" format.
 * Use this function alongside `validateWhereQuery` to check that for valid queries before transforming.
 * @example
 * Inaccurate: [text][equals]=example%20post
 * Accurate: [or][0][and][0][text][equals]=example%20post
 */ __turbopack_context__.s([
    "transformWhereQuery",
    ()=>transformWhereQuery
]);
const transformWhereQuery = (whereQuery)=>{
    if (!whereQuery) {
        return {};
    }
    // Check if 'whereQuery' has 'or' field but no 'and'. This is the case for "correct" queries
    if (whereQuery.or && !whereQuery.and) {
        return {
            or: whereQuery.or.map((query)=>{
                // ...but if the or query does not have an and, we need to add it
                if (!query.and) {
                    return {
                        and: [
                            query
                        ]
                    };
                }
                return query;
            })
        };
    }
    // Check if 'whereQuery' has 'and' field but no 'or'.
    if (whereQuery.and && !whereQuery.or) {
        return {
            or: [
                {
                    and: whereQuery.and
                }
            ]
        };
    }
    // Check if 'whereQuery' has neither 'or' nor 'and'.
    if (!whereQuery.or && !whereQuery.and) {
        return {
            or: [
                {
                    and: [
                        whereQuery
                    ]
                }
            ]
        };
    }
    // If 'whereQuery' has 'or' and 'and', just return it as it is.
    return whereQuery;
}; //# sourceMappingURL=transformWhereQuery.js.map
}),
"[project]/node_modules/payload/dist/utilities/validateWhereQuery.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "validateWhereQuery",
    ()=>validateWhereQuery
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$types$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/types/constants.js [app-route] (ecmascript)");
;
const validateWhereQuery = (whereQuery)=>{
    if (whereQuery?.or && (whereQuery?.or?.length === 0 || whereQuery?.or?.length > 0 && whereQuery?.or?.[0]?.and && whereQuery?.or?.[0]?.and?.length > 0)) {
        // At this point we know that the whereQuery has 'or' and 'and' fields,
        // now let's check the structure and content of these fields.
        const isValid = whereQuery.or.every((orQuery)=>{
            if (orQuery.and && Array.isArray(orQuery.and)) {
                return orQuery.and.every((andQuery)=>{
                    if (typeof andQuery !== 'object') {
                        return false;
                    }
                    const andKeys = Object.keys(andQuery);
                    // If there are no keys, it's not a valid WhereField.
                    if (andKeys.length === 0) {
                        return false;
                    }
                    for (const key of andKeys){
                        const operator = Object.keys(andQuery[key])[0];
                        // Check if the key is a valid Operator.
                        if (!operator || !__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$types$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validOperatorSet"].has(operator)) {
                            return false;
                        }
                    }
                    return true;
                });
            }
            return false;
        });
        return isValid;
    }
    return false;
}; //# sourceMappingURL=validateWhereQuery.js.map
}),
"[project]/node_modules/payload/dist/query-presets/access.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getAccess",
    ()=>getAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultAccess.js [app-route] (ecmascript)");
;
const operations = [
    'delete',
    'read',
    'update',
    'create'
];
const defaultCollectionAccess = {
    create: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
    delete: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
    read: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
    unlock: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
    update: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"]
};
const getAccess = (config)=>operations.reduce((acc, operation)=>{
        acc[operation] = async (args)=>{
            const { req } = args;
            const collectionAccess = config?.queryPresets?.access?.[operation] ? await config.queryPresets.access[operation](args) : defaultCollectionAccess?.[operation] ? defaultCollectionAccess[operation](args) : true;
            // If collection-level access control is `false`, no need to continue to document-level access
            if (collectionAccess === false) {
                return false;
            }
            // The `create` operation does not affect the document-level access control
            if (operation === 'create') {
                return collectionAccess;
            }
            return {
                and: [
                    {
                        or: [
                            // Default access control ensures a user exists, but custom access control may not
                            ...req?.user ? [
                                {
                                    and: [
                                        {
                                            [`access.${operation}.users`]: {
                                                in: [
                                                    req.user.id
                                                ]
                                            }
                                        },
                                        {
                                            [`access.${operation}.constraint`]: {
                                                in: [
                                                    'onlyMe',
                                                    'specificUsers'
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ] : [],
                            {
                                [`access.${operation}.constraint`]: {
                                    equals: 'everyone'
                                }
                            },
                            ...await Promise.all((config?.queryPresets?.constraints?.[operation] || []).map(async (constraint)=>{
                                const constraintAccess = constraint.access ? await constraint.access(args) : undefined;
                                return {
                                    and: [
                                        ...typeof constraintAccess === 'object' ? [
                                            constraintAccess
                                        ] : constraintAccess === false ? [
                                            {
                                                id: {
                                                    equals: null
                                                }
                                            }
                                        ] : [],
                                        {
                                            [`access.${operation}.constraint`]: {
                                                equals: constraint.value
                                            }
                                        }
                                    ]
                                };
                            }))
                        ]
                    },
                    ...typeof collectionAccess === 'object' ? [
                        collectionAccess
                    ] : []
                ]
            };
        };
        return acc;
    }, {}); //# sourceMappingURL=access.js.map
}),
"[project]/node_modules/payload/dist/query-presets/preventLockout.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "preventLockout",
    ()=>preventLockout
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/createLocalReq.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/config.js [app-route] (ecmascript)");
;
;
;
;
;
const preventLockout = async (value, { data, overrideAccess, req: incomingReq })=>{
    // Use context to ensure an infinite loop doesn't occur
    if (!incomingReq.context._preventLockout && !overrideAccess) {
        const req = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLocalReq"])({
            context: {
                _preventLockout: true
            },
            req: {
                user: incomingReq.user
            }
        }, incomingReq.payload);
        // Might be `null` if no transactions are enabled
        const transaction = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
        // create a temp record to validate the constraints, using the req
        const tempPreset = await req.payload.create({
            collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"],
            data: {
                ...data,
                isTemp: true
            },
            req
        });
        let canUpdate = false;
        let canRead = false;
        try {
            await req.payload.findByID({
                id: tempPreset.id,
                collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"],
                overrideAccess: false,
                req,
                user: req.user
            });
            canRead = true;
            await req.payload.update({
                id: tempPreset.id,
                collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"],
                data: tempPreset,
                overrideAccess: false,
                req,
                user: req.user
            });
            canUpdate = true;
        } catch (_err) {
            if (!canRead || !canUpdate) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('This action will lock you out of this preset.', 403, {}, true);
            }
        } finally{
            if (transaction) {
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
            } else {
                // delete the temp record
                await req.payload.delete({
                    id: tempPreset.id,
                    collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"],
                    req
                });
            }
        }
    }
    return true;
}; //# sourceMappingURL=preventLockout.js.map
}),
"[project]/node_modules/payload/dist/query-presets/types.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// Note: order matters here as it will change the rendered order in the UI
__turbopack_context__.s([
    "operations",
    ()=>operations
]);
const operations = [
    'read',
    'update',
    'delete'
]; //# sourceMappingURL=types.js.map
}),
"[project]/node_modules/payload/dist/query-presets/constraints.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getConstraints",
    ()=>getConstraints
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/getTranslation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$preventLockout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/preventLockout.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/types.js [app-route] (ecmascript)");
;
;
;
;
;
const defaultConstraintOptions = [
    {
        label: 'Everyone',
        value: 'everyone'
    },
    {
        label: 'Only Me',
        value: 'onlyMe'
    },
    {
        label: 'Specific Users',
        value: 'specificUsers'
    }
];
const getConstraints = (config)=>({
        name: 'access',
        type: 'group',
        admin: {
            components: {
                Cell: '@payloadcms/next/client#QueryPresetsAccessCell'
            },
            condition: (data)=>Boolean(data?.isShared)
        },
        fields: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["operations"].map((constraintOperation)=>({
                type: 'collapsible',
                fields: [
                    {
                        name: constraintOperation,
                        type: 'group',
                        admin: {
                            hideGutter: true
                        },
                        fields: [
                            {
                                name: 'constraint',
                                type: 'select',
                                defaultValue: 'onlyMe',
                                filterOptions: (args)=>typeof config?.queryPresets?.filterConstraints === 'function' ? config.queryPresets.filterConstraints(args) : args.options,
                                label: ({ i18n })=>`Specify who can ${constraintOperation} this ${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$getTranslation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTranslation"])(config.queryPresets?.labels?.singular || 'Preset', i18n)}`,
                                options: [
                                    ...defaultConstraintOptions,
                                    ...config?.queryPresets?.constraints?.[constraintOperation]?.map((option)=>({
                                            label: option.label,
                                            value: option.value
                                        })) || []
                                ]
                            },
                            {
                                name: 'users',
                                type: 'relationship',
                                admin: {
                                    condition: (data)=>Boolean(data?.access?.[constraintOperation]?.constraint === 'specificUsers')
                                },
                                hasMany: true,
                                hooks: {
                                    beforeChange: [
                                        ({ data, req })=>{
                                            if (data?.access?.[constraintOperation]?.constraint === 'onlyMe' && req.user) {
                                                return [
                                                    req.user.id
                                                ];
                                            }
                                            if (data?.access?.[constraintOperation]?.constraint === 'specificUsers' && req.user) {
                                                return [
                                                    ...data?.access?.[constraintOperation]?.users || [],
                                                    req.user.id
                                                ];
                                            }
                                        }
                                    ]
                                },
                                relationTo: config.admin?.user ?? 'users'
                            },
                            ...config?.queryPresets?.constraints?.[constraintOperation]?.reduce((acc, option)=>{
                                option.fields?.forEach((field, index)=>{
                                    acc.push({
                                        ...field
                                    });
                                    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fieldAffectsData"])(field)) {
                                        acc[index].admin = {
                                            ...acc[index]?.admin || {},
                                            condition: (data)=>Boolean(data?.access?.[constraintOperation]?.constraint === option.value)
                                        };
                                    }
                                });
                                return acc;
                            }, []) || []
                        ],
                        label: false
                    }
                ],
                label: ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toWords"])(constraintOperation)
            })),
        label: 'Sharing settings',
        validate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$preventLockout$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["preventLockout"]
    }); //# sourceMappingURL=constraints.js.map
}),
"[project]/node_modules/payload/dist/query-presets/config.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getQueryPresetsConfig",
    ()=>getQueryPresetsConfig,
    "queryPresetsCollectionSlug",
    ()=>queryPresetsCollectionSlug
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$transformWhereQuery$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/transformWhereQuery.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateWhereQuery$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/validateWhereQuery.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/access.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$constraints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/constraints.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/types.js [app-route] (ecmascript)");
;
;
;
;
;
const queryPresetsCollectionSlug = 'payload-query-presets';
const getQueryPresetsConfig = (config)=>({
        slug: queryPresetsCollectionSlug,
        access: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$access$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getAccess"])(config),
        admin: {
            defaultColumns: [
                'title',
                'isShared',
                'access',
                'where',
                'columns',
                'groupBy'
            ],
            hidden: true,
            useAsTitle: 'title'
        },
        fields: [
            {
                name: 'title',
                type: 'text',
                required: true
            },
            {
                name: 'isShared',
                type: 'checkbox',
                defaultValue: false,
                validate: (isShared, { data })=>{
                    const typedData = data;
                    // ensure the `isShared` is only true if all constraints are 'onlyMe'
                    if (typedData?.access) {
                        const someOperationsAreShared = Object.values(typedData.access).some((operation)=>operation.constraint !== 'onlyMe');
                        if (!isShared && someOperationsAreShared) {
                            return 'If any constraint is not "onlyMe", the preset must be shared';
                        }
                    }
                    return true;
                }
            },
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$constraints$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getConstraints"])(config),
            {
                name: 'where',
                type: 'json',
                admin: {
                    components: {
                        Cell: '@payloadcms/next/client#QueryPresetsWhereCell',
                        Field: '@payloadcms/next/client#QueryPresetsWhereField'
                    }
                },
                hooks: {
                    beforeValidate: [
                        ({ data })=>{
                            // transform the "where" query here so that the client-side doesn't have to
                            if (data?.where) {
                                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateWhereQuery$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateWhereQuery"])(data.where)) {
                                    return data.where;
                                } else {
                                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$transformWhereQuery$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["transformWhereQuery"])(data.where);
                                }
                            }
                            return data?.where;
                        }
                    ]
                },
                label: 'Filters'
            },
            {
                name: 'columns',
                type: 'json',
                admin: {
                    components: {
                        Cell: '@payloadcms/next/client#QueryPresetsColumnsCell',
                        Field: '@payloadcms/next/client#QueryPresetsColumnField'
                    }
                },
                validate: (value)=>{
                    if (value) {
                        try {
                            JSON.parse(JSON.stringify(value));
                        } catch  {
                            return 'Invalid JSON';
                        }
                    }
                    return true;
                }
            },
            {
                name: 'groupBy',
                type: 'text',
                admin: {
                    components: {
                        Cell: '@payloadcms/next/client#QueryPresetsGroupByCell',
                        Field: '@payloadcms/next/client#QueryPresetsGroupByField'
                    }
                },
                label: 'Group By'
            },
            {
                name: 'relatedCollection',
                type: 'select',
                admin: {
                    hidden: true
                },
                options: config.collections ? config.collections.reduce((acc, collection)=>{
                    if (collection.enableQueryPresets) {
                        acc.push({
                            label: collection.labels?.plural || collection.slug,
                            value: collection.slug
                        });
                    }
                    return acc;
                }, []) : [],
                required: true
            },
            {
                name: 'isTemp',
                type: 'checkbox',
                admin: {
                    description: "This is a temporary field used to determine if updating the preset would remove the user's access to it. When `true`, this record will be deleted after running the preset's `validate` function.",
                    disabled: true,
                    hidden: true
                }
            }
        ],
        hooks: {
            beforeValidate: [
                ({ data, operation })=>{
                    // TODO: type this
                    const typedData = data;
                    if (operation === 'create' || operation === 'update') {
                        // Ensure all operations have a constraint
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["operations"].forEach((operation)=>{
                            if (!typedData.access) {
                                typedData.access = {};
                            }
                            if (!typedData.access?.[operation]) {
                                typedData[operation] = {};
                            }
                            // Ensure all operations have a constraint
                            if (!typedData.access[operation]?.constraint) {
                                typedData.access[operation] = {
                                    ...typedData.access[operation],
                                    constraint: 'onlyMe'
                                };
                            }
                        });
                        // If at least one constraint is not `onlyMe` then `isShared` must be true
                        if (typedData?.access) {
                            const someOperationsAreShared = Object.values(typedData.access).some((operation)=>operation.constraint !== 'onlyMe');
                            typedData.isShared = someOperationsAreShared;
                        }
                    }
                    return typedData;
                }
            ]
        },
        labels: {
            plural: 'Presets',
            singular: 'Preset',
            ...config.queryPresets?.labels || {}
        },
        lockDocuments: false
    }); //# sourceMappingURL=config.js.map
}),
"[project]/node_modules/payload/dist/versions/schedule/job.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getSchedulePublishTask",
    ()=>getSchedulePublishTask
]);
const getSchedulePublishTask = ({ adminUserSlug, collections, globals })=>{
    return {
        slug: 'schedulePublish',
        handler: async ({ input, req })=>{
            const _status = input?.type === 'publish' || !input?.type ? 'published' : 'draft';
            const userID = input.user;
            let user = null;
            if (userID) {
                user = await req.payload.findByID({
                    id: userID,
                    collection: adminUserSlug,
                    depth: 0
                });
                user.collection = adminUserSlug;
            }
            let publishSpecificLocale;
            if (input?.type === 'publish' && input.locale && req.payload.config.localization) {
                const matchedLocale = req.payload.config.localization.locales.find(({ code })=>code === input.locale);
                if (matchedLocale) {
                    publishSpecificLocale = input.locale;
                }
            }
            if (input.doc) {
                await req.payload.update({
                    id: input.doc.value,
                    collection: input.doc.relationTo,
                    data: {
                        _status
                    },
                    depth: 0,
                    overrideAccess: user === null,
                    publishSpecificLocale: publishSpecificLocale,
                    user
                });
            }
            if (input.global) {
                await req.payload.updateGlobal({
                    slug: input.global,
                    data: {
                        _status
                    },
                    depth: 0,
                    overrideAccess: user === null,
                    publishSpecificLocale: publishSpecificLocale,
                    user
                });
            }
            return {
                output: {}
            };
        },
        inputSchema: [
            {
                name: 'type',
                type: 'radio',
                defaultValue: 'publish',
                options: [
                    'publish',
                    'unpublish'
                ]
            },
            {
                name: 'locale',
                type: 'text'
            },
            ...collections.length > 0 ? [
                {
                    name: 'doc',
                    type: 'relationship',
                    relationTo: collections
                }
            ] : [],
            {
                name: 'global',
                type: 'select',
                options: globals
            },
            {
                name: 'user',
                type: 'relationship',
                relationTo: adminUserSlug
            }
        ]
    };
}; //# sourceMappingURL=job.js.map
}),
"[project]/node_modules/payload/dist/folders/constants.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "foldersSlug",
    ()=>foldersSlug,
    "parentFolderFieldName",
    ()=>parentFolderFieldName
]);
const foldersSlug = 'payload-folders';
const parentFolderFieldName = 'folder'; //# sourceMappingURL=constants.js.map
}),
"[project]/node_modules/payload/dist/kv/adapters/DatabaseKVAdapter.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DatabaseKVAdapter",
    ()=>DatabaseKVAdapter,
    "databaseKVAdapter",
    ()=>databaseKVAdapter
]);
/** Mocked `req`, we don't need to use transactions, neither we want `createLocalReq` overhead. */ const req = {};
class DatabaseKVAdapter {
    payload;
    collectionSlug;
    constructor(payload, collectionSlug){
        this.payload = payload;
        this.collectionSlug = collectionSlug;
    }
    async clear() {
        await this.payload.db.deleteMany({
            collection: this.collectionSlug,
            req,
            where: {}
        });
    }
    async delete(key) {
        await this.payload.db.deleteOne({
            collection: this.collectionSlug,
            req,
            where: {
                key: {
                    equals: key
                }
            }
        });
    }
    async get(key) {
        const doc = await this.payload.db.findOne({
            collection: this.collectionSlug,
            joins: false,
            req,
            select: {
                data: true,
                key: true
            },
            where: {
                key: {
                    equals: key
                }
            }
        });
        if (doc === null) {
            return null;
        }
        return doc.data;
    }
    async has(key) {
        const { totalDocs } = await this.payload.db.count({
            collection: this.collectionSlug,
            req,
            where: {
                key: {
                    equals: key
                }
            }
        });
        return totalDocs > 0;
    }
    async keys() {
        const result = await this.payload.db.find({
            collection: this.collectionSlug,
            limit: 0,
            pagination: false,
            req,
            select: {
                key: true
            }
        });
        return result.docs.map((each)=>each.key);
    }
    async set(key, data) {
        await this.payload.db.upsert({
            collection: this.collectionSlug,
            data: {
                data,
                key
            },
            joins: false,
            req,
            select: {},
            where: {
                key: {
                    equals: key
                }
            }
        });
    }
}
const databaseKVAdapter = (options = {})=>{
    const collectionSlug = options.kvCollectionOverrides?.slug ?? 'payload-kv';
    return {
        init: ({ payload })=>new DatabaseKVAdapter(payload, collectionSlug),
        kvCollection: {
            slug: collectionSlug,
            access: {
                create: ()=>false,
                delete: ()=>false,
                read: ()=>false,
                update: ()=>false
            },
            admin: {
                hidden: true
            },
            fields: [
                {
                    name: 'key',
                    type: 'text',
                    index: true,
                    required: true,
                    unique: true
                },
                {
                    name: 'data',
                    type: 'json',
                    required: true
                }
            ],
            lockDocuments: false,
            timestamps: false,
            ...options.kvCollectionOverrides
        }
    };
}; //# sourceMappingURL=DatabaseKVAdapter.js.map
}),
"[project]/node_modules/payload/dist/config/defaults.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addDefaultsToConfig",
    ()=>addDefaultsToConfig,
    "defaults",
    ()=>defaults
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$kv$2f$adapters$2f$DatabaseKVAdapter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/kv/adapters/DatabaseKVAdapter.js [app-route] (ecmascript)");
;
;
;
const defaults = {
    admin: {
        avatar: 'gravatar',
        components: {},
        custom: {},
        dateFormat: 'MMMM do yyyy, h:mm a',
        dependencies: {},
        importMap: {
            baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`
        },
        meta: {
            defaultOGImageType: 'dynamic',
            robots: 'noindex, nofollow',
            titleSuffix: '- Payload'
        },
        routes: {
            account: '/account',
            browseByFolder: '/browse-by-folder',
            createFirstUser: '/create-first-user',
            forgot: '/forgot',
            inactivity: '/logout-inactivity',
            login: '/login',
            logout: '/logout',
            reset: '/reset',
            unauthorized: '/unauthorized'
        },
        theme: 'all'
    },
    auth: {
        jwtOrder: [
            'JWT',
            'Bearer',
            'cookie'
        ]
    },
    bin: [],
    collections: [],
    cookiePrefix: 'payload',
    cors: [],
    csrf: [],
    custom: {},
    defaultDepth: 2,
    defaultMaxTextLength: 40000,
    endpoints: [],
    globals: [],
    graphQL: {
        disablePlaygroundInProduction: true,
        maxComplexity: 1000,
        schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`
    },
    hooks: {},
    i18n: {},
    jobs: {
        access: {
            cancel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            queue: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            run: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"]
        },
        deleteJobOnComplete: true,
        depth: 0
    },
    localization: false,
    maxDepth: 10,
    routes: {
        admin: '/admin',
        api: '/api',
        graphQL: '/graphql',
        graphQLPlayground: '/graphql-playground'
    },
    serverURL: '',
    telemetry: true,
    typescript: {
        autoGenerate: true,
        outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`
    },
    upload: {}
};
const addDefaultsToConfig = (config)=>{
    config.admin = {
        avatar: 'gravatar',
        components: {},
        custom: {},
        dateFormat: 'MMMM do yyyy, h:mm a',
        dependencies: {},
        theme: 'all',
        ...config.admin || {},
        importMap: {
            baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,
            ...config?.admin?.importMap || {}
        },
        meta: {
            defaultOGImageType: 'dynamic',
            robots: 'noindex, nofollow',
            titleSuffix: '- Payload',
            ...config?.admin?.meta || {}
        },
        routes: {
            account: '/account',
            browseByFolder: '/browse-by-folder',
            createFirstUser: '/create-first-user',
            forgot: '/forgot',
            inactivity: '/logout-inactivity',
            login: '/login',
            logout: '/logout',
            reset: '/reset',
            unauthorized: '/unauthorized',
            ...config?.admin?.routes || {}
        }
    };
    config.bin = config.bin ?? [];
    config.collections = config.collections ?? [];
    config.cookiePrefix = config.cookiePrefix ?? 'payload';
    config.cors = config.cors ?? [];
    config.csrf = config.csrf ?? [];
    config.custom = config.custom ?? {};
    config.defaultDepth = config.defaultDepth ?? 2;
    config.defaultMaxTextLength = config.defaultMaxTextLength ?? 40000;
    config.endpoints = config.endpoints ?? [];
    config.globals = config.globals ?? [];
    config.graphQL = {
        disableIntrospectionInProduction: true,
        disablePlaygroundInProduction: true,
        maxComplexity: 1000,
        schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,
        ...config.graphQL || {}
    };
    config.hooks = config.hooks ?? {};
    config.i18n = config.i18n ?? {};
    config.jobs = {
        deleteJobOnComplete: true,
        depth: 0,
        ...config.jobs || {},
        access: {
            cancel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            queue: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            run: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultAccess"],
            ...config.jobs?.access || {}
        }
    };
    config.localization = config.localization ?? false;
    config.maxDepth = config.maxDepth ?? 10;
    config.routes = {
        admin: '/admin',
        api: '/api',
        graphQL: '/graphql',
        graphQLPlayground: '/graphql-playground',
        ...config.routes || {}
    };
    config.serverURL = config.serverURL ?? '';
    config.telemetry = config.telemetry ?? true;
    config.typescript = {
        autoGenerate: true,
        outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,
        ...config.typescript || {}
    };
    config.upload = config.upload ?? {};
    config.auth = {
        jwtOrder: [
            'JWT',
            'Bearer',
            'cookie'
        ],
        ...config.auth || {}
    };
    config.kv = config.kv ?? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$kv$2f$adapters$2f$DatabaseKVAdapter$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["databaseKVAdapter"])();
    if (config.kv?.kvCollection) {
        config.collections.push(config.kv.kvCollection);
    }
    if (config.folders !== false && config.collections.some((collection)=>Boolean(collection.folders))) {
        config.folders = {
            slug: config.folders?.slug ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["foldersSlug"],
            browseByFolder: config.folders?.browseByFolder ?? true,
            collectionOverrides: config.folders?.collectionOverrides || undefined,
            collectionSpecific: config.folders?.collectionSpecific ?? true,
            debug: config.folders?.debug ?? false,
            fieldName: config.folders?.fieldName ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parentFolderFieldName"]
        };
    } else {
        config.folders = false;
    }
    return config;
}; //# sourceMappingURL=defaults.js.map
}),
"[project]/node_modules/payload/dist/config/orderable/fractional-indexing.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// @ts-no-check
/**
 * THIS FILE IS BASED ON:
 * https://github.com/rocicorp/fractional-indexing/blob/main/src/index.js
 *
 * MODIFIED FOR PAYLOAD CMS:
 * - Changed the integer part encoding to use only digits for "small" keys and
 *   only lowercase letters for "large" keys, ensuring consistent ordering
 *   across databases with different collations.
 *
 * - Original algorithm used A-Z (uppercase) for "smaller" integers and a-z (lowercase)
 *   for "larger" integers, relying on ASCII ordering where 'Z' < 'a'.
 *
 * - Some databases (e.g., PostgreSQL with default collation) use case-insensitive
 *   comparison, treating 'Z' as 'z', which breaks the ordering.
 *
 * - New encoding:
 *   - Uses digits '0'-'9' for "small" integers (10 values, lengths 11 down to 2)
 *   - Uses lowercase 'a'-'z' for "large" integers (26 values, lengths 2 up to 27)
 *   - Digits ALWAYS sort before letters in both ASCII and case-insensitive orderings.
 *
 * - Ordering: '0...' < '1...' < ... < '9..' < 'a.' < 'b..' < ... < 'z...'
 *
 * BACKWARD COMPATIBILITY:
 * - Existing keys starting with lowercase 'a'-'z' remain valid and work correctly.
 * - Keys starting with uppercase 'A'-'Z' (from the old algorithm) will still be
 *   parsed for backward compatibility, but they may sort incorrectly in
 *   case-insensitive databases. Consider running a migration to convert them.
 */ // License: CC0 (no rights reserved).
// This is based on https://observablehq.com/@dgreensp/implementing-fractional-indexing
__turbopack_context__.s([
    "BASE_36_DIGITS",
    ()=>BASE_36_DIGITS,
    "generateKeyBetween",
    ()=>generateKeyBetween,
    "generateNKeysBetween",
    ()=>generateNKeysBetween
]);
const BASE_36_DIGITS = '0123456789abcdefghijklmnopqrstuvwxyz';
// `a` may be empty string, `b` is null or non-empty string.
// `a < b` lexicographically if `b` is non-null.
// no trailing zeros allowed.
// digits is a string such as '0123456789' for base 10.  Digits must be in
// ascending character code order!
/**
 * @param {string} a
 * @param {string | null | undefined} b
 * @param {string} digits
 * @returns {string}
 */ function midpoint(a, b, digits) {
    const zero = digits[0];
    if (b != null && a >= b) {
        throw new Error(a + ' >= ' + b);
    }
    if (a.slice(-1) === zero || b && b.slice(-1) === zero) {
        throw new Error('trailing zero');
    }
    if (b) {
        // remove longest common prefix.  pad `a` with 0s as we
        // go.  note that we don't need to pad `b`, because it can't
        // end before `a` while traversing the common prefix.
        let n = 0;
        while((a[n] || zero) === b[n]){
            n++;
        }
        if (n > 0) {
            return b.slice(0, n) + midpoint(a.slice(n), b.slice(n), digits);
        }
    }
    // first digits (or lack of digit) are different
    const digitA = a ? digits.indexOf(a[0]) : 0;
    const digitB = b != null ? digits.indexOf(b[0]) : digits.length;
    if (digitB - digitA > 1) {
        const midDigit = Math.round(0.5 * (digitA + digitB));
        return digits[midDigit];
    } else {
        // first digits are consecutive
        if (b && b.length > 1) {
            return b.slice(0, 1);
        } else {
            // `b` is null or has length 1 (a single digit).
            // the first digit of `a` is the previous digit to `b`,
            // or 9 if `b` is null.
            // given, for example, midpoint('49', '5'), return
            // '4' + midpoint('9', null), which will become
            // '4' + '9' + midpoint('', null), which is '495'
            return digits[digitA] + midpoint(a.slice(1), null, digits);
        }
    }
}
/**
 * @param {string} int
 * @return {void}
 */ function validateInteger(int) {
    if (int.length !== getIntegerLength(int[0])) {
        throw new Error('invalid integer part of order key: ' + int);
    }
}
/**
 * Returns the length of the integer part based on the head character.
 *
 * New encoding (case-insensitive safe):
 * - SMALL range (digits): '0' = 11 chars, '1' = 10 chars, ..., '9' = 2 chars
 * - LARGE range (lowercase): 'a' = 2 chars, 'b' = 3 chars, ..., 'z' = 27 chars
 *
 * Legacy encoding (for backward compatibility with existing keys):
 * - 'A'-'Z' uppercase: 'A' = 27 chars, 'B' = 26 chars, ..., 'Z' = 2 chars
 *
 * @param {string} head
 * @return {number}
 */ function getIntegerLength(head) {
    if (head >= '0' && head <= '9') {
        return 11 - (head.charCodeAt(0) - '0'.charCodeAt(0));
    } else if (head >= 'a' && head <= 'z') {
        return head.charCodeAt(0) - 'a'.charCodeAt(0) + 2;
    } else if (head >= 'A' && head <= 'Z') {
        // Legacy encoding
        return 'Z'.charCodeAt(0) - head.charCodeAt(0) + 2;
    } else {
        throw new Error('invalid order key head: ' + head);
    }
}
/**
 * @param {string} key
 * @return {string}
 */ function getIntegerPart(key) {
    const integerPartLength = getIntegerLength(key[0]);
    if (integerPartLength > key.length) {
        throw new Error('invalid order key: ' + key);
    }
    return key.slice(0, integerPartLength);
}
/**
 * Smallest possible key (for validation)
 * '0' + 10 zeros = smallest valid key in new format
 */ const SMALLEST_KEY = '0' + BASE_36_DIGITS[0].repeat(10);
/**
 * @param {string} key
 * @param {string} digits
 * @return {void}
 */ function validateOrderKey(key, digits) {
    if (key === SMALLEST_KEY) {
        throw new Error('invalid order key: ' + key);
    }
    // Legacy check for old format
    if (key === 'A' + digits[0].repeat(26)) {
        throw new Error('invalid order key: ' + key);
    }
    // getIntegerPart will throw if the first character is bad,
    // or the key is too short.  we'd call it to check these things
    // even if we didn't need the result
    const i = getIntegerPart(key);
    const f = key.slice(i.length);
    if (f.slice(-1) === digits[0]) {
        throw new Error('invalid order key: ' + key);
    }
}
// note that this may return null, as there is a largest integer
/**
 * @param {string} x
 * @param {string} digits
 * @return {string | null}
 */ function incrementInteger(x, digits) {
    validateInteger(x);
    const [head, ...digs] = x.split('');
    let carry = true;
    for(let i = digs.length - 1; carry && i >= 0; i--){
        const d = digits.indexOf(digs[i]) + 1;
        if (d === digits.length) {
            digs[i] = digits[0];
        } else {
            digs[i] = digits[d];
            carry = false;
        }
    }
    if (carry) {
        if (head === '9') {
            return 'a' + digits[0];
        }
        // Handle legacy uppercase transition
        if (head === 'Z') {
            return 'a' + digits[0];
        }
        if (head === 'z') {
            return null;
        }
        let h;
        if (head >= '0' && head <= '8') {
            h = String.fromCharCode(head.charCodeAt(0) + 1);
            digs.pop();
        } else if (head >= 'a' && head <= 'y') {
            h = String.fromCharCode(head.charCodeAt(0) + 1);
            digs.push(digits[0]);
        } else if (head >= 'A' && head <= 'Y') {
            // Legacy uppercase
            h = String.fromCharCode(head.charCodeAt(0) + 1);
            digs.pop();
        } else {
            throw new Error('invalid head: ' + head);
        }
        return h + digs.join('');
    } else {
        return head + digs.join('');
    }
}
// note that this may return null, as there is a smallest integer
/**
 * @param {string} x
 * @param {string} digits
 * @return {string | null}
 */ function decrementInteger(x, digits) {
    validateInteger(x);
    const [head, ...digs] = x.split('');
    let borrow = true;
    for(let i = digs.length - 1; borrow && i >= 0; i--){
        const d = digits.indexOf(digs[i]) - 1;
        if (d === -1) {
            digs[i] = digits.slice(-1);
        } else {
            digs[i] = digits[d];
            borrow = false;
        }
    }
    if (borrow) {
        if (head === 'a') {
            return '9' + digits.slice(-1);
        }
        if (head === '0') {
            return null;
        }
        let h;
        if (head >= '1' && head <= '9') {
            h = String.fromCharCode(head.charCodeAt(0) - 1);
            digs.push(digits.slice(-1));
        } else if (head >= 'b' && head <= 'z') {
            h = String.fromCharCode(head.charCodeAt(0) - 1);
            digs.pop();
        } else if (head >= 'B' && head <= 'Z') {
            // Legacy uppercase
            h = String.fromCharCode(head.charCodeAt(0) - 1);
            digs.push(digits.slice(-1));
        } else if (head === 'A') {
            // Legacy uppercase
            return null;
        } else {
            throw new Error('invalid head: ' + head);
        }
        return h + digs.join('');
    } else {
        return head + digs.join('');
    }
}
function generateKeyBetween(a, b, digits = BASE_36_DIGITS) {
    if (a != null) {
        validateOrderKey(a, digits);
    }
    if (b != null) {
        validateOrderKey(b, digits);
    }
    if (a != null && b != null && a >= b) {
        throw new Error(a + ' >= ' + b);
    }
    if (a == null) {
        if (b == null) {
            return 'a' + digits[0];
        }
        const ib = getIntegerPart(b);
        const fb = b.slice(ib.length);
        if (ib === SMALLEST_KEY) {
            return ib + midpoint('', fb, digits);
        }
        // Legacy check
        if (ib === 'A' + digits[0].repeat(26)) {
            return ib + midpoint('', fb, digits);
        }
        if (ib < b) {
            return ib;
        }
        const res = decrementInteger(ib, digits);
        if (res == null) {
            throw new Error('cannot decrement any more');
        }
        return res;
    }
    if (b == null) {
        const ia = getIntegerPart(a);
        const fa = a.slice(ia.length);
        const i = incrementInteger(ia, digits);
        return i == null ? ia + midpoint(fa, null, digits) : i;
    }
    const ia = getIntegerPart(a);
    const fa = a.slice(ia.length);
    const ib = getIntegerPart(b);
    const fb = b.slice(ib.length);
    if (ia === ib) {
        return ia + midpoint(fa, fb, digits);
    }
    const i = incrementInteger(ia, digits);
    if (i == null) {
        throw new Error('cannot increment any more');
    }
    if (i < b) {
        return i;
    }
    return ia + midpoint(fa, null, digits);
}
function generateNKeysBetween(a, b, n, digits = BASE_36_DIGITS) {
    if (n === 0) {
        return [];
    }
    if (n === 1) {
        return [
            generateKeyBetween(a, b, digits)
        ];
    }
    if (b == null) {
        let c = generateKeyBetween(a, b, digits);
        const result = [
            c
        ];
        for(let i = 0; i < n - 1; i++){
            c = generateKeyBetween(c, b, digits);
            result.push(c);
        }
        return result;
    }
    if (a == null) {
        let c = generateKeyBetween(a, b, digits);
        const result = [
            c
        ];
        for(let i = 0; i < n - 1; i++){
            c = generateKeyBetween(a, c, digits);
            result.push(c);
        }
        result.reverse();
        return result;
    }
    const mid = Math.floor(n / 2);
    const c = generateKeyBetween(a, b, digits);
    return [
        ...generateNKeysBetween(a, c, mid, digits),
        c,
        ...generateNKeysBetween(c, b, n - mid - 1, digits)
    ];
} //# sourceMappingURL=fractional-indexing.js.map
}),
"[project]/node_modules/payload/dist/config/orderable/index.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addOrderableEndpoint",
    ()=>addOrderableEndpoint,
    "addOrderableFieldsAndHook",
    ()=>addOrderableFieldsAndHook,
    "setupOrderable",
    ()=>setupOrderable
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__ = __turbopack_context__.i("[project]/node_modules/http-status/dist/chunk-CUNVWAK5.js [app-route] (ecmascript) <export a as status>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/executeAccess.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/traverseFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$fractional$2d$indexing$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/config/orderable/fractional-indexing.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const setupOrderable = (config)=>{
    const fieldsToAdd = new Map();
    config.collections.forEach((collection)=>{
        if (collection.orderable) {
            const currentFields = fieldsToAdd.get(collection) || [];
            fieldsToAdd.set(collection, [
                ...currentFields,
                '_order'
            ]);
            collection.defaultSort = collection.defaultSort ?? '_order';
        }
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$traverseFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["traverseFields"])({
            callback: ({ field, parentRef, ref })=>{
                if (field.type === 'array' || field.type === 'blocks') {
                    return false;
                }
                if (field.type === 'group' || field.type === 'tab') {
                    // @ts-expect-error ref is untyped
                    const parentPrefix = parentRef?.prefix ? `${parentRef.prefix}_` : '';
                    // @ts-expect-error ref is untyped
                    ref.prefix = `${parentPrefix}${field.name}`;
                }
                if (field.type === 'join' && field.orderable === true) {
                    if (Array.isArray(field.collection)) {
                        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Orderable joins must target a single collection', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].BAD_REQUEST, {}, true);
                    }
                    const relationshipCollection = config.collections.find((c)=>c.slug === field.collection);
                    if (!relationshipCollection) {
                        return false;
                    }
                    field.defaultSort = field.defaultSort ?? `_${field.collection}_${field.name}_order`;
                    const currentFields = fieldsToAdd.get(relationshipCollection) || [];
                    // @ts-expect-error ref is untyped
                    const prefix = parentRef?.prefix ? `${parentRef.prefix}_` : '';
                    fieldsToAdd.set(relationshipCollection, [
                        ...currentFields,
                        `_${field.collection}_${prefix}${field.name}_order`
                    ]);
                }
            },
            fields: collection.fields
        });
    });
    Array.from(fieldsToAdd.entries()).forEach(([collection, orderableFields])=>{
        addOrderableFieldsAndHook(collection, orderableFields);
    });
    if (fieldsToAdd.size > 0) {
        addOrderableEndpoint(config);
    }
};
const addOrderableFieldsAndHook = (collection, orderableFieldNames)=>{
    // 1. Add field
    orderableFieldNames.forEach((orderableFieldName)=>{
        const orderField = {
            name: orderableFieldName,
            type: 'text',
            admin: {
                disableBulkEdit: true,
                disabled: true,
                disableGroupBy: true,
                disableListColumn: true,
                disableListFilter: true,
                hidden: true,
                readOnly: true
            },
            hooks: {
                beforeDuplicate: [
                    ({ siblingData })=>{
                        delete siblingData[orderableFieldName];
                    }
                ]
            },
            index: true
        };
        collection.fields.unshift(orderField);
    });
    // 2. Add hook
    if (!collection.hooks) {
        collection.hooks = {};
    }
    if (!collection.hooks.beforeChange) {
        collection.hooks.beforeChange = [];
    }
    const orderBeforeChangeHook = async ({ data, originalDoc, req })=>{
        for (const orderableFieldName of orderableFieldNames){
            if (!data[orderableFieldName] && !originalDoc?.[orderableFieldName]) {
                const lastDoc = await req.payload.find({
                    collection: collection.slug,
                    depth: 0,
                    limit: 1,
                    pagination: false,
                    req,
                    select: {
                        [orderableFieldName]: true
                    },
                    sort: `-${orderableFieldName}`,
                    where: {
                        [orderableFieldName]: {
                            exists: true
                        }
                    }
                });
                const lastOrderValue = lastDoc.docs[0]?.[orderableFieldName] || null;
                data[orderableFieldName] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$fractional$2d$indexing$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateKeyBetween"])(lastOrderValue, null);
            }
        }
        return data;
    };
    collection.hooks.beforeChange.push(orderBeforeChangeHook);
};
const addOrderableEndpoint = (config)=>{
    // 3. Add endpoint
    const reorderHandler = async (req)=>{
        const body = await req.json?.();
        const { collectionSlug, docsToMove, newKeyWillBe, orderableFieldName, target } = body;
        if (!Array.isArray(docsToMove) || docsToMove.length === 0) {
            return new Response(JSON.stringify({
                error: 'docsToMove must be a non-empty array'
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 400
            });
        }
        if (newKeyWillBe !== 'greater' && newKeyWillBe !== 'less') {
            return new Response(JSON.stringify({
                error: 'newKeyWillBe must be "greater" or "less"'
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 400
            });
        }
        const collection = config.collections.find((c)=>c.slug === collectionSlug);
        if (!collection) {
            return new Response(JSON.stringify({
                error: `Collection ${collectionSlug} not found`
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 400
            });
        }
        if (typeof orderableFieldName !== 'string') {
            return new Response(JSON.stringify({
                error: 'orderableFieldName must be a string'
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 400
            });
        }
        // Prevent reordering if user doesn't have editing permissions
        if (collection.access?.update) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$executeAccess$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["executeAccess"])({
                // Currently only one doc can be moved at a time. We should review this if we want to allow
                // multiple docs to be moved at once in the future.
                id: docsToMove[0],
                data: {},
                req
            }, collection.access.update);
        }
        /**
     * If there is no target.key, we can assume the user enabled `orderable`
     * on a collection with existing documents, and that this is the first
     * time they tried to reorder them. Therefore, we perform a one-time
     * migration by setting the key value for all documents. We do this
     * instead of enforcing `required` and `unique` at the database schema
     * level, so that users don't have to run a migration when they enable
     * `orderable` on a collection with existing documents.
     */ if (!target.key) {
            const { docs } = await req.payload.find({
                collection: collection.slug,
                depth: 0,
                limit: 0,
                req,
                select: {
                    [orderableFieldName]: true
                },
                where: {
                    [orderableFieldName]: {
                        exists: false
                    }
                }
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
            // We cannot update all documents in a single operation with `payload.update`,
            // because they would all end up with the same order key (`a0`).
            try {
                for (const doc of docs){
                    await req.payload.update({
                        id: doc.id,
                        collection: collection.slug,
                        data: {},
                        depth: 0,
                        req
                    });
                    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
                }
            } catch (e) {
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
                if (e instanceof Error) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"](e.message, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$http$2d$status$2f$dist$2f$chunk$2d$CUNVWAK5$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__a__as__status$3e$__["status"].INTERNAL_SERVER_ERROR);
                }
            }
            return new Response(JSON.stringify({
                message: 'initial migration',
                success: true
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 200
            });
        }
        if (typeof target !== 'object' || typeof target.id === 'undefined' || typeof target.key !== 'string') {
            return new Response(JSON.stringify({
                error: 'target must be an object with id'
            }), {
                headers: {
                    'Content-Type': 'application/json'
                },
                status: 400
            });
        }
        const targetId = target.id;
        let targetKey = target.key;
        // If targetKey = pending, we need to find its current key.
        // This can only happen if the user reorders rows quickly with a slow connection.
        if (targetKey === 'pending') {
            const beforeDoc = await req.payload.findByID({
                id: targetId,
                collection: collection.slug,
                depth: 0,
                select: {
                    [orderableFieldName]: true
                }
            });
            targetKey = beforeDoc?.[orderableFieldName] || null;
        }
        // The reason the endpoint does not receive this docId as an argument is that there
        // are situations where the user may not see or know what the next or previous one is. For
        // example, access control restrictions, if docBefore is the last one on the page, etc.
        const adjacentDoc = await req.payload.find({
            collection: collection.slug,
            depth: 0,
            limit: 1,
            pagination: false,
            select: {
                [orderableFieldName]: true
            },
            sort: newKeyWillBe === 'greater' ? orderableFieldName : `-${orderableFieldName}`,
            where: {
                [orderableFieldName]: {
                    [newKeyWillBe === 'greater' ? 'greater_than' : 'less_than']: targetKey
                }
            }
        });
        const adjacentDocKey = adjacentDoc.docs?.[0]?.[orderableFieldName] || null;
        // Currently N (= docsToMove.length) is always 1. Maybe in the future we will
        // allow dragging and reordering multiple documents at once via the UI.
        const orderValues = newKeyWillBe === 'greater' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$fractional$2d$indexing$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateNKeysBetween"])(targetKey, adjacentDocKey, docsToMove.length) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$fractional$2d$indexing$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateNKeysBetween"])(adjacentDocKey, targetKey, docsToMove.length);
        // Update each document with its new order value
        for (const [index, id] of docsToMove.entries()){
            await req.payload.update({
                id,
                collection: collection.slug,
                data: {
                    [orderableFieldName]: orderValues[index]
                },
                depth: 0,
                req
            });
        }
        return new Response(JSON.stringify({
            orderValues,
            success: true
        }), {
            headers: {
                'Content-Type': 'application/json'
            },
            status: 200
        });
    };
    const reorderEndpoint = {
        handler: reorderHandler,
        method: 'post',
        path: '/reorder'
    };
    if (!config.endpoints) {
        config.endpoints = [];
    }
    config.endpoints.push(reorderEndpoint);
}; //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/payload/dist/config/sanitize.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "sanitizeConfig",
    ()=>sanitizeConfig
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$languages$2f$en$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/languages/en.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$deepMergeSimple$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@payloadcms/translations/dist/utilities/deepMergeSimple.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/defaultUser.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/auth/endpoints/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/collections/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrationsCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrationsCollection.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$DuplicateCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/DuplicateCollection.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/errors/InvalidConfiguration.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/timezone/defaultTimezones.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$addFolderCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/addFolderCollection.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$addFolderFieldToCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/folders/addFolderFieldToCollection.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/globals/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseBlockFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/baseFields/baseBlockFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/formatLabels.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/fields/config/sanitize.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$locked$2d$documents$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/locked-documents/config.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$preferences$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/preferences/config.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/query-presets/config.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/queues/config/collection.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$global$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/queues/config/global.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/flattenAllFields.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getVersionsConfig$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/getVersionsConfig.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/validateTimezones.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$schedule$2f$job$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/versions/schedule/job.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/config/defaults.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/config/orderable/index.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const sanitizeAdminConfig = (configToSanitize)=>{
    const sanitizedConfig = {
        ...configToSanitize
    };
    if (configToSanitize?.compatibility?.allowLocalizedWithinLocalized) {
        process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized = 'true';
    }
    // default logging level will be 'error' if not provided
    sanitizedConfig.loggingLevels = {
        Forbidden: 'info',
        Locked: 'info',
        MissingFile: 'info',
        NotFound: 'info',
        ValidationError: 'info',
        ...sanitizedConfig.loggingLevels || {}
    };
    (sanitizedConfig.admin.dashboard ??= {
        widgets: []
    }).widgets.push({
        slug: 'collections',
        ComponentPath: '@payloadcms/next/rsc#CollectionCards',
        minWidth: 'full'
    });
    sanitizedConfig.admin.dashboard.defaultLayout ??= [
        {
            widgetSlug: 'collections',
            width: 'full'
        }
    ];
    // add default user collection if none provided
    if (!sanitizedConfig?.admin?.user) {
        const firstCollectionWithAuth = sanitizedConfig.collections.find(({ auth })=>Boolean(auth));
        if (firstCollectionWithAuth) {
            sanitizedConfig.admin.user = firstCollectionWithAuth.slug;
        } else {
            sanitizedConfig.admin.user = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultUserCollection"].slug;
            sanitizedConfig.collections.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$defaultUser$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultUserCollection"]);
        }
    }
    const userCollection = sanitizedConfig.collections.find(({ slug })=>slug === sanitizedConfig.admin.user);
    if (!userCollection || !userCollection.auth) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$InvalidConfiguration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidConfiguration"](`${sanitizedConfig.admin.user} is not a valid admin user collection`);
    }
    if (sanitizedConfig?.admin?.timezones) {
        if (typeof configToSanitize?.admin?.timezones?.supportedTimezones === 'function') {
            sanitizedConfig.admin.timezones.supportedTimezones = configToSanitize.admin.timezones.supportedTimezones({
                defaultTimezones: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultTimezones"]
            });
        }
        if (!sanitizedConfig?.admin?.timezones?.supportedTimezones) {
            sanitizedConfig.admin.timezones.supportedTimezones = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultTimezones"];
        }
    } else {
        sanitizedConfig.admin.timezones = {
            supportedTimezones: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$timezone$2f$defaultTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultTimezones"]
        };
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$validateTimezones$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateTimezones"])({
        source: 'admin.timezones.supportedTimezones',
        timezones: sanitizedConfig.admin.timezones.supportedTimezones
    });
    return sanitizedConfig;
};
const sanitizeConfig = async (incomingConfig)=>{
    const configWithDefaults = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$defaults$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addDefaultsToConfig"])(incomingConfig);
    const config = sanitizeAdminConfig(configWithDefaults);
    // Add orderable fields
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$orderable$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setupOrderable"])(config);
    if (!config.endpoints) {
        config.endpoints = [];
    }
    for (const endpoint of __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$auth$2f$endpoints$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["authRootEndpoints"]){
        config.endpoints.push(endpoint);
    }
    if (config.localization && config.localization.locales?.length > 0) {
        // clone localization config so to not break everything
        const firstLocale = config.localization.locales[0];
        if (typeof firstLocale === 'string') {
            config.localization.localeCodes = [
                ...config.localization.locales
            ];
            // is string[], so convert to Locale[]
            config.localization.locales = config.localization.locales.map((locale)=>({
                    code: locale,
                    label: locale,
                    rtl: false,
                    toString: ()=>locale
                }));
        } else {
            // is Locale[], so convert to string[] for localeCodes
            config.localization.localeCodes = config.localization.locales.map((locale)=>locale.code);
            config.localization.locales = config.localization.locales.map((locale)=>({
                    ...locale,
                    toString: ()=>locale.code
                }));
        }
        // Default fallback to true if not provided
        config.localization.fallback = config.localization?.fallback ?? true;
    }
    const i18nConfig = {
        fallbackLanguage: 'en',
        supportedLanguages: {
            en: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$languages$2f$en$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["en"]
        },
        translations: {}
    };
    if (incomingConfig?.i18n) {
        i18nConfig.supportedLanguages = incomingConfig.i18n?.supportedLanguages || i18nConfig.supportedLanguages;
        const supportedLangKeys = Object.keys(i18nConfig.supportedLanguages);
        const fallbackLang = incomingConfig.i18n?.fallbackLanguage || i18nConfig.fallbackLanguage;
        i18nConfig.fallbackLanguage = supportedLangKeys.includes(fallbackLang) ? fallbackLang : supportedLangKeys[0];
        i18nConfig.translations = incomingConfig.i18n?.translations || i18nConfig.translations;
    }
    config.i18n = i18nConfig;
    const richTextSanitizationPromises = [];
    const schedulePublishCollections = [];
    const queryPresetsCollections = [];
    const schedulePublishGlobals = [];
    const collectionSlugs = new Set();
    const validRelationships = [
        ...config.collections?.map((c)=>c.slug) ?? [],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jobsCollectionSlug"],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$locked$2d$documents$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["lockedDocumentsCollectionSlug"],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$preferences$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["preferencesCollectionSlug"]
    ];
    if (config.folders !== false) {
        validRelationships.push(config.folders.slug);
    }
    /**
   * Blocks sanitization needs to happen before collections, as collection/global join field sanitization needs config.blocks
   * to be populated with the sanitized blocks
   */ config.blocks = [];
    if (incomingConfig.blocks?.length) {
        for (const block of incomingConfig.blocks){
            const sanitizedBlock = block;
            if (sanitizedBlock._sanitized === true) {
                continue;
            }
            sanitizedBlock._sanitized = true;
            sanitizedBlock.fields = sanitizedBlock.fields.concat(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$baseFields$2f$baseBlockFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["baseBlockFields"]);
            sanitizedBlock.labels = !sanitizedBlock.labels ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$formatLabels$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["formatLabels"])(sanitizedBlock.slug) : sanitizedBlock.labels;
            sanitizedBlock.fields = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$fields$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeFields"])({
                config: config,
                existingFieldNames: new Set(),
                fields: sanitizedBlock.fields,
                parentIsLocalized: false,
                richTextSanitizationPromises,
                validRelationships
            });
            const flattenedSanitizedBlock = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$flattenAllFields$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flattenBlock"])({
                block
            });
            config.blocks.push(flattenedSanitizedBlock);
        }
    }
    const folderEnabledCollections = [];
    for(let i = 0; i < config.collections.length; i++){
        if (collectionSlugs.has(config.collections[i].slug)) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$errors$2f$DuplicateCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DuplicateCollection"]('slug', config.collections[i].slug);
        }
        collectionSlugs.add(config.collections[i].slug);
        const draftsConfig = config.collections[i]?.versions?.drafts;
        if (typeof draftsConfig === 'object' && draftsConfig.schedulePublish) {
            schedulePublishCollections.push(config.collections[i].slug);
        }
        if (config.collections[i].enableQueryPresets) {
            queryPresetsCollections.push(config.collections[i].slug);
            if (!validRelationships.includes(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"])) {
                validRelationships.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryPresetsCollectionSlug"]);
            }
        }
        if (config.folders !== false && config.collections[i].folders) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$addFolderFieldToCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addFolderFieldToCollection"])({
                collection: config.collections[i],
                collectionSpecific: config.folders.collectionSpecific,
                folderFieldName: config.folders.fieldName,
                folderSlug: config.folders.slug
            });
        }
        config.collections[i] = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, config.collections[i], richTextSanitizationPromises, validRelationships);
        if (config.folders !== false && config.collections[i].folders) {
            folderEnabledCollections.push(config.collections[i]);
        }
    }
    if (config.globals.length > 0) {
        for(let i = 0; i < config.globals.length; i++){
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$getVersionsConfig$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hasScheduledPublishEnabled"])(config.globals[i])) {
                schedulePublishGlobals.push(config.globals[i].slug);
            }
            config.globals[i] = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeGlobal"])(config, config.globals[i], richTextSanitizationPromises, validRelationships);
        }
    }
    if (schedulePublishCollections.length || schedulePublishGlobals.length) {
        ;
        ((config.jobs ??= {}).tasks ??= []).push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$versions$2f$schedule$2f$job$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getSchedulePublishTask"])({
            adminUserSlug: config.admin.user,
            collections: schedulePublishCollections,
            globals: schedulePublishGlobals
        }));
    }
    ;
    (config.jobs ??= {}).enabled = Boolean(Array.isArray(configWithDefaults.jobs?.tasks) && configWithDefaults.jobs?.tasks?.length || Array.isArray(configWithDefaults.jobs?.workflows) && configWithDefaults.jobs?.workflows?.length);
    // Need to add default jobs collection before locked documents collections
    if (config.jobs.enabled) {
        // Check for schedule property in both tasks and workflows
        const hasScheduleProperty = config?.jobs?.tasks?.length && config.jobs.tasks.some((task)=>task.schedule) || config?.jobs?.workflows?.length && config.jobs.workflows.some((workflow)=>workflow.schedule);
        if (hasScheduleProperty) {
            config.jobs.scheduling = true;
            (config.globals ??= []).push(await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$globals$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeGlobal"])(config, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$global$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getJobStatsGlobal"])(config), richTextSanitizationPromises, validRelationships));
            config.jobs.stats = true;
        }
        let defaultJobsCollection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getDefaultJobsCollection"])(config.jobs);
        if (typeof config.jobs.jobsCollectionOverrides === 'function') {
            defaultJobsCollection = config.jobs.jobsCollectionOverrides({
                defaultJobsCollection
            });
            const hooks = defaultJobsCollection?.hooks;
            // @todo - delete this check in 4.0
            if (hooks && config?.jobs?.runHooks !== true) {
                for (const [hookKey, hook] of Object.entries(hooks)){
                    const defaultAmount = hookKey === 'afterRead' || hookKey === 'beforeChange' ? 1 : 0;
                    if (hook.length > defaultAmount) {
                        // eslint-disable-next-line no-console
                        console.warn(`The jobsCollectionOverrides function is returning a collection with an additional ${hookKey} hook defined. These hooks will not run unless the jobs.runHooks option is set to true. Setting this option to true will negatively impact performance.`);
                        break;
                    }
                }
            }
        }
        const sanitizedJobsCollection = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, defaultJobsCollection, richTextSanitizationPromises, validRelationships);
        (config.collections ??= []).push(sanitizedJobsCollection);
    }
    if (config.folders !== false && folderEnabledCollections.length) {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$folders$2f$addFolderCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addFolderCollection"])({
            collectionSpecific: config.folders.collectionSpecific,
            config: config,
            folderEnabledCollections,
            richTextSanitizationPromises,
            validRelationships
        });
    }
    const lockedDocumentsCollection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$locked$2d$documents$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getLockedDocumentsCollection"])(config);
    if (lockedDocumentsCollection) {
        configWithDefaults.collections.push(await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, lockedDocumentsCollection, richTextSanitizationPromises, validRelationships));
    }
    configWithDefaults.collections.push(await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$preferences$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getPreferencesCollection"])(config), richTextSanitizationPromises, validRelationships));
    const migrations = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrationsCollection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrationsCollection"], richTextSanitizationPromises, validRelationships);
    // @ts-expect-error indexSortableFields is only valid for @payloadcms/db-mongodb
    if (config?.db?.indexSortableFields) {
        migrations.indexes = [
            {
                fields: [
                    'batch',
                    'name'
                ],
                unique: false
            }
        ];
    }
    configWithDefaults.collections.push(migrations);
    if (queryPresetsCollections.length > 0) {
        configWithDefaults.collections.push(await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$collections$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeCollection"])(config, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$query$2d$presets$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getQueryPresetsConfig"])(config), richTextSanitizationPromises, validRelationships));
    }
    if (config.serverURL !== '') {
        config.csrf.push(config.serverURL);
    }
    const uploadAdapters = new Set();
    // interact with all collections
    for (const collection of config.collections){
        // deduped upload adapters
        if (collection.upload?.adapter) {
            uploadAdapters.add(collection.upload.adapter);
        }
    }
    if (!config.upload) {
        config.upload = {
            adapters: []
        };
    }
    config.upload.adapters = Array.from(new Set(config.collections.map((c)=>c.upload?.adapter).filter(Boolean)));
    // Pass through the email config as is so adapters don't break
    if (incomingConfig.email) {
        config.email = incomingConfig.email;
    }
    /*
    Execute richText sanitization
   */ if (typeof incomingConfig.editor === 'function') {
        config.editor = await incomingConfig.editor({
            config: config,
            isRoot: true,
            parentIsLocalized: false
        });
        if (config.editor.i18n && Object.keys(config.editor.i18n).length >= 0) {
            config.i18n.translations = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$payloadcms$2f$translations$2f$dist$2f$utilities$2f$deepMergeSimple$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deepMergeSimple"])(config.i18n.translations, config.editor.i18n);
        }
    }
    const promises = [];
    for (const sanitizeFunction of richTextSanitizationPromises){
        promises.push(sanitizeFunction(config));
    }
    await Promise.all(promises);
    return config;
}; //# sourceMappingURL=sanitize.js.map
}),
"[project]/node_modules/payload/dist/config/build.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "buildConfig",
    ()=>buildConfig
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/config/sanitize.js [app-route] (ecmascript)");
;
async function buildConfig(config) {
    if (Array.isArray(config.plugins)) {
        let configAfterPlugins = config;
        for (const plugin of config.plugins){
            configAfterPlugins = await plugin(configAfterPlugins);
        }
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeConfig"])(configAfterPlugins);
    }
    return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$config$2f$sanitize$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeConfig"])(config);
} //# sourceMappingURL=build.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/getPredefinedMigration.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getPredefinedMigration",
    ()=>getPredefinedMigration
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$dynamicImport$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/dynamicImport.js [app-route] (ecmascript)");
;
;
;
const getPredefinedMigration = async ({ dirname, file, migrationName: migrationNameArg, payload })=>{
    const importPath = file ?? migrationNameArg;
    // Path 1: @payloadcms/db-* adapters - load directly from predefinedMigrations folder
    // These don't need package.json exports; files are resolved relative to adapter's dirname
    if (importPath?.startsWith('@payloadcms/db-')) {
        const migrationName = importPath.split('/').slice(2).join('/');
        let cleanPath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(dirname, `./predefinedMigrations/${migrationName}`);
        if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(`${cleanPath}.mjs`)) {
            cleanPath = `${cleanPath}.mjs`;
        } else if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(`${cleanPath}.js`)) {
            cleanPath = `${cleanPath}.js`;
        } else if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(`${cleanPath}.ts`)) {
            // Support .ts in development when running from source
            cleanPath = `${cleanPath}.ts`;
        } else {
            payload.logger.error({
                msg: `Canned migration ${migrationName} not found.`
            });
            process.exit(1);
        }
        cleanPath = cleanPath.replaceAll('\\', '/');
        try {
            const { downSQL, dynamic, imports, upSQL } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$dynamicImport$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["dynamicImport"])(cleanPath);
            return {
                downSQL,
                dynamic,
                imports,
                upSQL
            };
        } catch (err) {
            payload.logger.error({
                err,
                msg: `Error loading predefined migration ${migrationName}`
            });
            process.exit(1);
        }
    } else if (importPath) {
        // Path 2: Any other package or file path - use dynamic import
        // Supports: package.json exports (e.g. @payloadcms/plugin-seo/migration) or absolute file paths
        try {
            const { downSQL, dynamic, imports, upSQL } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$dynamicImport$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["dynamicImport"])(importPath);
            return {
                downSQL,
                dynamic,
                imports,
                upSQL
            };
        } catch (_err) {
            if (importPath?.includes('/')) {
                // We can assume that the intent was to import a file, thus we throw an error.
                throw new Error(`Error importing migration file from ${importPath}`);
            }
            // Silently fail. If the migration cannot be imported, it will be created as a blank migration and the import path will be used as the migration name.
            return {};
        }
    }
    return {};
}; //# sourceMappingURL=getPredefinedMigration.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/writeMigrationIndex.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "writeMigrationIndex",
    ()=>writeMigrationIndex
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$node_modules$2f$get$2d$tsconfig$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/node_modules/get-tsconfig/dist/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
;
;
;
// Function to get all migration files (TS or JS) excluding 'index'
const getMigrationFiles = (dir)=>{
    return __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].readdirSync(dir).filter((file)=>(file.endsWith('.ts') || file.endsWith('.js')) && file !== 'index.ts' && file !== 'index.js').sort();
};
// Function to generate the index.ts content
const generateIndexContent = (files)=>{
    const tsconfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$node_modules$2f$get$2d$tsconfig$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTsconfig"])();
    const importExt = tsconfig?.config?.compilerOptions?.moduleResolution === 'NodeNext' ? '.js' : '';
    let imports = '';
    let exportsArray = 'export const migrations = [\n';
    files.forEach((file, index)=>{
        const fileNameWithoutExt = file.replace(/\.[^/.]+$/, '');
        imports += `import * as migration_${fileNameWithoutExt} from './${fileNameWithoutExt}${importExt}';\n`;
        exportsArray += `  {
    up: migration_${fileNameWithoutExt}.up,
    down: migration_${fileNameWithoutExt}.down,
    name: '${fileNameWithoutExt}'${index !== files.length - 1 ? ',' : ''}\n  },\n`;
    });
    exportsArray += '];\n';
    return imports + '\n' + exportsArray;
};
const writeMigrationIndex = (args)=>{
    const migrationFiles = getMigrationFiles(args.migrationsDir);
    const indexContent = generateIndexContent(migrationFiles);
    __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].writeFileSync(__TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(args.migrationsDir, 'index.ts'), indexContent);
}; //# sourceMappingURL=writeMigrationIndex.js.map
}),
"[project]/node_modules/payload/dist/utilities/createArrayFromCommaDelineated.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createArrayFromCommaDelineated",
    ()=>createArrayFromCommaDelineated
]);
function createArrayFromCommaDelineated(input) {
    if (Array.isArray(input)) {
        return input;
    }
    return input.split(',');
} //# sourceMappingURL=createArrayFromCommaDelineated.js.map
}),
"[project]/node_modules/payload/dist/config/find.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findConfig",
    ()=>findConfig,
    "payloadConfigFileNames",
    ()=>payloadConfigFileNames
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$node_modules$2f$get$2d$tsconfig$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/node_modules/get-tsconfig/dist/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$findUp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/findUp.js [app-route] (ecmascript)");
;
;
;
const payloadConfigFileNames = [
    'payload.config.js',
    'payload.config.ts'
];
/**
 * Returns the source and output paths from the nearest tsconfig.json file.
 * If no tsconfig.json file is found, returns the current working directory.
 * @returns An object containing the source and output paths.
 */ const getTSConfigPaths = ()=>{
    const tsConfigResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$node_modules$2f$get$2d$tsconfig$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTsconfig"])();
    const tsConfig = tsConfigResult.config;
    const tsConfigDir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].dirname(tsConfigResult.path);
    try {
        const rootConfigDir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(tsConfigDir, tsConfig.compilerOptions.baseUrl || '');
        const srcPath = tsConfig.compilerOptions?.rootDir || __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(process.cwd(), 'src');
        const outPath = tsConfig.compilerOptions?.outDir || __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(process.cwd(), 'dist');
        let configPath = tsConfig.compilerOptions?.paths?.['@payload-config']?.[0];
        if (configPath) {
            configPath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(rootConfigDir, configPath);
        }
        return {
            configPath,
            outPath,
            rootPath: rootConfigDir,
            srcPath,
            tsConfigPath: tsConfigResult.path
        };
    } catch (error) {
        console.error(`Error parsing tsconfig.json: ${error}`); // Do not throw the error, as we can still continue with the other config path finding methods
        return {
            rootPath: process.cwd()
        };
    }
};
const findConfig = ()=>{
    // If the developer has specified a config path,
    // format it if relative and use it directly if absolute
    if (process.env.PAYLOAD_CONFIG_PATH) {
        if (__TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].isAbsolute(process.env.PAYLOAD_CONFIG_PATH)) {
            return process.env.PAYLOAD_CONFIG_PATH;
        }
        return __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(process.cwd(), process.env.PAYLOAD_CONFIG_PATH);
    }
    const { configPath, outPath, rootPath, srcPath } = getTSConfigPaths();
    // if configPath is absolute file, not folder, return it
    if (configPath && (__TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].extname(configPath) === '.js' || __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].extname(configPath) === '.ts')) {
        return configPath;
    }
    const searchPaths = ("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : [
        configPath,
        srcPath,
        rootPath
    ];
    for (const searchPath of searchPaths){
        if (!searchPath) {
            continue;
        }
        const configPath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$findUp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findUpSync"])({
            dir: searchPath,
            fileNames: payloadConfigFileNames
        });
        if (configPath) {
            return configPath;
        }
    }
    // If no config file is found in the directories defined by tsconfig.json,
    // try searching in the 'src' and 'dist' directory as a last resort, as they are most commonly used
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    else {
        const srcConfigPath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$findUp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findUpSync"])({
            dir: __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(process.cwd(), 'src'),
            fileNames: payloadConfigFileNames
        });
        if (srcConfigPath) {
            return srcConfigPath;
        }
    }
    throw new Error('Error: cannot find Payload config. Please create a configuration file located at the root of your current working directory called "payload.config.js" or "payload.config.ts".');
}; //# sourceMappingURL=find.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "readMigrationFiles",
    ()=>readMigrationFiles
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$dynamicImport$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/dynamicImport.js [app-route] (ecmascript)");
;
;
;
const readMigrationFiles = async ({ payload })=>{
    if (!__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(payload.db.migrationDir)) {
        payload.logger.error({
            msg: `No migration directory found at ${payload.db.migrationDir}`
        });
        return [];
    }
    payload.logger.info({
        msg: `Reading migration files from ${payload.db.migrationDir}`
    });
    const files = __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].readdirSync(payload.db.migrationDir).sort().filter((f)=>{
        return (f.endsWith('.ts') || f.endsWith('.js')) && f !== 'index.js' && f !== 'index.ts';
    }).map((file)=>{
        return __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(payload.db.migrationDir, file);
    });
    return Promise.all(files.map(async (filePath)=>{
        const migrationModule = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$dynamicImport$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["dynamicImport"])(filePath);
        const migration = 'default' in migrationModule ? migrationModule.default : migrationModule;
        const result = {
            name: __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].basename(filePath).split('.')[0],
            down: migration.down,
            up: migration.up
        };
        return result;
    }));
}; //# sourceMappingURL=readMigrationFiles.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Gets all existing migrations from the database, excluding the dev migration
 */ __turbopack_context__.s([
    "getMigrations",
    ()=>getMigrations
]);
async function getMigrations({ payload }) {
    const migrationQuery = await payload.find({
        collection: 'payload-migrations',
        limit: 0,
        sort: [
            '-batch',
            '-name'
        ],
        where: {
            batch: {
                not_equals: -1
            }
        }
    });
    const existingMigrations = migrationQuery.docs;
    // Get the highest batch number from existing migrations
    const latestBatch = Number(existingMigrations?.[0]?.batch) || 0;
    return {
        existingMigrations,
        latestBatch
    };
} //# sourceMappingURL=getMigrations.js.map
}),
"[project]/node_modules/payload/dist/versions/buildVersionCompoundIndexes.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "buildVersionCompoundIndexes",
    ()=>buildVersionCompoundIndexes
]);
const buildVersionCompoundIndexes = ({ indexes })=>{
    return indexes.map((each)=>({
            fields: each.fields.map(({ field, localizedPath, path, pathHasLocalized })=>({
                    field,
                    localizedPath: `version.${localizedPath}`,
                    path: `version.${path}`,
                    pathHasLocalized
                })),
            unique: false
        }));
}; //# sourceMappingURL=buildVersionCompoundIndexes.js.map
}),
"[project]/node_modules/payload/dist/database/defaultUpdateJobs.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "defaultUpdateJobs",
    ()=>defaultUpdateJobs
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/queues/config/collection.js [app-route] (ecmascript)");
;
const defaultUpdateJobs = async function updateMany({ id, data, limit, req, returning, where }) {
    const updatedJobs = [];
    const jobsToUpdate = (id ? [
        await this.findOne({
            collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jobsCollectionSlug"],
            req,
            where: {
                id: {
                    equals: id
                }
            }
        })
    ] : (await this.find({
        collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jobsCollectionSlug"],
        limit,
        pagination: false,
        req,
        where
    })).docs).filter(Boolean);
    if (!jobsToUpdate) {
        return null;
    }
    for (const job of jobsToUpdate){
        const updateData = {
            ...job,
            ...data
        };
        const updatedJob = await this.updateOne({
            id: job.id,
            collection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$queues$2f$config$2f$collection$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jobsCollectionSlug"],
            data: updateData,
            req,
            returning
        });
        updatedJobs.push(updatedJob);
    }
    return updatedJobs;
}; //# sourceMappingURL=defaultUpdateJobs.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrationTemplate.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrationTemplate",
    ()=>migrationTemplate
]);
const migrationTemplate = `
import {
  MigrateUpArgs,
  MigrateDownArgs,
} from "@payloadcms/db-mongodb";

export async function up({ payload, req }: MigrateUpArgs): Promise<void> {
  // Migration code
};

export async function down({ payload, req }: MigrateDownArgs): Promise<void> {
  // Migration code
};
`; //# sourceMappingURL=migrationTemplate.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/createMigration.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createMigration",
    ()=>createMigration
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$writeMigrationIndex$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/writeMigrationIndex.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrationTemplate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrationTemplate.js [app-route] (ecmascript)");
;
;
;
const createMigration = function createMigration({ migrationName, payload }) {
    const dir = payload.db.migrationDir;
    if (!__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(dir)) {
        __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].mkdirSync(dir);
    }
    const [yyymmdd, hhmmss] = new Date().toISOString().split('T');
    const formattedDate = yyymmdd.replace(/\D/g, '');
    const formattedTime = hhmmss.split('.')[0].replace(/\D/g, '');
    const timestamp = `${formattedDate}_${formattedTime}`;
    const formattedName = migrationName.replace(/\W/g, '_');
    const fileName = `${timestamp}_${formattedName}.ts`;
    const filePath = `${dir}/${fileName}`;
    __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].writeFileSync(filePath, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrationTemplate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrationTemplate"]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$writeMigrationIndex$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["writeMigrationIndex"])({
        migrationsDir: payload.db.migrationDir
    });
    payload.logger.info({
        msg: `Migration created at ${filePath}`
    });
}; //# sourceMappingURL=createMigration.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrate.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrate",
    ()=>migrate
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/createLocalReq.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)");
;
;
;
;
;
;
const migrate = async function migrate(args) {
    const { payload } = this;
    const migrationFiles = args?.migrations || await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readMigrationFiles"])({
        payload
    });
    const { existingMigrations, latestBatch } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getMigrations"])({
        payload
    });
    const newBatch = latestBatch + 1;
    // Execute 'up' function for each migration sequentially
    for (const migration of migrationFiles){
        const existingMigration = existingMigrations.find((existing)=>existing.name === migration.name);
        // Run migration if not found in database
        if (existingMigration) {
            continue;
        }
        const start = Date.now();
        const req = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLocalReq"])({}, payload);
        payload.logger.info({
            msg: `Migrating: ${migration.name}`
        });
        try {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
            const session = payload.db.sessions?.[await req.transactionID];
            await migration.up({
                payload,
                req,
                session
            });
            payload.logger.info({
                msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)`
            });
            await payload.create({
                collection: 'payload-migrations',
                data: {
                    name: migration.name,
                    batch: newBatch
                },
                req
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
        } catch (err) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
            payload.logger.error({
                err,
                msg: `Error running migration ${migration.name}`
            });
            throw err;
        }
    }
}; //# sourceMappingURL=migrate.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrateDown.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrateDown",
    ()=>migrateDown
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/createLocalReq.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)");
;
;
;
;
;
;
async function migrateDown() {
    const { payload } = this;
    const migrationFiles = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readMigrationFiles"])({
        payload
    });
    const { existingMigrations, latestBatch } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getMigrations"])({
        payload
    });
    if (!existingMigrations?.length) {
        payload.logger.info({
            msg: 'No migrations to rollback.'
        });
        return;
    }
    payload.logger.info({
        msg: `Rolling back batch ${latestBatch} consisting of ${existingMigrations.length} migration(s).`
    });
    const latestBatchMigrations = existingMigrations.filter(({ batch })=>batch === latestBatch);
    for (const migration of latestBatchMigrations){
        const migrationFile = migrationFiles.find((m)=>m.name === migration.name);
        if (!migrationFile) {
            throw new Error(`Migration ${migration.name} not found locally.`);
        }
        const start = Date.now();
        const req = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLocalReq"])({}, payload);
        try {
            payload.logger.info({
                msg: `Migrating down: ${migrationFile.name}`
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
            const session = payload.db.sessions?.[await req.transactionID];
            await migrationFile.down({
                payload,
                req,
                session
            });
            payload.logger.info({
                msg: `Migrated down:  ${migrationFile.name} (${Date.now() - start}ms)`
            });
            // Waiting for implementation here
            await payload.delete({
                id: migration.id,
                collection: 'payload-migrations',
                req
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
        } catch (err) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
            payload.logger.error({
                err,
                msg: `Error running migration ${migrationFile.name}`
            });
            process.exit(1);
        }
    }
} //# sourceMappingURL=migrateDown.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrateRefresh.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrateRefresh",
    ()=>migrateRefresh
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/createLocalReq.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)");
;
;
;
;
;
;
async function migrateRefresh() {
    const { payload } = this;
    const migrationFiles = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readMigrationFiles"])({
        payload
    });
    const { existingMigrations } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getMigrations"])({
        payload
    });
    const req = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLocalReq"])({}, payload);
    if (existingMigrations?.length) {
        payload.logger.info({
            msg: `Rolling back all ${existingMigrations.length} migration(s).`
        });
        // Reverse order of migrations to rollback
        existingMigrations.reverse();
        for (const migration of existingMigrations){
            try {
                const migrationFile = migrationFiles.find((m)=>m.name === migration.name);
                if (!migrationFile) {
                    throw new Error(`Migration ${migration.name} not found locally.`);
                }
                payload.logger.info({
                    msg: `Migrating down: ${migration.name}`
                });
                const start = Date.now();
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
                const session = payload.db.sessions?.[await req.transactionID];
                await migrationFile.down({
                    payload,
                    req,
                    session
                });
                payload.logger.info({
                    msg: `Migrated down:  ${migration.name} (${Date.now() - start}ms)`
                });
                await payload.delete({
                    collection: 'payload-migrations',
                    req,
                    where: {
                        name: {
                            equals: migration.name
                        }
                    }
                });
            } catch (err) {
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
                let msg = `Error running migration ${migration.name}. Rolling back.`;
                if (err instanceof Error) {
                    msg += ` ${err.message}`;
                }
                payload.logger.error({
                    err,
                    msg
                });
                process.exit(1);
            }
        }
    } else {
        payload.logger.info({
            msg: 'No migrations to rollback.'
        });
    }
    // Run all migrate up
    for (const migration of migrationFiles){
        payload.logger.info({
            msg: `Migrating: ${migration.name}`
        });
        try {
            const start = Date.now();
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
            await migration.up({
                payload,
                req
            });
            await payload.create({
                collection: 'payload-migrations',
                data: {
                    name: migration.name,
                    executed: true
                },
                req
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
            payload.logger.info({
                msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)`
            });
        } catch (err) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
            let msg = `Error running migration ${migration.name}. Rolling back.`;
            if (err instanceof Error) {
                msg += ` ${err.message}`;
            }
            payload.logger.error({
                err,
                msg
            });
            process.exit(1);
        }
    }
} //# sourceMappingURL=migrateRefresh.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrateReset.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrateReset",
    ()=>migrateReset
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/commitTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/createLocalReq.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/initTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/utilities/killTransaction.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)");
;
;
;
;
;
;
async function migrateReset() {
    const { payload } = this;
    const migrationFiles = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readMigrationFiles"])({
        payload
    });
    const { existingMigrations } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getMigrations"])({
        payload
    });
    if (!existingMigrations?.length) {
        payload.logger.info({
            msg: 'No migrations to reset.'
        });
        return;
    }
    const req = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$createLocalReq$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLocalReq"])({}, payload);
    migrationFiles.reverse();
    // Rollback all migrations in order
    for (const migration of migrationFiles){
        // Create or update migration in database
        const existingMigration = existingMigrations.find((existing)=>existing.name === migration.name);
        if (existingMigration) {
            payload.logger.info({
                msg: `Migrating down: ${migration.name}`
            });
            try {
                const start = Date.now();
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$initTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initTransaction"])(req);
                const session = payload.db.sessions?.[await req.transactionID];
                await migration.down({
                    payload,
                    req,
                    session
                });
                await payload.delete({
                    collection: 'payload-migrations',
                    req,
                    where: {
                        id: {
                            equals: existingMigration.id
                        }
                    }
                });
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$commitTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["commitTransaction"])(req);
                payload.logger.info({
                    msg: `Migrated down:  ${migration.name} (${Date.now() - start}ms)`
                });
            } catch (err) {
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$killTransaction$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["killTransaction"])(req);
                payload.logger.error({
                    err,
                    msg: `Error running migration ${migration.name}`
                });
                throw err;
            }
        }
    }
    // Delete dev migration
    try {
        await payload.delete({
            collection: 'payload-migrations',
            where: {
                batch: {
                    equals: -1
                }
            }
        });
    } catch (err) {
        payload.logger.error({
            err,
            msg: 'Error deleting dev migration'
        });
    }
} //# sourceMappingURL=migrateReset.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/migrateStatus.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "migrateStatus",
    ()=>migrateStatus
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$console$2d$table$2d$printer$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/console-table-printer/dist/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/getMigrations.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/readMigrationFiles.js [app-route] (ecmascript)");
;
;
;
async function migrateStatus() {
    const { payload } = this;
    const migrationFiles = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$readMigrationFiles$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readMigrationFiles"])({
        payload
    });
    payload.logger.debug({
        msg: `Found ${migrationFiles.length} migration files.`
    });
    const { existingMigrations } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$getMigrations$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getMigrations"])({
        payload
    });
    if (!migrationFiles.length) {
        payload.logger.info({
            msg: 'No migrations found.'
        });
        return;
    }
    // Compare migration files to existing migrations
    const statuses = migrationFiles.map((migration)=>{
        const existingMigration = existingMigrations.find((m)=>m.name === migration.name);
        return {
            Name: migration.name,
            Batch: existingMigration?.batch,
            Ran: existingMigration ? 'Yes' : 'No'
        };
    });
    const p = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$console$2d$table$2d$printer$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Table"]();
    statuses.forEach((s)=>{
        p.addRow(s, {
            color: s.Ran === 'Yes' ? 'green' : 'red'
        });
    });
    p.printTable();
} //# sourceMappingURL=migrateStatus.js.map
}),
"[project]/node_modules/payload/dist/database/createDatabaseAdapter.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createDatabaseAdapter",
    ()=>createDatabaseAdapter
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$defaultUpdateJobs$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/defaultUpdateJobs.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$createMigration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/createMigration.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrate.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateDown$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrateDown.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateRefresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrateRefresh.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateReset$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrateReset.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateStatus$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/payload/dist/database/migrations/migrateStatus.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
const beginTransaction = ()=>Promise.resolve(null);
// @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
const rollbackTransaction = ()=>Promise.resolve(null);
// @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
const commitTransaction = ()=>Promise.resolve(null);
function createDatabaseAdapter(args) {
    return {
        // Default 'null' transaction functions
        // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
        beginTransaction,
        // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
        commitTransaction,
        createMigration: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$createMigration$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createMigration"],
        migrate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrate"],
        migrateDown: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateDown$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrateDown"],
        migrateFresh: ()=>Promise.resolve(null),
        migrateRefresh: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateRefresh$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrateRefresh"],
        migrateReset: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateReset$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrateReset"],
        migrateStatus: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$migrations$2f$migrateStatus$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["migrateStatus"],
        // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve
        rollbackTransaction,
        updateJobs: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$payload$2f$dist$2f$database$2f$defaultUpdateJobs$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["defaultUpdateJobs"],
        ...args,
        // Ensure migrationDir is set
        migrationDir: args.migrationDir || 'migrations',
        // Set default for bulkOperationsSingleTransaction if not provided
        bulkOperationsSingleTransaction: args.bulkOperationsSingleTransaction ?? false
    };
} //# sourceMappingURL=createDatabaseAdapter.js.map
}),
"[project]/node_modules/payload/dist/database/defaultBeginTransaction.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Default implementation of `beginTransaction` that returns a resolved promise of null
 */ __turbopack_context__.s([
    "defaultBeginTransaction",
    ()=>defaultBeginTransaction
]);
function defaultBeginTransaction() {
    const promiseSingleton = Promise.resolve(null);
    return ()=>promiseSingleton;
} //# sourceMappingURL=defaultBeginTransaction.js.map
}),
"[project]/node_modules/payload/dist/database/migrations/findMigrationDir.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "findMigrationDir",
    ()=>findMigrationDir
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
;
;
const findMigrationDir = (migrationDir)=>{
    const cwd = process.cwd();
    const srcMigrationsDir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(cwd, 'src/migrations');
    const distMigrationsDir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(cwd, 'dist/migrations');
    const relativeMigrations = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(cwd, 'migrations');
    // Use arg if provided
    if (migrationDir) {
        return migrationDir;
    }
    // Check other common locations
    if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(srcMigrationsDir)) {
        return srcMigrationsDir;
    }
    if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(distMigrationsDir)) {
        return distMigrationsDir;
    }
    if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(relativeMigrations)) {
        return relativeMigrations;
    }
    if (__TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["default"].existsSync(__TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(cwd, 'src'))) {
        return srcMigrationsDir;
    }
    return relativeMigrations;
}; //# sourceMappingURL=findMigrationDir.js.map
}),
];

//# sourceMappingURL=node_modules_payload_dist_3d7c61c9._.js.map