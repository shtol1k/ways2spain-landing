{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/src/collections/Users.ts"],"sourcesContent":["import { CollectionConfig } from 'payload'\n\nexport const Users: CollectionConfig = {\n  slug: 'users',\n  auth: true,\n  admin: {\n    useAsTitle: 'name',\n    defaultColumns: ['name', 'email'],\n  },\n  access: {\n    read: ({ req }) => {\n      // Users can read themselves, admins can read everyone\n      const user = req.user\n      if (!user) return false\n      if (user.role === 'admin') return true\n      return {\n        id: {\n          equals: user.id,\n        },\n      }\n    },\n    create: () => false, // Only admins can create users via admin panel\n    update: ({ req }) => {\n      const user = req.user\n      if (!user) return false\n      // Admins can update any user\n      // Managers can only update themselves\n      return user.role === 'admin' || user.id === req.user.id\n    },\n    delete: ({ req }) => {\n      // Only admins can delete users\n      const user = req.user\n      if (!user) return false\n      return user.role === 'admin'\n    },\n  },\n  fields: [\n    {\n      name: 'name',\n      type: 'text',\n      required: true,\n    },\n    {\n      name: 'role',\n      type: 'select',\n      required: true,\n      defaultValue: 'manager',\n      options: [\n        {\n          label: 'Admin',\n          value: 'admin',\n        },\n        {\n          label: 'Manager',\n          value: 'manager',\n        },\n      ],\n      admin: {\n        description: 'Admin: Full access including settings. Manager: Content management only.',\n      },\n    },\n  ],\n}\n"],"names":[],"mappings":";;;;AAEO,MAAM,QAA0B;IACrC,MAAM;IACN,MAAM;IACN,OAAO;QACL,YAAY;QACZ,gBAAgB;YAAC;YAAQ;SAAQ;IACnC;IACA,QAAQ;QACN,MAAM,CAAC,EAAE,GAAG,EAAE;YACZ,sDAAsD;YACtD,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,IAAI,KAAK,IAAI,KAAK,SAAS,OAAO;YAClC,OAAO;gBACL,IAAI;oBACF,QAAQ,KAAK,EAAE;gBACjB;YACF;QACF;QACA,QAAQ,IAAM;QACd,QAAQ,CAAC,EAAE,GAAG,EAAE;YACd,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,6BAA6B;YAC7B,sCAAsC;YACtC,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,EAAE,KAAK,IAAI,IAAI,CAAC,EAAE;QACzD;QACA,QAAQ,CAAC,EAAE,GAAG,EAAE;YACd,+BAA+B;YAC/B,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,KAAK,IAAI,KAAK;QACvB;IACF;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,UAAU;QACZ;QACA;YACE,MAAM;YACN,MAAM;YACN,UAAU;YACV,cAAc;YACd,SAAS;gBACP;oBACE,OAAO;oBACP,OAAO;gBACT;gBACA;oBACE,OAAO;oBACP,OAAO;gBACT;aACD;YACD,OAAO;gBACL,aAAa;YACf;QACF;KACD;AACH"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/src/collections/Testimonials.ts"],"sourcesContent":["import { CollectionConfig } from 'payload'\n\nexport const Testimonials: CollectionConfig = {\n  slug: 'testimonials',\n  admin: {\n    useAsTitle: 'name',\n    defaultColumns: ['name', 'title', 'date'],\n  },\n  access: {\n    read: () => true, // Public read\n    create: ({ req }) => {\n      const user = req.user\n      if (!user) return false\n      return user.role === 'admin' || user.role === 'manager'\n    },\n    update: ({ req }) => {\n      const user = req.user\n      if (!user) return false\n      return user.role === 'admin' || user.role === 'manager'\n    },\n    delete: ({ req }) => {\n      // Only admins can delete testimonials\n      const user = req.user\n      if (!user) return false\n      return user.role === 'admin'\n    },\n  },\n  fields: [\n    {\n      name: 'name',\n      type: 'text',\n      required: true,\n      localized: true,\n    },\n    {\n      name: 'title',\n      type: 'text',\n      required: true,\n      localized: true,\n    },\n    {\n      name: 'testimonial',\n      type: 'textarea',\n      required: true,\n      localized: true,\n      admin: {\n        description: 'Client testimonial text',\n      },\n    },\n    {\n      name: 'date',\n      type: 'date',\n      required: true,\n      admin: {\n        date: {\n          displayFormat: 'dd.MM.yyyy',\n        },\n      },\n    },\n    {\n      name: 'photo',\n      type: 'relationship',\n      relationTo: 'media',\n      admin: {\n        description: 'Client photo (optional)',\n      },\n    },\n    {\n      name: 'socialLinks',\n      type: 'group',\n      fields: [\n        {\n          name: 'linkedin',\n          type: 'text',\n          admin: {\n            description: 'LinkedIn profile URL',\n          },\n        },\n        {\n          name: 'facebook',\n          type: 'text',\n          admin: {\n            description: 'Facebook profile URL',\n          },\n        },\n        {\n          name: 'twitter',\n          type: 'text',\n          admin: {\n            description: 'Twitter/X profile URL',\n          },\n        },\n        {\n          name: 'instagram',\n          type: 'text',\n          admin: {\n            description: 'Instagram profile URL',\n          },\n        },\n        {\n          name: 'telegram',\n          type: 'text',\n          admin: {\n            description: 'Telegram profile URL',\n          },\n        },\n      ],\n    },\n    {\n      name: 'published',\n      type: 'checkbox',\n      defaultValue: true,\n      admin: {\n        description: 'Show on website',\n      },\n    },\n  ],\n}\n"],"names":[],"mappings":";;;;AAEO,MAAM,eAAiC;IAC5C,MAAM;IACN,OAAO;QACL,YAAY;QACZ,gBAAgB;YAAC;YAAQ;YAAS;SAAO;IAC3C;IACA,QAAQ;QACN,MAAM,IAAM;QACZ,QAAQ,CAAC,EAAE,GAAG,EAAE;YACd,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,KAAK;QAChD;QACA,QAAQ,CAAC,EAAE,GAAG,EAAE;YACd,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,KAAK;QAChD;QACA,QAAQ,CAAC,EAAE,GAAG,EAAE;YACd,sCAAsC;YACtC,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,KAAK,IAAI,KAAK;QACvB;IACF;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,UAAU;YACV,WAAW;QACb;QACA;YACE,MAAM;YACN,MAAM;YACN,UAAU;YACV,WAAW;QACb;QACA;YACE,MAAM;YACN,MAAM;YACN,UAAU;YACV,WAAW;YACX,OAAO;gBACL,aAAa;YACf;QACF;QACA;YACE,MAAM;YACN,MAAM;YACN,UAAU;YACV,OAAO;gBACL,MAAM;oBACJ,eAAe;gBACjB;YACF;QACF;QACA;YACE,MAAM;YACN,MAAM;YACN,YAAY;YACZ,OAAO;gBACL,aAAa;YACf;QACF;QACA;YACE,MAAM;YACN,MAAM;YACN,QAAQ;gBACN;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,aAAa;oBACf;gBACF;gBACA;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,aAAa;oBACf;gBACF;gBACA;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,aAAa;oBACf;gBACF;gBACA;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,aAAa;oBACf;gBACF;gBACA;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,aAAa;oBACf;gBACF;aACD;QACH;QACA;YACE,MAAM;YACN,MAAM;YACN,cAAc;YACd,OAAO;gBACL,aAAa;YACf;QACF;KACD;AACH"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/atamanov/Documents/Projects/ways2spain-landing/src/app/admin/%5B%5B...slug%5D%5D/route.ts"],"sourcesContent":["import { buildConfig } from 'payload'\nimport { postgresAdapter } from '@payloadcms/db-postgres'\nimport { Users } from '@/collections/Users'\nimport { Testimonials } from '@/collections/Testimonials'\nimport path from 'path'\n\n// Create Payload config inline for the admin route\nconst config = buildConfig({\n  database: postgresAdapter({\n    pool: {\n      connectionString: process.env.DATABASE_URL || 'postgresql://atamanov@localhost:5432/w2s_local',\n    },\n  }),\n  admin: {\n    user: Users.slug,\n  },\n  collections: [\n    Users,\n    Testimonials,\n  ],\n  serverURL: process.env.PAYLOAD_PUBLIC_SERVER_URL || 'http://localhost:3000',\n  cors: ['http://localhost:3000'],\n  csrf: ['http://localhost:3000'],\n  secret: process.env.PAYLOAD_SECRET || 'dev-secret-change-this-in-production',\n  typescript: {\n    outputFile: path.resolve('./src/types/payload.ts'),\n  },\n})\n\nlet payloadInstance: any = null\n\nasync function getPayload() {\n  if (!payloadInstance) {\n    payloadInstance = await config\n  }\n  return payloadInstance\n}\n\nexport async function GET(req: Request) {\n  const payload = await getPayload()\n  // @ts-ignore\n  return payload.handler(req)\n}\n\nexport async function POST(req: Request) {\n  const payload = await getPayload()\n  // @ts-ignore\n  return payload.handler(req)\n}\n\nexport async function PUT(req: Request) {\n  const payload = await getPayload()\n  // @ts-ignore\n  return payload.handler(req)\n}\n\nexport async function PATCH(req: Request) {\n  const payload = await getPayload()\n  // @ts-ignore\n  return payload.handler(req)\n}\n\nexport async function DELETE(req: Request) {\n  const payload = await getPayload()\n  // @ts-ignore\n  return payload.handler(req)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA,mDAAmD;AACnD,MAAM,SAAS,IAAA,mKAAW,EAAC;IACzB,UAAU,IAAA,oMAAe,EAAC;QACxB,MAAM;YACJ,kBAAkB,QAAQ,GAAG,CAAC,YAAY,IAAI;QAChD;IACF;IACA,OAAO;QACL,MAAM,sIAAK,CAAC,IAAI;IAClB;IACA,aAAa;QACX,sIAAK;QACL,oJAAY;KACb;IACD,WAAW,QAAQ,GAAG,CAAC,yBAAyB,IAAI;IACpD,MAAM;QAAC;KAAwB;IAC/B,MAAM;QAAC;KAAwB;IAC/B,QAAQ,QAAQ,GAAG,CAAC,cAAc,IAAI;IACtC,YAAY;QACV,YAAY,4GAAI,CAAC,OAAO,CAAC;IAC3B;AACF;AAEA,IAAI,kBAAuB;AAE3B,eAAe;IACb,IAAI,CAAC,iBAAiB;QACpB,kBAAkB,MAAM;IAC1B;IACA,OAAO;AACT;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,UAAU,MAAM;IACtB,aAAa;IACb,OAAO,QAAQ,OAAO,CAAC;AACzB;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,UAAU,MAAM;IACtB,aAAa;IACb,OAAO,QAAQ,OAAO,CAAC;AACzB;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,UAAU,MAAM;IACtB,aAAa;IACb,OAAO,QAAQ,OAAO,CAAC;AACzB;AAEO,eAAe,MAAM,GAAY;IACtC,MAAM,UAAU,MAAM;IACtB,aAAa;IACb,OAAO,QAAQ,OAAO,CAAC;AACzB;AAEO,eAAe,OAAO,GAAY;IACvC,MAAM,UAAU,MAAM;IACtB,aAAa;IACb,OAAO,QAAQ,OAAO,CAAC;AACzB"}}]
}